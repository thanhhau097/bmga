
/*
  It's a trap!
 */
var stderrTrap, stdoutTrap, _trap;

_trap = function(stream) {
  var old;
  old = stream.write;
  return function() {
    var capture;
    if (!(arguments && typeof arguments[0] === 'function')) {
      return void 0;
    }
    capture = '';
    stream.write = function(chunk) {
      return capture += chunk.toString();
    };
    arguments[0].call(null);
    stream.write = old;
    return capture;
  };
};

stdoutTrap = _trap(process.stdout);

stderrTrap = _trap(process.stderr);

module.exports = {
  stdoutTrap: stdoutTrap,
  stderrTrap: stderrTrap
};
