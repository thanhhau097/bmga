
###
  It's a trap!
###

# Trap setter
_trap = (stream) ->
  old = stream.write
  ->
    return undefined unless arguments and typeof arguments[0] is 'function'
    capture = ''
    stream.write = (chunk) -> capture += chunk.toString()
    arguments[0].call null
    stream.write = old
    capture

# Stdout definitions
stdoutTrap = _trap process.stdout
stderrTrap = _trap process.stderr

# Export
module.exports = { stdoutTrap, stderrTrap }

