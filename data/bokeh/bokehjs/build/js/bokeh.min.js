window.Bokeh=Bokeh=function(){var t=void 0;return function e(t,r,n){function o(i){if(!r[i]){if(!t[i]){var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var a=r[i]={exports:{}},l=function(e){var r=t[i][1][e];return o(r?r:e)};l.modules=o.modules,t[i][0].call(a.exports,l,a,a.exports,e,t,r,n)}return r[i].exports}o.modules=t;var i=o(n[0]);return i.require=o,i}({base:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o={}.hasOwnProperty,i=t("./models/index"),s=t("./core/util/object");r.overrides={},n=s.clone(i),r.Models=function(t){var e,o;if(e=null!=(o=r.overrides[t])?o:n[t],null==e)throw new Error("Model `"+t+"' does not exist. This could be due to a widget or a custom model not being registered before first usage.");return e},r.Models.register=function(t,e){return r.overrides[t]=e},r.Models.unregister=function(t){return delete r.overrides[t]},r.Models.register_models=function(t,e,r){var i,s,a;if(null==e&&(e=!1),null==r&&(r=null),null!=t){a=[];for(s in t)o.call(t,s)&&(i=t[s],e||!n.hasOwnProperty(s)?a.push(n[s]=i):a.push("function"==typeof r?r(s):void 0));return a}},r.Models.registered_names=function(){return Object.keys(n)},r.index={}},{"./core/util/object":"core/util/object","./models/index":"models/index"}],client:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,i,s,a=t("es6-promise"),l=t("./core/logging"),u=t("./core/util/string"),c=t("./core/util/object"),_=t("./document");r.DEFAULT_SERVER_WEBSOCKET_URL="ws://localhost:5006/ws",r.DEFAULT_SESSION_ID="default",i=function(){function t(t,e,r){this.header=t,this.metadata=e,this.content=r,this.buffers=[]}return t.assemble=function(e,r,n){var o,i,s;return i=JSON.parse(e),s=JSON.parse(r),o=JSON.parse(n),new t(i,s,o)},t.create_header=function(t,e){var r;return r={msgid:u.uniqueId(),msgtype:t},c.extend(r,e)},t.create=function(e,r,n){var o;return null==n&&(n={}),o=t.create_header(e,r),new t(o,{},n)},t.prototype.send=function(t){var e,r,n;return r=JSON.stringify(this.header),n=JSON.stringify(this.metadata),e=JSON.stringify(this.content),t.send(r),t.send(n),t.send(e)},t.prototype.complete=function(){return null!=this.header&&null!=this.metadata&&null!=this.content&&(!("num_buffers"in this.header)||this.buffers.length===this.header.num_buffers)},t.prototype.add_buffer=function(t){return this.buffers.push(t)},t.prototype._header_field=function(t){return t in this.header?this.header[t]:null},t.prototype.msgid=function(){return this._header_field("msgid")},t.prototype.msgtype=function(){return this._header_field("msgtype")},t.prototype.sessid=function(){return this._header_field("sessid")},t.prototype.reqid=function(){return this._header_field("reqid")},t.prototype.problem=function(){return"msgid"in this.header?"msgtype"in this.header?null:"No msgtype in header":"No msgid in header"},t}(),s={"PATCH-DOC":function(t,e){return t._for_session(function(t){return t._handle_patch(e)})},OK:function(t,e){return l.logger.trace("Unhandled OK reply to "+e.reqid())},ERROR:function(t,e){return l.logger.error("Unhandled ERROR reply to "+e.reqid()+": "+e.content.text)}},n=function(){function t(e,n,o,i,s){this.url=e,this.id=n,this.args_string=o,this._on_have_session_hook=i,this._on_closed_permanently_hook=s,this._number=t._connection_count,t._connection_count=this._number+1,null==this.url&&(this.url=r.DEFAULT_SERVER_WEBSOCKET_URL),null==this.id&&(this.id=r.DEFAULT_SESSION_ID),l.logger.debug("Creating websocket "+this._number+" to '"+this.url+"' session '"+this.id+"'"),this.socket=null,this.closed_permanently=!1,this._fragments=[],this._partial=null,this._current_handler=null,this._pending_ack=null,this._pending_replies={},this.session=null}return t._connection_count=0,t.prototype._for_session=function(t){if(null!==this.session)return t(this.session)},t.prototype.connect=function(){var t,e,r;if(this.closed_permanently)return a.Promise.reject(new Error("Cannot connect() a closed ClientConnection"));if(null!=this.socket)return a.Promise.reject(new Error("Already connected"));this._fragments=[],this._partial=null,this._pending_replies={},this._current_handler=null;try{return r=this.url+"?bokeh-protocol-version=1.0&bokeh-session-id="+this.id,(null!=(e=this.args_string)?e.length:void 0)>0&&(r+="&"+this.args_string),null!=window.MozWebSocket?this.socket=new MozWebSocket(r):this.socket=new WebSocket(r),new a.Promise(function(t){return function(e,r){return t.socket.binaryType="arraybuffer",t.socket.onopen=function(){return t._on_open(e,r)},t.socket.onmessage=function(e){return t._on_message(e)},t.socket.onclose=function(e){return t._on_close(e)},t.socket.onerror=function(){return t._on_error(r)}}}(this))}catch(n){return t=n,l.logger.error("websocket creation failed to url: "+this.url),l.logger.error(" - "+t),a.Promise.reject(t)}},t.prototype.close=function(){if(!this.closed_permanently&&(l.logger.debug("Permanently closing websocket connection "+this._number),this.closed_permanently=!0,null!=this.socket&&this.socket.close(1e3,"close method called on ClientConnection "+this._number),this._for_session(function(t){return t._connection_closed()}),null!=this._on_closed_permanently_hook))return this._on_closed_permanently_hook(),this._on_closed_permanently_hook=null},t.prototype._schedule_reconnect=function(t){var e;return e=function(t){return function(){t.closed_permanently||l.logger.info("Websocket connection "+t._number+" disconnected, will not attempt to reconnect")}}(this),setTimeout(e,t)},t.prototype.send=function(t){if(null===this.socket)throw new Error("not connected so cannot send "+t);return t.send(this.socket)},t.prototype.send_event=function(t){var e;return e=i.create("EVENT",{},JSON.stringify(t)),this.send(e)},t.prototype.send_with_reply=function(t){var e;return e=new a.Promise(function(e){return function(r,n){return e._pending_replies[t.msgid()]=[r,n],e.send(t)}}(this)),e.then(function(t){if("ERROR"===t.msgtype())throw new Error("Error reply "+t.content.text);return t},function(t){throw t})},t.prototype._pull_doc_json=function(){var t,e;return t=i.create("PULL-DOC-REQ",{}),e=this.send_with_reply(t),e.then(function(t){if(!("doc"in t.content))throw new Error("No 'doc' field in PULL-DOC-REPLY");return t.content.doc},function(t){throw t})},t.prototype._repull_session_doc=function(){return null===this.session?l.logger.debug("Pulling session for first time"):l.logger.debug("Repulling session"),this._pull_doc_json().then(function(t){return function(e){var r,n,s;return null!==t.session?(t.session.document.replace_with_json(e),l.logger.debug("Updated existing session with new pulled doc")):t.closed_permanently?l.logger.debug("Got new document after connection was already closed"):(r=_.Document.from_json(e),n=_.Document._compute_patch_since_json(e,r),n.events.length>0&&(l.logger.debug("Sending "+n.events.length+" changes from model construction back to server"),s=i.create("PATCH-DOC",{},n),t.send(s)),t.session=new o(t,r,t.id),l.logger.debug("Created a new session from new pulled doc"),null!=t._on_have_session_hook?(t._on_have_session_hook(t.session),t._on_have_session_hook=null):void 0)}}(this),function(t){throw t})["catch"](function(t){return null!=console.trace&&console.trace(t),l.logger.error("Failed to repull session "+t)})},t.prototype._on_open=function(t,e){return l.logger.info("Websocket connection "+this._number+" is now open"),this._pending_ack=[t,e],this._current_handler=function(t){return function(e){return t._awaiting_ack_handler(e)}}(this)},t.prototype._on_message=function(t){return this._on_message_unchecked(t)},t.prototype._on_message_unchecked=function(t){var e,r;if(null==this._current_handler&&l.logger.error("got a message but haven't set _current_handler"),t.data instanceof ArrayBuffer?null==this._partial||this._partial.complete()?this._close_bad_protocol("Got binary from websocket but we were expecting text"):this._partial.add_buffer(t.data):null!=this._partial?this._close_bad_protocol("Got text from websocket but we were expecting binary"):(this._fragments.push(t.data),3===this._fragments.length&&(this._partial=i.assemble(this._fragments[0],this._fragments[1],this._fragments[2]),this._fragments=[],r=this._partial.problem(),null!==r&&this._close_bad_protocol(r))),null!=this._partial&&this._partial.complete())return e=this._partial,this._partial=null,this._current_handler(e)},t.prototype._on_close=function(t){var e,r;for(l.logger.info("Lost websocket "+this._number+" connection, "+t.code+" ("+t.reason+")"),this.socket=null,null!=this._pending_ack&&(this._pending_ack[1](new Error("Lost websocket connection, "+t.code+" ("+t.reason+")")),this._pending_ack=null),e=function(t){return function(){var e,r,n;r=t._pending_replies;for(n in r)return e=r[n],delete t._pending_replies[n],e;return null}}(this),r=e();null!==r;)r[1]("Disconnected"),r=e();if(!this.closed_permanently)return this._schedule_reconnect(2e3)},t.prototype._on_error=function(t){return l.logger.debug("Websocket error on socket  "+this._number),t(new Error("Could not open websocket"))},t.prototype._close_bad_protocol=function(t){if(l.logger.error("Closing connection: "+t),null!=this.socket)return this.socket.close(1002,t)},t.prototype._awaiting_ack_handler=function(t){return"ACK"!==t.msgtype()?this._close_bad_protocol("First message was not an ACK"):(this._current_handler=function(t){return function(e){return t._steady_state_handler(e)}}(this),this._repull_session_doc(),null!=this._pending_ack?(this._pending_ack[0](this),this._pending_ack=null):void 0)},t.prototype._steady_state_handler=function(t){var e;return t.reqid()in this._pending_replies?(e=this._pending_replies[t.reqid()],delete this._pending_replies[t.reqid()],e[0](t)):t.msgtype()in s?s[t.msgtype()](this,t):l.logger.debug("Doing nothing with message "+t.msgtype())},t}(),o=function(){function t(t,e,r){this._connection=t,this.document=e,this.id=r,this.document_listener=function(t){return function(e){return t._document_changed(e)}}(this),this.document.on_change(this.document_listener),this.event_manager=this.document.event_manager,this.event_manager.session=this}return t.prototype.close=function(){return this._connection.close()},t.prototype.send_event=function(t){return this._connection.send_event(t)},t.prototype._connection_closed=function(){return this.document.remove_on_change(this.document_listener)},t.prototype.request_server_info=function(){var t,e;return t=i.create("SERVER-INFO-REQ",{}),e=this._connection.send_with_reply(t),e.then(function(t){return t.content})},t.prototype.force_roundtrip=function(){return this.request_server_info().then(function(t){})},t.prototype._document_changed=function(t){var e;if(t.setter_id!==this.id&&(!(t instanceof _.ModelChangedEvent)||t.attr in t.model.serializable_attributes()))return e=i.create("PATCH-DOC",{},this.document.create_json_patch([t])),this._connection.send(e)},t.prototype._handle_patch=function(t){return this.document.apply_json_patch(t.content,this.id)},t}(),r.pull_session=function(t,e,r){var o,i,s;return s=null,o=null,i=new a.Promise(function(i,s){return o=new n(t,e,r,function(t){var e;try{return i(t)}catch(r){throw e=r,l.logger.error("Promise handler threw an error, closing session "+error),t.close(),e}},function(){return s(new Error("Connection was closed before we successfully pulled a session"))}),o.connect().then(function(t){},function(t){throw l.logger.error("Failed to connect to Bokeh server "+t),t})}),i.close=function(){return o.close()},i}},{"./core/logging":"core/logging","./core/util/object":"core/util/object","./core/util/string":"core/util/string","./document":"document","es6-promise":"es6-promise"}],"core/bokeh_events":[function(t,e,r){"use strict";function n(t){return function(e){e.prototype.event_name=t,l[t]=e}}function o(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=t.prototype.applicable_models.concat(e);t.prototype.applicable_models=n}Object.defineProperty(r,"__esModule",{value:!0});var i=t("tslib"),s=t("./logging"),a=t("./util/object"),l={};r.register_event_class=n,r.register_with_event=o;var u=function(){function t(t){void 0===t&&(t={}),this.model_id=null,this._options=t,t.model_id&&(this.model_id=t.model_id)}return t.prototype.set_model_id=function(t){return this._options.model_id=t,this.model_id=t,this},t.prototype.is_applicable_to=function(t){return this.applicable_models.some(function(e){return t instanceof e})},t.event_class=function(t){return t.type?l[t.type]:void s.logger.warn("BokehEvent.event_class required events with a string type attribute")},t.prototype.toJSON=function(){return{event_name:this.event_name,event_values:a.clone(this._options)}},t.prototype._customize_event=function(t){return this},t}();r.BokehEvent=u,u.prototype.applicable_models=[];var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e=i.__decorate([n("button_click")],e)}(u);r.ButtonClick=c;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e}(u);r.UIEvent=_;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e=i.__decorate([n("lodstart")],e)}(_);r.LODStart=p;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e=i.__decorate([n("lodend")],e)}(_);r.LODEnd=h;var d=function(t){function e(e){var r=t.call(this,e)||this;return r.sx=e.sx,r.sy=e.sy,r.x=null,r.y=null,r}return i.__extends(e,t),e.from_event=function(t,e){return void 0===e&&(e=null),new this({sx:t.bokeh.sx,sy:t.bokeh.sy,model_id:e})},e.prototype._customize_event=function(t){var e=t.plot_canvas.frame.xscales["default"],r=t.plot_canvas.frame.yscales["default"];return this.x=e.invert(t.plot_canvas.canvas.sx_to_vx(this.sx)),this.y=r.invert(t.plot_canvas.canvas.sy_to_vy(this.sy)),this._options.x=this.x,this._options.y=this.y,this},e}(_);r.PointEvent=d;var f=function(t){function e(e){void 0===e&&(e={});var r=t.call(this,e)||this;return r.delta_x=e.delta_x,r.delta_y=e.delta_y,r}return i.__extends(e,t),e.from_event=function(t,e){return void 0===e&&(e=null),new this({sx:t.bokeh.sx,sy:t.bokeh.sy,delta_x:t.deltaX,delta_y:t.deltaY,direction:t.direction,model_id:e})},e=i.__decorate([n("pan")],e)}(d);r.Pan=f;var m=function(t){function e(e){void 0===e&&(e={});var r=t.call(this,e)||this;return r.scale=e.scale,r}return i.__extends(e,t),e.from_event=function(t,e){return void 0===e&&(e=null),new this({sx:t.bokeh.sx,sy:t.bokeh.sy,scale:t.scale,model_id:e})},e=i.__decorate([n("pinch")],e)}(d);r.Pinch=m;var y=function(t){function e(e){void 0===e&&(e={});var r=t.call(this,e)||this;return r.delta=e.delta,r}return i.__extends(e,t),e.from_event=function(t,e){return void 0===e&&(e=null),new this({sx:t.bokeh.sx,sy:t.bokeh.sy,delta:t.bokeh.delta,model_id:e})},e=i.__decorate([n("wheel")],e)}(d);r.MouseWheel=y;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e=i.__decorate([n("mousemove")],e)}(d);r.MouseMove=g;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e=i.__decorate([n("mouseenter")],e)}(d);r.MouseEnter=v;var b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e=i.__decorate([n("mouseleave")],e)}(d);r.MouseLeave=b;var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e=i.__decorate([n("tap")],e)}(d);r.Tap=w;var x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e=i.__decorate([n("doubletap")],e)}(d);r.DoubleTap=x;var k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e=i.__decorate([n("press")],e)}(d);r.Press=k;var M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e=i.__decorate([n("panstart")],e)}(d);r.PanStart=M;var j=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e=i.__decorate([n("panend")],e)}(d);r.PanEnd=j;var S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e=i.__decorate([n("pinchstart")],e)}(d);r.PinchStart=S;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e=i.__decorate([n("pinchend")],e)}(d);r.PinchEnd=T},{"./logging":"core/logging","./util/object":"core/util/object",tslib:"tslib/tslib"}],"core/build_views":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./util/array"),o=t("./util/object");r.build_views=function(t,e,r,i){var s,a,l,u,c,_,p,h,d,f,m,y,g,v;for(null==i&&(i=[]),m=n.difference(Object.keys(t),function(){var t,r,n;for(n=[],t=0,r=e.length;t<r;t++)p=e[t],n.push(p.id);return n}()),l=0,c=m.length;l<c;l++)h=m[l],t[h].remove(),delete t[h];for(s=[],d=e.filter(function(e){return null==t[e.id]}),a=u=0,_=d.length;u<_;a=++u)p=d[a],g=null!=(f=i[a])?f:p.default_view,v=o.extend({model:p},r),t[p.id]=y=new g(v),s.push(y);return s},r.remove_views=function(t){var e,r,n,i,s;for(i=o.keys(t),s=[],r=0,n=i.length;r<n;r++)e=i[r],t[e].remove(),s.push(delete t[e]);return s}},{"./util/array":"core/util/array","./util/object":"core/util/object"}],"core/dom":[function(t,e,r){"use strict";function n(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return h(t).apply(void 0,[e].concat(r))}function o(t){var e=t.parentNode;null!=e&&e.removeChild(t)}function i(t,e){var r=t.parentNode;null!=r&&r.replaceChild(e,t)}function s(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=t.firstChild,o=0,i=e;o<i.length;o++){var s=i[o];t.insertBefore(s,n)}}function a(t){for(var e;e=t.firstChild;)t.removeChild(e)}function l(t){t.style.display=""}function u(t){t.style.display="none"}function c(t){return{top:t.offsetTop,left:t.offsetLeft}}function _(t){var e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset-document.documentElement.clientTop,left:e.left+window.pageXOffset-document.documentElement.clientLeft}}Object.defineProperty(r,"__esModule",{value:!0});var p=t("./util/types"),h=function(t){return function(e){function r(t){if(t instanceof HTMLElement)i.appendChild(t);else if(p.isString(t))i.appendChild(document.createTextNode(t));else if(null!=t&&t!==!1)throw new Error("expected an HTMLElement, string, false or null, got "+JSON.stringify(t))}void 0===e&&(e={});for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i;if("fragment"===t)i=document.createDocumentFragment();else{i=document.createElement(t);for(var s in e){var a=e[s];if(null!=a&&(!p.isBoolean(a)||a))if("class"===s&&p.isArray(a))for(var l=0,u=a;l<u.length;l++){var c=u[l];null!=c&&i.classList.add(c)}else if("style"===s&&p.isObject(a))for(var _ in a)i.style[_]=a[_];else i.setAttribute(s,a)}}for(var h=0,d=n;h<d.length;h++){var f=d[h];if(p.isArray(f))for(var m=0,y=f;m<y.length;m++){var g=y[m];r(g)}else r(f)}return i}};r.createElement=n,r.div=h("div"),r.span=h("span"),r.link=h("link"),r.style=h("style"),r.a=h("a"),r.p=h("p"),r.pre=h("pre"),r.button=h("button"),r.input=h("input"),r.label=h("label"),r.canvas=h("canvas"),r.ul=h("ul"),r.ol=h("ol"),r.li=h("li"),r.nbsp=document.createTextNode(" "),r.removeElement=o,r.replaceWith=i,r.prepend=s,r.empty=a,r.show=l,r.hide=u,r.position=c,r.offset=_},{"./util/types":"core/util/types"}],"core/dom_view":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./view"),s=t("./dom");r.DOMView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.tagName="div",e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this._has_finished=!1,this.el=this._createElement()},e.prototype.remove=function(){return s.removeElement(this.el),e.__super__.remove.call(this)},e.prototype.layout=function(){},e.prototype.render=function(){},e.prototype.renderTo=function(t,e){return null==e&&(e=!1),e?s.replaceWith(t,this.el):t.appendChild(this.el),this.layout()},e.prototype.has_finished=function(){return this._has_finished},e.prototype.notify_finished=function(){return this.root.notify_finished()},e.getters({solver:function(){return this.is_root?this._solver:this.parent.solver},is_idle:function(){return this.has_finished()}}),e.prototype._createElement=function(){return s.createElement(this.tagName,{id:this.id,"class":this.className})},e}(i.View)},{"./dom":"core/dom","./view":"core/view"}],"core/enums":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AngleUnits=["deg","rad"],r.Dimension=["width","height"],r.Dimensions=["width","height","both"],r.Direction=["clock","anticlock"],r.FontStyle=["normal","italic","bold"],r.LatLon=["lat","lon"],r.LineCap=["butt","round","square"],r.LineJoin=["miter","round","bevel"],r.Location=["above","below","left","right"],r.LegendLocation=["top_left","top_center","top_right","center_left","center","center_right","bottom_left","bottom_center","bottom_right"],r.Orientation=["vertical","horizontal"],r.OutputBackend=["canvas","svg","webgl"],r.RenderLevel=["image","underlay","glyph","annotation","overlay"],r.RenderMode=["canvas","css"],r.Side=["left","right"],r.SpatialUnits=["screen","data"],r.StartEnd=["start","end"],r.TextAlign=["left","right","center"],r.TextBaseline=["top","middle","bottom","alphabetic","hanging","ideographic"],r.DistributionTypes=["uniform","normal"],r.TransformStepModes=["after","before","center"],r.SizingMode=["stretch_both","scale_width","scale_height","scale_both","fixed"],r.PaddingUnits=["percent","absolute"]},{}],"core/has_props":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=[].slice,s=t("./logging"),a=t("./signaling"),l=t("./property_mixins"),u=t("./util/refs"),c=t("./properties"),_=t("./util/string"),p=t("./util/array"),h=t("./util/object"),d=t("./util/types"),f=t("./util/eq");r.HasProps=function(){function t(t,e){var r,n,o,i,s;null==t&&(t={}),null==e&&(e={}),this.document=null,this.destroyed=new a.Signal(this,"destroyed"),this.change=new a.Signal(this,"change"),this.propchange=new a.Signal(this,"propchange"),this.transformchange=new a.Signal(this,"transformchange"),this.attributes={},this.properties={},o=this.props;for(n in o){if(i=o[n],s=i.type,r=i.default_value,null==s)throw new Error("undefined property type for "+this.type+"."+n);this.properties[n]=new s({obj:this,attr:n,default_value:r})}this._set_after_defaults={},null==t.id&&this.setv("id",_.uniqueId(),{silent:!0}),this.setv(t,h.extend({silent:!0},e)),e.defer_initialization||this.finalize(t,e)}return n(t.prototype,a.Signalable),t.getters=function(t){var e,r,n;n=[];for(r in t)e=t[r],n.push(Object.defineProperty(this.prototype,r,{get:e}));return n},t.prototype.props={},t.prototype.mixins=[],t.define=function(t){var e,r,n;n=[];for(e in t)r=t[e],n.push(function(t){return function(e,r){var n,o,i,s,a;if(null!=t.prototype.props[e])throw new Error("attempted to redefine property '"+t.name+"."+e+"'");if(null!=t.prototype[e])throw new Error("attempted to redefine attribute '"+t.name+"."+e+"'");return Object.defineProperty(t.prototype,e,{get:function(){var t;return t=this.getv(e)},set:function(t){return this.setv(e,t),this}},{configurable:!1,enumerable:!0}),a=r[0],n=r[1],o=r[2],s={type:a,default_value:n,internal:null!=o&&o},i=h.clone(t.prototype.props),i[e]=s,t.prototype.props=i}}(this)(e,r));return n},t.internal=function(t){var e,r,n,o;e={},r=function(t){return function(t,r){var n,o;return o=r[0],n=r[1],e[t]=[o,n,!0]}}(this);for(n in t)o=t[n],r(n,o);return this.define(e)},t.mixin=function(){var t,e;return e=1<=arguments.length?i.call(arguments,0):[],this.define(l.create(e)),t=this.prototype.mixins.concat(e),this.prototype.mixins=t},t.mixins=function(t){return this.mixin.apply(this,t)},t.override=function(t,e){var r,n,o;d.isString(t)?(n={},n[r]=e):n=t,o=[];for(r in n)e=n[r],o.push(function(t){return function(e,r){var n,o;if(o=t.prototype.props[e],null==o)throw new Error("attempted to override nonexistent '"+t.name+"."+e+"'");return n=h.clone(t.prototype.props),n[e]=h.extend({},o,{default_value:r}),t.prototype.props=n}}(this)(r,e));return o},t.define({id:[c.Any]}),t.prototype.toString=function(){return this.type+"("+this.id+")"},t.prototype.finalize=function(t,e){var r,n,o;o=this.properties;for(r in o)n=o[r],n.update(),n.spec.transform&&this.connect(n.spec.transform.change,function(){return this.transformchange.emit()});return this.initialize(t,e),this.connect_signals()},t.prototype.initialize=function(t,e){},t.prototype.connect_signals=function(){},t.prototype.disconnect_signals=function(){return a.Signal.disconnectReceiver(this)},t.prototype.destroy=function(){return this.disconnect_signals(),this.destroyed.emit()},t.prototype.clone=function(){return new this.constructor(this.attributes)},t.prototype._setv=function(t,e){var r,n,o,i,s,a,l,u,c;u=e.silent,n=[],o=this._changing,this._changing=!0,i=this.attributes;for(r in t)c=t[r],c=t[r],f.isEqual(i[r],c)||n.push(r),i[r]=c;if(!u)for(n.length&&(this._pending=!0),s=a=0,l=n.length;0<=l?a<l:a>l;s=0<=l?++a:--a)this.properties[n[s]].change.emit(i[n[s]]);if(o)return this;if(!u&&!e.no_change)for(;this._pending;)this._pending=!1,this.change.emit();return this._pending=!1,this._changing=!1,this},t.prototype.setv=function(t,e,r){var n,i,s,a,l;d.isObject(t)||null===t?(n=t,r=e):(n={},n[t]=e),null==r&&(r={});for(t in n)if(o.call(n,t)){if(l=n[t],s=t,null==this.props[s])throw new Error("property "+this.type+"."+s+" wasn't declared");null!=r&&r.defaults||(this._set_after_defaults[t]=!0)}if(!h.isEmpty(n)){i={};for(t in n)e=n[t],i[t]=this.getv(t);if(this._setv(n,r),null==(null!=r?r.silent:void 0)){a=[];for(t in n)e=n[t],a.push(this._tell_document_about_change(t,i[t],this.getv(t),r));return a}}},t.prototype.set=function(t,e,r){return s.logger.warn("HasProps.set('prop_name', value) is deprecated, use HasProps.prop_name = value instead"),this.setv(t,e,r)},t.prototype.get=function(t){return s.logger.warn("HasProps.get('prop_name') is deprecated, use HasProps.prop_name instead"),this.getv(t)},t.prototype.getv=function(t){if(null==this.props[t])throw new Error("property "+this.type+"."+t+" wasn't declared");return this.attributes[t]},t.prototype.ref=function(){return u.create_ref(this)},t.prototype.set_subtype=function(t){return this._subtype=t},t.prototype.attribute_is_serializable=function(t){var e;if(e=this.props[t],null==e)throw new Error(this.type+".attribute_is_serializable('"+t+"'): "+t+" wasn't declared");return!e.internal},t.prototype.serializable_attributes=function(){var t,e,r,n;t={},r=this.attributes;for(e in r)n=r[e],this.attribute_is_serializable(e)&&(t[e]=n);return t},t._value_to_json=function(e,r,n){var i,s,a,l,u,c,_;if(r instanceof t)return r.ref();if(d.isArray(r)){for(l=[],i=s=0,a=r.length;s<a;i=++s)_=r[i],l.push(t._value_to_json(i,_,r));return l}if(d.isObject(r)){u={};for(c in r)o.call(r,c)&&(u[c]=t._value_to_json(c,r[c],r));return u}return r},t.prototype.attributes_as_json=function(e,r){var n,i,s,a;null==e&&(e=!0),null==r&&(r=t._value_to_json),n={},s=this.serializable_attributes();for(i in s)o.call(s,i)&&(a=s[i],e?n[i]=a:i in this._set_after_defaults&&(n[i]=a));return r("attributes",n,this)},t._json_record_references=function(e,r,n,i){var s,a,l,c,_,p,h;if(null==r);else if(u.is_ref(r)){if(!(r.id in n))return _=e.get_model_by_id(r.id),t._value_record_references(_,n,i)}else{if(d.isArray(r)){for(p=[],a=0,c=r.length;a<c;a++)s=r[a],p.push(t._json_record_references(e,s,n,i));return p}if(d.isObject(r)){h=[];for(l in r)o.call(r,l)&&(s=r[l],h.push(t._json_record_references(e,s,n,i)));return h}}},t._value_record_references=function(e,r,n){var i,s,a,l,u,c,_,p,h,f,m;if(null==e);else if(e instanceof t){if(!(e.id in r)&&(r[e.id]=e,n)){for(s=e._immediate_references(),h=[],a=0,c=s.length;a<c;a++)p=s[a],h.push(t._value_record_references(p,r,!0));return h}}else if(e.buffer instanceof ArrayBuffer);else{if(d.isArray(e)){for(f=[],u=0,_=e.length;u<_;u++)i=e[u],f.push(t._value_record_references(i,r,n));return f}if(d.isObject(e)){m=[];for(l in e)o.call(e,l)&&(i=e[l],m.push(t._value_record_references(i,r,n)));return m}}},t.prototype._immediate_references=function(){var e,r,n,o;n={},e=this.serializable_attributes();for(r in e)o=e[r],t._value_record_references(o,n,!1);return h.values(n)},t.prototype.references=function(){var e;return e={},t._value_record_references(this,e,!0),h.values(e)},t.prototype.attach_document=function(t){if(null!==this.document&&this.document!==t)throw new Error("models must be owned by only a single document");if(this.document=t,null!=this._doc_attached)return this._doc_attached()},t.prototype.detach_document=function(){return this.document=null},t.prototype._tell_document_about_change=function(e,r,n,o){var i,s,a,l,u,c,_;if(this.attribute_is_serializable(e)&&null!==this.document){l={},t._value_record_references(n,l,!1),_={},t._value_record_references(r,_,!1),i=!1;for(s in l)if(a=l[s],!(s in _)){i=!0;break}if(!i)for(u in _)if(c=_[u],!(u in l)){i=!0;break}return i&&this.document._invalidate_all_models(),this.document._notify_change(this,e,r,n,o)}},t.prototype.materialize_dataspecs=function(t){var e,r,n,o;e={},o=this.properties;for(r in o)n=o[r],n.dataspec&&(!n.optional||null!==n.spec.value||r in this._set_after_defaults)&&(e["_"+r]=n.array(t),null!=n.spec.field&&n.spec.field in t._shapes&&(e["_"+r+"_shape"]=t._shapes[n.spec.field]),n instanceof c.Distance&&(e["max_"+r]=p.max(e["_"+r])));return e},t}()},{"./logging":"core/logging","./properties":"core/properties","./property_mixins":"core/property_mixins","./signaling":"core/signaling","./util/array":"core/util/array","./util/eq":"core/util/eq","./util/object":"core/util/object","./util/refs":"core/util/refs","./util/string":"core/util/string","./util/types":"core/util/types"}],"core/hittest":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,i,s=t("./util/array"),a=t("./util/object");r.point_in_poly=function(t,e,r,n){var o,i,s,a,l,u,c,_;for(i=!1,l=r[r.length-1],c=n[n.length-1],o=s=0,a=r.length;0<=a?s<a:s>a;o=0<=a?++s:--s)u=r[o],_=n[o],c<e!=_<e&&l+(e-c)/(_-c)*(u-l)<t&&(i=!i),l=u,c=_;return i},o=function(){return null},r.HitTestResult=function(){function t(){this["0d"]={glyph:null,get_view:o,indices:[]},this["1d"]={indices:[]},this["2d"]={indices:{}}}return Object.defineProperty(t.prototype,"_0d",{get:function(){return this["0d"]}}),Object.defineProperty(t.prototype,"_1d",{get:function(){return this["1d"]}}),Object.defineProperty(t.prototype,"_2d",{get:function(){return this["2d"]}}),t.prototype.is_empty=function(){return 0===this._0d.indices.length&&0===this._1d.indices.length},t.prototype.update_through_union=function(t){return this["0d"].indices=s.union(t["0d"].indices,this["0d"].indices),this["0d"].glyph=t["0d"].glyph||this["0d"].glyph,this["1d"].indices=s.union(t["1d"].indices,this["1d"].indices),this["2d"].indices=a.merge(t["2d"].indices,this["2d"].indices)},t}(),r.create_hit_test_result=function(){return new r.HitTestResult},r.create_1d_hit_test_result=function(t){var e,n,o;return o=new r.HitTestResult,o["1d"].indices=function(){var r,o,i,a,l;for(i=s.sortBy(t,function(t){var e,r;return e=t[0],r=t[1]}),l=[],r=0,o=i.length;r<o;r++)a=i[r],n=a[0],e=a[1],l.push(n);return l}(),o},r.validate_bbox_coords=function(t,e){var r,n,o,i,s,a;return o=t[0],i=t[1],s=e[0],a=e[1],o>i&&(r=[i,o],o=r[0],i=r[1]),s>a&&(n=[a,s],s=n[0],a=n[1]),{minX:o,minY:s,maxX:i,maxY:a}},i=function(t){return t*t},r.dist_2_pts=function(t,e,r,n){return i(t-r)+i(e-n)},n=function(t,e,n){var o,i;return o=r.dist_2_pts(e.x,e.y,n.x,n.y),0===o?r.dist_2_pts(t.x,t.y,e.x,e.y):(i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/o,
i<0?r.dist_2_pts(t.x,t.y,e.x,e.y):i>1?r.dist_2_pts(t.x,t.y,n.x,n.y):r.dist_2_pts(t.x,t.y,e.x+i*(n.x-e.x),e.y+i*(n.y-e.y)))},r.dist_to_segment=function(t,e,r){return Math.sqrt(n(t,e,r))},r.check_2_segments_intersect=function(t,e,r,n,o,i,s,a){var l,u,c,_,p,h,d;return c=(a-i)*(r-t)-(s-o)*(n-e),0===c?{hit:!1,x:null,y:null}:(l=e-i,u=t-o,_=(s-o)*l-(a-i)*u,p=(r-t)*l-(n-e)*u,l=_/c,u=p/c,h=t+l*(r-t),d=e+l*(n-e),{hit:l>0&&l<1&&u>0&&u<1,x:h,y:d})}},{"./util/array":"core/util/array","./util/object":"core/util/object"}],"core/layout/layout_canvas":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./solver"),s=t("../../model");r.LayoutCanvas=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="LayoutCanvas",e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this._top=new i.Variable("top "+this.id),this._left=new i.Variable("left "+this.id),this._width=new i.Variable("width "+this.id),this._height=new i.Variable("height "+this.id),this._right=new i.Variable("right "+this.id),this._bottom=new i.Variable("bottom "+this.id)},e.prototype.get_edit_variables=function(){var t;return t=[],t.push({edit_variable:this._top,strength:i.Strength.strong}),t.push({edit_variable:this._left,strength:i.Strength.strong}),t.push({edit_variable:this._width,strength:i.Strength.strong}),t.push({edit_variable:this._height,strength:i.Strength.strong}),t},e.prototype.get_constraints=function(){return[]},e.getters({layout_bbox:function(){return{top:this._top.value,left:this._left.value,width:this._width.value,height:this._height.value,right:this._right.value,bottom:this._bottom.value}}}),e.prototype.dump_layout=function(){return console.log(this.toString(),this.layout_bbox)},e}(s.Model)},{"../../model":"model","./solver":"core/layout/solver"}],"core/layout/side_panel":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,i,s,a,l,u,c,_,p,h,d,f,m,y=function(t,e){function r(){this.constructor=t}for(var n in e)g.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},g={}.hasOwnProperty,v=t("./solver"),b=t("./layout_canvas"),w=t("core/properties"),x=t("core/logging"),k=t("core/util/types");m=Math.PI/2,n="alphabetic",c="top",o="bottom",l="middle",s="hanging",a="left",u="right",i="center",d={above:{parallel:0,normal:-m,horizontal:0,vertical:-m},below:{parallel:0,normal:m,horizontal:0,vertical:m},left:{parallel:-m,normal:0,horizontal:0,vertical:-m},right:{parallel:m,normal:0,horizontal:0,vertical:m}},f={above:{justified:c,parallel:n,normal:l,horizontal:n,vertical:l},below:{justified:o,parallel:s,normal:l,horizontal:s,vertical:l},left:{justified:c,parallel:n,normal:l,horizontal:l,vertical:n},right:{justified:c,parallel:n,normal:l,horizontal:l,vertical:n}},_={above:{justified:i,parallel:i,normal:a,horizontal:i,vertical:a},below:{justified:i,parallel:i,normal:a,horizontal:i,vertical:a},left:{justified:i,parallel:i,normal:u,horizontal:u,vertical:i},right:{justified:i,parallel:i,normal:a,horizontal:a,vertical:i}},p={above:u,below:a,left:u,right:a},h={above:a,below:u,left:u,right:a},r.update_panel_constraints=function(t){var e;if(null==t.model.props.visible||t.model.visible)return e=t.solver,null!=t._size_constraint&&e.has_constraint(t._size_constraint)&&e.remove_constraint(t._size_constraint),t._size_constraint=v.GE(t.model.panel._size,-t._get_size()),e.add_constraint(t._size_constraint),null!=t._full_constraint&&e.has_constraint(t._full_constraint)&&e.remove_constraint(t._full_constraint),t._full_constraint=function(){switch(t.model.panel.side){case"above":case"below":return v.EQ(t.model.panel._width,[-1,t.plot_model.canvas._width]);case"left":case"right":return v.EQ(t.model.panel._height,[-1,t.plot_model.canvas._height])}}(),e.add_constraint(t._full_constraint)},r.SidePanel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,t),e.internal({side:[w.String],plot:[w.Instance]}),e.prototype.initialize=function(t,r){switch(e.__super__.initialize.call(this,t,r),this.side){case"above":return this._dim=0,this._normals=[0,-1],this._size=this._height;case"below":return this._dim=0,this._normals=[0,1],this._size=this._height;case"left":return this._dim=1,this._normals=[-1,0],this._size=this._width;case"right":return this._dim=1,this._normals=[1,0],this._size=this._width;default:return x.logger.error("unrecognized side: '"+this.side+"'")}},e.prototype.get_constraints=function(){return[v.GE(this._top),v.GE(this._bottom),v.GE(this._left),v.GE(this._right),v.GE(this._width),v.GE(this._height),v.EQ(this._left,this._width,[-1,this._right]),v.EQ(this._bottom,this._height,[-1,this._top])]},e.prototype.apply_label_text_heuristics=function(t,e){var r,n,o;return o=this.side,k.isString(e)?(n=f[o][e],r=_[o][e]):0===e?(n=f[o][e],r=_[o][e]):e<0?(n="middle",r=p[o]):e>0&&(n="middle",r=h[o]),t.textBaseline=n,t.textAlign=r,t},e.prototype.get_label_angle_heuristic=function(t){var e;return e=this.side,d[e][t]},e}(b.LayoutCanvas)},{"./layout_canvas":"core/layout/layout_canvas","./solver":"core/layout/solver","core/logging":"core/logging","core/properties":"core/properties","core/util/types":"core/util/types"}],"core/layout/solver":[function(t,e,r){"use strict";function n(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new i.Constraint(new(i.Expression.bind.apply(i.Expression,[void 0].concat(e))),t)}}function o(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new i.Constraint(new(i.Expression.bind.apply(i.Expression,[void 0].concat(e))),t,i.Strength.weak)}}Object.defineProperty(r,"__esModule",{value:!0});var i=t("kiwi");r.Variable=i.Variable,r.Expression=i.Expression,r.Constraint=i.Constraint,r.Operator=i.Operator,r.Strength=i.Strength,r.EQ=n(i.Operator.Eq),r.LE=n(i.Operator.Le),r.GE=n(i.Operator.Ge),r.WEAK_EQ=o(i.Operator.Eq),r.WEAK_LE=o(i.Operator.Le),r.WEAK_GE=o(i.Operator.Ge);var s=function(){function t(){this.solver=new i.Solver}return t.prototype.clear=function(){this.solver=new i.Solver},t.prototype.toString=function(){return"Solver(num_constraints="+this.num_constraints+", num_edit_variables="+this.num_edit_variables+")"},Object.defineProperty(t.prototype,"num_constraints",{get:function(){return this.solver.numConstraints},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"num_edit_variables",{get:function(){return this.solver.numEditVariables},enumerable:!0,configurable:!0}),t.prototype.update_variables=function(){this.solver.updateVariables()},t.prototype.has_constraint=function(t){return this.solver.hasConstraint(t)},t.prototype.add_constraint=function(t){this.solver.addConstraint(t)},t.prototype.remove_constraint=function(t){this.solver.removeConstraint(t)},t.prototype.add_edit_variable=function(t,e){this.solver.addEditVariable(t,e)},t.prototype.remove_edit_variable=function(t){this.solver.removeEditVariable(t)},t.prototype.suggest_value=function(t,e){this.solver.suggestValue(t,e)},t}();r.Solver=s},{kiwi:"kiwi"}],"core/logging":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,i,s,a=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},l=t("./util/types");s=function(){},i=function(t,e){return null!=console[t]?console[t].bind(console,e):null!=console.log?console.log.bind(console,e):s},o={},n=function(){function t(t,e){this.name=t,this.level=e}return t}(),r.Logger=function(){function t(e,r){null==r&&(r=t.INFO),this._name=e,this.set_level(r)}return t.TRACE=new n("trace",0),t.DEBUG=new n("debug",1),t.INFO=new n("info",2),t.WARN=new n("warn",6),t.ERROR=new n("error",7),t.FATAL=new n("fatal",8),t.OFF=new n("off",9),t.log_levels={trace:t.TRACE,debug:t.DEBUG,info:t.INFO,warn:t.WARN,error:t.ERROR,fatal:t.FATAL,off:t.OFF},Object.defineProperty(t,"levels",{get:function(){return Object.keys(t.log_levels)}}),t.get=function(e,r){var n;if(null==r&&(r=t.INFO),l.isString(e)&&e.length>0)return n=o[e],null==n&&(n=o[e]=new t(e,r)),n;throw new TypeError("Logger.get() expects a string name and an optional log-level")},Object.defineProperty(t.prototype,"level",{get:function(){return this.get_level()}}),t.prototype.get_level=function(){return this._log_level},t.prototype.set_level=function(e){var r,o,a,u,c;if(e instanceof n)this._log_level=e;else{if(!l.isString(e)||null==t.log_levels[e])throw new Error("Logger.set_level() expects a log-level object or a string name of a log-level");this._log_level=t.log_levels[e]}o="["+this._name+"]",u=t.log_levels,c=[];for(r in u){if(e=u[r],e===t.OFF)break;a=e.name,e.level<this._log_level.level?c.push(this[a]=s):c.push(this[a]=i(a,o))}return c},t}(),r.logger=r.Logger.get("bokeh"),r.set_log_level=function(t){return a.call(r.Logger.levels,t)<0?(console.log("[bokeh] unrecognized logging level '"+t+"' passed to Bokeh.set_log_level(), ignoring"),console.log("[bokeh] valid log levels are: "+r.Logger.levels.join(", "))):(console.log("[bokeh] setting log level to: '"+t+"'"),r.logger.set_level(t))}},{"./util/types":"core/util/types"}],"core/properties":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},a=t("./signaling"),l=t("./enums"),u=t("./util/svg_colors"),c=t("./util/color"),_=t("./util/array"),p=t("./util/types");n=function(t){try{return JSON.stringify(t)}catch(e){return t.toString()}},r.Property=function(){function t(t){this.obj=t.obj,this.attr=t.attr,this.default_value=t.default_value,this._init(),this.change=new a.Signal(this.obj,"change"),this.connect(this.change,function(t){return function(){return t._init(),t.obj.propchange.emit()}}(this))}return o(t.prototype,a.Signalable),t.prototype.dataspec=!1,t.prototype.update=function(){return this._init()},t.prototype.init=function(){},t.prototype.transform=function(t){return t},t.prototype.validate=function(t){},t.prototype.value=function(t){var e;if(null==t&&(t=!0),void 0===this.spec.value)throw new Error("attempted to retrieve property value for property without value specification");return e=this.transform([this.spec.value])[0],null!=this.spec.transform&&t&&(e=this.spec.transform.compute(e)),e},t.prototype.array=function(t){var e,r,n,o,i;if(!this.dataspec)throw new Error("attempted to retrieve property array for non-dataspec property");if(e=t.data,null!=this.spec.field){if(!(this.spec.field in e))throw new Error("attempted to retrieve property array for nonexistent field '"+this.spec.field+"'");o=this.transform(t.get_column(this.spec.field))}else n=t.get_length(),null==n&&(n=1),i=this.value(!1),o=function(){var t,e,o;for(o=[],r=t=0,e=n;0<=e?t<e:t>e;r=0<=e?++t:--t)o.push(i);return o}();return null!=this.spec.transform&&(o=this.spec.transform.v_compute(o)),o},t.prototype._init=function(){var t,e,r,n;if(n=this.obj,null==n)throw new Error("missing property object");if(null==n.properties)throw new Error("property object must be a HasProps");if(t=this.attr,null==t)throw new Error("missing property attr");if(e=n.getv(t),void 0===e&&(r=this.default_value,e=function(){switch(!1){case void 0!==r:return null;case!p.isArray(r):return _.copy(r);case!p.isFunction(r):return r(n);default:return r}}(),n.setv(t,e,{silent:!0,defaults:!0})),p.isArray(e)?this.spec={value:e}:p.isObject(e)&&void 0===e.value!=(void 0===e.field)?this.spec=e:this.spec={value:e},null!=this.spec.field&&!p.isString(this.spec.field))throw new Error("field value for property '"+t+"' is not a string");return null!=this.spec.value&&this.validate(this.spec.value),this.init()},t.prototype.toString=function(){return this.name+"("+this.obj+"."+this.attr+", spec: "+n(this.spec)+")"},t}(),r.simple_prop=function(t,e){var i;return i=function(r){function i(){return i.__super__.constructor.apply(this,arguments)}return o(i,r),i.prototype.name=t,i.prototype.validate=function(r){if(!e(r))throw new Error(t+" property '"+this.attr+"' given invalid value: "+n(r))},i}(r.Property)},r.Any=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.simple_prop("Any",function(t){return!0})),r.Array=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.simple_prop("Array",function(t){return p.isArray(t)||t instanceof Float64Array})),r.Bool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.simple_prop("Bool",p.isBoolean)),r.Boolean=r.Bool,r.Color=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.simple_prop("Color",function(t){return null!=u[t.toLowerCase()]||"#"===t.substring(0,1)||c.valid_rgb(t)})),r.Instance=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.simple_prop("Instance",function(t){return null!=t.properties})),r.Number=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.simple_prop("Number",function(t){return p.isNumber(t)||p.isBoolean(t)})),r.Int=r.Number,r.Percent=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.simple_prop("Number",function(t){return(p.isNumber(t)||p.isBoolean(t))&&0<=t&&t<=1})),r.String=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.simple_prop("String",p.isString)),r.Font=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.String),r.enum_prop=function(t,e){var n;return n=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return o(r,e),r.prototype.name=t,r}(r.simple_prop(t,function(t){return s.call(e,t)>=0}))},r.Anchor=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("Anchor",l.LegendLocation)),r.AngleUnits=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("AngleUnits",l.AngleUnits)),r.Direction=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.transform=function(t){var e,r,n,o;for(o=new Uint8Array(t.length),e=r=0,n=t.length;0<=n?r<n:r>n;e=0<=n?++r:--r)switch(t[e]){case"clock":o[e]=!1;break;case"anticlock":o[e]=!0}return o},e}(r.enum_prop("Direction",l.Direction)),r.Dimension=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("Dimension",l.Dimension)),r.Dimensions=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("Dimensions",l.Dimensions)),r.FontStyle=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("FontStyle",l.FontStyle)),r.LatLon=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("LatLon",l.LatLon)),r.LineCap=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("LineCap",l.LineCap)),r.LineJoin=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("LineJoin",l.LineJoin)),r.LegendLocation=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("LegendLocation",l.LegendLocation)),r.Location=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("Location",l.Location)),r.OutputBackend=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("OutputBackend",l.OutputBackend)),r.Orientation=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("Orientation",l.Orientation)),r.TextAlign=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("TextAlign",l.TextAlign)),r.TextBaseline=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("TextBaseline",l.TextBaseline)),r.RenderLevel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("RenderLevel",l.RenderLevel)),r.RenderMode=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("RenderMode",l.RenderMode)),r.SizingMode=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("SizingMode",l.SizingMode)),r.SpatialUnits=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("SpatialUnits",l.SpatialUnits)),r.Distribution=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("Distribution",l.DistributionTypes)),r.TransformStepMode=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("TransformStepMode",l.TransformStepModes)),r.PaddingUnits=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("PaddingUnits",l.PaddingUnits)),r.StartEnd=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.enum_prop("StartEnd",l.StartEnd)),r.units_prop=function(t,e,n){var i;return i=function(r){function i(){return i.__super__.constructor.apply(this,arguments)}return o(i,r),i.prototype.name=t,i.prototype.init=function(){var r;if(null==this.spec.units&&(this.spec.units=n),this.units=this.spec.units,r=this.spec.units,s.call(e,r)<0)throw new Error(t+" units must be one of "+e+", given invalid value: "+r)},i}(r.Number)},r.Angle=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.transform=function(t){var r;return"deg"===this.spec.units&&(t=function(){var e,n,o;for(o=[],e=0,n=t.length;e<n;e++)r=t[e],o.push(r*Math.PI/180);return o}()),t=function(){var e,n,o;for(o=[],e=0,n=t.length;e<n;e++)r=t[e],o.push(-r);return o}(),e.__super__.transform.call(this,t)},e}(r.units_prop("Angle",l.AngleUnits,"rad")),r.Distance=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(r.units_prop("Distance",l.SpatialUnits,"data")),r.AngleSpec=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.dataspec=!0,e}(r.Angle),r.ColorSpec=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.dataspec=!0,e}(r.Color),r.DirectionSpec=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.dataspec=!0,e}(r.Distance),r.DistanceSpec=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.dataspec=!0,e}(r.Distance),r.FontSizeSpec=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.dataspec=!0,e}(r.String),r.NumberSpec=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.dataspec=!0,e}(r.Number),r.StringSpec=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.dataspec=!0,e}(r.String)},{"./enums":"core/enums","./signaling":"core/signaling","./util/array":"core/util/array","./util/color":"core/util/color","./util/svg_colors":"core/util/svg_colors","./util/types":"core/util/types"}],"core/property_mixins":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,i,s,a=t("./properties"),l=t("./util/object");o=function(t,e){var r,n,o;n={},null==e&&(e="");for(r in t)o=t[r],n[e+r]=o;return n},i={line_color:[a.ColorSpec,"black"],line_width:[a.NumberSpec,1],line_alpha:[a.NumberSpec,1],line_join:[a.LineJoin,"miter"],line_cap:[a.LineCap,"butt"],line_dash:[a.Array,[]],line_dash_offset:[a.Number,0]},r.line=function(t){return o(i,t)},n={fill_color:[a.ColorSpec,"gray"],fill_alpha:[a.NumberSpec,1]},r.fill=function(t){return o(n,t)},s={text_font:[a.Font,"helvetica"],text_font_size:[a.FontSizeSpec,"12pt"],text_font_style:[a.FontStyle,"normal"],text_color:[a.ColorSpec,"#444444"],text_alpha:[a.NumberSpec,1],text_align:[a.TextAlign,"left"],text_baseline:[a.TextBaseline,"bottom"]},r.text=function(t){return o(s,t)},r.create=function(t){var e,r,n,o,i,s,a;for(a={},r=0,o=t.length;r<o;r++){if(e=t[r],s=e.split(":"),n=s[0],i=s[1],null==this[n])throw new Error("Unknown property mixin kind '"+n+"'");a=l.extend(a,this[n](i))}return a}},{"./properties":"core/properties","./util/object":"core/util/object"}],"core/selection_manager":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./has_props"),s=t("./logging"),a=t("./selector"),l=t("./hittest"),u=t("./properties");r.SelectionManager=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="SelectionManager",e.internal({source:[u.Any]}),e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this.selector=new a.Selector,this.inspectors={},this.last_inspection_was_empty={}},e.prototype.select=function(t,e,r,n,o){var i,a,l,u,c,_,p,h;if(null==o&&(o=!1),h=this.source,h!==e[0].model.data_source&&s.logger.warn("select called with mis-matched data sources"),u=function(){var t,n,o;for(o=[],t=0,n=e.length;t<n;t++)p=e[t],o.push(p.hit_test(r));return o}(),u=function(){var t,e,r;for(r=[],t=0,e=u.length;t<e;t++)i=u[t],null!==i&&r.push(i);return r}(),0===u.length)return!1;if(null!=u){for(a=u[0],c=0,_=u.length;c<_;c++)l=u[c],a.update_through_union(l);return this.selector.update(a,n,o),this.source.selected=this.selector.indices,h.select.emit(),!a.is_empty()}return!1},e.prototype.inspect=function(t,e,r,n){var o,i,a,l;if(l=this.source,l!==e.model.data_source&&s.logger.warn("inspect called with mis-matched data sources"),o=e.hit_test(r),null!=o){if(a=e.model.id,o.is_empty()){if(null==this.last_inspection_was_empty[a]&&(this.last_inspection_was_empty[a]=!1),this.last_inspection_was_empty[a])return;this.last_inspection_was_empty[a]=!0}else this.last_inspection_was_empty[a]=!1;return i=this._get_inspector(e),i.update(o,!0,!1,!0),this.source.setv({inspected:i.indices},{silent:!0}),l.inspect.emit([o,t,e,l,n]),!o.is_empty()}return!1},e.prototype.clear=function(t){return this.selector.clear(),this.source.selected=l.create_hit_test_result()},e.prototype._get_inspector=function(t){var e;return e=t.model.id,null!=this.inspectors[e]?this.inspectors[e]:this.inspectors[e]=new a.Selector},e}(i.HasProps)},{"./has_props":"core/has_props","./hittest":"core/hittest","./logging":"core/logging","./properties":"core/properties","./selector":"core/selector"}],"core/selector":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./has_props"),s=t("./hittest"),a=t("./properties");r.Selector=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="Selector",e.prototype.update=function(t,e,r,n){return null==n&&(n=!1),this.setv("timestamp",new Date,{silent:n}),this.setv("final",e,{silent:n}),r&&t.update_through_union(this.indices),this.setv("indices",t,{silent:n})},e.prototype.clear=function(){return this.timestamp=new Date,this["final"]=!0,this.indices=s.create_hit_test_result()},e.internal({indices:[a.Any,function(){return s.create_hit_test_result()}],"final":[a.Boolean],timestamp:[a.Any]}),e}(i.HasProps)},{"./has_props":"core/has_props","./hittest":"core/hittest","./properties":"core/properties"}],"core/settings":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(){this._dev=!1}return Object.defineProperty(t.prototype,"dev",{get:function(){return this._dev},set:function(t){this._dev=t},enumerable:!0,configurable:!0}),t}();r.Settings=n,r.settings=new n},{}],"core/signaling":[function(t,e,r){"use strict";function n(t,e,r,n){return l.find(t,function(t){return t.signal===e&&t.slot===r&&t.context===n})}function o(t){0===h.size&&a.defer(i),h.add(t)}function i(){h.forEach(function(t){l.removeBy(t,function(t){return null==t.signal})}),h.clear()}Object.defineProperty(r,"__esModule",{value:!0});var s=t("./logging"),a=t("./util/callback"),l=t("./util/array"),u=function(){function t(t,e){this.sender=t,this.name=e}return t.prototype.connect=function(t,e){void 0===e&&(e=null),_.has(this.sender)||_.set(this.sender,[]);var r=_.get(this.sender);if(null!=n(r,this,t,e))return!1;var o=e||t;p.has(o)||p.set(o,[]);var i=p.get(o),s={signal:this,slot:t,context:e};return r.push(s),i.push(s),!0},t.prototype.disconnect=function(t,e){void 0===e&&(e=null);var r=_.get(this.sender);if(null==r||0===r.length)return!1;var i=n(r,this,t,e);if(null==i)return!1;var s=e||t,a=p.get(s);return i.signal=null,o(r),o(a),!0},t.prototype.emit=function(t){for(var e=_.get(this.sender)||[],r=0,n=e;r<n.length;r++){var o=n[r],i=o.signal,s=o.slot,a=o.context;i===this&&s.call(a,t,this.sender)}},t}();r.Signal=u,function(t){function e(t,e){var r=_.get(t);if(null!=r&&0!==r.length){var n=p.get(e);if(null!=n&&0!==n.length){for(var i=0,s=n;i<s.length;i++){var a=s[i];if(null==a.signal)return;a.signal.sender===t&&(a.signal=null)}o(r),o(n)}}}function r(t){var e=_.get(t);if(null!=e&&0!==e.length){for(var r=0,n=e;r<n.length;r++){var i=n[r];if(null==i.signal)return;var s=i.context||i.slot;i.signal=null,o(p.get(s))}o(e)}}function n(t){var e=p.get(t);if(null!=e&&0!==e.length){for(var r=0,n=e;r<n.length;r++){var i=n[r];if(null==i.signal)return;var s=i.signal.sender;i.signal=null,o(_.get(s))}o(e)}}function i(t){var e=_.get(t);if(null!=e&&0!==e.length){for(var r=0,n=e;r<n.length;r++){var i=n[r];i.signal=null}o(e)}var s=p.get(t);if(null!=s&&0!==s.length){for(var a=0,l=s;a<l.length;a++){var i=l[a];i.signal=null}o(s)}}t.disconnectBetween=e,t.disconnectSender=r,t.disconnectReceiver=n,t.disconnectAll=i}(u=r.Signal||(r.Signal={})),r.Signal=u;var c;!function(t){function e(t,e){return t.connect(e,this)}function r(t,e){s.logger.warn("obj.listenTo('event', handler) is deprecated, use obj.connect(signal, slot)");var r=t.split(":"),n=r[0],o=r[1],i=null==o?this[n]:this.properties[o][n];return i.connect(e,this)}function n(t,e){s.logger.warn("obj.trigger('event', args) is deprecated, use signal.emit(args)");var r=t.split(":"),n=r[0],o=r[1],i=null==o?this[n]:this.properties[o][n];return i.emit(e)}t.connect=e,t.listenTo=r,t.trigger=n}(c=r.Signalable||(r.Signalable={}));var _=new WeakMap,p=new WeakMap,h=new Set},{"./logging":"core/logging","./util/array":"core/util/array","./util/callback":"core/util/callback"}],"core/ui_events":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("hammerjs"),o=t("./signaling"),i=t("./logging"),s=t("./dom"),a=t("./util/wheel"),l=t("./util/object"),u=t("./bokeh_events");r.UIEvents=function(){function t(t,e,r,n){this.plot_view=t,this.toolbar=e,this.hit_area=r,this.plot=n,this.tap=new o.Signal(this,"tap"),this.doubletap=new o.Signal(this,"doubletap"),this.press=new o.Signal(this,"press"),this.pan_start=new o.Signal(this,"pan:start"),this.pan=new o.Signal(this,"pan"),this.pan_end=new o.Signal(this,"pan:end"),this.pinch_start=new o.Signal(this,"pinch:start"),this.pinch=new o.Signal(this,"pinch"),this.pinch_end=new o.Signal(this,"pinch:end"),this.rotate_start=new o.Signal(this,"rotate:start"),this.rotate=new o.Signal(this,"rotate"),this.rotate_end=new o.Signal(this,"rotate:end"),this.move_enter=new o.Signal(this,"move:enter"),this.move=new o.Signal(this,"move"),this.move_exit=new o.Signal(this,"move:exit"),this.scroll=new o.Signal(this,"scroll"),this.keydown=new o.Signal(this,"keydown"),this.keyup=new o.Signal(this,"keyup"),this._configure_hammerjs()}return t.prototype._configure_hammerjs=function(){return this.hammer=new n(this.hit_area),this.hammer.get("doubletap").recognizeWith("tap"),this.hammer.get("tap").requireFailure("doubletap"),this.hammer.get("doubletap").dropRequireFailure("tap"),this.hammer.on("doubletap",function(t){return function(e){return t._doubletap(e)}}(this)),this.hammer.on("tap",function(t){return function(e){return t._tap(e)}}(this)),this.hammer.on("press",function(t){return function(e){return t._press(e)}}(this)),this.hammer.get("pan").set({direction:n.DIRECTION_ALL}),this.hammer.on("panstart",function(t){return function(e){return t._pan_start(e)}}(this)),this.hammer.on("pan",function(t){return function(e){return t._pan(e)}}(this)),this.hammer.on("panend",function(t){return function(e){return t._pan_end(e)}}(this)),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("pinchstart",function(t){return function(e){return t._pinch_start(e)}}(this)),this.hammer.on("pinch",function(t){return function(e){return t._pinch(e)}}(this)),this.hammer.on("pinchend",function(t){return function(e){return t._pinch_end(e)}}(this)),this.hammer.get("rotate").set({enable:!0}),this.hammer.on("rotatestart",function(t){return function(e){return t._rotate_start(e)}}(this)),this.hammer.on("rotate",function(t){return function(e){return t._rotate(e)}}(this)),this.hammer.on("rotateend",function(t){return function(e){return t._rotate_end(e)}}(this)),this.hit_area.addEventListener("mousemove",function(t){return function(e){return t._mouse_move(e)}}(this)),this.hit_area.addEventListener("mouseenter",function(t){return function(e){return t._mouse_enter(e)}}(this)),this.hit_area.addEventListener("mouseleave",function(t){return function(e){return t._mouse_exit(e)}}(this)),this.hit_area.addEventListener("wheel",function(t){return function(e){return t._mouse_wheel(e)}}(this)),document.addEventListener("keydown",function(t){return function(e){return t._key_down(e)}}(this)),document.addEventListener("keyup",function(t){return function(e){return t._key_up(e)}}(this))},t.prototype.register_tool=function(t){var e,r,n,o;if(e=t.model.event_type,r=t.model.id,n=t.model.type,null==e)return void i.logger.debug("Button tool: "+n);switch(o=t,e){case"pan":null!=o._pan_start&&o.connect(this.pan_start,function(t){if(t.id===r)return o._pan_start(t.e)}),null!=o._pan&&o.connect(this.pan,function(t){if(t.id===r)return o._pan(t.e)}),null!=o._pan_end&&o.connect(this.pan_end,function(t){if(t.id===r)return o._pan_end(t.e)});break;case"pinch":null!=o._pinch_start&&o.connect(this.pinch_start,function(t){if(t.id===r)return o._pinch_start(t.e)}),null!=o._pinch&&o.connect(this.pinch,function(t){if(t.id===r)return o._pinch(t.e)}),null!=o._pinch_end&&o.connect(this.pinch_end,function(t){if(t.id===r)return o._pinch_end(t.e)});break;case"rotate":null!=o._rotate_start&&o.connect(this.rotate_start,function(t){if(t.id===r)return o._rotate_start(t.e)}),null!=o._rotate&&o.connect(this.rotate,function(t){if(t.id===r)return o._rotate(t.e)}),null!=o._rotate_end&&o.connect(this.rotate_end,function(t){if(t.id===r)return o._rotate_end(t.e)});break;case"move":null!=o._move_enter&&o.connect(this.move_enter,function(t){if(t.id===r)return o._move_enter(t.e)}),null!=o._move&&o.connect(this.move,function(t){if(t.id===r)return o._move(t.e)}),null!=o._move_exit&&o.connect(this.move_exit,function(t){if(t.id===r)return o._move_exit(t.e)});break;case"tap":null!=o._tap&&o.connect(this.tap,function(t){
if(t.id===r)return o._tap(t.e)});break;case"press":null!=o._press&&o.connect(this.press,function(t){if(t.id===r)return o._press(t.e)});break;case"scroll":null!=o._scroll&&o.connect(this.scroll,function(t){if(t.id===r)return o._scroll(t.e)});break;default:throw new Error("unsupported event_type: "+ev)}return null!=o._doubletap&&o.connect(this.doubletap,function(t){return o._doubletap(t.e)}),null!=o._keydown&&o.connect(this.keydown,function(t){return o._keydown(t.e)}),null!=o._keyup&&o.connect(this.keyup,function(t){return o._keyup(t.e)}),("ontouchstart"in window||navigator.maxTouchPoints>0)&&"pinch"===e?(i.logger.debug("Registering scroll on touch screen"),o.connect(this.scroll,function(t){if(t.id===r)return o._scroll(t.e)})):void 0},t.prototype._hit_test_renderers=function(t,e){var r,n,o,i;for(n=this.plot_view.get_renderer_views(),r=n.length-1;r>=0;r+=-1)if(i=n[r],("annotation"===(o=i.model.level)||"overlay"===o)&&null!=i.bbox&&i.bbox().contains(t,e))return i;return null},t.prototype._hit_test_frame=function(t,e){var r,n,o;return r=this.plot_view.canvas,n=r.sx_to_vx(t),o=r.sy_to_vy(e),this.plot_view.frame.contains(n,o)},t.prototype._trigger=function(t,e){var r,n,o,i,s,a,u,c,_,p,h;switch(a=t.name,i=a.split(":")[0],h=this._hit_test_renderers(e.bokeh.sx,e.bokeh.sy),i){case"move":for(n=this.toolbar.inspectors.filter(function(t){return t.active}),s="default",null!=h?(null!=h.model.cursor&&(s=h.model.cursor()),l.isEmpty(n)||(t=this.move_exit,a=t.name)):this._hit_test_frame(e.bokeh.sx,e.bokeh.sy)&&(l.isEmpty(n)||(s="crosshair")),this.plot_view.set_cursor(s),p=[],u=0,_=n.length;u<_;u++)c=n[u],p.push(this.trigger(t,e,c.id));return p;case"tap":if(null!=h&&"function"==typeof h.on_hit&&h.on_hit(e.bokeh.sx,e.bokeh.sy),r=this.toolbar.gestures[i].active,null!=r)return this.trigger(t,e,r.id);break;case"scroll":if(o="ontouchstart"in window||navigator.maxTouchPoints>0?"pinch":"scroll",r=this.toolbar.gestures[o].active,null!=r)return e.preventDefault(),e.stopPropagation(),this.trigger(t,e,r.id);break;default:if(r=this.toolbar.gestures[i].active,null!=r)return this.trigger(t,e,r.id)}},t.prototype.trigger=function(t,e,r){return null==r&&(r=null),t.emit({id:r,e:e})},t.prototype._bokify_hammer=function(t,e){var r,n,o,a,c,_;return null==e&&(e={}),"mouse"===t.pointerType?(c=t.srcEvent.pageX,_=t.srcEvent.pageY):(c=t.pointers[0].pageX,_=t.pointers[0].pageY),o=s.offset(t.target),n=o.left,a=o.top,t.bokeh={sx:c-n,sy:_-a},t.bokeh=l.extend(t.bokeh,e),r=u.BokehEvent.event_class(t),null!=r?this.plot.trigger_event(r.from_event(t)):i.logger.debug("Unhandled event of type "+t.type)},t.prototype._bokify_point_event=function(t,e){var r,n,o,a;return null==e&&(e={}),o=s.offset(t.currentTarget),n=o.left,a=o.top,t.bokeh={sx:t.pageX-n,sy:t.pageY-a},t.bokeh=l.extend(t.bokeh,e),r=u.BokehEvent.event_class(t),null!=r?this.plot.trigger_event(r.from_event(t)):i.logger.debug("Unhandled event of type "+t.type)},t.prototype._tap=function(t){return this._bokify_hammer(t),this._trigger(this.tap,t)},t.prototype._doubletap=function(t){return this._bokify_hammer(t),this.trigger(this.doubletap,t)},t.prototype._press=function(t){return this._bokify_hammer(t),this._trigger(this.press,t)},t.prototype._pan_start=function(t){return this._bokify_hammer(t),t.bokeh.sx-=t.deltaX,t.bokeh.sy-=t.deltaY,this._trigger(this.pan_start,t)},t.prototype._pan=function(t){return this._bokify_hammer(t),this._trigger(this.pan,t)},t.prototype._pan_end=function(t){return this._bokify_hammer(t),this._trigger(this.pan_end,t)},t.prototype._pinch_start=function(t){return this._bokify_hammer(t),this._trigger(this.pinch_start,t)},t.prototype._pinch=function(t){return this._bokify_hammer(t),this._trigger(this.pinch,t)},t.prototype._pinch_end=function(t){return this._bokify_hammer(t),this._trigger(this.pinch_end,t)},t.prototype._rotate_start=function(t){return this._bokify_hammer(t),this._trigger(this.rotate_start,t)},t.prototype._rotate=function(t){return this._bokify_hammer(t),this._trigger(this.rotate,t)},t.prototype._rotate_end=function(t){return this._bokify_hammer(t),this._trigger(this.rotate_end,t)},t.prototype._mouse_enter=function(t){return this._bokify_point_event(t),this._trigger(this.move_enter,t)},t.prototype._mouse_move=function(t){return this._bokify_point_event(t),this._trigger(this.move,t)},t.prototype._mouse_exit=function(t){return this._bokify_point_event(t),this._trigger(this.move_exit,t)},t.prototype._mouse_wheel=function(t){return this._bokify_point_event(t,{delta:a.getDeltaY(t)}),this._trigger(this.scroll,t)},t.prototype._key_down=function(t){return this.trigger(this.keydown,t)},t.prototype._key_up=function(t){return this.trigger(this.keyup,t)},t}()},{"./bokeh_events":"core/bokeh_events","./dom":"core/dom","./logging":"core/logging","./signaling":"core/signaling","./util/object":"core/util/object","./util/wheel":"core/util/wheel",hammerjs:"hammerjs"}],"core/util/array":[function(t,e,r){"use strict";function n(t){return D.call(t)}function o(t){var e;return(e=[]).concat.apply(e,t)}function i(t,e){return t.indexOf(e)>=0}function s(t,e){return t[e>=0?e:t.length+e]}function a(t,e){for(var r=Math.min(t.length,e.length),n=new Array(r),o=0;o<r;o++)n[o]=[t[o],e[o]];return n}function l(t){for(var e,r=t.length,n=new Array(r),o=new Array(r),i=0;i<r;i++)e=t[i],n[i]=e[0],o[i]=e[1];return[n,o]}function u(t,e,r){void 0===r&&(r=1),null==e&&(e=t,t=0);for(var n=Math.max(Math.ceil((e-t)/r),0),o=Array(n),i=0;i<n;i++,t+=r)o[i]=t;return o}function c(t,e,r){void 0===r&&(r=100);for(var n=(e-t)/(r-1),o=new Array(r),i=0;i<r;i++)o[i]=t+n*i;return o}function _(t){for(var e=t.length,r=t[0].length,n=[],o=0;o<r;o++){n[o]=[];for(var i=0;i<e;i++)n[o][i]=t[i][o]}return n}function p(t){return t.reduce(function(t,e){return t+e},0)}function h(t){var e=[];return t.reduce(function(t,r,n){return e[n]=t+r},0),e}function d(t){for(var e,r=1/0,n=0,o=t.length;n<o;n++)e=t[n],e<r&&(r=e);return r}function f(t,e){if(0==t.length)throw new Error("minBy() called with an empty array");for(var r=t[0],n=e(r),o=1,i=t.length;o<i;o++){var s=t[o],a=e(s);a<n&&(r=s,n=a)}return r}function m(t){for(var e,r=-(1/0),n=0,o=t.length;n<o;n++)e=t[n],e>r&&(r=e);return r}function y(t,e){if(0==t.length)throw new Error("maxBy() called with an empty array");for(var r=t[0],n=e(r),o=1,i=t.length;o<i;o++){var s=t[o],a=e(s);a>n&&(r=s,n=a)}return r}function g(t){return f(u(t.length),function(e){return t[e]})}function v(t){return y(u(t.length),function(e){return t[e]})}function b(t,e){for(var r=0,n=t;r<n.length;r++){var o=n[r];if(!e(o))return!1}return!0}function w(t,e){for(var r=0,n=t;r<n.length;r++){var o=n[r];if(e(o))return!0}return!1}function x(t){return function(e,r){for(var n=e.length,o=t>0?0:n-1;o>=0&&o<n;o+=t)if(r(e[o]))return o;return-1}}function k(t,e){var n=r.findIndex(t,e);return n==-1?void 0:t[n]}function M(t,e){var n=r.findLastIndex(t,e);return n==-1?void 0:t[n]}function j(t,e){for(var r=0,n=t.length;r<n;){var o=Math.floor((r+n)/2);t[o]<e?r=o+1:n=o}return r}function S(t,e){var r=t.map(function(t,r){return{value:t,index:r,key:e(t)}});return r.sort(function(t,e){var r=t.key,n=e.key;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return t.index-e.index}),r.map(function(t){return t.value})}function T(t){for(var e=[],r=0,n=t;r<n.length;r++){var o=n[r];i(e,o)||e.push(o)}return e}function O(t,e){for(var r=[],n=[],o=0,s=t;o<s.length;o++){var a=s[o],l=e(a);i(n,l)||(n.push(l),r.push(a))}return r}function P(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return T(o(t))}function A(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=[];t:for(var o=0,s=t;o<s.length;o++){var a=s[o];if(!i(n,a)){for(var l=0,u=e;l<u.length;l++){var c=u[l];if(!i(c,a))continue t}n.push(a)}}return n}function E(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=o(e);return t.filter(function(t){return!i(n,t)})}function z(t,e){for(var r=0;r<t.length;)e(t[r])?t.splice(r,1):r++}function C(t){for(var e=t.length,r=new Array(e),n=0;n<e;n++){var o=N.randomIn(0,n);o!==n&&(r[n]=r[o]),r[o]=t[n]}return r}
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.
Object.defineProperty(r,"__esModule",{value:!0});var N=t("./math"),D=Array.prototype.slice;r.copy=n,r.concat=o,r.contains=i,r.nth=s,r.zip=a,r.unzip=l,r.range=u,r.linspace=c,r.transpose=_,r.sum=p,r.cumsum=h,r.min=d,r.minBy=f,r.max=m,r.maxBy=y,r.argmin=g,r.argmax=v,r.all=b,r.any=w,r.findIndex=x(1),r.findLastIndex=x(-1),r.find=k,r.findLast=M,r.sortedIndex=j,r.sortBy=S,r.uniq=T,r.uniqBy=O,r.union=P,r.intersection=A,r.difference=E,r.removeBy=z,r.shuffle=C},{"./math":"core/util/math"}],"core/util/bbox":[function(t,e,r){"use strict";function n(){return{minX:1/0,minY:1/0,maxX:-(1/0),maxY:-(1/0)}}function o(){return{minX:Number.MIN_VALUE,minY:-(1/0),maxX:1/0,maxY:1/0}}function i(){return{minX:-(1/0),minY:Number.MIN_VALUE,maxX:1/0,maxY:1/0}}function s(t,e){return{minX:Math.min(t.minX,e.minX),maxX:Math.max(t.maxX,e.maxX),minY:Math.min(t.minY,e.minY),maxY:Math.max(t.maxY,e.maxY)}}Object.defineProperty(r,"__esModule",{value:!0}),r.empty=n,r.positive_x=o,r.positive_y=i,r.union=s;var a=function(){function t(t){null==t?(this.x0=1/0,this.y0=-(1/0),this.x1=1/0,this.y1=-(1/0)):(this.x0=t.x0,this.y0=t.y0,this.x1=t.x1,this.y1=t.y1)}return Object.defineProperty(t.prototype,"minX",{get:function(){return this.x0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minY",{get:function(){return this.y0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxX",{get:function(){return this.x1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxY",{get:function(){return this.y1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pt0",{get:function(){return[this.x0,this.y0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pt1",{get:function(){return[this.x1,this.y1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.x0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.x1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.x1-this.x0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.y1-this.y0},enumerable:!0,configurable:!0}),t.prototype.contains=function(t,e){return t>=this.x0&&t<=this.x1&&e>=this.y0&&e<=this.y1},t.prototype.union=function(e){return new t({x0:Math.min(this.x0,e.x0),y0:Math.min(this.y0,e.y0),x1:Math.max(this.x1,e.x1),y1:Math.max(this.y1,e.y1)})},t}();r.BBox=a},{}],"core/util/callback":[function(t,e,r){(function(t){"use strict";function e(t,e){return setTimeout(t,e)}function n(t){return s(t)}function o(t,e,r){void 0===r&&(r={});var n,o,i,s=null,a=0,l=function(){a=r.leading===!1?0:Date.now(),s=null,i=t.apply(n,o),s||(n=o=null)};return function(){var u=Date.now();a||r.leading!==!1||(a=u);var c=e-(u-a);return n=this,o=arguments,c<=0||c>e?(s&&(clearTimeout(s),s=null),a=u,i=t.apply(n,o),s||(n=o=null)):s||r.trailing===!1||(s=setTimeout(l,c)),i}}function i(t){var e,r=!1;return function(){return r||(r=!0,e=t()),e}}
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.
Object.defineProperty(r,"__esModule",{value:!0}),r.delay=e;var s="function"==typeof requestAnimationFrame?requestAnimationFrame:t;r.defer=n,r.throttle=o,r.once=i}).call(this,t("timers").setImmediate)},{timers:"timers-browserify/main"}],"core/util/canvas":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,i,s,a;i=function(t){if(t.setLineDash||(t.setLineDash=function(e){return t.mozDash=e,t.webkitLineDash=e}),!t.getLineDash)return t.getLineDash=function(){return t.mozDash}},s=function(t){return t.setLineDashOffset=function(e){return t.lineDashOffset=e,t.mozDashOffset=e,t.webkitLineDashOffset=e},t.getLineDashOffset=function(){return t.mozDashOffset}},o=function(t){return t.setImageSmoothingEnabled=function(e){return t.imageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.oImageSmoothingEnabled=e,t.webkitImageSmoothingEnabled=e},t.getImageSmoothingEnabled=function(){var e;return null==(e=t.imageSmoothingEnabled)||e}},a=function(t){if(t.measureText&&null==t.html5MeasureText)return t.html5MeasureText=t.measureText,t.measureText=function(e){var r;return r=t.html5MeasureText(e),r.ascent=1.6*t.html5MeasureText("m").width,r}},n=function(t){var e;if(e=function(e,r,n,o,i,s,a,l){var u,c,_;null==l&&(l=!1),u=.551784,t.translate(e,r),t.rotate(i),c=n,_=o,l&&(c=-n,_=-o),t.moveTo(-c,0),t.bezierCurveTo(-c,_*u,-c*u,_,0,_),t.bezierCurveTo(c*u,_,c,_*u,c,0),t.bezierCurveTo(c,-_*u,c*u,-_,0,-_),t.bezierCurveTo(-c*u,-_,-c,-_*u,-c,0),t.rotate(-i),t.translate(-e,-r)},!t.ellipse)return t.ellipse=e},r.fixup_ctx=function(t){return i(t),s(t),o(t),a(t),n(t)},r.get_scale_ratio=function(t,e,r){var n,o;return"svg"===r?1:e?(o=window.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,o/n):1}},{}],"core/util/color":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},i=t("./svg_colors");n=function(t){var e;return e=Number(t).toString(16),e=1===e.length?"0"+e:e},r.color2hex=function(t){var e,r,o;return t+="",0===t.indexOf("#")?t:null!=i[t]?i[t]:0===t.indexOf("rgb")?(r=t.match(/\d+/g),e=function(){var t,e,i;for(i=[],t=0,e=r.length;t<e;t++)o=r[t],i.push(n(o));return i}().join(""),"#"+e.slice(0,8)):t},r.color2rgba=function(t,e){var n,o,i;if(null==e&&(e=1),!t)return[0,0,0,0];for(n=r.color2hex(t),n=n.replace(/ |#/g,""),n.length<=4&&(n=n.replace(/(.)/g,"$1$1")),n=n.match(/../g),i=function(){var t,e,r;for(r=[],t=0,e=n.length;t<e;t++)o=n[t],r.push(parseInt(o,16)/255);return r}();i.length<3;)i.push(0);return i.length<4&&i.push(e),i.slice(0,4)},r.valid_rgb=function(t){var e,r,n,i;switch(t.substring(0,4)){case"rgba":r={start:"rgba(",len:4,alpha:!0};break;case"rgb(":r={start:"rgb(",len:3,alpha:!1};break;default:return!1}if(new RegExp(".*?(\\.).*(,)").test(t))throw new Error("color expects integers for rgb in rgb/rgba tuple, received "+t);if(e=t.replace(r.start,"").replace(")","").split(",").map(parseFloat),e.length!==r.len)throw new Error("color expects rgba "+expect_len+"-tuple, received "+t);if(r.alpha&&!(0<=(n=e[3])&&n<=1))throw new Error("color expects rgba 4-tuple to have alpha value between 0 and 1");if(o.call(function(){var t,r,n,o;for(n=e.slice(0,3),o=[],t=0,r=n.length;t<r;t++)i=n[t],o.push(0<=i&&i<=255);return o}(),!1)>=0)throw new Error("color expects rgb to have value between 0 and 255");return!0}},{"./svg_colors":"core/util/svg_colors"}],"core/util/data_structures":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./array"),o=t("./eq"),i=t("./types");r.MultiDict=function(){function t(){this._dict={}}return t.prototype._existing=function(t){return t in this._dict?this._dict[t]:null},t.prototype.add_value=function(t,e){var r;if(null===e)throw new Error("Can't put null in this dict");if(i.isArray(e))throw new Error("Can't put arrays in this dict");return r=this._existing(t),null===r?this._dict[t]=e:i.isArray(r)?r.push(e):this._dict[t]=[r,e]},t.prototype.remove_value=function(t,e){var r,s;return r=this._existing(t),i.isArray(r)?(s=n.difference(r,[e]),s.length>0?this._dict[t]=s:delete this._dict[t]):o.isEqual(r,e)?delete this._dict[t]:void 0},t.prototype.get_one=function(t,e){var r;if(r=this._existing(t),i.isArray(r)){if(1===r.length)return r[0];throw new Error(e)}return r},t}(),r.Set=function(){function t(e){if(e){if(e.constructor===t)return new t(e.values);e.constructor===Array?this.values=t.compact(e):this.values=[e]}else this.values=[]}return t.compact=function(t){var e,r,n,o;for(o=[],r=0,n=t.length;r<n;r++)e=t[r],o.indexOf(e)===-1&&o.push(e);return o},t.prototype.push=function(t){if(this.missing(t))return this.values.push(t)},t.prototype.remove=function(t){var e;return e=this.values.indexOf(t),this.values=this.values.slice(0,e).concat(this.values.slice(e+1))},t.prototype.length=function(){return this.values.length},t.prototype.includes=function(t){return this.values.indexOf(t)!==-1},t.prototype.missing=function(t){return!this.includes(t)},t.prototype.slice=function(t,e){return this.values.slice(t,e)},t.prototype.join=function(t){return this.values.join(t)},t.prototype.toString=function(){return this.join(", ")},t.prototype.includes=function(t){return this.values.indexOf(t)!==-1},t.prototype.union=function(e){return e=new t(e),new t(this.values.concat(e.values))},t.prototype.intersect=function(e){var r,n,o,i,s;for(e=new t(e),i=new t,s=e.values,n=0,o=s.length;n<o;n++)r=s[n],this.includes(r)&&e.includes(r)&&i.push(r);return i},t.prototype.diff=function(e){var r,n,o,i,s;for(e=new t(e),i=new t,s=this.values,n=0,o=s.length;n<o;n++)r=s[n],e.missing(r)&&i.push(r);return i},t}()},{"./array":"core/util/array","./eq":"core/util/eq","./types":"core/util/types"}],"core/util/eq":[function(t,e,r){"use strict";function n(t,e,r,o){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;var a=s.call(t);if(a!==s.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var l="[object Array]"===a;if(!l){if("object"!=typeof t||"object"!=typeof e)return!1;var u=t.constructor,c=e.constructor;if(u!==c&&!(i.isFunction(u)&&u instanceof u&&i.isFunction(c)&&c instanceof c)&&"constructor"in t&&"constructor"in e)return!1}r=r||[],o=o||[];for(var _=r.length;_--;)if(r[_]===t)return o[_]===e;if(r.push(t),o.push(e),l){if(_=t.length,_!==e.length)return!1;for(;_--;)if(!n(t[_],e[_],r,o))return!1}else{var p=Object.keys(t),h=void 0;if(_=p.length,Object.keys(e).length!==_)return!1;for(;_--;)if(h=p[_],!e.hasOwnProperty(h)||!n(t[h],e[h],r,o))return!1}return r.pop(),o.pop(),!0}function o(t,e){return n(t,e)}
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.
Object.defineProperty(r,"__esModule",{value:!0});var i=t("./types"),s=Object.prototype.toString;r.isEqual=o},{"./types":"core/util/types"}],"core/util/math":[function(t,e,r){"use strict";function n(t){for(;t<0;)t+=2*Math.PI;for(;t>2*Math.PI;)t-=2*Math.PI;return t}function o(t,e){return Math.abs(n(t-e))}function i(t,e,r,i){var s=n(t),a=o(e,r),l=o(e,s)<=a&&o(s,r)<=a;return"anticlock"==i?l:!l}function s(){return Math.random()}function a(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}function l(t,e){return Math.atan2(e[1]-t[1],e[0]-t[0])}function u(t,e){for(var r,n;;)if(r=s(),n=s(),n=(2*n-1)*Math.sqrt(2*(1/Math.E)),-4*r*r*Math.log(r)>=n*n)break;var o=n/r;return o=t+e*o}function c(t,e,r){return t>r?r:t<e?e:t}Object.defineProperty(r,"__esModule",{value:!0}),r.angle_norm=n,r.angle_dist=o,r.angle_between=i,r.random=s,r.randomIn=a,r.atan2=l,r.rnorm=u,r.clamp=c},{}],"core/util/object":[function(t,e,r){"use strict";function n(t){for(var e=Object.keys(t),r=e.length,n=new Array(r),o=0;o<r;o++)n[o]=t[e[o]];return n}function o(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0,o=e;n<o.length;n++){var i=o[n];for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}return t}function i(t){return o({},t)}function s(t,e){for(var r=Object.create(Object.prototype),n=u.concat([Object.keys(t),Object.keys(e)]),o=0,i=n;o<i.length;o++){var s=i[o],a=t.hasOwnProperty(s)?t[s]:[],l=e.hasOwnProperty(s)?e[s]:[];r[s]=u.union(a,l)}return r}function a(t){return Object.keys(t).length}function l(t){return 0===a(t)}Object.defineProperty(r,"__esModule",{value:!0});var u=t("./array");r.keys=Object.keys,r.values=n,r.extend=o,r.clone=i,r.merge=s,r.size=a,r.isEmpty=l},{"./array":"core/util/array"}],"core/util/proj4":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("proj4/lib/core");r.proj4=n;var o=t("proj4/lib/Proj"),i=t("proj4/lib/common/toPoint"),s=t("proj4/lib/defs"),a=t("proj4/lib/transform");n.defaultDatum="WGS84",n.WGS84=new o("WGS84"),n.Proj=o,n.toPoint=i,n.defs=s,n.transform=a,r.mercator=s("GOOGLE"),r.wgs84=s("WGS84")},{"proj4/lib/Proj":"proj4/lib/Proj","proj4/lib/common/toPoint":"proj4/lib/common/toPoint","proj4/lib/core":"proj4/lib/core","proj4/lib/defs":"proj4/lib/defs","proj4/lib/transform":"proj4/lib/transform"}],"core/util/projections":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./proj4");r.project_xy=function(t,e){var r,o,i,s,a,l,u,c;for(s=[],l=[],r=o=0,u=t.length;0<=u?o<u:o>u;r=0<=u?++o:--o)c=n.proj4(n.mercator,[t[r],e[r]]),i=c[0],a=c[1],s[r]=i,l[r]=a;return[s,l]},r.project_xsys=function(t,e){var n,o,i,s,a,l,u,c;for(s=[],l=[],n=o=0,u=t.length;0<=u?o<u:o>u;n=0<=u?++o:--o)c=r.project_xy(t[n],e[n]),i=c[0],a=c[1],s[n]=i,l[n]=a;return[s,l]}},{"./proj4":"core/util/proj4"}],"core/util/refs":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../has_props"),o=t("./types");r.create_ref=function(t){var e;if(!(t instanceof n.HasProps))throw new Error("can only create refs for HasProps subclasses");return e={type:t.type,id:t.id},null!=t._subtype&&(e.subtype=t._subtype),e},r.is_ref=function(t){var e;if(o.isObject(t)){if(e=Object.keys(t).sort(),2===e.length)return"id"===e[0]&&"type"===e[1];if(3===e.length)return"id"===e[0]&&"subtype"===e[1]&&"type"===e[2]}return!1},r.convert_to_ref=function(t){return o.isArray(t)?t.map(r.convert_to_ref):t instanceof n.HasProps?t.ref():void 0}},{"../has_props":"core/has_props","./types":"core/util/types"}],"core/util/selection":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.get_indices=function(t){var e;return e=t.selected,e["0d"].glyph?e["0d"].indices:e["1d"].indices.length>0?e["1d"].indices:e["2d"].indices.length>0?e["2d"].indices:[]}},{}],"core/util/serialization":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,i,s,a,l,u=t("./types");n={float32:Float32Array,float64:Float64Array,uint8:Uint8Array,int8:Int8Array,uint16:Uint16Array,int16:Int16Array,uint32:Uint32Array,int32:Int32Array},o={};for(a in n)l=n[a],o[l.name]=a;i=function(t){var e,r,n;return n=new Uint8Array(t),r=function(){var t,r,o;for(o=[],t=0,r=n.length;t<r;t++)e=n[t],o.push(String.fromCharCode(e));return o}(),btoa(r.join(""))},s=function(t){var e,r,n,o,i,s;for(e=atob(t),i=e.length,r=new Uint8Array(i),n=o=0,s=i;0<=s?o<s:o>s;n=0<=s?++o:--o)r[n]=e.charCodeAt(n);return r.buffer},r.decode_base64=function(t){var e,r,o,i;return r=s(t.__ndarray__),o=t.dtype,o in n&&(e=new n[o](r)),i=t.shape,[e,i]},r.encode_base64=function(t,e){var r,n,s;return r=i(t.buffer),s=o[t.constructor.name],n={__ndarray__:r,shape:e,dtype:s}},r.decode_column_data=function(t){var e,n,o,i,s,c,_,p,h,d;c={},o={};for(a in t)if(l=t[a],u.isArray(l)){for(n=[],d=[],i=0,s=l.length;i<s;i++)e=l[i],u.isObject(e)&&"__ndarray__"in e?(_=r.decode_base64(e),e=_[0],h=_[1],d.push(h),n.push(e)):u.isArray(e)&&(d.push([]),n.push(e));d.length>0?(c[a]=n,o[a]=d):c[a]=l}else u.isObject(l)&&"__ndarray__"in l?(p=r.decode_base64(l),e=p[0],h=p[1],c[a]=e,o[a]=h):(c[a]=l,o[a]=[]);return[c,o]},r.encode_column_data=function(t,e){var n,o,i,s,c,_,p;s={};for(a in t){if(l=t[a],(null!=l?l.buffer:void 0)instanceof ArrayBuffer)l=r.encode_base64(l,null!=e?e[a]:void 0);else if(u.isArray(l)){for(i=[],n=o=0,c=l.length;0<=c?o<c:o>c;n=0<=c?++o:--o)(null!=(_=l[n])?_.buffer:void 0)instanceof ArrayBuffer?i.push(r.encode_base64(l[n],null!=e&&null!=(p=e[a])?p[n]:void 0)):i.push(l[n]);l=i}s[a]=l}return s}},{"./types":"core/util/types"}],"core/util/spatial":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("tslib"),o=t("rbush"),i=function(){function t(){}return t}();r.SpatialIndex=i;var s=function(t){function e(e){var r=t.call(this)||this;return r.index=o(),r.index.load(e),r}return n.__extends(e,t),Object.defineProperty(e.prototype,"bbox",{get:function(){var t=this.index.toJSON(),e=t.minX,r=t.minY,n=t.maxX,o=t.maxY;return{minX:e,minY:r,maxX:n,maxY:o}},enumerable:!0,configurable:!0}),e.prototype.search=function(t){return this.index.search(t)},e.prototype.indices=function(t){for(var e=this.search(t),r=e.length,n=new Array(r),o=0;o<r;o++)n[o]=e[o].i;return n},e}(i);r.RBush=s},{rbush:"rbush",tslib:"tslib/tslib"}],"core/util/string":[function(t,e,r){"use strict";function n(t,e,r){return void 0===r&&(r=0),t.substr(r,e.length)==e}function o(){for(var t=new Array(32),e="0123456789ABCDEF",r=0;r<32;r++)t[r]=e.substr(Math.floor(16*Math.random()),1);return t[12]="4",t[16]=e.substr(3&t[16].charCodeAt(0)|8,1),t.join("")}function i(t){var e=a.settings.dev?"j"+l++:o();return null!=t?t+"-"+e:e}function s(t){return t.replace(/(?:[&<>"'`])/g,function(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#x27;";case"`":return"&#x60;";default:return t}})}Object.defineProperty(r,"__esModule",{value:!0});var a=t("../settings");r.startsWith=n,r.uuid4=o;var l=1e3;r.uniqueId=i,r.escape=s},{"../settings":"core/settings"}],"core/util/svg_colors":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.indianred="#CD5C5C",r.lightcoral="#F08080",r.salmon="#FA8072",r.darksalmon="#E9967A",r.lightsalmon="#FFA07A",r.crimson="#DC143C",r.red="#FF0000",r.firebrick="#B22222",r.darkred="#8B0000",r.pink="#FFC0CB",r.lightpink="#FFB6C1",r.hotpink="#FF69B4",r.deeppink="#FF1493",r.mediumvioletred="#C71585",r.palevioletred="#DB7093",r.coral="#FF7F50",r.tomato="#FF6347",r.orangered="#FF4500",r.darkorange="#FF8C00",r.orange="#FFA500",r.gold="#FFD700",r.yellow="#FFFF00",r.lightyellow="#FFFFE0",r.lemonchiffon="#FFFACD",r.lightgoldenrodyellow="#FAFAD2",r.papayawhip="#FFEFD5",r.moccasin="#FFE4B5",r.peachpuff="#FFDAB9",r.palegoldenrod="#EEE8AA",r.khaki="#F0E68C",r.darkkhaki="#BDB76B",r.lavender="#E6E6FA",r.thistle="#D8BFD8",r.plum="#DDA0DD",r.violet="#EE82EE",r.orchid="#DA70D6",r.fuchsia="#FF00FF",r.magenta="#FF00FF",r.mediumorchid="#BA55D3",r.mediumpurple="#9370DB",r.blueviolet="#8A2BE2",r.darkviolet="#9400D3",r.darkorchid="#9932CC",r.darkmagenta="#8B008B",r.purple="#800080",r.indigo="#4B0082",r.slateblue="#6A5ACD",r.darkslateblue="#483D8B",r.mediumslateblue="#7B68EE",r.greenyellow="#ADFF2F",r.chartreuse="#7FFF00",r.lawngreen="#7CFC00",r.lime="#00FF00",r.limegreen="#32CD32",r.palegreen="#98FB98",r.lightgreen="#90EE90",r.mediumspringgreen="#00FA9A",r.springgreen="#00FF7F",r.mediumseagreen="#3CB371",r.seagreen="#2E8B57",r.forestgreen="#228B22",r.green="#008000",r.darkgreen="#006400",r.yellowgreen="#9ACD32",r.olivedrab="#6B8E23",r.olive="#808000",r.darkolivegreen="#556B2F",r.mediumaquamarine="#66CDAA",r.darkseagreen="#8FBC8F",r.lightseagreen="#20B2AA",r.darkcyan="#008B8B",r.teal="#008080",r.aqua="#00FFFF",r.cyan="#00FFFF",r.lightcyan="#E0FFFF",r.paleturquoise="#AFEEEE",r.aquamarine="#7FFFD4",r.turquoise="#40E0D0",r.mediumturquoise="#48D1CC",r.darkturquoise="#00CED1",r.cadetblue="#5F9EA0",r.steelblue="#4682B4",r.lightsteelblue="#B0C4DE",r.powderblue="#B0E0E6",r.lightblue="#ADD8E6",r.skyblue="#87CEEB",r.lightskyblue="#87CEFA",r.deepskyblue="#00BFFF",r.dodgerblue="#1E90FF",r.cornflowerblue="#6495ED",r.royalblue="#4169E1",r.blue="#0000FF",r.mediumblue="#0000CD",r.darkblue="#00008B",r.navy="#000080",r.midnightblue="#191970",r.cornsilk="#FFF8DC",r.blanchedalmond="#FFEBCD",r.bisque="#FFE4C4",r.navajowhite="#FFDEAD",r.wheat="#F5DEB3",r.burlywood="#DEB887",r.tan="#D2B48C",r.rosybrown="#BC8F8F",r.sandybrown="#F4A460",r.goldenrod="#DAA520",r.darkgoldenrod="#B8860B",r.peru="#CD853F",r.chocolate="#D2691E",r.saddlebrown="#8B4513",r.sienna="#A0522D",r.brown="#A52A2A",r.maroon="#800000",r.white="#FFFFFF",r.snow="#FFFAFA",r.honeydew="#F0FFF0",r.mintcream="#F5FFFA",r.azure="#F0FFFF",r.aliceblue="#F0F8FF",r.ghostwhite="#F8F8FF",r.whitesmoke="#F5F5F5",r.seashell="#FFF5EE",r.beige="#F5F5DC",r.oldlace="#FDF5E6",r.floralwhite="#FFFAF0",r.ivory="#FFFFF0",r.antiquewhite="#FAEBD7",r.linen="#FAF0E6",r.lavenderblush="#FFF0F5",r.mistyrose="#FFE4E1",r.gainsboro="#DCDCDC",r.lightgray="#D3D3D3",r.lightgrey="#D3D3D3",r.silver="#C0C0C0",r.darkgray="#A9A9A9",r.darkgrey="#A9A9A9",r.gray="#808080",r.grey="#808080",r.dimgray="#696969",r.dimgrey="#696969",r.lightslategray="#778899",r.lightslategrey="#778899",r.slategray="#708090",r.slategrey="#708090",r.darkslategray="#2F4F4F",r.darkslategrey="#2F4F4F",r.black="#000000"},{}],"core/util/templating":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=t("sprintf"),i=t("numbro"),s=t("timezone"),a=t("./string"),l=t("./types");n=function(t){var e;return l.isNumber(t)?(e=function(){switch(!1){case Math.floor(t)!==t:return"%d";case!(Math.abs(t)>.1&&Math.abs(t)<1e3):return"%0.3f";default:return"%0.3e"}}(),o.sprintf(e,t)):""+t},r.replace_placeholders=function(t,e,r,l,u){return null==u&&(u={}),t=t.replace(/(^|[^\$])\$(\w+)/g,function(t){return function(t,e,r){return e+"@$"+r}}(this)),t=t.replace(/(^|[^@])@(?:(\$?\w+)|{([^{}]+)})(?:{([^{}]+)})?/g,function(t){return function(t,c,_,p,h){var d,f,m;if(_=null!=p?p:_,m="$"===_[0]?u[_.substring(1)]:null!=(d=e.get_column(_))?d[r]:void 0,f=null,null==m)f="???";else{if("safe"===h)return""+c+m;if(null!=h)if(null!=l&&_ in l)if("numeral"===l[_])f=i.format(m,h);else if("datetime"===l[_])f=s(m,h);else{if("printf"!==l[_])throw new Error("Unknown tooltip field formatter type '"+l[_]+"'");f=o(h,m)}else f=i.format(m,h);else f=n(m)}return f=""+c+a.escape(f)}}(this))}},{"./string":"core/util/string","./types":"core/util/types",numbro:"numbro",sprintf:"sprintf",timezone:"timezone/index"}],"core/util/text":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=t("../dom");n={},r.get_text_height=function(t){var e,r,i,s;if(null!=n[t])return n[t];s=o.span({style:{font:t}},"Hg"),e=o.div({style:{display:"inline-block",width:"1px",height:"0px"}}),r=o.div({},s,e),document.body.appendChild(r);try{i={},e.style.verticalAlign="baseline",i.ascent=o.offset(e).top-o.offset(s).top,e.style.verticalAlign="bottom",i.height=o.offset(e).top-o.offset(s).top,i.descent=i.height-i.ascent}finally{document.body.removeChild(r)}return n[t]=i,i}},{"../dom":"core/dom"}],"core/util/throttle":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o;n=function(t){return t()},o=("undefined"!=typeof window&&null!==window?window.requestAnimationFrame:void 0)||("undefined"!=typeof window&&null!==window?window.mozRequestAnimationFrame:void 0)||("undefined"!=typeof window&&null!==window?window.webkitRequestAnimationFrame:void 0)||("undefined"!=typeof window&&null!==window?window.msRequestAnimationFrame:void 0)||n,r.throttle=function(t,e){var r,n,i,s,a,l,u,c;return l=[null,null,null,null],n=l[0],r=l[1],c=l[2],u=l[3],a=0,s=!1,i=function(){return a=new Date,c=null,s=!1,u=t.apply(n,r)},function(){var t,l;return t=new Date,l=e-(t-a),n=this,r=arguments,l<=0&&!s?(clearTimeout(c),s=!0,o(i)):c||s||(c=setTimeout(function(){return o(i)},l)),u}}},{}],"core/util/types":[function(t,e,r){"use strict";function n(t){return t===!0||t===!1||"[object Boolean]"===c.call(t)}function o(t){return"[object Number]"===c.call(t)}function i(t){return"[object String]"===c.call(t)}function s(t){return o(t)&&t!==+t}function a(t){return"[object Function]"===c.call(t)}function l(t){return Array.isArray(t)}function u(t){var e=typeof t;return"function"===e||"object"===e&&!!t}
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.
Object.defineProperty(r,"__esModule",{value:!0});var c=Object.prototype.toString;r.isBoolean=n,r.isNumber=o,r.isString=i,r.isStrictNaN=s,r.isFunction=a,r.isArray=l,r.isObject=u},{}],"core/util/wheel":[function(t,e,r){"use strict";function n(t){var e=getComputedStyle(t).fontSize;return null!=e?parseInt(e,10):null}function o(t){var e=t.offsetParent||document.body;return n(e)||n(t)||16}function i(t){return t.clientHeight}function s(t){var e=-t.deltaY;if(t.target instanceof HTMLElement)switch(t.deltaMode){case t.DOM_DELTA_LINE:e*=o(t.target);break;case t.DOM_DELTA_PAGE:e*=i(t.target)}return e}/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
Object.defineProperty(r,"__esModule",{value:!0}),r.getDeltaY=s},{}],"core/util/zoom":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./math");r.scale_highlow=function(t,e,r){var n,o,i,s,a,l;return null==r&&(r=null),i=[t.start,t.end],o=i[0],n=i[1],s=null!=r?r:(n+o)/2,a=o-(o-s)*e,l=n-(n-s)*e,[a,l]},r.get_info=function(t,e){var r,n,o,i,s,a,l,u;l=e[0],u=e[1],n={};for(o in t)s=t[o],i=s.v_invert([l,u],!0),a=i[0],r=i[1],n[o]={start:a,end:r};return n},r.scale_range=function(t,e,o,i,s){var a,l,u,c,_,p,h,d,f,m;return null==o&&(o=!0),null==i&&(i=!0),null==s&&(s=null),e=n.clamp(e,-.9,.9),a=o?e:0,l=r.scale_highlow(t.h_range,a,null!=s?s.x:void 0),_=l[0],p=l[1],f=r.get_info(t.xscales,[_,p]),c=i?e:0,u=r.scale_highlow(t.v_range,c,null!=s?s.y:void 0),h=u[0],d=u[1],m=r.get_info(t.yscales,[h,d]),{xrs:f,yrs:m,factor:e}}},{"./math":"core/util/math"}],"core/view":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./signaling"),s=t("./util/string");r.View=function(){function t(t){var e;if(null==t&&(t={}),this.removed=new i.Signal(this,"removed"),null==t.model)throw new Error("model of a view wasn't configured");this.model=t.model,this._parent=t.parent,this.id=null!=(e=t.id)?e:s.uniqueId(),this.initialize(t)}return n(t.prototype,i.Signalable),t.getters=function(t){var e,r,n;n=[];for(r in t)e=t[r],n.push(Object.defineProperty(this.prototype,r,{get:e}));return n},t.prototype.initialize=function(t){},t.prototype.remove=function(){return this._parent=void 0,this.disconnect_signals(),this.removed.emit()},t.prototype.toString=function(){return this.model.type+"View("+this.id+")"},t.getters({parent:function(){if(void 0!==this._parent)return this._parent;throw new Error("parent of a view wasn't configured")},is_root:function(){return null===this.parent},root:function(){return this.is_root?this:this.parent.root}}),t.prototype.connect_signals=function(){},t.prototype.disconnect_signals=function(){return i.Signal.disconnectReceiver(this)},t}()},{"./signaling":"core/signaling","./util/string":"core/util/string"}],"core/visuals":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=t("./property_mixins"),a=t("./util/color");n=function(){function t(t,e){var r,n,o,i,s;for(null==e&&(e=""),this.obj=t,this.prefix=e,this.cache={},n=t.properties[e+this.do_attr].spec,this.doit=null!==n.value,s=this.attrs,o=0,i=s.length;o<i;o++)r=s[o],this[r]=t.properties[e+r]}return t.prototype.warm_cache=function(t){var e,r,n,o,i,s;for(i=this.attrs,s=[],r=0,n=i.length;r<n;r++)e=i[r],o=this.obj.properties[this.prefix+e],void 0!==o.spec.value?s.push(this.cache[e]=o.spec.value):s.push(this.cache[e+"_array"]=o.array(t));return s},t.prototype.cache_select=function(t,e){var r;return r=this.obj.properties[this.prefix+t],void 0!==r.spec.value?this.cache[t]=r.spec.value:this.cache[t]=this.cache[t+"_array"][e]},t}(),r.Line=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.attrs=Object.keys(s.line()),e.prototype.do_attr="line_color",e.prototype.set_value=function(t){return t.strokeStyle=this.line_color.value(),t.globalAlpha=this.line_alpha.value(),t.lineWidth=this.line_width.value(),t.lineJoin=this.line_join.value(),t.lineCap=this.line_cap.value(),t.setLineDash(this.line_dash.value()),t.setLineDashOffset(this.line_dash_offset.value())},e.prototype.set_vectorize=function(t,e){if(this.cache_select("line_color",e),t.strokeStyle!==this.cache.line_color&&(t.strokeStyle=this.cache.line_color),this.cache_select("line_alpha",e),t.globalAlpha!==this.cache.line_alpha&&(t.globalAlpha=this.cache.line_alpha),this.cache_select("line_width",e),t.lineWidth!==this.cache.line_width&&(t.lineWidth=this.cache.line_width),this.cache_select("line_join",e),t.lineJoin!==this.cache.line_join&&(t.lineJoin=this.cache.line_join),this.cache_select("line_cap",e),t.lineCap!==this.cache.line_cap&&(t.lineCap=this.cache.line_cap),this.cache_select("line_dash",e),t.getLineDash()!==this.cache.line_dash&&t.setLineDash(this.cache.line_dash),this.cache_select("line_dash_offset",e),t.getLineDashOffset()!==this.cache.line_dash_offset)return t.setLineDashOffset(this.cache.line_dash_offset)},e.prototype.color_value=function(){var t;return t=a.color2rgba(this.line_color.value(),this.line_alpha.value()),"rgba("+255*t[0]+","+255*t[1]+","+255*t[2]+","+t[3]+")"},e}(n),r.Fill=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.attrs=Object.keys(s.fill()),e.prototype.do_attr="fill_color",e.prototype.set_value=function(t){return t.fillStyle=this.fill_color.value(),t.globalAlpha=this.fill_alpha.value()},e.prototype.set_vectorize=function(t,e){if(this.cache_select("fill_color",e),t.fillStyle!==this.cache.fill_color&&(t.fillStyle=this.cache.fill_color),this.cache_select("fill_alpha",e),t.globalAlpha!==this.cache.fill_alpha)return t.globalAlpha=this.cache.fill_alpha},e.prototype.color_value=function(){var t;return t=a.color2rgba(this.fill_color.value(),this.fill_alpha.value()),"rgba("+255*t[0]+","+255*t[1]+","+255*t[2]+","+t[3]+")"},e}(n),r.Text=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.attrs=Object.keys(s.text()),e.prototype.do_attr="text_color",e.prototype.cache_select=function(t,r){var n;return"font"===t?(n=e.__super__.cache_select.call(this,"text_font_style",r)+" "+e.__super__.cache_select.call(this,"text_font_size",r)+" "+e.__super__.cache_select.call(this,"text_font",r),this.cache.font=n):e.__super__.cache_select.call(this,t,r)},e.prototype.font_value=function(){var t,e,r;return t=this.text_font.value(),e=this.text_font_size.value(),r=this.text_font_style.value(),r+" "+e+" "+t},e.prototype.color_value=function(){var t;return t=a.color2rgba(this.text_color.value(),this.text_alpha.value()),"rgba("+255*t[0]+","+255*t[1]+","+255*t[2]+","+t[3]+")"},e.prototype.set_value=function(t){return t.font=this.font_value(),t.fillStyle=this.text_color.value(),t.globalAlpha=this.text_alpha.value(),t.textAlign=this.text_align.value(),t.textBaseline=this.text_baseline.value()},e.prototype.set_vectorize=function(t,e){if(this.cache_select("font",e),t.font!==this.cache.font&&(t.font=this.cache.font),this.cache_select("text_color",e),t.fillStyle!==this.cache.text_color&&(t.fillStyle=this.cache.text_color),this.cache_select("text_alpha",e),t.globalAlpha!==this.cache.text_alpha&&(t.globalAlpha=this.cache.text_alpha),this.cache_select("text_align",e),t.textAlign!==this.cache.text_align&&(t.textAlign=this.cache.text_align),this.cache_select("text_baseline",e),t.textBaseline!==this.cache.text_baseline)return t.textBaseline=this.cache.text_baseline},e}(n),r.Visuals=function(){function t(t){var e,n,o,i,s,a,l,u,c;for(a=t.mixins,n=0,o=a.length;n<o;n++)c=a[n],l=c.split(":"),i=l[0],s=null!=(u=l[1])?u:"",e=function(){switch(i){case"line":return r.Line;case"fill":return r.Fill;case"text":return r.Text}}(),this[s+i]=new e(t,s)}return t.prototype.warm_cache=function(t){var e,r,o,s;o=this,s=[];for(e in o)i.call(o,e)&&(r=o[e],r instanceof n?s.push(r.warm_cache(t)):s.push(void 0));return s},t}()},{"./property_mixins":"core/property_mixins","./util/color":"core/util/color"}],document:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},a=t("./base"),l=t("./version"),u=t("./core/logging"),c=t("./core/has_props"),_=t("./core/signaling"),p=t("./core/util/refs"),h=t("./core/util/serialization"),d=t("./core/util/data_structures"),f=t("./core/util/array"),m=t("./core/util/object"),y=t("./core/util/eq"),g=t("./core/util/types"),v=t("./models/layouts/layout_dom"),b=t("./models/sources/column_data_source");n=function(){function t(t){this.document=t,this.session=null,this.subscribed_models=new d.Set}return t.prototype.send_event=function(t){var e;return null!=(e=this.session)?e.send_event(t):void 0},t.prototype.trigger=function(t){var e,r,n,o,i,s;for(i=this.subscribed_models.values,s=[],e=0,r=i.length;e<r;e++)o=i[e],null!==t.model_id&&t.model_id!==o||(n=this.document._all_models[o],s.push(null!=n?n._process_event(t):void 0));return s},t}(),r.DocumentChangedEvent=function(){function t(t){this.document=t}return t}(),r.ModelChangedEvent=function(t){function e(t,r,n,o,i,s){this.document=t,this.model=r,this.attr=n,this.old=o,this.new_=i,this.setter_id=s,e.__super__.constructor.call(this,this.document)}return o(e,t),e.prototype.json=function(t){var e,r,n,o;if("id"===this.attr)throw u.logger.warn("'id' field is immutable and should never be in a ModelChangedEvent ",this),new Error("'id' field should never change, whatever code just set it is wrong");r=this.new_,n=this.model.constructor._value_to_json(this.attr,r,this.model),o={},c.HasProps._value_record_references(r,o,!0),this.model.id in o&&this.model!==r&&delete o[this.model.id];for(e in o)t[e]=o[e];return{kind:"ModelChanged",model:this.model.ref(),attr:this.attr,"new":n}},e}(r.DocumentChangedEvent),r.TitleChangedEvent=function(t){function e(t,r,n){this.document=t,this.title=r,this.setter_id=n,e.__super__.constructor.call(this,this.document)}return o(e,t),e.prototype.json=function(t){return{kind:"TitleChanged",title:this.title}},e}(r.DocumentChangedEvent),r.RootAddedEvent=function(t){function e(t,r,n){this.document=t,this.model=r,this.setter_id=n,e.__super__.constructor.call(this,this.document)}return o(e,t),e.prototype.json=function(t){return c.HasProps._value_record_references(this.model,t,!0),{kind:"RootAdded",model:this.model.ref()}},e}(r.DocumentChangedEvent),r.RootRemovedEvent=function(t){function e(t,r,n){this.document=t,this.model=r,this.setter_id=n,e.__super__.constructor.call(this,this.document)}return o(e,t),e.prototype.json=function(t){return{kind:"RootRemoved",model:this.model.ref()}},e}(r.DocumentChangedEvent),r.documents=[],r.DEFAULT_TITLE="Bokeh Application",r.Document=function(){function t(){r.documents.push(this),this._title=r.DEFAULT_TITLE,this._roots=[],this._all_models={},this._all_models_by_name=new d.MultiDict,this._all_models_freeze_count=0,this._callbacks=[],this.event_manager=new n(this),this.idle=new _.Signal(this,"idle"),this._idle_roots=new WeakMap}return Object.defineProperty(t.prototype,"layoutables",{get:function(){var t,e,r,n,o;for(r=this._roots,n=[],t=0,e=r.length;t<e;t++)o=r[t],o instanceof v.LayoutDOM&&n.push(o);return n}}),Object.defineProperty(t.prototype,"is_idle",{get:function(){var t,e,r,n;for(r=this.layoutables,t=0,e=r.length;t<e;t++)if(n=r[t],!this._idle_roots.has(n))return!1;return!0}}),t.prototype.notify_idle=function(t){if(this._idle_roots.set(t,!0),this.is_idle)return this.idle.emit()},t.prototype.clear=function(){var t;this._push_all_models_freeze();try{for(t=[];this._roots.length>0;)t.push(this.remove_root(this._roots[0]));return t}finally{this._pop_all_models_freeze()}},t.prototype.destructively_move=function(t){var e,r,n,o,i,s,a,l,u;if(t===this)throw new Error("Attempted to overwrite a document with itself");for(t.clear(),u=[],l=this._roots,e=0,n=l.length;e<n;e++)a=l[e],u.push(a);for(this.clear(),r=0,o=u.length;r<o;r++)if(a=u[r],null!==a.document)throw new Error("Somehow we didn't detach "+a);if(0!==Object.keys(this._all_models).length)throw new Error("@_all_models still had stuff in it: "+this._all_models);for(s=0,i=u.length;s<i;s++)a=u[s],t.add_root(a);return t.set_title(this._title)},t.prototype._push_all_models_freeze=function(){return this._all_models_freeze_count+=1},t.prototype._pop_all_models_freeze=function(){if(this._all_models_freeze_count-=1,0===this._all_models_freeze_count)return this._recompute_all_models()},t.prototype._invalidate_all_models=function(){if(u.logger.debug("invalidating document models"),0===this._all_models_freeze_count)return this._recompute_all_models()},t.prototype._recompute_all_models=function(){var t,e,r,n,o,i,s,a,l,u,c,_,p,h,f,y,g,v,b,w,x,k;for(_=new d.Set,g=this._roots,r=0,o=g.length;r<o;r++)f=g[r],_=_.union(f.references());for(h=new d.Set(m.values(this._all_models)),k=h.diff(_),x=_.diff(h),y={},v=_.values,n=0,i=v.length;n<i;n++)l=v[n],y[l.id]=l;for(b=k.values,u=0,s=b.length;u<s;u++)e=b[u],e.detach_document(),c=e.name,null!==c&&this._all_models_by_name.remove_value(c,e);for(w=x.values,p=0,a=w.length;p<a;p++)t=w[p],t.attach_document(this),c=t.name,null!==c&&this._all_models_by_name.add_value(c,t);return this._all_models=y},t.prototype.roots=function(){return this._roots},t.prototype.add_root=function(t,e){if(u.logger.debug("Adding root: "+t),!(s.call(this._roots,t)>=0)){this._push_all_models_freeze();try{this._roots.push(t)}finally{this._pop_all_models_freeze()}return this._trigger_on_change(new r.RootAddedEvent(this,t,e))}},t.prototype.remove_root=function(t,e){var n;if(n=this._roots.indexOf(t),!(n<0)){this._push_all_models_freeze();try{this._roots.splice(n,1)}finally{this._pop_all_models_freeze()}return this._trigger_on_change(new r.RootRemovedEvent(this,t,e))}},t.prototype.title=function(){return this._title},t.prototype.set_title=function(t,e){if(t!==this._title)return this._title=t,this._trigger_on_change(new r.TitleChangedEvent(this,t,e))},t.prototype.get_model_by_id=function(t){return t in this._all_models?this._all_models[t]:null},t.prototype.get_model_by_name=function(t){return this._all_models_by_name.get_one(t,"Multiple models are named '"+t+"'")},t.prototype.on_change=function(t){if(!(s.call(this._callbacks,t)>=0))return this._callbacks.push(t)},t.prototype.remove_on_change=function(t){var e;if(e=this._callbacks.indexOf(t),e>=0)return this._callbacks.splice(e,1)},t.prototype._trigger_on_change=function(t){var e,r,n,o,i;for(o=this._callbacks,i=[],r=0,n=o.length;r<n;r++)e=o[r],i.push(e(t));return i},t.prototype._notify_change=function(t,e,n,o,i){return"name"===e&&(this._all_models_by_name.remove_value(n,t),null!==o&&this._all_models_by_name.add_value(o,t)),this._trigger_on_change(new r.ModelChangedEvent(this,t,e,n,o,null!=i?i.setter_id:void 0))},t._references_json=function(t,e){var r,n,o,i,s;for(null==e&&(e=!0),s=[],r=0,n=t.length;r<n;r++)o=t[r],i=o.ref(),i.attributes=o.attributes_as_json(e),delete i.attributes.id,s.push(i);return s},t._instantiate_object=function(t,e,r){var n,o;return n=m.extend({},r,{id:t}),new(o=a.Models(e))(n,{silent:!0,defer_initialization:!0})},t._instantiate_references_json=function(e,r){var n,o,i,s,a,l,u,c;for(c={},o=0,i=e.length;o<i;o++)s=e[o],l=s.id,u=s.type,a=s.attributes,l in r?n=r[l]:(n=t._instantiate_object(l,u,a),"subtype"in s&&n.set_subtype(s.subtype)),c[n.id]=n;return c},t._resolve_refs=function(t,e,r){var n,o,i;return i=function(t){if(p.is_ref(t)){if(t.id in e)return e[t.id];if(t.id in r)return r[t.id];throw new Error("reference "+JSON.stringify(t)+" isn't known (not in Document?)")}return g.isArray(t)?n(t):g.isObject(t)?o(t):t},o=function(t){var e,r,n;r={};for(e in t)n=t[e],r[e]=i(n);return r},n=function(t){var e,r,n,o;for(n=[],e=0,r=t.length;e<r;e++)o=t[e],n.push(i(o));return n},i(t)},t._initialize_references_json=function(e,r,n){var o,i,s,a,l,u,_,p,h;for(p={},s=0,a=e.length;s<a;s++)l=e[s],_=l.id,u=l.attributes,h=!1,i=_ in r?r[_]:(h=!0,n[_]),u=t._resolve_refs(u,r,n),p[i.id]=[i,u,h];return o=function(t,e){var r,n,o,i,s;r={},n=function(e,o){var i,s,a,l,u,_,p,d,f,m;if(e instanceof c.HasProps){if(!(e.id in r)&&e.id in t){r[e.id]=!0,p=t[e.id],m=p[0],s=p[1],h=p[2];for(i in s)a=s[i],n(a,o);return o(e,s,h)}}else{if(g.isArray(e)){for(d=[],u=0,_=e.length;u<_;u++)a=e[u],d.push(n(a,o));return d}if(g.isObject(e)){f=[];for(l in e)a=e[l],f.push(n(a,o));return f}}},i=[];for(o in t)s=t[o],i.push(n(s[0],e));return i},o(p,function(t,e,r){if(r)return t.setv(e,{silent:!0})}),o(p,function(t,e,r){if(r)return t.finalize(e)})},t._event_for_attribute_change=function(t,e,r,n,o){var i,s;return i=n.get_model_by_id(t.id),i.attribute_is_serializable(e)?(s={kind:"ModelChanged",model:{id:t.id,type:t.type},attr:e,"new":r},c.HasProps._json_record_references(n,r,o,!0),s):null},t._events_to_sync_objects=function(e,r,n,o){var i,s,a,l,c,_,p,h,d,m,g,v,b,w,x;for(a=Object.keys(e.attributes),x=Object.keys(r.attributes),b=f.difference(a,x),i=f.difference(x,a),w=f.intersection(a,x),s=[],l=0,p=b.length;l<p;l++)c=b[l],u.logger.warn("Server sent key "+c+" but we don't seem to have it in our JSON");for(_=0,h=i.length;_<h;_++)c=i[_],g=r.attributes[c],s.push(t._event_for_attribute_change(e,c,g,n,o));for(m=0,d=w.length;m<d;m++)c=w[m],v=e.attributes[c],g=r.attributes[c],null===v&&null===g||(null===v||null===g?s.push(t._event_for_attribute_change(e,c,g,n,o)):y.isEqual(v,g)||s.push(t._event_for_attribute_change(e,c,g,n,o)));return s.filter(function(t){return null!==t})},t._compute_patch_since_json=function(e,r){var n,o,i,s,a,l,u,c,_,p,h,d,y,g,v,b,w,x,k,M,j,S;for(w=r.to_json(l=!1),b=function(t){var e,r,n,o,i;for(i={},o=t.roots.references,e=0,r=o.length;e<r;e++)n=o[e],i[n.id]=n;return i},o=b(e),s={},i=[],y=e.roots.root_ids,u=0,_=y.length;u<_;u++)d=y[u],s[d]=o[d],i.push(d);for(x=b(w),M={},k=[],g=w.roots.root_ids,c=0,p=g.length;c<p;c++)d=g[c],M[d]=x[d],k.push(d);if(i.sort(),k.sort(),f.difference(i,k).length>0||f.difference(k,i).length>0)throw new Error("Not implemented: computing add/remove of document roots");S={},n=[],v=r._all_models;for(a in v)h=v[a],a in o&&(j=t._events_to_sync_objects(o[a],x[a],r,S),n=n.concat(j));return{events:n,references:t._references_json(m.values(S),l=!1)}},t.prototype.to_json_string=function(t){return null==t&&(t=!0),JSON.stringify(this.to_json(t))},t.prototype.to_json=function(e){var r,n,o,i,s,a;for(null==e&&(e=!0),s=[],i=this._roots,r=0,n=i.length;r<n;r++)o=i[r],s.push(o.id);return a=m.values(this._all_models),{title:this._title,roots:{root_ids:s,references:t._references_json(a,e)}}},t.from_json_string=function(e){var r;if(null===e||null==e)throw new Error("JSON string is "+typeof e);return r=JSON.parse(e),t.from_json(r)},t.from_json=function(e){var r,n,o,i,s,a,c,_,p,h,d;if(u.logger.debug("Creating Document from JSON"),"object"!=typeof e)throw new Error("JSON object has wrong type "+typeof e);for(s=e.version,n=s.indexOf("+")!==-1||s.indexOf("-")!==-1,d="Library versions: JS ("+l.version+")  /  Python ("+s+")",n||l.version===s?u.logger.debug(d):(u.logger.warn("JS/Python version mismatch"),u.logger.warn(d)),h=e.roots,p=h.root_ids,_=h.references,c=t._instantiate_references_json(_,{}),t._initialize_references_json(_,{},c),r=new t,o=0,i=p.length;o<i;o++)a=p[o],r.add_root(c[a]);return r.set_title(e.title),r},t.prototype.replace_with_json=function(e){var r;return r=t.from_json(e),r.destructively_move(this)},t.prototype.create_json_patch_string=function(t){return JSON.stringify(this.create_json_patch(t))},t.prototype.create_json_patch=function(e){var r,n,o,i,s,a;for(s={},o=[],n=0,i=e.length;n<i;n++){if(r=e[n],r.document!==this)throw u.logger.warn("Cannot create a patch using events from a different document, event had ",r.document," we are ",this),new Error("Cannot create a patch using events from a different document");o.push(r.json(s))}return a={events:o,references:t._references_json(m.values(s))}},t.prototype.apply_json_patch_string=function(t){return this.apply_json_patch(JSON.parse(t))},t.prototype.apply_json_patch=function(e,r){var n,o,i,s,a,l,c,_,p,d,f,m,y,g,v,w,x,k,M,j,S,T,O,P,A,E,z,C;for(T=e.references,l=e.events,S=t._instantiate_references_json(T,this._all_models),_=0,d=l.length;_<d;_++)if(a=l[_],"model"in a)if(m=a.model.id,m in this._all_models)S[m]=this._all_models[m];else if(!(m in S))throw u.logger.warn("Got an event for unknown model ",a.model),new Error("event model wasn't known");w={},g={};for(c in S)C=S[c],c in this._all_models?w[c]=C:g[c]=C;for(t._initialize_references_json(T,w,g),O=[],p=0,f=l.length;p<f;p++)switch(a=l[p],a.kind){case"ModelChanged":if(x=a.model.id,!(x in this._all_models))throw new Error("Cannot apply patch to "+x+" which is not in the document");k=this._all_models[x],n=a.attr,y=a.model.type,"data"===n&&"ColumnDataSource"===y?(j=h.decode_column_data(a["new"]),s=j[0],z=j[1],O.push(k.setv({_shapes:z,data:s},{setter_id:r}))):(C=t._resolve_refs(a["new"],w,g),O.push(k.setv((v={},v[""+n]=C,v),{setter_id:r})));break;case"ColumnsStreamed":if(i=a.column_source.id,!(i in this._all_models))throw new Error("Cannot stream to "+i+" which is not in the document");if(o=this._all_models[i],!(o instanceof b.ColumnDataSource))throw new Error("Cannot stream to non-ColumnDataSource");s=a.data,P=a.rollover,O.push(o.stream(s,P));break;case"ColumnsPatched":if(i=a.column_source.id,!(i in this._all_models))throw new Error("Cannot patch "+i+" which is not in the document");if(o=this._all_models[i],!(o instanceof b.ColumnDataSource))throw new Error("Cannot patch non-ColumnDataSource");M=a.patches,O.push(o.patch(M));break;case"RootAdded":A=a.model.id,E=S[A],O.push(this.add_root(E,r));break;case"RootRemoved":A=a.model.id,E=S[A],O.push(this.remove_root(E,r));break;case"TitleChanged":O.push(this.set_title(a.title,r));break;default:throw new Error("Unknown patch event "+JSON.stringify(a))}return O},t}()},{"./base":"base","./core/has_props":"core/has_props","./core/logging":"core/logging","./core/signaling":"core/signaling","./core/util/array":"core/util/array","./core/util/data_structures":"core/util/data_structures","./core/util/eq":"core/util/eq","./core/util/object":"core/util/object","./core/util/refs":"core/util/refs","./core/util/serialization":"core/util/serialization","./core/util/types":"core/util/types","./models/layouts/layout_dom":"models/layouts/layout_dom","./models/sources/column_data_source":"models/sources/column_data_source","./version":"version"}],embed:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,i,s,a,l,u,c,_,p,h,d=t("./base"),f=t("./client"),m=t("./core/logging"),y=t("./document"),g=t("./core/dom"),v=t("lodash");r.BOKEH_ROOT="bk-root",i=function(t){var e;if(m.logger.debug("handling notebook comms"),e=JSON.parse(t.content.data),"events"in e&&"references"in e)return this.apply_json_patch(e);if("doc"in e)return this.replace_with_json(e.doc);throw new Error("handling notebook comms message: ",t)},u=function(t,e,r){if(t===r.target_name)return r.on_msg(i.bind(e))},s=function(t,e){var r,n,o,s,a,l;if("undefined"==typeof Jupyter||null===Jupyter||null==Jupyter.notebook.kernel)return console.warn("Jupyter notebooks comms not available. push_notebook() will not function");m.logger.info("Registering Jupyter comms for target "+t),r=Jupyter.notebook.kernel.comm_manager,l=function(r){return u(t,e,r)},a=r.comms;for(o in a)s=a[o],s.then(l);try{return r.register_target(t,function(r,n){return m.logger.info("Registering Jupyter comms for target "+t),r.on_msg(i.bind(e))})}catch(c){return n=c,m.logger.warn("Jupyter comms failed to register. push_notebook() will not function. (exception reported: "+n+")")}},n=function(t){var e;return e=new t.default_view({model:t,parent:null}),d.index[t.id]=e,e},a=function(t,e,r){var o,i,s,a,l,u,c;c={},l=function(e){var r;return r=n(e),r.renderTo(t),c[e.id]=r},u=function(e){var r;if(e.id in c)return r=c[e.id],t.removeChild(r.el),delete c[e.id],delete d.index[e.id]},a=e.roots();for(o=0,i=a.length;o<i;o++)s=a[o],l(s);return r&&(window.document.title=e.title()),e.on_change(function(t){return t instanceof y.RootAddedEvent?l(t.model):t instanceof y.RootRemovedEvent?u(t.model):r&&t instanceof y.TitleChangedEvent?window.document.title=t.title:void 0}),c},p=function(t,e,r){var o,i;if(o=r.get_model_by_id(e),null==o)throw new Error("Model "+e+" was not in document "+r);return i=n(o),i.renderTo(t,!0)},r.add_document_static=function(t,e,r){return a(t,e,r)},r.add_document_standalone=function(t,e,r){return null==r&&(r=!1),a(e,t,r)},l={},o=function(t,e,r){var n;if(null==t)throw new Error("Missing websocket_url");return t in l||(l[t]={}),n=l[t],e in n||(n[e]=f.pull_session(t,e,r)),n[e]},c=function(t,e,r,n){var i,s;return i=window.location.search.substr(1),s=o(e,r,i),s.then(function(e){return a(t,e.document,n)},function(t){throw m.logger.error("Failed to load Bokeh session "+r+": "+t),t})},_=function(t,e,r,i){var s,a;return s=window.location.search.substr(1),a=o(e,i,s),a.then(function(e){var o,i;if(o=e.document.get_model_by_id(r),null==o)throw new Error("Did not find model "+r+" in session");return i=n(o),i.renderTo(t,!0)},function(t){throw m.logger.error("Failed to load Bokeh session "+i+": "+t),t})},r.inject_css=function(t){var e;return e=g.link({href:t,rel:"stylesheet",type:"text/css"}),document.body.appendChild(e)},r.inject_raw_css=function(t){var e;return e=g.style({},t),document.body.appendChild(e)},h=function(t,e){var r;return r=t.dataset,null!=r.bokehLogLevel&&r.bokehLogLevel.length>0&&m.set_log_level(r.bokehLogLevel),null!=r.bokehDocId&&r.bokehDocId.length>0&&(e.docid=r.bokehDocId),null!=r.bokehModelId&&r.bokehModelId.length>0&&(e.modelid=r.bokehModelId),null!=r.bokehSessionId&&r.bokehSessionId.length>0&&(e.sessionid=r.bokehSessionId),m.logger.info("Will inject Bokeh script tag with params "+JSON.stringify(e))},r.embed_items=function(t,e,n,o){var i,a,l,u,d,f,b,w,x,k,M,j,S,T,O,P;i=v.cloneDeep(t),window.localStorage.clear(),S="ws:","https:"===window.location.protocol&&(S="wss:"),M=null!=o?new URL(o):window.location,null!=n?"/"===n&&(n=""):n=M.pathname.replace(/\/+$/,""),P=S+"//"+M.host+n+"/ws",m.logger.debug("embed: computed ws url: "+P),d={};for(u in t)d[u]=y.Document.from_json(t[u]);for(T=[],w=0,k=e.length;w<k;w++){if(x=e[w],null!=x.notebook_comms_target&&s(x.notebook_comms_target,d[u]),b=x.elementid,f=document.getElementById(b),null==f)throw new Error("Error rendering Bokeh model: could not find tag with id: "+b);if(!document.body.contains(f))throw new Error("Error rendering Bokeh model: element with id '"+b+"' must be under <body>");if("SCRIPT"===f.tagName&&(h(f,x),l=g.div({"class":r.BOKEH_ROOT}),g.replaceWith(f,l),a=g.div(),l.appendChild(a),f=a),O=null!=x.use_for_title&&x.use_for_title,j=null,null!=x.modelid)if(null!=x.docid)p(f,x.modelid,d[x.docid]);else{if(null==x.sessionid)throw new Error("Error rendering Bokeh model "+x.modelid+" to element "+b+": no document ID or session ID specified");j=_(f,P,x.modelid,x.sessionid)}else if(null!=x.docid)r.add_document_static(f,d[x.docid],O);else{if(null==x.sessionid)throw new Error("Error rendering Bokeh document to element "+b+": no document ID or session ID specified");j=c(f,P,x.sessionid,O)}null!==j?T.push(j.then(function(t){return console.log("Bokeh items were rendered successfully")},function(t){return console.log("Error rendering Bokeh items ",t)})):T.push(void 0)}return T}},{"./base":"base","./client":"client","./core/dom":"core/dom","./core/logging":"core/logging","./document":"document",lodash:"lodash"}],main:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t("./polyfill");var n=t("./version");r.version=n.version;var o=t("./embed");r.embed=o;var i=t("./core/logging");r.logger=i.logger,r.set_log_level=i.set_log_level;var s=t("./core/settings");r.settings=s.settings;var a=t("./base");r.Models=a.Models,r.index=a.index;var l=t("./document");r.documents=l.documents;var u=t("./safely");r.safely=u.safely},{"./base":"base","./core/logging":"core/logging","./core/settings":"core/settings","./document":"document","./embed":"embed","./polyfill":"polyfill","./safely":"safely","./version":"version"}],model:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./core/has_props"),s=t("./core/properties"),a=t("./core/util/types"),l=t("./core/util/object"),u=t("./core/logging");r.Model=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="Model",e.define({tags:[s.Array,[]],name:[s.String],js_property_callbacks:[s.Any,{}],js_event_callbacks:[s.Any,{}],subscribed_events:[s.Array,[]]}),e.prototype.connect_signals=function(){var t,r,n,o,i,s,a,l,u;e.__super__.connect_signals.call(this),a=this.js_property_callbacks;for(o in a)for(r=a[o],l=o.split(":"),o=l[0],t=null!=(u=l[1])?u:null,i=0,s=r.length;i<s;i++)n=r[i],null!==t?this.connect(this.properties[t][o],function(){return n.execute(this)}):this.connect(this[o],function(){return n.execute(this)});return this.connect(this.properties.js_event_callbacks.change,function(){return this._update_event_callbacks}),this.connect(this.properties.subscribed_events.change,function(){return this._update_event_callbacks})},e.prototype._process_event=function(t){var e,r,n,o,i;if(t.is_applicable_to(this)){for(t=t._customize_event(this),i=null!=(o=this.js_event_callbacks[t.event_name])?o:[],r=0,n=i.length;r<n;r++)e=i[r],e.execute(t,{});if(this.subscribed_events.some(function(e){return e===t.event_name}))return this.document.event_manager.send_event(t)}},e.prototype.trigger_event=function(t){var e;return null!=(e=this.document)?e.event_manager.trigger(t.set_model_id(this.id)):void 0},e.prototype._update_event_callbacks=function(){return null==this.document?void u.logger.warn("WARNING: Document not defined for updating event callbacks"):this.document.event_manager.subscribed_models.push(this.id)},e.prototype._doc_attached=function(){if(!l.isEmpty(this.js_event_callbacks)||!l.isEmpty(this.subscribed_events))return this._update_event_callbacks()},e.prototype.select=function(t){if(t.prototype instanceof e)return this.references().filter(function(e){return e instanceof t});if(a.isString(t))return this.references().filter(function(e){return e.name===t});throw new Error("invalid selector")},e.prototype.select_one=function(t){var e;switch(e=this.select(t),e.length){case 0:return null;case 1:return e[0];default:throw new Error("found more than one object matching given selector")}},e}(i.HasProps)},{"./core/has_props":"core/has_props","./core/logging":"core/logging","./core/properties":"core/properties","./core/util/object":"core/util/object","./core/util/types":"core/util/types"}],"models/annotations/annotation":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/layout/side_panel"),s=t("core/properties"),a=t("../renderers/renderer");r.AnnotationView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._get_panel_offset=function(){var t,e;return t=this.model.panel._left.value,e=this.model.panel._bottom.value,{x:t,y:-e}},e.prototype._get_size=function(){return-1},e}(a.RendererView),r.Annotation=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="Annotation",e.prototype.default_view=r.AnnotationView,e.define({plot:[s.Instance]}),e.override({level:"annotation"}),e.prototype.add_panel=function(t){return this.panel=new i.SidePanel({side:t}),this.panel.attach_document(this.document),this.level="overlay"},e}(a.Renderer)},{"../renderers/renderer":"models/renderers/renderer","core/layout/side_panel":"core/layout/side_panel","core/properties":"core/properties"}],"models/annotations/arrow":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,
t},o={}.hasOwnProperty,i=t("./annotation"),s=t("./arrow_head"),a=t("../sources/column_data_source"),l=t("core/properties"),u=t("core/util/math");r.ArrowView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),null==this.model.source&&(this.model.source=new a.ColumnDataSource),this.canvas=this.plot_model.canvas,this.set_data(this.model.source)},e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),this.connect(this.model.change,function(t){return function(){return t.plot_view.request_render()}}(this)),this.connect(this.model.source.streaming,function(){return this.set_data(this.model.source)}),this.connect(this.model.source.patching,function(){return this.set_data(this.model.source)}),this.connect(this.model.source.change,function(){return this.set_data(this.model.source)})},e.prototype.set_data=function(t){return e.__super__.set_data.call(this,t),this.visuals.warm_cache(t),this.plot_view.request_render()},e.prototype._map_data=function(){var t,e,r,n;return e="data"===this.model.start_units?this.plot_view.map_to_screen(this._x_start,this._y_start,r=this.model.x_range_name,n=this.model.y_range_name):[this.canvas.v_vx_to_sx(this._x_start),this.canvas.v_vy_to_sy(this._y_start)],t="data"===this.model.end_units?this.plot_view.map_to_screen(this._x_end,this._y_end,r=this.model.x_range_name,n=this.model.y_range_name):[this.canvas.v_vx_to_sx(this._x_end),this.canvas.v_vy_to_sy(this._y_end)],[e,t]},e.prototype.render=function(){var t,e;if(this.model.visible)return t=this.plot_view.canvas_view.ctx,t.save(),e=this._map_data(),this.start=e[0],this.end=e[1],null!=this.model.end&&this._arrow_head(t,"render",this.model.end,this.start,this.end),null!=this.model.start&&this._arrow_head(t,"render",this.model.start,this.end,this.start),t.beginPath(),t.rect(0,0,this.canvas._width.value,this.canvas._height.value),null!=this.model.end&&this._arrow_head(t,"clip",this.model.end,this.start,this.end),null!=this.model.start&&this._arrow_head(t,"clip",this.model.start,this.end,this.start),t.closePath(),t.clip(),this._arrow_body(t),t.restore()},e.prototype._arrow_body=function(t){var e,r,n,o;if(this.visuals.line.doit){for(o=[],e=r=0,n=this._x_start.length;0<=n?r<n:r>n;e=0<=n?++r:--r)this.visuals.line.set_vectorize(t,e),t.beginPath(),t.moveTo(this.start[0][e],this.start[1][e]),t.lineTo(this.end[0][e],this.end[1][e]),o.push(t.stroke());return o}},e.prototype._arrow_head=function(t,e,r,n,o){var i,s,a,l,c;for(c=[],s=a=0,l=this._x_start.length;0<=l?a<l:a>l;s=0<=l?++a:--a)i=Math.PI/2+u.atan2([n[0][s],n[1][s]],[o[0][s],o[1][s]]),t.save(),t.translate(o[0][s],o[1][s]),t.rotate(i),"render"===e?r.render(t):"clip"===e&&r.clip(t),c.push(t.restore());return c},e}(i.AnnotationView),r.Arrow=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.ArrowView,e.prototype.type="Arrow",e.mixins(["line"]),e.define({x_start:[l.NumberSpec],y_start:[l.NumberSpec],start_units:[l.String,"data"],start:[l.Instance,null],x_end:[l.NumberSpec],y_end:[l.NumberSpec],end_units:[l.String,"data"],end:[l.Instance,new s.OpenHead({})],source:[l.Instance],x_range_name:[l.String,"default"],y_range_name:[l.String,"default"]}),e}(i.Annotation)},{"../sources/column_data_source":"models/sources/column_data_source","./annotation":"models/annotations/annotation","./arrow_head":"models/annotations/arrow_head","core/properties":"core/properties","core/util/math":"core/util/math"}],"models/annotations/arrow_head":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./annotation"),s=t("core/visuals"),a=t("core/properties");r.ArrowHead=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="ArrowHead",e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.visuals=new s.Visuals(this)},e.prototype.render=function(t,e){return null},e.prototype.clip=function(t,e){return null},e}(i.Annotation),r.OpenHead=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="OpenHead",e.prototype.clip=function(t,e){return this.visuals.line.set_vectorize(t,e),t.moveTo(.5*this.size,this.size),t.lineTo(.5*this.size,-2),t.lineTo(-.5*this.size,-2),t.lineTo(-.5*this.size,this.size),t.lineTo(0,0),t.lineTo(.5*this.size,this.size)},e.prototype.render=function(t,e){if(this.visuals.line.doit)return this.visuals.line.set_vectorize(t,e),t.beginPath(),t.moveTo(.5*this.size,this.size),t.lineTo(0,0),t.lineTo(-.5*this.size,this.size),t.stroke()},e.mixins(["line"]),e.define({size:[a.Number,25]}),e}(r.ArrowHead),r.NormalHead=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="NormalHead",e.prototype.clip=function(t,e){return this.visuals.line.set_vectorize(t,e),t.moveTo(.5*this.size,this.size),t.lineTo(.5*this.size,-2),t.lineTo(-.5*this.size,-2),t.lineTo(-.5*this.size,this.size),t.lineTo(.5*this.size,this.size)},e.prototype.render=function(t,e){if(this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(t,e),this._normal(t,e),t.fill()),this.visuals.line.doit)return this.visuals.line.set_vectorize(t,e),this._normal(t,e),t.stroke()},e.prototype._normal=function(t,e){return t.beginPath(),t.moveTo(.5*this.size,this.size),t.lineTo(0,0),t.lineTo(-.5*this.size,this.size),t.closePath()},e.mixins(["line","fill"]),e.define({size:[a.Number,25]}),e.override({fill_color:"black"}),e}(r.ArrowHead),r.VeeHead=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="VeeHead",e.prototype.clip=function(t,e){return this.visuals.line.set_vectorize(t,e),t.moveTo(.5*this.size,this.size),t.lineTo(.5*this.size,-2),t.lineTo(-.5*this.size,-2),t.lineTo(-.5*this.size,this.size),t.lineTo(0,.5*this.size),t.lineTo(.5*this.size,this.size)},e.prototype.render=function(t,e){if(this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(t,e),this._vee(t,e),t.fill()),this.visuals.line.doit)return this.visuals.line.set_vectorize(t,e),this._vee(t,e),t.stroke()},e.prototype._vee=function(t,e){return t.beginPath(),t.moveTo(.5*this.size,this.size),t.lineTo(0,0),t.lineTo(-.5*this.size,this.size),t.lineTo(0,.5*this.size),t.closePath()},e.mixins(["line","fill"]),e.define({size:[a.Number,25]}),e.override({fill_color:"black"}),e}(r.ArrowHead),r.TeeHead=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="TeeHead",e.prototype.render=function(t,e){if(this.visuals.line.doit)return this.visuals.line.set_vectorize(t,e),t.beginPath(),t.moveTo(.5*this.size,0),t.lineTo(-.5*this.size,0),t.stroke()},e.mixins(["line"]),e.define({size:[a.Number,25]}),e}(r.ArrowHead)},{"./annotation":"models/annotations/annotation","core/properties":"core/properties","core/visuals":"core/visuals"}],"models/annotations/band":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./annotation"),s=t("../sources/column_data_source"),a=t("core/properties");r.BandView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.set_data(this.model.source)},e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),this.connect(this.model.source.streaming,function(){return this.set_data(this.model.source)}),this.connect(this.model.source.patching,function(){return this.set_data(this.model.source)}),this.connect(this.model.source.change,function(){return this.set_data(this.model.source)})},e.prototype.set_data=function(t){return e.__super__.set_data.call(this,t),this.visuals.warm_cache(t),this.plot_view.request_render()},e.prototype._map_data=function(){var t,e,r,n,o,i,s,a,l,u,c,_;return c=this.plot_view.frame.xscales[this.model.x_range_name],_=this.plot_view.frame.yscales[this.model.y_range_name],l="height"===this.model.dimension?_:c,i="height"===this.model.dimension?c:_,r="data"===this.model.lower.units?l.v_compute(this._lower):this._lower,o="data"===this.model.upper.units?l.v_compute(this._upper):this._upper,t="data"===this.model.base.units?i.v_compute(this._base):this._base,u=this.model._normals(),s=u[0],a=u[1],e=[r,t],n=[o,t],this._lower_sx=this.plot_model.canvas.v_vx_to_sx(e[s]),this._lower_sy=this.plot_model.canvas.v_vy_to_sy(e[a]),this._upper_sx=this.plot_model.canvas.v_vx_to_sx(n[s]),this._upper_sy=this.plot_model.canvas.v_vy_to_sy(n[a])},e.prototype.render=function(){var t,e,r,n,o,i,s,a,l,u;if(this.model.visible){for(this._map_data(),t=this.plot_view.canvas_view.ctx,t.beginPath(),t.moveTo(this._lower_sx[0],this._lower_sy[0]),e=r=0,s=this._lower_sx.length;0<=s?r<s:r>s;e=0<=s?++r:--r)t.lineTo(this._lower_sx[e],this._lower_sy[e]);for(e=n=a=this._upper_sx.length-1;a<=0?n<=0:n>=0;e=a<=0?++n:--n)t.lineTo(this._upper_sx[e],this._upper_sy[e]);for(t.closePath(),this.visuals.fill.doit&&(this.visuals.fill.set_value(t),t.fill()),t.beginPath(),t.moveTo(this._lower_sx[0],this._lower_sy[0]),e=o=0,l=this._lower_sx.length;0<=l?o<l:o>l;e=0<=l?++o:--o)t.lineTo(this._lower_sx[e],this._lower_sy[e]);for(this.visuals.line.doit&&(this.visuals.line.set_value(t),t.stroke()),t.beginPath(),t.moveTo(this._upper_sx[0],this._upper_sy[0]),e=i=0,u=this._upper_sx.length;0<=u?i<u:i>u;e=0<=u?++i:--i)t.lineTo(this._upper_sx[e],this._upper_sy[e]);return this.visuals.line.doit?(this.visuals.line.set_value(t),t.stroke()):void 0}},e}(i.AnnotationView),r.Band=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.BandView,e.prototype.type="Band",e.mixins(["line","fill"]),e.define({lower:[a.DistanceSpec],upper:[a.DistanceSpec],base:[a.DistanceSpec],dimension:[a.Dimension,"height"],source:[a.Instance,function(){return new s.ColumnDataSource}],x_range_name:[a.String,"default"],y_range_name:[a.String,"default"]}),e.override({fill_color:"#fff9ba",fill_alpha:.4,line_color:"#cccccc",line_alpha:.3}),e.prototype._normals=function(){var t,e,r,n;return"height"===this.dimension?(r=[1,0],t=r[0],e=r[1]):(n=[0,1],t=n[0],e=n[1]),[t,e]},e}(i.Annotation)},{"../sources/column_data_source":"models/sources/column_data_source","./annotation":"models/annotations/annotation","core/properties":"core/properties"}],"models/annotations/box_annotation":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./annotation"),s=t("core/signaling"),a=t("core/dom"),l=t("core/properties"),u=t("core/util/types");r.BoxAnnotationView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.plot_view.canvas_overlays.appendChild(this.el),this.el.classList.add("bk-shading"),a.hide(this.el)},e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),"css"===this.model.render_mode?(this.connect(this.model.change,function(){return this.render()}),this.connect(this.model.data_update,function(){return this.render()})):(this.connect(this.model.change,function(t){return function(){return t.plot_view.request_render()}}(this)),this.connect(this.model.data_update,function(t){return function(){return t.plot_view.request_render()}}(this)))},e.prototype.render=function(){var t,e,r,n,o,i,s,l;if(this.model.visible||"css"!==this.model.render_mode||a.hide(this.el),this.model.visible)return null==this.model.left&&null==this.model.right&&null==this.model.top&&null==this.model.bottom?(a.hide(this.el),null):(e=this.plot_model.frame,t=this.plot_model.canvas,s=this.plot_view.frame.xscales[this.model.x_range_name],l=this.plot_view.frame.yscales[this.model.y_range_name],n=t.vx_to_sx(this._calc_dim(this.model.left,this.model.left_units,s,e.h_range.start)),o=t.vx_to_sx(this._calc_dim(this.model.right,this.model.right_units,s,e.h_range.end)),r=t.vy_to_sy(this._calc_dim(this.model.bottom,this.model.bottom_units,l,e.v_range.start)),i=t.vy_to_sy(this._calc_dim(this.model.top,this.model.top_units,l,e.v_range.end)),"css"===this.model.render_mode?this._css_box(n,o,r,i):this._canvas_box(n,o,r,i))},e.prototype._css_box=function(t,e,r,n){var o,i,s;return s=Math.abs(e-t),i=Math.abs(r-n),this.el.style.left=t+"px",this.el.style.width=s+"px",this.el.style.top=n+"px",this.el.style.height=i+"px",this.el.style.borderWidth=this.model.line_width.value+"px",this.el.style.borderColor=this.model.line_color.value,this.el.style.backgroundColor=this.model.fill_color.value,this.el.style.opacity=this.model.fill_alpha.value,o=this.model.line_dash,u.isArray(o)&&(o=o.length<2?"solid":"dashed"),u.isString(o)&&(this.el.style.borderStyle=o),a.show(this.el)},e.prototype._canvas_box=function(t,e,r,n){var o;return o=this.plot_view.canvas_view.ctx,o.save(),o.beginPath(),o.rect(t,n,e-t,r-n),this.visuals.fill.set_value(o),o.fill(),this.visuals.line.set_value(o),o.stroke(),o.restore()},e.prototype._calc_dim=function(t,e,r,n){var o;return o=null!=t?"data"===e?r.compute(t):t:n},e}(i.AnnotationView),r.BoxAnnotation=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.BoxAnnotationView,e.prototype.type="BoxAnnotation",e.mixins(["line","fill"]),e.define({render_mode:[l.RenderMode,"canvas"],x_range_name:[l.String,"default"],y_range_name:[l.String,"default"],top:[l.Number,null],top_units:[l.SpatialUnits,"data"],bottom:[l.Number,null],bottom_units:[l.SpatialUnits,"data"],left:[l.Number,null],left_units:[l.SpatialUnits,"data"],right:[l.Number,null],right_units:[l.SpatialUnits,"data"]}),e.override({fill_color:"#fff9ba",fill_alpha:.4,line_color:"#cccccc",line_alpha:.3}),e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this.data_update=new s.Signal(this,"data_update")},e.prototype.update=function(t){var e,r,n,o;return r=t.left,n=t.right,o=t.top,e=t.bottom,this.setv({left:r,right:n,top:o,bottom:e},{silent:!0}),this.data_update.emit()},e}(i.Annotation)},{"./annotation":"models/annotations/annotation","core/dom":"core/dom","core/properties":"core/properties","core/signaling":"core/signaling","core/util/types":"core/util/types"}],"models/annotations/color_bar":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty,l=t("./annotation"),u=t("../tickers/basic_ticker"),c=t("../formatters/basic_tick_formatter"),_=t("../mappers/linear_color_mapper"),p=t("../scales/linear_scale"),h=t("../scales/log_scale"),d=t("../ranges/range1d"),f=t("core/properties"),m=t("core/util/text"),y=t("core/util/array"),g=t("core/util/object"),v=t("core/util/types");i=25,o=.3,n=.8,r.ColorBarView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this._set_canvas_image()},e.prototype.connect_signals=function(){if(e.__super__.connect_signals.call(this),this.connect(this.model.properties.visible.change,function(t){return function(){return t.plot_view.request_render()}}(this)),this.connect(this.model.ticker.change,function(t){return function(){return t.plot_view.request_render()}}(this)),this.connect(this.model.formatter.change,function(t){return function(){return t.plot_view.request_render()}}(this)),null!=this.model.color_mapper)return this.connect(this.model.color_mapper.change,function(){return this._set_canvas_image(),this.plot_view.request_render()})},e.prototype._get_panel_offset=function(){var t,e;return t=this.model.panel._left.value,e=this.model.panel._top.value,{x:t,y:-e}},e.prototype._get_size=function(){var t,e;if(null!=this.model.color_mapper)return t=this.compute_legend_dimensions(),e=this.model.panel.side,"above"===e||"below"===e?t.height:"left"===e||"right"===e?t.width:void 0},e.prototype._set_canvas_image=function(){var t,e,r,n,o,i,s,a,l,u,c,p,h;if(null!=this.model.color_mapper){switch(a=this.model.color_mapper.palette,"vertical"===this.model.orientation&&(a=a.slice(0).reverse()),this.model.orientation){case"vertical":l=[1,a.length],h=l[0],o=l[1];break;case"horizontal":u=[a.length,1],h=u[0],o=u[1]}return r=document.createElement("canvas"),c=[h,o],r.width=c[0],r.height=c[1],i=r.getContext("2d"),s=i.getImageData(0,0,h,o),n=new _.LinearColorMapper({palette:a}),t=n.v_map_screen(function(){p=[];for(var t=0,e=a.length;0<=e?t<e:t>e;0<=e?t++:t--)p.push(t);return p}.apply(this)),e=new Uint8Array(t),s.data.set(e),i.putImageData(s,0,0),this.image=r}},e.prototype.compute_legend_dimensions=function(){var t,e,r,n,o,i,s,a,l,u;switch(t=this.model._computed_image_dimensions(),a=[t.height,t.width],e=a[0],r=a[1],n=this._get_label_extent(),u=this.model._title_extent(),l=this.model._tick_extent(),s=this.model.padding,this.model.orientation){case"vertical":o=e+u+2*s,i=r+l+n+2*s;break;case"horizontal":o=e+u+l+n+2*s,i=r+2*s}return{height:o,width:i}},e.prototype.compute_legend_location=function(){var t,e,r,n,o,i,s,a,l,u,c,_;if(e=this.compute_legend_dimensions(),s=[e.height,e.width],r=s[0],o=s[1],n=this.model.margin,i=this.model.location,t=this.plot_view.frame.h_range,u=this.plot_view.frame.v_range,v.isString(i))switch(i){case"top_left":c=t.start+n,_=u.end-n;break;case"top_center":c=(t.end+t.start)/2-o/2,_=u.end-n;break;case"top_right":c=t.end-n-o,_=u.end-n;break;case"center_right":c=t.end-n-o,_=(u.end+u.start)/2+r/2;break;case"bottom_right":c=t.end-n-o,_=u.start+n+r;break;case"bottom_center":c=(t.end+t.start)/2-o/2,_=u.start+n+r;break;case"bottom_left":c=t.start+n,_=u.start+n+r;break;case"center_left":c=t.start+n,_=(u.end+u.start)/2+r/2;break;case"center":c=(t.end+t.start)/2-o/2,_=(u.end+u.start)/2+r/2}else v.isArray(i)&&2===i.length&&(c=i[0],_=i[1]);return a=this.plot_view.canvas.vx_to_sx(c),l=this.plot_view.canvas.vy_to_sy(_),{sx:a,sy:l}},e.prototype.render=function(){var t,e,r,n,o;if(this.model.visible&&null!=this.model.color_mapper)return t=this.plot_view.canvas_view.ctx,t.save(),null!=this.model.panel&&(o=this._get_panel_offset(),t.translate(o.x,o.y),e=this._get_frame_offset(),t.translate(e.x,e.y)),n=this.compute_legend_location(),t.translate(n.sx,n.sy),this._draw_bbox(t),r=this._get_image_offset(),t.translate(r.x,r.y),this._draw_image(t),null!=this.model.color_mapper.low&&null!=this.model.color_mapper.high&&(this._draw_major_ticks(t),this._draw_minor_ticks(t),this._draw_major_labels(t)),this.model.title&&this._draw_title(t),t.restore()},e.prototype._draw_bbox=function(t){var e;return e=this.compute_legend_dimensions(),t.save(),this.visuals.background_fill.doit&&(this.visuals.background_fill.set_value(t),t.fillRect(0,0,e.width,e.height)),this.visuals.border_line.doit&&(this.visuals.border_line.set_value(t),t.strokeRect(0,0,e.width,e.height)),t.restore()},e.prototype._draw_image=function(t){var e;return e=this.model._computed_image_dimensions(),t.save(),t.setImageSmoothingEnabled(!1),t.globalAlpha=this.model.scale_alpha,t.drawImage(this.image,0,0,e.width,e.height),this.visuals.bar_line.doit&&(this.visuals.bar_line.set_value(t),t.strokeRect(0,0,e.width,e.height)),t.restore()},e.prototype._draw_major_ticks=function(t){var e,r,n,o,i,s,a,l,u,c,_,p,h,d,f;if(this.visuals.major_tick_line.doit){for(s=this.model._normals(),o=s[0],i=s[1],r=this.model._computed_image_dimensions(),a=[r.width*o,r.height*i],d=a[0],f=a[1],l=this.model._tick_coordinates().major,c=l[0],_=l[1],p=this.model.major_tick_in,h=this.model.major_tick_out,t.save(),t.translate(d,f),this.visuals.major_tick_line.set_value(t),e=n=0,u=c.length;0<=u?n<u:n>u;e=0<=u?++n:--n)t.beginPath(),t.moveTo(Math.round(c[e]+o*h),Math.round(_[e]+i*h)),t.lineTo(Math.round(c[e]-o*p),Math.round(_[e]-i*p)),t.stroke();return t.restore()}},e.prototype._draw_minor_ticks=function(t){var e,r,n,o,i,s,a,l,u,c,_,p,h,d,f;if(this.visuals.minor_tick_line.doit){for(s=this.model._normals(),o=s[0],i=s[1],r=this.model._computed_image_dimensions(),a=[r.width*o,r.height*i],d=a[0],f=a[1],l=this.model._tick_coordinates().minor,c=l[0],_=l[1],p=this.model.minor_tick_in,h=this.model.minor_tick_out,t.save(),t.translate(d,f),this.visuals.minor_tick_line.set_value(t),e=n=0,u=c.length;0<=u?n<u:n>u;e=0<=u?++n:--n)t.beginPath(),t.moveTo(Math.round(c[e]+o*h),Math.round(_[e]+i*h)),t.lineTo(Math.round(c[e]-o*p),Math.round(_[e]-i*p)),t.stroke();return t.restore()}},e.prototype._draw_major_labels=function(t){var e,r,n,o,i,s,a,l,u,c,_,p,h,d,f,m,y,g,v;if(this.visuals.major_label_text.doit){for(l=this.model._normals(),s=l[0],a=l[1],n=this.model._computed_image_dimensions(),u=[n.width*s,n.height*a],m=u[0],g=u[1],h=this.model.label_standoff+this.model._tick_extent(),c=[h*s,h*a],y=c[0],v=c[1],_=this.model._tick_coordinates().major,d=_[0],f=_[1],i=this.model._tick_coordinates().major_labels,e=this.model.formatter.doFormat(i,null),this.visuals.major_label_text.set_value(t),t.save(),t.translate(m+y,g+v),r=o=0,p=d.length;0<=p?o<p:o>p;r=0<=p?++o:--o)t.fillText(e[r],Math.round(d[r]+s*this.model.label_standoff),Math.round(f[r]+a*this.model.label_standoff));return t.restore()}},e.prototype._draw_title=function(t){if(this.visuals.title_text.doit)return t.save(),this.visuals.title_text.set_value(t),t.fillText(this.model.title,0,-this.model.title_standoff),t.restore()},e.prototype._get_label_extent=function(){var t,e,r,n,o;if(o=this.model._tick_coordinates().major_labels,null==this.model.color_mapper.low||null==this.model.color_mapper.high||g.isEmpty(o))n=0;else{switch(t=this.plot_view.canvas_view.ctx,t.save(),this.visuals.major_label_text.set_value(t),this.model.orientation){case"vertical":e=this.model.formatter.doFormat(o),n=y.max(function(){var n,o,i;for(i=[],n=0,o=e.length;n<o;n++)r=e[n],i.push(t.measureText(r.toString()).width);return i}());break;case"horizontal":n=m.get_text_height(this.visuals.major_label_text.font_value()).height}n+=this.model.label_standoff,t.restore()}return n},e.prototype._get_frame_offset=function(){var t,e,r,n,o;switch(r=[0,0],n=r[0],o=r[1],e=this.model.panel,t=this.plot_view.frame,e.side){case"left":case"right":o=Math.abs(e._top.value-t._top.value);break;case"above":case"below":n=Math.abs(t._left.value)}return{x:n,y:o}},e.prototype._get_image_offset=function(){var t,e;return t=this.model.padding,e=this.model.padding+this.model._title_extent(),{x:t,y:e}},e}(l.AnnotationView),r.ColorBar=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.default_view=r.ColorBarView,e.prototype.type="ColorBar",e.mixins(["text:major_label_","text:title_","line:major_tick_","line:minor_tick_","line:border_","line:bar_","fill:background_"]),e.define({location:[f.Any,"top_right"],orientation:[f.Orientation,"vertical"],title:[f.String],title_standoff:[f.Number,2],height:[f.Any,"auto"],width:[f.Any,"auto"],scale_alpha:[f.Number,1],ticker:[f.Instance,function(){return new u.BasicTicker}],formatter:[f.Instance,function(){return new c.BasicTickFormatter}],color_mapper:[f.Instance],label_standoff:[f.Number,5],margin:[f.Number,30],padding:[f.Number,10],major_tick_in:[f.Number,5],major_tick_out:[f.Number,0],minor_tick_in:[f.Number,0],minor_tick_out:[f.Number,0]}),e.override({background_fill_color:"#ffffff",background_fill_alpha:.95,bar_line_color:null,border_line_color:null,major_label_text_align:"center",major_label_text_baseline:"middle",major_label_text_font_size:"8pt",major_tick_line_color:"#ffffff",minor_tick_line_color:null,title_text_font_size:"10pt",title_text_font_style:"italic"}),e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r)},e.prototype._normals=function(){var t,e,r,n;return"vertical"===this.orientation?(r=[1,0],t=r[0],e=r[1]):(n=[0,1],t=n[0],e=n[1]),[t,e]},e.prototype._title_extent=function(){var t,e;return t=this.title_text_font+" "+this.title_text_font_size+" "+this.title_text_font_style,e=this.title?m.get_text_height(t).height+this.title_standoff:0},e.prototype._tick_extent=function(){var t;return t=null!=this.color_mapper.low&&null!=this.color_mapper.high?y.max([this.major_tick_out,this.minor_tick_out]):0},e.prototype._computed_image_dimensions=function(){var t,e,r,s,a;switch(t=this.plot.plot_canvas.frame._height.value,e=this.plot.plot_canvas.frame._width.value,s=this._title_extent(),this.orientation){case"vertical":"auto"===this.height?null!=this.panel?r=t-2*this.padding-s:(r=y.max([this.color_mapper.palette.length*i,t*o]),r=y.min([r,t*n-2*this.padding-s])):r=this.height,a="auto"===this.width?i:this.width;break;case"horizontal":r="auto"===this.height?i:this.height,"auto"===this.width?null!=this.panel?a=e-2*this.padding:(a=y.max([this.color_mapper.palette.length*i,e*o]),a=y.min([a,e*n-2*this.padding])):a=this.width}return{height:r,width:a}},e.prototype._tick_coordinate_scale=function(t){var e,r;switch(e={source_range:new d.Range1d({start:this.color_mapper.low,end:this.color_mapper.high}),target_range:new d.Range1d({start:0,end:t})},this.color_mapper.type){case"LinearColorMapper":r=new p.LinearScale(e);break;case"LogColorMapper":r=new h.LogScale(e)}return r},e.prototype._tick_coordinates=function(){var t,e,r,n,o,i,s,a,l,u,c,_,p,h,d,f,m,y,g,v,b;switch(o=this._computed_image_dimensions(),this.orientation){case"vertical":g=o.height;break;case"horizontal":g=o.width}for(y=this._tick_coordinate_scale(g),h=this._normals(),r=h[0],i=h[1],d=[this.color_mapper.low,this.color_mapper.high],v=d[0],e=d[1],b=this.ticker.get_ticks(v,e,null,null,this.ticker.desired_num_ticks),c=b.major,p=b.minor,l=[[],[]],_=[[],[]],n=s=0,f=c.length;0<=f?s<f:s>f;n=0<=f?++s:--s)c[n]<v||c[n]>e||(l[r].push(c[n]),l[i].push(0));for(n=a=0,m=p.length;0<=m?a<m:a>m;n=0<=m?++a:--a)p[n]<v||p[n]>e||(_[r].push(p[n]),_[i].push(0));return u=l[r].slice(0),l[r]=y.v_compute(l[r]),_[r]=y.v_compute(_[r]),"vertical"===this.orientation&&(l[r]=new Float64Array(function(){var e,n,o,i;for(o=l[r],i=[],n=0,e=o.length;n<e;n++)t=o[n],i.push(g-t);return i}()),_[r]=new Float64Array(function(){var e,n,o,i;for(o=_[r],i=[],n=0,e=o.length;n<e;n++)t=o[n],i.push(g-t);return i}())),{major:l,minor:_,major_labels:u}},e}(l.Annotation)},{"../formatters/basic_tick_formatter":"models/formatters/basic_tick_formatter","../mappers/linear_color_mapper":"models/mappers/linear_color_mapper","../ranges/range1d":"models/ranges/range1d","../scales/linear_scale":"models/scales/linear_scale","../scales/log_scale":"models/scales/log_scale","../tickers/basic_ticker":"models/tickers/basic_ticker","./annotation":"models/annotations/annotation","core/properties":"core/properties","core/util/array":"core/util/array","core/util/object":"core/util/object","core/util/text":"core/util/text","core/util/types":"core/util/types"}],"models/annotations/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./annotation");r.Annotation=n.Annotation;var o=t("./arrow");r.Arrow=o.Arrow;var i=t("./arrow_head");r.ArrowHead=i.ArrowHead;var s=t("./arrow_head");r.OpenHead=s.OpenHead;var a=t("./arrow_head");r.NormalHead=a.NormalHead;var l=t("./arrow_head");r.TeeHead=l.TeeHead;var u=t("./arrow_head");r.VeeHead=u.VeeHead;var c=t("./band");r.Band=c.Band;var _=t("./box_annotation");r.BoxAnnotation=_.BoxAnnotation;var p=t("./color_bar");r.ColorBar=p.ColorBar;var h=t("./label");r.Label=h.Label;var d=t("./label_set");r.LabelSet=d.LabelSet;var f=t("./legend");r.Legend=f.Legend;var m=t("./legend_item");r.LegendItem=m.LegendItem;var y=t("./poly_annotation");r.PolyAnnotation=y.PolyAnnotation;var g=t("./span");r.Span=g.Span;var v=t("./text_annotation");r.TextAnnotation=v.TextAnnotation;var b=t("./title");r.Title=b.Title;var w=t("./tooltip");r.Tooltip=w.Tooltip;var x=t("./whisker");r.Whisker=x.Whisker},{"./annotation":"models/annotations/annotation","./arrow":"models/annotations/arrow","./arrow_head":"models/annotations/arrow_head","./band":"models/annotations/band","./box_annotation":"models/annotations/box_annotation","./color_bar":"models/annotations/color_bar","./label":"models/annotations/label","./label_set":"models/annotations/label_set","./legend":"models/annotations/legend","./legend_item":"models/annotations/legend_item","./poly_annotation":"models/annotations/poly_annotation","./span":"models/annotations/span","./text_annotation":"models/annotations/text_annotation","./title":"models/annotations/title","./tooltip":"models/annotations/tooltip","./whisker":"models/annotations/whisker"}],"models/annotations/label":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./text_annotation"),s=t("core/dom"),a=t("core/properties");r.LabelView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.canvas=this.plot_model.canvas,this.visuals.warm_cache(null)},e.prototype._get_size=function(){var t,e,r,n;return t=this.plot_view.canvas_view.ctx,this.visuals.text.set_value(t),r=this.model.panel.side,"above"===r||"below"===r?e=t.measureText(this.model.text).ascent:"left"===r||"right"===r?n=t.measureText(this.model.text).width:void 0},e.prototype.render=function(){var t,e,r,n,o,i,a,l,u;if(this.model.visible||"css"!==this.model.render_mode||s.hide(this.el),this.model.visible){switch(l=this.plot_view.frame.xscales[this.model.x_range_name],u=this.plot_view.frame.yscales[this.model.y_range_name],e=this.plot_view.canvas_view.ctx,this.model.angle_units){case"rad":t=-1*this.model.angle;break;case"deg":t=-1*this.model.angle*Math.PI/180}return i="data"===this.model.x_units?l.compute(this.model.x):this.model.x,n=this.canvas.vx_to_sx(i),a="data"===this.model.y_units?u.compute(this.model.y):this.model.y,o=this.canvas.vy_to_sy(a),null!=this.model.panel&&(r=this._get_panel_offset(),n+=r.x,o+=r.y),"canvas"===this.model.render_mode?this._canvas_text(e,this.model.text,n+this.model.x_offset,o-this.model.y_offset,t):this._css_text(e,this.model.text,n+this.model.x_offset,o-this.model.y_offset,t)}},e}(i.TextAnnotationView),r.Label=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.LabelView,e.prototype.type="Label",e.mixins(["text","line:border_","fill:background_"]),e.define({x:[a.Number],x_units:[a.SpatialUnits,"data"],y:[a.Number],y_units:[a.SpatialUnits,"data"],text:[a.String],angle:[a.Angle,0],angle_units:[a.AngleUnits,"rad"],x_offset:[a.Number,0],y_offset:[a.Number,0],x_range_name:[a.String,"default"],y_range_name:[a.String,"default"],render_mode:[a.RenderMode,"canvas"]}),e.override({background_fill_color:null,border_line_color:null}),e}(i.TextAnnotation)},{"./text_annotation":"models/annotations/text_annotation","core/dom":"core/dom","core/properties":"core/properties"}],"models/annotations/label_set":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./text_annotation"),s=t("../sources/column_data_source"),a=t("core/dom"),l=t("core/properties"),u=t("core/util/types");r.LabelSetView=function(t){
function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){var r,n,o,i;if(e.__super__.initialize.call(this,t),this.set_data(this.model.source),"css"===this.model.render_mode){for(i=[],r=n=0,o=this._text.length;0<=o?n<o:n>o;r=0<=o?++n:--n)this.title_div=a.div({"class":"bk-annotation-child",style:{display:"none"}}),i.push(this.el.appendChild(this.title_div));return i}},e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),"css"===this.model.render_mode?(this.connect(this.model.change,function(){return this.set_data(this.model.source),this.render()}),this.connect(this.model.source.streaming,function(){return this.set_data(this.model.source),this.render()}),this.connect(this.model.source.patching,function(){return this.set_data(this.model.source),this.render()}),this.connect(this.model.source.change,function(){return this.set_data(this.model.source),this.render()})):(this.connect(this.model.change,function(){return this.set_data(this.model.source),this.plot_view.request_render()}),this.connect(this.model.source.streaming,function(){return this.set_data(this.model.source),this.plot_view.request_render()}),this.connect(this.model.source.patching,function(){return this.set_data(this.model.source),this.plot_view.request_render()}),this.connect(this.model.source.change,function(){return this.set_data(this.model.source),this.plot_view.request_render()}))},e.prototype.set_data=function(t){return e.__super__.set_data.call(this,t),this.visuals.warm_cache(t)},e.prototype._map_data=function(){var t,e,r,n,o,i;return o=this.plot_view.frame.xscales[this.model.x_range_name],i=this.plot_view.frame.yscales[this.model.y_range_name],r="data"===this.model.x_units?o.v_compute(this._x):this._x.slice(0),t=this.canvas.v_vx_to_sx(r),n="data"===this.model.y_units?i.v_compute(this._y):this._y.slice(0),e=this.canvas.v_vy_to_sy(n),[t,e]},e.prototype.render=function(){var t,e,r,n,o,i,s,l,u;if(this.model.visible||"css"!==this.model.render_mode||a.hide(this.el),this.model.visible){if(t=this.plot_view.canvas_view.ctx,this.data={name:this.model.name,model_id:this.model.id,data_fields:["labels"],labels:[]},o=this._map_data(),l=o[0],u=o[1],"canvas"===this.model.render_mode)for(e=r=0,i=this._text.length;0<=i?r<i:r>i;e=0<=i?++r:--r)this._v_canvas_text(t,e,this._text[e],l[e]+this._x_offset[e],u[e]-this._y_offset[e],this._angle[e]);else for(e=n=0,s=this._text.length;0<=s?n<s:n>s;e=0<=s?++n:--n)this._v_css_text(t,e,this._text[e],l[e]+this._x_offset[e],u[e]-this._y_offset[e],this._angle[e]);return console.log("render labelset"),console.log(this),window.localStorage.setItem(this.data.name,JSON.stringify(this.data))}},e.prototype._get_size=function(){var t,e,r,n;return t=this.plot_view.canvas_view.ctx,this.visuals.text.set_value(t),r=this.model.panel.side,"above"===r||"below"===r?e=t.measureText(this._text[0]).ascent:"left"===r||"right"===r?n=t.measureText(this._text[0]).width:void 0},e.prototype._v_canvas_text=function(t,e,r,n,o,i){var s,a;return this.visuals.text.set_vectorize(t,e),a=this._calculate_bounding_box_dimensions(t,r),t.save(),t.beginPath(),t.translate(n,o),t.rotate(i),t.rect(a[0],a[1],a[2],a[3]),this.visuals.background_fill.doit&&(this.visuals.background_fill.set_vectorize(t,e),t.fill()),this.visuals.border_line.doit&&(this.visuals.border_line.set_vectorize(t,e),t.stroke()),this.visuals.text.doit&&(this.visuals.text.set_vectorize(t,e),t.fillText(r,0,0)),t.restore(),s={x:Math.round(a[0]+n),y:Math.round(a[1]+o),w:Math.round(a[2]),h:2*Math.round(a[3])},this.data.labels.push({text:r,bbox:s})},e.prototype._v_css_text=function(t,e,r,n,o,i){var s,l,c,_;return l=this.el.childNodes[e],l.textContent=r,this.visuals.text.set_vectorize(t,e),s=this._calculate_bounding_box_dimensions(t,r),c=this.visuals.border_line.line_dash.value(),u.isArray(c)&&(_=c.length<2?"solid":"dashed"),u.isString(c)&&(_=c),this.visuals.border_line.set_vectorize(t,e),this.visuals.background_fill.set_vectorize(t,e),l.style.position="absolute",l.style.left=n+s[0]+"px",l.style.top=o+s[1]+"px",l.style.color=""+this.visuals.text.text_color.value(),l.style.opacity=""+this.visuals.text.text_alpha.value(),l.style.font=""+this.visuals.text.font_value(),l.style.lineHeight="normal",i&&(l.style.transform="rotate("+i+"rad)"),this.visuals.background_fill.doit&&(l.style.backgroundColor=""+this.visuals.background_fill.color_value()),this.visuals.border_line.doit&&(l.style.borderStyle=""+_,l.style.borderWidth=this.visuals.border_line.line_width.value()+"px",l.style.borderColor=""+this.visuals.border_line.color_value()),a.show(l)},e}(i.TextAnnotationView),r.LabelSet=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.LabelSetView,e.prototype.type="Label",e.mixins(["text","line:border_","fill:background_"]),e.define({x:[l.NumberSpec],y:[l.NumberSpec],x_units:[l.SpatialUnits,"data"],y_units:[l.SpatialUnits,"data"],text:[l.StringSpec,{field:"text"}],angle:[l.AngleSpec,0],x_offset:[l.NumberSpec,{value:0}],y_offset:[l.NumberSpec,{value:0}],source:[l.Instance,function(){return new s.ColumnDataSource}],x_range_name:[l.String,"default"],y_range_name:[l.String,"default"],render_mode:[l.RenderMode,"canvas"]}),e.override({background_fill_color:null,border_line_color:null}),e}(i.TextAnnotation)},{"../sources/column_data_source":"models/sources/column_data_source","./text_annotation":"models/annotations/text_annotation","core/dom":"core/dom","core/properties":"core/properties","core/util/types":"core/util/types"}],"models/annotations/legend":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./annotation"),s=t("core/properties"),a=t("core/util/text"),l=t("core/util/bbox"),u=t("core/util/array"),c=t("core/util/object"),_=t("core/util/types");r.LegendView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t)},e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),this.connect(this.model.properties.visible.change,function(t){return function(){return t.plot_view.request_render()}}(this))},e.prototype.compute_legend_bbox=function(){var t,e,r,n,o,i,s,l,p,h,d,f,m,y,g,v,b,w,x,k,M,j,S,T,O,P;for(d=this.model.get_legend_names(),e=this.model.glyph_height,r=this.model.glyph_width,i=this.model.label_height,l=this.model.label_width,this.max_label_height=u.max([a.get_text_height(this.visuals.label_text.font_value()).height,i,e]),t=this.plot_view.canvas_view.ctx,t.save(),this.visuals.label_text.set_value(t),this.text_widths={},o=0,g=d.length;o<g;o++)w=d[o],this.text_widths[w]=u.max([t.measureText(w).width,l]);if(t.restore(),b=u.max(c.values(this.text_widths)),h=this.model.margin,f=this.model.padding,m=this.model.spacing,s=this.model.label_standoff,"vertical"===this.model.orientation)p=d.length*this.max_label_height+(d.length-1)*m+2*f,y=b+r+s+2*f;else{y=2*f+(d.length-1)*m,k=this.text_widths;for(w in k)T=k[w],y+=u.max([T,l])+r+s;p=this.max_label_height+2*f}if(x=null!=(M=this.model.panel)?M:this.plot_view.frame,n={start:x._left.value,end:x._right.value},S={start:x._bottom.value,end:x._top.value},v=this.model.location,_.isString(v))switch(v){case"top_left":O=n.start+h,P=S.end-h;break;case"top_center":O=(n.end+n.start)/2-y/2,P=S.end-h;break;case"top_right":O=n.end-h-y,P=S.end-h;break;case"center_right":O=n.end-h-y,P=(S.end+S.start)/2+p/2;break;case"bottom_right":O=n.end-h-y,P=S.start+h+p;break;case"bottom_center":O=(n.end+n.start)/2-y/2,P=S.start+h+p;break;case"bottom_left":O=n.start+h,P=S.start+h+p;break;case"center_left":O=n.start+h,P=(S.end+S.start)/2+p/2;break;case"center":O=(n.end+n.start)/2-y/2,P=(S.end+S.start)/2+p/2}else _.isArray(v)&&2===v.length&&(O=v[0],P=v[1],"left"===(j=x.side)||"right"===j||"above"===j||"below"===j?(O+=n.start,P+=S.end):(O+=n.start,P+=S.start));return O=this.plot_view.canvas.vx_to_sx(O),P=this.plot_view.canvas.vy_to_sy(P),{x:O,y:P,width:y,height:p}},e.prototype.bbox=function(){var t,e,r,n,o;return e=this.compute_legend_bbox(),n=e.x,o=e.y,r=e.width,t=e.height,new l.BBox({x0:n,y0:o,x1:n+r,y1:o+t})},e.prototype.on_hit=function(t,e){var r,n,o,i,s,a,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k,M,j,S,T,O,P,A,E,z,C,N,D;for(o=this.model.glyph_height,i=this.model.glyph_width,m=this.model.spacing,h=this.model.label_standoff,z=D=this.model.padding,f=this.compute_legend_bbox(),O="vertical"===this.model.orientation,k=this.model.items,u=0,y=k.length;u<y;u++)for(a=k[u],d=a.get_labels_list_from_label_prop(),n=a.get_field_from_label_prop(),c=0,g=d.length;c<g;c++){if(p=d[c],A=f.x+z,C=f.y+D,E=A+i,N=C+o,O?(M=[f.width-2*this.model.padding,this.max_label_height],P=M[0],s=M[1]):(j=[this.text_widths[p]+i+h,this.max_label_height],P=j[0],s=j[1]),r=new l.BBox({x0:A,y0:C,x1:A+P,y1:C+s}),r.contains(t,e)){switch(this.model.click_policy){case"hide":for(S=a.renderers,_=0,v=S.length;_<v;_++)x=S[_],x.visible=!x.visible;break;case"mute":for(T=a.renderers,w=0,b=T.length;w<b;w++)x=T[w],x.muted=!x.muted}return!0}O?D+=this.max_label_height+m:z+=this.text_widths[p]+i+h+m}return!1},e.prototype.render=function(){var t,e;if(this.model.visible&&0!==this.model.items.length)return e=this.plot_view.canvas_view.ctx,t=this.compute_legend_bbox(),this.data={name:this.model.name,items:[],bbox:{x:Math.round(t.x),y:Math.round(t.y),w:Math.round(t.width),h:Math.round(t.height)}},e.save(),this._draw_legend_box(e,t),this._draw_legend_items(e,t),e.restore(),console.log("render legend"),console.log(this),window.localStorage.setItem(this.data.name,JSON.stringify(this.data))},e.prototype._draw_legend_box=function(t,e){if(t.beginPath(),t.rect(e.x,e.y,e.width,e.height),this.visuals.background_fill.set_value(t),t.fill(),this.visuals.border_line.doit)return this.visuals.border_line.set_value(t),t.stroke()},e.prototype._draw_legend_items=function(t,e){var r,n,o,i,s,a,l,c,_,p,h,d,f,m,y,g,v,b,w,x,k,M,j,S,T,O,P,A,E,z,C,N;for(o=this.model.glyph_height,i=this.model.glyph_width,y=this.model.spacing,d=this.model.label_standoff,E=N=this.model.padding,S="vertical"===this.model.orientation,x=this.model.items,c=0,g=x.length;c<g;c++)if(l=x[c],f=l.get_labels_list_from_label_prop(),n=l.get_field_from_label_prop(),0!==f.length){for(r=function(){switch(this.model.click_policy){case"none":return!0;case"hide":return u.all(l.renderers,function(t){return t.visible});case"mute":return u.all(l.renderers,function(t){return!t.muted})}}.call(this),m={model:l.attributes.renderers[0].name},a=0,_=0,v=f.length;_<v;_++){for(h=f[_],P=e.x+E,z=e.y+N,A=P+i,C=z+o,S?N+=this.max_label_height+y:E+=this.text_widths[h]+i+d+y,this.visuals.label_text.set_value(t),t.fillText(h,A+d,z+this.max_label_height/2),k=l.renderers,p=0,b=k.length;p<b;p++)w=k[p],T=this.plot_view.renderer_views[w.id],T.draw_legend(t,P,A,z,C,n,h);r||(S?(M=[e.width-2*this.model.padding,this.max_label_height],O=M[0],s=M[1]):(j=[this.text_widths[h]+i+d,this.max_label_height],O=j[0],s=j[1]),t.beginPath(),t.rect(P,z,O,s),this.visuals.inactive_fill.set_value(t),t.fill()),0===a&&(m.label={text:h,bbox:{x:Math.round(A+this.model.label_standoff),y:Math.round(z),w:Math.round(this.text_widths[h]),h:Math.round(this.max_label_height)}},m.preview={bbox:{x:Math.round(P),y:Math.round(z),w:Math.round(i),h:Math.round(o)}}),a+=1}this.data.items.push(m)}return null},e.prototype._get_size=function(){var t,e;return t=this.compute_legend_bbox(),e=this.model.panel.side,"above"===e||"below"===e?t.height:"left"===e||"right"===e?t.width:void 0},e}(i.AnnotationView),r.Legend=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.LegendView,e.prototype.type="Legend",e.prototype.cursor=function(){return"none"===this.click_policy?null:"pointer"},e.prototype.get_legend_names=function(){var t,e,r,n,o,i;for(n=[],i=this.items,e=0,o=i.length;e<o;e++)t=i[e],r=t.get_labels_list_from_label_prop(),n=n.concat(r);return n},e.mixins(["text:label_","fill:inactive_","line:border_","fill:background_"]),e.define({orientation:[s.Orientation,"vertical"],location:[s.Any,"top_right"],label_standoff:[s.Number,5],glyph_height:[s.Number,20],glyph_width:[s.Number,20],label_height:[s.Number,20],label_width:[s.Number,20],margin:[s.Number,10],padding:[s.Number,10],spacing:[s.Number,3],items:[s.Array,[]],click_policy:[s.Any,"none"]}),e.override({border_line_color:"#e5e5e5",border_line_alpha:.5,border_line_width:1,background_fill_color:"#ffffff",background_fill_alpha:.95,inactive_fill_color:"white",inactive_fill_alpha:.9,label_text_font_size:"10pt",label_text_baseline:"middle"}),e}(i.Annotation)},{"./annotation":"models/annotations/annotation","core/properties":"core/properties","core/util/array":"core/util/array","core/util/bbox":"core/util/bbox","core/util/object":"core/util/object","core/util/text":"core/util/text","core/util/types":"core/util/types"}],"models/annotations/legend_item":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},a=t("../../model"),l=t("core/properties"),u=t("core/logging"),c=t("core/util/array"),_=t("../../models/sources/column_data_source");r.LegendItem=function(t){function e(){return this.get_labels_list_from_label_prop=n(this.get_labels_list_from_label_prop,this),this.get_field_from_label_prop=n(this.get_field_from_label_prop,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.type="LegendItem",e.prototype._check_data_sources_on_renderers=function(){var t,e,r,n,o,i;if(t=this.get_field_from_label_prop(),null!=t){if(this.renderers.length<1)return!1;if(i=this.renderers[0].data_source,null!=i)for(o=this.renderers,e=0,r=o.length;e<r;e++)if(n=o[e],n.data_source!==i)return!1}return!0},e.prototype._check_field_label_on_data_source=function(){var t,e;if(t=this.get_field_from_label_prop(),null!=t){if(this.renderers.length<1)return!1;if(e=this.renderers[0].data_source,null!=e&&s.call(e.columns(),t)<0)return!1}return!0},e.prototype.initialize=function(t,r){var n,o;if(e.__super__.initialize.call(this,t,r),n=this._check_data_sources_on_renderers(),n||u.logger.error("Non matching data sources on legend item renderers"),o=this._check_field_label_on_data_source(),!o)return u.logger.error("Bad column name on label: "+this.label)},e.define({label:[l.StringSpec,null],renderers:[l.Array,[]]}),e.prototype.get_field_from_label_prop=function(){if(null!=this.label&&null!=this.label.field)return this.label.field},e.prototype.get_labels_list_from_label_prop=function(){var t,e,r;if(null!=this.label&&null!=this.label.value)return[this.label.value];if(e=this.get_field_from_label_prop(),null!=e){if(!this.renderers[0]||null==this.renderers[0].data_source)return["No source found"];if(r=this.renderers[0].data_source,r instanceof _.ColumnDataSource)return t=r.get_column(e),null!=t?c.uniq(t):["Invalid field"]}return[]},e}(a.Model)},{"../../model":"model","../../models/sources/column_data_source":"models/sources/column_data_source","core/logging":"core/logging","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/annotations/poly_annotation":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./annotation"),s=t("core/signaling"),a=t("core/properties");r.PolyAnnotationView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),this.connect(this.model.change,function(t){return function(){return t.plot_view.request_render()}}(this)),this.connect(this.model.data_update,function(t){return function(){return t.plot_view.request_render()}}(this))},e.prototype.render=function(t){var e,r,n,o,i,s,a,l,u,c;if(this.model.visible){if(u=this.model.xs,c=this.model.ys,u.length!==c.length)return null;if(u.length<3||c.length<3)return null;for(e=this.plot_view.canvas,t=this.plot_view.canvas_view.ctx,r=n=0,o=u.length;0<=o?n<o:n>o;r=0<=o?++n:--n)"screen"===this.model.xs_units&&(a=u[r]),"screen"===this.model.ys_units&&(l=c[r]),i=e.vx_to_sx(a),s=e.vy_to_sy(l),0===r?(t.beginPath(),t.moveTo(i,s)):t.lineTo(i,s);return t.closePath(),this.visuals.line.doit&&(this.visuals.line.set_value(t),t.stroke()),this.visuals.fill.doit?(this.visuals.fill.set_value(t),t.fill()):void 0}},e}(i.AnnotationView),r.PolyAnnotation=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.PolyAnnotationView,e.prototype.type="PolyAnnotation",e.mixins(["line","fill"]),e.define({xs:[a.Array,[]],xs_units:[a.SpatialUnits,"data"],ys:[a.Array,[]],ys_units:[a.SpatialUnits,"data"],x_range_name:[a.String,"default"],y_range_name:[a.String,"default"]}),e.override({fill_color:"#fff9ba",fill_alpha:.4,line_color:"#cccccc",line_alpha:.3}),e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this.data_update=new s.Signal(this,"data_update")},e.prototype.update=function(t){var e,r;return e=t.xs,r=t.ys,this.setv({xs:e,ys:r},{silent:!0}),this.data_update.emit()},e}(i.Annotation)},{"./annotation":"models/annotations/annotation","core/properties":"core/properties","core/signaling":"core/signaling"}],"models/annotations/span":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./annotation"),s=t("core/dom"),a=t("core/properties");r.SpanView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.plot_view.canvas_overlays.appendChild(this.el),this.el.style.position="absolute",s.hide(this.el)},e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),this.model.for_hover?this.connect(this.model.properties.computed_location.change,function(){return this._draw_span()}):"canvas"===this.model.render_mode?(this.connect(this.model.change,function(t){return function(){return t.plot_view.request_render()}}(this)),this.connect(this.model.properties.location.change,function(t){return function(){return t.plot_view.request_render()}}(this))):(this.connect(this.model.change,function(){return this.render()}),this.connect(this.model.properties.location.change,function(){return this._draw_span()}))},e.prototype.render=function(){if(this.model.visible||"css"!==this.model.render_mode||s.hide(this.el),this.model.visible)return this._draw_span()},e.prototype._draw_span=function(){var t,e,r,n,o,i,a,l,u,c;return o=this.model.for_hover?this.model.computed_location:this.model.location,null==o?void s.hide(this.el):(r=this.plot_model.frame,t=this.plot_model.canvas,u=this.plot_view.frame.xscales[this.model.x_range_name],c=this.plot_view.frame.yscales[this.model.y_range_name],"width"===this.model.dimension?(a=t.vy_to_sy(this._calc_dim(o,c)),i=t.vx_to_sx(r._left.value),l=r._width.value,n=this.model.properties.line_width.value()):(a=t.vy_to_sy(r._top.value),i=t.vx_to_sx(this._calc_dim(o,u)),l=this.model.properties.line_width.value(),n=r._height.value),"css"===this.model.render_mode?(this.el.style.top=a+"px",this.el.style.left=i+"px",this.el.style.width=l+"px",this.el.style.height=n+"px",this.el.style.zIndex=1e3,this.el.style.backgroundColor=this.model.properties.line_color.value(),this.el.style.opacity=this.model.properties.line_alpha.value(),s.show(this.el)):"canvas"===this.model.render_mode?(e=this.plot_view.canvas_view.ctx,e.save(),e.beginPath(),this.visuals.line.set_value(e),e.moveTo(i,a),"width"===this.model.dimension?e.lineTo(i+l,a):e.lineTo(i,a+n),e.stroke(),e.restore()):void 0)},e.prototype._calc_dim=function(t,e){var r;return r="data"===this.model.location_units?e.compute(t):t},e}(i.AnnotationView),r.Span=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.SpanView,e.prototype.type="Span",e.mixins(["line"]),e.define({render_mode:[a.RenderMode,"canvas"],x_range_name:[a.String,"default"],y_range_name:[a.String,"default"],location:[a.Number,null],location_units:[a.SpatialUnits,"data"],dimension:[a.Dimension,"width"]}),e.override({line_color:"black"}),e.internal({for_hover:[a.Boolean,!1],computed_location:[a.Number,null]}),e}(i.Annotation)},{"./annotation":"models/annotations/annotation","core/dom":"core/dom","core/properties":"core/properties"}],"models/annotations/text_annotation":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./annotation"),s=t("core/dom"),a=t("core/util/types"),l=t("core/util/text");r.TextAnnotationView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){if(e.__super__.initialize.call(this,t),this.canvas=this.plot_model.canvas,this.frame=this.plot_model.frame,"css"===this.model.render_mode)return this.el.classList.add("bk-annotation"),this.plot_view.canvas_overlays.appendChild(this.el)},e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),"css"===this.model.render_mode?this.connect(this.model.change,function(){return this.render()}):this.connect(this.model.change,function(t){return function(){return t.plot_view.request_render()}}(this))},e.prototype._calculate_text_dimensions=function(t,e){var r,n;return n=t.measureText(e).width,r=l.get_text_height(this.visuals.text.font_value()).height,[n,r]},e.prototype._calculate_bounding_box_dimensions=function(t,e){var r,n,o,i,s;switch(n=this._calculate_text_dimensions(t,e),o=n[0],r=n[1],t.textAlign){case"left":i=0;break;case"center":i=-o/2;break;case"right":i=-o}switch(t.textBaseline){case"top":s=0;break;case"middle":s=-.5*r;break;case"bottom":s=-1*r;break;case"alphabetic":s=-.8*r;break;case"hanging":s=-.17*r;break;case"ideographic":s=-.83*r}return[i,s,o,r]},e.prototype._get_size=function(){var t;return t=this.plot_view.canvas_view.ctx,this.visuals.text.set_value(t),t.measureText(this.model.text).ascent},e.prototype.render=function(){return null},e.prototype._canvas_text=function(t,e,r,n,o){var i;return this.visuals.text.set_value(t),i=this._calculate_bounding_box_dimensions(t,e),t.save(),t.beginPath(),t.translate(r,n),o&&t.rotate(o),t.rect(i[0],i[1],i[2],i[3]),this.visuals.background_fill.doit&&(this.visuals.background_fill.set_value(t),t.fill()),this.visuals.border_line.doit&&(this.visuals.border_line.set_value(t),t.stroke()),this.visuals.text.doit&&(this.visuals.text.set_value(t),t.fillText(e,0,0)),t.restore()},e.prototype._css_text=function(t,e,r,n,o){var i,l,u;return s.hide(this.el),this.visuals.text.set_value(t),i=this._calculate_bounding_box_dimensions(t,e),l=this.visuals.border_line.line_dash.value(),a.isArray(l)&&(u=l.length<2?"solid":"dashed"),a.isString(l)&&(u=l),this.visuals.border_line.set_value(t),this.visuals.background_fill.set_value(t),this.el.style.position="absolute",this.el.style.left=r+i[0]+"px",this.el.style.top=n+i[1]+"px",this.el.style.color=""+this.visuals.text.text_color.value(),this.el.style.opacity=""+this.visuals.text.text_alpha.value(),this.el.style.font=""+this.visuals.text.font_value(),this.el.style.lineHeight="normal",o&&(this.el.style.transform="rotate("+o+"rad)"),this.visuals.background_fill.doit&&(this.el.style.backgroundColor=""+this.visuals.background_fill.color_value()),this.visuals.border_line.doit&&(this.el.style.borderStyle=""+u,this.el.style.borderWidth=this.visuals.border_line.line_width.value()+"px",this.el.style.borderColor=""+this.visuals.border_line.color_value()),this.el.textContent=e,s.show(this.el)},e}(i.AnnotationView),r.TextAnnotation=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="TextAnnotation",e.prototype.default_view=r.TextAnnotationView,e}(i.Annotation)},{"./annotation":"models/annotations/annotation","core/dom":"core/dom","core/util/text":"core/util/text","core/util/types":"core/util/types"}],"models/annotations/title":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./text_annotation"),s=t("core/dom"),a=t("core/properties"),l=t("core/visuals");r.TitleView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){var r;return e.__super__.initialize.call(this,t),this.visuals.text=new l.Text(this.model),r=this.plot_view.canvas_view.ctx,r.save(),this.model.panel.apply_label_text_heuristics(r,"justified"),this.model.text_baseline=r.textBaseline,this.model.text_align=this.model.align,r.restore(),this.data={name:this.model.attributes.name,model_id:this.model.id,model_type:"text_annotation",data_fields:["title"],title:{text:this.model.text,bbox:null}}},e.prototype._get_computed_location=function(){var t,e,r,n,o,i,s;switch(e=this._calculate_text_dimensions(this.plot_view.canvas_view.ctx,this.text),s=e[0],t=e[1],this.model.panel.side){case"left":o=0,i=this._get_text_location(this.model.align,this.frame.v_range)+this.model.offset;break;case"right":o=this.canvas._right.value-1,i=this.canvas._height.value-this._get_text_location(this.model.align,this.frame.v_range)-this.model.offset;break;case"above":o=this._get_text_location(this.model.align,this.frame.h_range)+this.model.offset,i=this.canvas._top.value-10;break;case"below":o=this._get_text_location(this.model.align,this.frame.h_range)+this.model.offset,i=0}return r=this.canvas.vx_to_sx(o),n=this.canvas.vy_to_sy(i),[r,n,s,t]},e.prototype._get_text_location=function(t,e){var r;switch(t){case"left":r=e.start;break;case"center":r=(e.end+e.start)/2;break;case"right":r=e.end}return r},e.prototype.render=function(){var t,e,r,n,o,i,a;if(this.model.visible||"css"!==this.model.render_mode||s.hide(this.el),this.model.visible&&(t=this.model.panel.get_label_angle_heuristic("parallel"),n=this._get_computed_location(),o=n[0],i=n[1],a=n[2],r=n[3],e=this.plot_view.canvas_view.ctx,""!==this.model.text&&null!==this.model.text))return"canvas"===this.model.render_mode?this._canvas_text(e,this.model.text,o,i,t):this._css_text(e,this.model.text,o,i,t),this.data.title.bbox={x:o,y:i,w:a,h:r},window.localStorage.setItem(this.data.name,JSON.stringify(this.data)),console.log("render title",this)},e.prototype._get_size=function(){var t,e;return e=this.model.text,""===e||null===e?0:(t=this.plot_view.canvas_view.ctx,this.visuals.text.set_value(t),t.measureText(e).ascent+10)},e}(i.TextAnnotationView),r.Title=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.TitleView,e.prototype.type="Title",e.mixins(["line:border_","fill:background_"]),e.define({text:[a.String],text_font:[a.Font,"helvetica"],text_font_size:[a.FontSizeSpec,"10pt"],text_font_style:[a.FontStyle,"bold"],text_color:[a.ColorSpec,"#444444"],text_alpha:[a.NumberSpec,1],align:[a.TextAlign,"left"],offset:[a.Number,0],render_mode:[a.RenderMode,"canvas"]}),e.override({background_fill_color:null,border_line_color:null}),e.internal({text_align:[a.TextAlign,"left"],text_baseline:[a.TextBaseline,"bottom"]}),e}(i.TextAnnotation)},{"./text_annotation":"models/annotations/text_annotation","core/dom":"core/dom","core/properties":"core/properties","core/visuals":"core/visuals"}],"models/annotations/tooltip":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./annotation"),s=t("core/dom"),a=t("core/properties");r.TooltipView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.className="bk-tooltip",e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.plot_view.canvas_overlays.appendChild(this.el),this.el.style.zIndex=1010,s.hide(this.el)},e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),this.connect(this.model.properties.data.change,function(){return this._draw_tips()})},e.prototype.render=function(){if(this.model.visible)return this._draw_tips()},e.prototype._draw_tips=function(){var t,e,r,n,o,i,a,l,u,c,_,p,h,d,f,m,y,g;if(o=this.model.data,s.empty(this.el),s.hide(this.el),this.model.custom?this.el.classList.add("bk-tooltip-custom"):this.el.classList.remove("bk-tooltip-custom"),0!==o.length){for(a=0,u=o.length;a<u;a++)f=o[a],m=f[0],y=f[1],n=f[2],this.model.inner_only&&!this.plot_view.frame.contains(m,y)||(h=s.div({},n),this.el.appendChild(h));switch(_=this.plot_view.model.canvas.vx_to_sx(m),p=this.plot_view.model.canvas.vy_to_sy(y),e=this.model.attachment){case"horizontal":g=this.plot_view.frame._width.value,l=this.plot_view.frame._left.value,c=m-l<g/2?"right":"left";break;case"vertical":i=this.plot_view.frame._height.value,r=this.plot_view.frame._bottom.value,c=y-r<i/2?"below":"above";break;default:c=e}switch(this.el.classList.remove("bk-right"),this.el.classList.remove("bk-left"),this.el.classList.remove("bk-above"),this.el.classList.remove("bk-below"),t=10,s.show(this.el),c){case"right":this.el.classList.add("bk-left"),l=_+(this.el.offsetWidth-this.el.clientWidth)+t,d=p-this.el.offsetHeight/2;break;case"left":this.el.classList.add("bk-right"),l=_-this.el.offsetWidth-t,d=p-this.el.offsetHeight/2;break;case"above":this.el.classList.add("bk-above"),d=p+(this.el.offsetHeight-this.el.clientHeight)+t,l=Math.round(_-this.el.offsetWidth/2);break;case"below":this.el.classList.add("bk-below"),d=p-this.el.offsetHeight-t,l=Math.round(_-this.el.offsetWidth/2)}return this.model.show_arrow&&this.el.classList.add("bk-tooltip-arrow"),this.el.childNodes.length>0?(this.el.style.top=d+"px",this.el.style.left=l+"px"):s.hide(this.el)}},e}(i.AnnotationView),r.Tooltip=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.TooltipView,e.prototype.type="Tooltip",e.define({attachment:[a.String,"horizontal"],inner_only:[a.Bool,!0],show_arrow:[a.Bool,!0]}),e.override({level:"overlay"}),e.internal({data:[a.Any,[]],custom:[a.Any]}),e.prototype.clear=function(){return this.data=[]},e.prototype.add=function(t,e,r){var n;return n=this.data,n.push([t,e,r]),this.data=n,this.properties.data.change.emit()},e}(i.Annotation)},{"./annotation":"models/annotations/annotation","core/dom":"core/dom","core/properties":"core/properties"}],"models/annotations/whisker":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./annotation"),s=t("../sources/column_data_source"),a=t("./arrow_head"),l=t("core/properties");r.WhiskerView=function(t){function e(){return e.__super__.constructor.apply(this,arguments);
}return n(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.set_data(this.model.source)},e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),this.connect(this.model.source.streaming,function(){return this.set_data(this.model.source)}),this.connect(this.model.source.patching,function(){return this.set_data(this.model.source)}),this.connect(this.model.source.change,function(){return this.set_data(this.model.source)})},e.prototype.set_data=function(t){return e.__super__.set_data.call(this,t),this.visuals.warm_cache(t),this.plot_view.request_render()},e.prototype._map_data=function(){var t,e,r,n,o,i,s,a,l,u,c,_;return c=this.plot_view.frame.xscales[this.model.x_range_name],_=this.plot_view.frame.yscales[this.model.y_range_name],l="height"===this.model.dimension?_:c,i="height"===this.model.dimension?c:_,r="data"===this.model.lower.units?l.v_compute(this._lower):this._lower,o="data"===this.model.upper.units?l.v_compute(this._upper):this._upper,t="data"===this.model.base.units?i.v_compute(this._base):this._base,u=this.model._normals(),s=u[0],a=u[1],e=[r,t],n=[o,t],this._lower_sx=this.plot_model.canvas.v_vx_to_sx(e[s]),this._lower_sy=this.plot_model.canvas.v_vy_to_sy(e[a]),this._upper_sx=this.plot_model.canvas.v_vx_to_sx(n[s]),this._upper_sy=this.plot_model.canvas.v_vy_to_sy(n[a])},e.prototype.render=function(){var t,e,r,n,o,i,s,a,l,u;if(this.model.visible){if(this._map_data(),e=this.plot_view.canvas_view.ctx,this.visuals.line.doit)for(r=n=0,s=this._lower_sx.length;0<=s?n<s:n>s;r=0<=s?++n:--n)this.visuals.line.set_vectorize(e,r),e.beginPath(),e.moveTo(this._lower_sx[r],this._lower_sy[r]),e.lineTo(this._upper_sx[r],this._upper_sy[r]),e.stroke();if(t="height"===this.model.dimension?0:Math.PI/2,null!=this.model.lower_head)for(r=o=0,a=this._lower_sx.length;0<=a?o<a:o>a;r=0<=a?++o:--o)e.save(),e.translate(this._lower_sx[r],this._lower_sy[r]),e.rotate(t+Math.PI),this.model.lower_head.render(e,r),e.restore();if(null!=this.model.upper_head){for(u=[],r=i=0,l=this._upper_sx.length;0<=l?i<l:i>l;r=0<=l?++i:--i)e.save(),e.translate(this._upper_sx[r],this._upper_sy[r]),e.rotate(t),this.model.upper_head.render(e,r),u.push(e.restore());return u}}},e}(i.AnnotationView),r.Whisker=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.WhiskerView,e.prototype.type="Whisker",e.mixins(["line"]),e.define({lower:[l.DistanceSpec],lower_head:[l.Instance,function(){return new a.TeeHead({level:"underlay",size:10})}],upper:[l.DistanceSpec],upper_head:[l.Instance,function(){return new a.TeeHead({level:"underlay",size:10})}],base:[l.DistanceSpec],dimension:[l.Dimension,"height"],source:[l.Instance,function(){return new s.ColumnDataSource}],x_range_name:[l.String,"default"],y_range_name:[l.String,"default"]}),e.override({level:"underlay"}),e.prototype._normals=function(){var t,e,r,n;return"height"===this.dimension?(r=[1,0],t=r[0],e=r[1]):(n=[0,1],t=n[0],e=n[1]),[t,e]},e}(i.Annotation)},{"../sources/column_data_source":"models/sources/column_data_source","./annotation":"models/annotations/annotation","./arrow_head":"models/annotations/arrow_head","core/properties":"core/properties"}],"models/axes/axis":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/layout/side_panel"),s=t("../renderers/guide_renderer"),a=t("../renderers/renderer"),l=t("core/logging"),u=t("core/properties"),c=t("core/util/types"),_=t("core/util/text"),p=t("lodash");r.AxisView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this._x_range_name=this.model.x_range_name,this._y_range_name=this.model.y_range_name,this.data={name:this.model.attributes.name,model_id:this.model.id,model_type:"axis",data_fields:["rule","major_ticks","minor_ticks","major_labels","label"],rule:null,minor_ticks:[],major_ticks:[],major_labels:[],label:null}},e.prototype.render=function(){var t;if(this.model.visible!==!1)return t=this.plot_view.canvas_view.ctx,t.save(),this._draw_rule(t),this._draw_major_ticks(t),this._draw_minor_ticks(t),this._draw_major_labels(t),this._draw_axis_label(t),t.restore(),console.log("render axis"),console.log(this),window.localStorage.setItem(this.data.name,JSON.stringify(this.data))},e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),this.connect(this.model.change,function(t){return function(){return t.plot_view.request_render()}}(this))},e.prototype._calculate_text_dimensions=function(t,e,r){var n,o;return o=t.measureText(e).width,n=_.get_text_height(r).height,[o,n]},e.prototype._get_size=function(){return this._tick_extent()+this._tick_label_extent()+this._axis_label_extent()},e.prototype._draw_rule=function(t){var e,r,n,o,i,s,a,l,u,c,_,h,d,f,m,y,g,v,b,w,x,k;if(this.visuals.axis_line.doit){for(c=n=this.model.rule_coords,b=c[0],x=c[1],_=this.plot_view.map_to_screen(b,x,this._x_range_name,this._y_range_name),g=_[0],v=_[1],h=this.model.normals,s=h[0],a=h[1],d=this.model.offsets,w=d[0],k=d[1],this.visuals.axis_line.set_value(t),t.beginPath(),l=Math.round(g[0]+s*w),u=Math.round(v[0]+a*k),t.moveTo(l,u),e={},r=2,o=i=1,f=g.length;1<=f?i<f:i>f;o=1<=f?++i:--i)m=Math.round(g[o]+s*w),y=Math.round(v[o]+a*k),1===o&&(m===l?(e.x=m-r,e.w=2*r):(e.y=y-r,e.h=2*r)),o===g.length-1&&(p.isNil(e.h)?(e.y=p.min([u,y]),e.h=p.max([u,y])-e.y):(e.x=p.min([l,m]),e.w=p.max([l,m])-e.x)),t.lineTo(Math.round(g[o]+s*w),Math.round(v[o]+a*k));return t.stroke(),this.data.rule=[{bbox:e}]}},e.prototype._draw_major_ticks=function(t){var e,r,n,o,i,s,a,l,u,c,_,h,d,f,m,y,g,v,b,w,x,k,M,j,S;if(this.visuals.major_tick_line.doit){for(e=this.model.tick_coords,s=e.major,k=s[0],j=s[1],a=this.plot_view.map_to_screen(k,j,this._x_range_name,this._y_range_name),h=a[0],d=a[1],l=this.model.normals,o=l[0],i=l[1],u=this.model.offsets,M=u[0],S=u[1],x=null,x=p.uniq(k).length<=1?j:k,b=this.model.major_tick_in,w=this.model.major_tick_out,this.visuals.major_tick_line.set_value(t),_=[],r=n=0,c=h.length;0<=c?n<c:n>c;r=0<=c?++n:--n)t.beginPath(),t.moveTo(Math.round(h[r]+o*w+o*M),Math.round(d[r]+i*w+i*S)),t.lineTo(Math.round(h[r]-o*b+o*M),Math.round(d[r]-i*b+i*S)),t.stroke(),y=Math.round(h[r]+o*w+o*M),g=Math.round(d[r]+i*w+i*S),m=Math.abs(Math.round(h[r]-o*b+o*M)-y),f=Math.abs(Math.round(d[r]-i*b+i*S)-g),v=0,0!==m?(g-=m/2,f=m):(y-=f/2,m=f,v=f),_.push(this.data.major_ticks.push({value:x[r],bbox:{x:y,y:g-v,w:m,h:f}}));return _}},e.prototype._draw_minor_ticks=function(t){var e,r,n,o,i,s,a,l,u,c,_,h,d,f,m,y,g,v,b,w,x,k,M,j,S;if(this.visuals.minor_tick_line.doit){for(e=this.model.tick_coords,s=e.minor,k=s[0],j=s[1],a=this.plot_view.map_to_screen(k,j,this._x_range_name,this._y_range_name),h=a[0],d=a[1],l=this.model.normals,o=l[0],i=l[1],u=this.model.offsets,M=u[0],S=u[1],x=null,x=p.uniq(k).length<=1?j:k,b=this.model.minor_tick_in,w=this.model.minor_tick_out,this.visuals.minor_tick_line.set_value(t),_=[],r=n=0,c=h.length;0<=c?n<c:n>c;r=0<=c?++n:--n)t.beginPath(),t.moveTo(Math.round(h[r]+o*w+o*M),Math.round(d[r]+i*w+i*S)),t.lineTo(Math.round(h[r]-o*b+o*M),Math.round(d[r]-i*b+i*S)),t.stroke(),y=Math.round(h[r]+o*w+o*M),g=Math.round(d[r]+i*w+i*S),m=Math.abs(Math.round(h[r]-o*b+o*M)-y),f=Math.abs(Math.round(d[r]-i*b+i*S)-g),v=0,0!==m?(g-=m/2,f=m):(y-=f/2,m=f,v=f),_.push(this.data.minor_ticks.push({value:x[r],bbox:{x:y,y:g-v,w:m,h:f}}));return _}},e.prototype._draw_major_labels=function(t){var e,r,n,o,i,s,a,l,u,_,p,h,d,f,m,y,g,v,b,w,x,k,M,j,S,T,O,P,A,E;for(n=this.model.tick_coords,f=n.major,O=f[0],A=f[1],m=this.plot_view.map_to_screen(O,A,this._x_range_name,this._y_range_name),M=m[0],j=m[1],y=this.model.normals,p=y[0],h=y[1],g=this.model.offsets,P=g[0],E=g[1],o=this.model.dimension,x=this.model.panel_side,d=this.model.major_label_orientation,e=c.isString(d)?this.model.panel.get_label_angle_heuristic(d):-d,k=this._tick_extent()+this.model.major_label_standoff,_=this.model.compute_labels(n.major[o]),this.visuals.major_label_text.set_value(t),this.model.panel.apply_label_text_heuristics(t,d),w=[],s=a=0,v=M.length;0<=v?a<v:a>v;s=0<=v?++a:--a)r=null,l=Math.round(M[s]+p*k+p*P),u=Math.round(j[s]+h*k+h*E),e?(t.translate(M[s]+p*k+p*P,j[s]+h*k+h*E),t.rotate(e),t.fillText(_[s],0,0),t.rotate(-e),t.translate(-M[s]-p*k+p*P,-j[s]-h*k+h*E)):t.fillText(_[s],l,u),b=this._calculate_text_dimensions(t,_[s],this.visuals.major_label_text.font_value()),T=b[0],i=b[1],"vertical"===d&&(S=T,T=i,i=S),1===h?l=Math.round(l-T/2):(l=Math.round(l-T),u=Math.round(u-i/2)),r={x:l,y:u,w:T,h:i},w.push(this.data.major_labels.push({text:_[s],bbox:r}));return w},e.prototype._draw_axis_label=function(t){var e,r,n,o,i,s,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w,x;if(o=this.model.axis_label,null!=o&&(l=this.model.rule_coords,v=l[0],w=l[1],u=this.plot_view.map_to_screen(v,w,this._x_range_name,this._y_range_name),f=u[0],m=u[1],c=this.model.normals,i=c[0],s=c[1],_=this.model.offsets,b=_[0],x=_[1],h=this.model.panel_side,a="parallel",e=this.model.panel.get_label_angle_heuristic(a),d=this._tick_extent()+this._tick_label_extent()+this.model.axis_label_standoff,f=(f[0]+f[f.length-1])/2,m=(m[0]+m[m.length-1])/2,this.visuals.axis_label_text.set_value(t),this.model.panel.apply_label_text_heuristics(t,a),v=f+i*d+i*b,w=m+s*d+s*x,p=this._calculate_text_dimensions(t,o,this.visuals.axis_label_text.font_value()),g=p[0],n=p[1],!isNaN(v)&&!isNaN(w)))return e&&0!==e?(t.translate(v,w),t.rotate(e),t.fillText(o,0,0),t.rotate(-e),t.translate(-v,-w),y=g,g=n,n=y):t.fillText(o,v,w),v=Math.round(v-g/2),i===-1&&(w=Math.round(w-n/2),v=Math.round(v-g/4)),r={x:v,y:w,w:g,h:n},this.data.label=[{text:o,bbox:r}]},e.prototype._tick_extent=function(){return this.model.major_tick_out},e.prototype._tick_label_extent=function(){var t,e,r,n,o,i,s,a,l,u,_,p,h,d,f,m,y,g,v;for(i=0,n=this.plot_view.canvas_view.ctx,o=this.model.dimension,r=this.model.tick_coords.major,m=this.model.panel_side,h=this.model.major_label_orientation,p=this.model.compute_labels(r[o]),this.visuals.major_label_text.set_value(n),c.isString(h)?(l=1,t=this.model.panel.get_label_angle_heuristic(h)):(l=2,t=-h),t=Math.abs(t),e=Math.cos(t),f=Math.sin(t),"above"===m||"below"===m?(v=f,a=e):(v=e,a=f),u=_=0,d=p.length;0<=d?_<d:_>d;u=0<=d?++_:--_)null!=p[u]&&(g=1.1*n.measureText(p[u]).width,s=.9*n.measureText(p[u]).ascent,y=g*v+s/l*a,y>i&&(i=y));return i>0&&(i+=this.model.major_label_standoff),i},e.prototype._axis_label_extent=function(){var t,e,r,n,o,i,s,a,l,u;return o=0,l=this.model.panel_side,e=this.model.axis_label,s="parallel",n=this.plot_view.canvas_view.ctx,this.visuals.axis_label_text.set_value(n),t=Math.abs(this.model.panel.get_label_angle_heuristic(s)),r=Math.cos(t),a=Math.sin(t),e&&(o+=this.model.axis_label_standoff,this.visuals.axis_label_text.set_value(n),u=1.1*n.measureText(e).width,i=.9*n.measureText(e).ascent,o+="above"===l||"below"===l?u*a+i*r:u*r+i*a),o},e}(a.RendererView),r.Axis=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.AxisView,e.prototype.type="Axis",e.mixins(["line:axis_","line:major_tick_","line:minor_tick_","text:major_label_","text:axis_label_"]),e.define({bounds:[u.Any,"auto"],ticker:[u.Instance,null],formatter:[u.Instance,null],x_range_name:[u.String,"default"],y_range_name:[u.String,"default"],axis_label:[u.String,""],axis_label_standoff:[u.Int,5],major_label_standoff:[u.Int,5],major_label_orientation:[u.Any,"horizontal"],major_label_overrides:[u.Any,{}],major_tick_in:[u.Number,2],major_tick_out:[u.Number,6],minor_tick_in:[u.Number,0],minor_tick_out:[u.Number,4]}),e.override({axis_line_color:"black",major_tick_line_color:"black",minor_tick_line_color:"black",major_label_text_font_size:"8pt",major_label_text_align:"center",major_label_text_baseline:"alphabetic",axis_label_text_font_size:"10pt",axis_label_text_font_style:"italic"}),e.internal({panel_side:[u.Any]}),e.prototype.compute_labels=function(t){var e,r,n,o;for(n=this.formatter.doFormat(t,this),e=r=0,o=t.length;0<=o?r<o:r>o;e=0<=o?++r:--r)t[e]in this.major_label_overrides&&(n[e]=this.major_label_overrides[t[e]]);return n},e.getters({computed_bounds:function(){return this._computed_bounds()},rule_coords:function(){return this._rule_coords()},tick_coords:function(){return this._tick_coords()},ranges:function(){return this._ranges()},normals:function(){return this.panel._normals},dimension:function(){return this.panel._dim},offsets:function(){return this._offsets()},loc:function(){return this._get_loc()}}),e.prototype.add_panel=function(t){return this.panel=new i.SidePanel({side:t}),this.panel.attach_document(this.document),this.panel_side=t},e.prototype._offsets=function(){var t,e,r,n,o;switch(r=this.panel_side,e=[0,0],n=e[0],o=e[1],t=this.plot.plot_canvas.frame,r){case"below":o=Math.abs(this.panel._top.value-t._bottom.value);break;case"above":o=Math.abs(this.panel._bottom.value-t._top.value);break;case"right":n=Math.abs(this.panel._left.value-t._right.value);break;case"left":n=Math.abs(this.panel._right.value-t._left.value)}return[n,o]},e.prototype._ranges=function(){var t,e,r,n;return e=this.dimension,r=(e+1)%2,t=this.plot.plot_canvas.frame,n=[t.x_ranges[this.x_range_name],t.y_ranges[this.y_range_name]],[n[e],n[r]]},e.prototype._computed_bounds=function(){var t,e,r,n,o,i,s,a;return o=this.ranges,r=o[0],t=o[1],a=null!=(i=this.bounds)?i:"auto",n=[r.min,r.max],"auto"===a?n:c.isArray(a)?(Math.abs(a[0]-a[1])>Math.abs(n[0]-n[1])?(s=Math.max(Math.min(a[0],a[1]),n[0]),e=Math.min(Math.max(a[0],a[1]),n[1])):(s=Math.min(a[0],a[1]),e=Math.max(a[0],a[1])),[s,e]):(l.logger.error("user bounds '"+a+"' not understood"),null)},e.prototype._rule_coords=function(){var t,e,r,n,o,i,s,a,l,u,c;return n=this.dimension,o=(n+1)%2,s=this.ranges,i=s[0],e=s[1],a=this.computed_bounds,l=a[0],r=a[1],u=new Array(2),c=new Array(2),t=[u,c],t[n][0]=Math.max(l,i.min),t[n][1]=Math.min(r,i.max),t[n][0]>t[n][1]&&(t[n][0]=t[n][1]=NaN),t[o][0]=this.loc,t[o][1]=this.loc,t},e.prototype._tick_coords=function(){var t,e,r,n,o,i,s,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k,M,j,S;if(n=this.dimension,i=(n+1)%2,y=this.ranges,d=y[0],e=y[1],g=this.computed_bounds,k=g[0],r=g[1],M=this.ticker.get_ticks(k,r,d,this.loc,{}),u=M.major,h=M.minor,j=[],S=[],t=[j,S],_=[],p=[],c=[_,p],"FactorRange"===d.type)for(o=s=0,v=u.length;0<=v?s<v:s>v;o=0<=v?++s:--s)t[n].push(u[o]),t[i].push(this.loc);else{for(b=[d.min,d.max],m=b[0],f=b[1],o=a=0,w=u.length;0<=w?a<w:a>w;o=0<=w?++a:--a)u[o]<m||u[o]>f||(t[n].push(u[o]),t[i].push(this.loc));for(o=l=0,x=h.length;0<=x?l<x:l>x;o=0<=x?++l:--l)h[o]<m||h[o]>f||(c[n].push(h[o]),c[i].push(this.loc))}return{major:t,minor:c}},e.prototype._get_loc=function(){var t,e,r,n,o,i;switch(o=this.ranges,n=o[0],e=o[1],r=e.start,t=e.end,i=this.panel_side){case"left":case"below":return e.start;case"right":case"above":return e.end}},e}(s.GuideRenderer)},{"../renderers/guide_renderer":"models/renderers/guide_renderer","../renderers/renderer":"models/renderers/renderer","core/layout/side_panel":"core/layout/side_panel","core/logging":"core/logging","core/properties":"core/properties","core/util/text":"core/util/text","core/util/types":"core/util/types",lodash:"lodash"}],"models/axes/categorical_axis":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./axis"),s=t("../formatters/categorical_tick_formatter"),a=t("../tickers/categorical_ticker"),l=t("core/logging");r.CategoricalAxisView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e}(i.AxisView),r.CategoricalAxis=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.CategoricalAxisView,e.prototype.type="CategoricalAxis",e.override({ticker:function(){return new a.CategoricalTicker},formatter:function(){return new s.CategoricalTickFormatter}}),e.prototype._computed_bounds=function(){var t,e,r,n,o,i;return n=this.ranges,e=n[0],t=n[1],i=null!=(o=this.bounds)?o:"auto",r=[e.min,e.max],"auto"!==i&&l.logger.warn("Categorical Axes only support user_bounds='auto', ignoring"),r},e}(i.Axis)},{"../formatters/categorical_tick_formatter":"models/formatters/categorical_tick_formatter","../tickers/categorical_ticker":"models/tickers/categorical_ticker","./axis":"models/axes/axis","core/logging":"core/logging"}],"models/axes/continuous_axis":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./axis");r.ContinuousAxis=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="ContinuousAxis",e}(i.Axis)},{"./axis":"models/axes/axis"}],"models/axes/datetime_axis":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./linear_axis"),s=t("../formatters/datetime_tick_formatter"),a=t("../tickers/datetime_ticker");r.DatetimeAxisView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e}(i.LinearAxisView),r.DatetimeAxis=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.DatetimeAxisView,e.prototype.type="DatetimeAxis",e.override({ticker:function(){return new a.DatetimeTicker},formatter:function(){return new s.DatetimeTickFormatter}}),e}(i.LinearAxis)},{"../formatters/datetime_tick_formatter":"models/formatters/datetime_tick_formatter","../tickers/datetime_ticker":"models/tickers/datetime_ticker","./linear_axis":"models/axes/linear_axis"}],"models/axes/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./axis");r.Axis=n.Axis;var o=t("./categorical_axis");r.CategoricalAxis=o.CategoricalAxis;var i=t("./continuous_axis");r.ContinuousAxis=i.ContinuousAxis;var s=t("./datetime_axis");r.DatetimeAxis=s.DatetimeAxis;var a=t("./linear_axis");r.LinearAxis=a.LinearAxis;var l=t("./log_axis");r.LogAxis=l.LogAxis},{"./axis":"models/axes/axis","./categorical_axis":"models/axes/categorical_axis","./continuous_axis":"models/axes/continuous_axis","./datetime_axis":"models/axes/datetime_axis","./linear_axis":"models/axes/linear_axis","./log_axis":"models/axes/log_axis"}],"models/axes/linear_axis":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./axis"),s=t("./continuous_axis"),a=t("../formatters/basic_tick_formatter"),l=t("../tickers/basic_ticker");r.LinearAxisView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e}(i.AxisView),r.LinearAxis=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.LinearAxisView,e.prototype.type="LinearAxis",e.override({ticker:function(){return new l.BasicTicker},formatter:function(){return new a.BasicTickFormatter}}),e}(s.ContinuousAxis)},{"../formatters/basic_tick_formatter":"models/formatters/basic_tick_formatter","../tickers/basic_ticker":"models/tickers/basic_ticker","./axis":"models/axes/axis","./continuous_axis":"models/axes/continuous_axis"}],"models/axes/log_axis":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./axis"),s=t("./continuous_axis"),a=t("../formatters/log_tick_formatter"),l=t("../tickers/log_ticker");r.LogAxisView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e}(i.AxisView),r.LogAxis=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.LogAxisView,e.prototype.type="LogAxis",e.override({ticker:function(){return new l.LogTicker},formatter:function(){return new a.LogTickFormatter}}),e}(s.ContinuousAxis)},{"../formatters/log_tick_formatter":"models/formatters/log_tick_formatter","../tickers/log_ticker":"models/tickers/log_ticker","./axis":"models/axes/axis","./continuous_axis":"models/axes/continuous_axis"}],"models/callbacks/customjs":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=[].slice,s=t("core/properties"),a=t("core/util/object"),l=t("../../model");r.CustomJS=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return n(r,e),r.prototype.type="CustomJS",r.define({args:[s.Any,{}],code:[s.String,""]}),r.getters({values:function(){return this._make_values()},func:function(){return this._make_func()}}),r.prototype.execute=function(e,r){return this.func.apply(e,this.values.concat(e,r,t,{}))},r.prototype._make_values=function(){return a.values(this.args)},r.prototype._make_func=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Function,i.call(Object.keys(this.args)).concat(["cb_obj"],["cb_data"],["require"],["exports"],[this.code]),function(){})},r}(l.Model)},{"../../model":"model","core/properties":"core/properties","core/util/object":"core/util/object"}],"models/callbacks/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./customjs");r.CustomJS=n.CustomJS;var o=t("./open_url");r.OpenURL=o.OpenURL},{"./customjs":"models/callbacks/customjs","./open_url":"models/callbacks/open_url"}],"models/callbacks/open_url":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("../../model"),s=t("core/properties"),a=t("core/util/selection"),l=t("core/util/templating");r.OpenURL=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="OpenURL",e.define({url:[s.String,"http://"]}),e.prototype.execute=function(t){var e,r,n,o,i;for(o=a.get_indices(t),r=0,n=o.length;r<n;r++)e=o[r],i=l.replace_placeholders(this.url,t,e),window.open(i);return null},e}(i.Model)},{"../../model":"model","core/properties":"core/properties","core/util/selection":"core/util/selection","core/util/templating":"core/util/templating"}],"models/canvas/canvas":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/layout/layout_canvas"),s=t("core/dom_view"),a=t("core/layout/solver"),l=t("core/logging"),u=t("core/properties"),c=t("core/dom"),_=t("core/util/canvas"),p=t("canvas2svg");null!=window.CanvasPixelArray&&(CanvasPixelArray.prototype.set=function(t){var e,r,n,o;for(o=[],e=r=0,n=this.length;0<=n?r<n:r>n;e=0<=n?++r:--r)o.push(this[e]=t[e]);return o}),r.CanvasView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.className="bk-canvas-wrapper",e.prototype.initialize=function(t){switch(e.__super__.initialize.call(this,t),this.map_el=this.model.map?this.el.appendChild(c.div({"class":"bk-canvas-map"})):null,this.events_el=this.el.appendChild(c.div({"class":"bk-canvas-events"})),this.overlays_el=this.el.appendChild(c.div({"class":"bk-canvas-overlays"})),this.model.output_backend){case"canvas":case"webgl":this.canvas_el=this.el.appendChild(c.canvas({"class":"bk-canvas"})),this._ctx=this.canvas_el.getContext("2d");break;case"svg":this._ctx=new p,this.canvas_el=this.el.appendChild(this._ctx.getSvg())}return this.ctx=this.get_ctx(),_.fixup_ctx(this.ctx),l.logger.debug("CanvasView initialized")},e.prototype.get_ctx=function(){return this._ctx},e.prototype.get_canvas_element=function(){return this.canvas_el},e.prototype.prepare_canvas=function(){var t,e,r;return r=this.model._width.value,t=this.model._height.value,this.el.style.width=r+"px",this.el.style.height=t+"px",e=_.get_scale_ratio(this.ctx,this.model.use_hidpi,this.model.output_backend),this.model.pixel_ratio=e,this.canvas_el.style.width=r+"px",this.canvas_el.style.height=t+"px",this.canvas_el.setAttribute("width",r*e),this.canvas_el.setAttribute("height",t*e),l.logger.debug("Rendering CanvasView with width: "+r+", height: "+t+", pixel ratio: "+e)},e.prototype.set_dims=function(t){var e,r;if(r=t[0],e=t[1],0!==r&&0!==e)return null!=this._width_constraint&&this.solver.has_constraint(this._width_constraint)&&this.solver.remove_constraint(this._width_constraint),null!=this._height_constraint&&this.solver.has_constraint(this._height_constraint)&&this.solver.remove_constraint(this._height_constraint),this._width_constraint=a.EQ(this.model._width,-r),this.solver.add_constraint(this._width_constraint),this._height_constraint=a.EQ(this.model._height,-e),this.solver.add_constraint(this._height_constraint),this.solver.update_variables()},e}(s.DOMView),r.Canvas=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="Canvas",e.prototype.default_view=r.CanvasView,e.internal({map:[u.Boolean,!1],initial_width:[u.Number],initial_height:[u.Number],use_hidpi:[u.Boolean,!0],pixel_ratio:[u.Number,1],output_backend:[u.OutputBackend,"canvas"]}),e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this.panel=this},e.prototype.vx_to_sx=function(t){return t},e.prototype.vy_to_sy=function(t){return this._height.value-(t+1)},e.prototype.v_vx_to_sx=function(t){return new Float64Array(t)},e.prototype.v_vy_to_sy=function(t){var e,r,n,o,i,s;for(e=new Float64Array(t.length),r=this._height.value,n=o=0,i=t.length;o<i;n=++o)s=t[n],e[n]=r-(s+1);return e},e.prototype.sx_to_vx=function(t){return t},e.prototype.sy_to_vy=function(t){return this._height.value-(t+1)},e.prototype.v_sx_to_vx=function(t){return new Float64Array(t)},e.prototype.v_sy_to_vy=function(t){var e,r,n,o,i,s;for(e=new Float64Array(t.length),r=this._height.value,n=o=0,i=t.length;o<i;n=++o)s=t[n],e[n]=r-(s+1);return e},e.prototype.get_constraints=function(){return e.__super__.get_constraints.call(this).concat([a.GE(this._top),a.GE(this._bottom),a.GE(this._left),a.GE(this._right),a.GE(this._width),a.GE(this._height),a.EQ(this._width,[-1,this._right]),a.EQ(this._height,[-1,this._top])])},e}(i.LayoutCanvas)},{canvas2svg:"canvas2svg","core/dom":"core/dom","core/dom_view":"core/dom_view","core/layout/layout_canvas":"core/layout/layout_canvas","core/layout/solver":"core/layout/solver","core/logging":"core/logging","core/properties":"core/properties","core/util/canvas":"core/util/canvas"}],"models/canvas/cartesian_frame":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("../scales/categorical_scale"),s=t("../scales/linear_scale"),a=t("../scales/log_scale"),l=t("../ranges/range1d"),u=t("../ranges/data_range1d"),c=t("../ranges/factor_range"),_=t("core/layout/solver"),p=t("core/layout/layout_canvas"),h=t("core/logging"),d=t("core/properties");r.CartesianFrame=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="CartesianFrame",e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this.panel=this,this._configure_scales(),this.connect(this.change,function(t){return function(){return t._configure_scales()}}(this)),null},e.prototype.contains=function(t,e){return t>=this._left.value&&t<=this._right.value&&e>=this._bottom.value&&e<=this._top.value},e.prototype.map_to_screen=function(t,e,r,n,o){var i,s,a,l;return null==n&&(n="default"),null==o&&(o="default"),a=this.xscales[n].v_compute(t),i=r.v_vx_to_sx(a),l=this.yscales[o].v_compute(e),s=r.v_vy_to_sy(l),[i,s]},e.prototype._get_ranges=function(t,e){var r,n,o;if(o={},o["default"]=t,null!=e)for(n in e)r=e[n],o[n]=r;return o},e.prototype._get_scales=function(t,e,r){var n,o,_,p;p={};for(n in e){if(o=e[n],o instanceof u.DataRange1d||o instanceof l.Range1d){if(!(t instanceof a.LogScale||t instanceof s.LinearScale))throw new Error("Range "+o.type+" is incompatible is Scale "+t.type);if(t instanceof i.CategoricalScale)throw new Error("Range "+o.type+" is incompatible is Scale "+t.type)}if(o instanceof c.FactorRange&&!(t instanceof i.CategoricalScale))throw new Error("Range "+o.type+" is incompatible is Scale "+t.type);t instanceof a.LogScale&&o instanceof u.DataRange1d&&(o.scale_hint="log"),_=t.clone(),_.setv({source_range:o,target_range:r}),p[n]=_}return p},e.prototype._configure_frame_ranges=function(){return this._h_range=new l.Range1d({start:this._left.value,end:this._left.value+this._width.value}),this._v_range=new l.Range1d({start:this._bottom.value,end:this._bottom.value+this._height.value})},e.prototype._configure_scales=function(){return this._configure_frame_ranges(),this._x_ranges=this._get_ranges(this.x_range,this.extra_x_ranges),this._y_ranges=this._get_ranges(this.y_range,this.extra_y_ranges),this._xscales=this._get_scales(this.x_scale,this._x_ranges,this._h_range),this._yscales=this._get_scales(this.y_scale,this._y_ranges,this._v_range)},e.prototype._update_scales=function(){var t,e,r,n;this._configure_frame_ranges(),e=this._xscales;for(t in e)n=e[t],n.target_range=this._h_range;r=this._yscales;for(t in r)n=r[t],n.target_range=this._v_range;return null},e.getters({h_range:function(){return this._h_range},v_range:function(){return this._v_range},x_ranges:function(){return this._x_ranges},y_ranges:function(){return this._y_ranges},xscales:function(){return this._xscales},yscales:function(){return this._yscales},x_mappers:function(){return h.logger.warn("x_mappers attr is deprecated, use xscales"),this._xscales},y_mappers:function(){return h.logger.warn("y_mappers attr is deprecated, use yscales"),this._yscales}}),e.internal({extra_x_ranges:[d.Any,{}],extra_y_ranges:[d.Any,{}],x_range:[d.Instance],y_range:[d.Instance],x_scale:[d.Instance],y_scale:[d.Instance]}),e.prototype.get_constraints=function(){return[_.GE(this._top),_.GE(this._bottom),_.GE(this._left),_.GE(this._right),_.GE(this._width),_.GE(this._height),_.EQ(this._left,this._width,[-1,this._right]),_.EQ(this._bottom,this._height,[-1,this._top])]},e}(p.LayoutCanvas)},{"../ranges/data_range1d":"models/ranges/data_range1d","../ranges/factor_range":"models/ranges/factor_range","../ranges/range1d":"models/ranges/range1d","../scales/categorical_scale":"models/scales/categorical_scale","../scales/linear_scale":"models/scales/linear_scale","../scales/log_scale":"models/scales/log_scale","core/layout/layout_canvas":"core/layout/layout_canvas","core/layout/solver":"core/layout/solver","core/logging":"core/logging","core/properties":"core/properties"}],"models/canvas/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{
value:!0});var n=t("./canvas");r.Canvas=n.Canvas;var o=t("./cartesian_frame");r.CartesianFrame=o.CartesianFrame},{"./canvas":"models/canvas/canvas","./cartesian_frame":"models/canvas/cartesian_frame"}],"models/formatters/basic_tick_formatter":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./tick_formatter"),s=t("core/properties"),a=t("core/util/types");r.BasicTickFormatter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="BasicTickFormatter",e.define({precision:[s.Any,"auto"],use_scientific:[s.Bool,!0],power_limit_high:[s.Number,5],power_limit_low:[s.Number,-3]}),e.getters({scientific_limit_low:function(){return Math.pow(10,this.power_limit_low)},scientific_limit_high:function(){return Math.pow(10,this.power_limit_high)}}),e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this.last_precision=3},e.prototype.doFormat=function(t,e){var r,n,o,i,s,l,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k;if(0===t.length)return[];if(k=0,t.length>=2&&(k=Math.abs(t[1]-t[0])/1e4),p=!1,this.use_scientific)for(o=0,u=t.length;o<u;o++)if(b=t[o],w=Math.abs(b),w>k&&(w>=this.scientific_limit_high||w<=this.scientific_limit_low)){p=!0;break}if(d=this.precision,null==d||a.isNumber(d)){if(l=new Array(t.length),p)for(r=i=0,f=t.length;0<=f?i<f:i>f;r=0<=f?++i:--i)l[r]=t[r].toExponential(d||void 0);else for(r=s=0,m=t.length;0<=m?s<m:s>m;r=0<=m?++s:--s)l[r]=t[r].toFixed(d||void 0).replace(/(\.[0-9]*?)0+$/,"$1").replace(/\.$/,"");return l}if("auto"===d)for(l=new Array(t.length),x=c=y=this.last_precision;y<=15?c<=15:c>=15;x=y<=15?++c:--c){if(n=!0,p){for(r=_=0,g=t.length;0<=g?_<g:_>g;r=0<=g?++_:--_)if(l[r]=t[r].toExponential(x),r>0&&l[r]===l[r-1]){n=!1;break}if(n)break}else{for(r=h=0,v=t.length;0<=v?h<v:h>v;r=0<=v?++h:--h)if(l[r]=t[r].toFixed(x).replace(/(\.[0-9]*?)0+$/,"$1").replace(/\.$/,""),r>0&&l[r]===l[r-1]){n=!1;break}if(n)break}if(n)return this.last_precision=x,l}return l},e}(i.TickFormatter)},{"./tick_formatter":"models/formatters/tick_formatter","core/properties":"core/properties","core/util/types":"core/util/types"}],"models/formatters/categorical_tick_formatter":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./tick_formatter");r.CategoricalTickFormatter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="CategoricalTickFormatter",e.prototype.doFormat=function(t,e){return t},e}(i.TickFormatter)},{"./tick_formatter":"models/formatters/tick_formatter"}],"models/formatters/datetime_tick_formatter":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty,l=t("sprintf"),u=t("timezone"),c=t("./tick_formatter"),_=t("core/logging"),p=t("core/properties"),h=t("core/util/array"),d=t("core/util/types");i=function(t){return Math.round(t/1e3%1*1e6)},n=function(t){return u(t,"%Y %m %d %H %M %S").split(/\s+/).map(function(t){return parseInt(t,10)})},o=function(t,e){var r;return d.isFunction(e)?e(t):(r=l.sprintf("$1%06d",i(t)),e=e.replace(/((^|[^%])(%%)*)%f/,r),e.indexOf("%")===-1?e:u(t,e))},r.DatetimeTickFormatter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.type="DatetimeTickFormatter",e.define({microseconds:[p.Array,["%fus"]],milliseconds:[p.Array,["%3Nms","%S.%3Ns"]],seconds:[p.Array,["%Ss"]],minsec:[p.Array,[":%M:%S"]],minutes:[p.Array,[":%M","%Mm"]],hourmin:[p.Array,["%H:%M"]],hours:[p.Array,["%Hh","%H:%M"]],days:[p.Array,["%m/%d","%a%d"]],months:[p.Array,["%m/%Y","%b%y"]],years:[p.Array,["%Y"]]}),e.prototype.format_order=["microseconds","milliseconds","seconds","minsec","minutes","hourmin","hours","days","months","years"],e.prototype.strip_leading_zeros=!0,e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this._update_width_formats()},e.prototype._update_width_formats=function(){var t,e;return e=u(new Date),t=function(t){var r,n,i;return n=function(){var n,i,s;for(s=[],n=0,i=t.length;n<i;n++)r=t[n],s.push(o(e,r).length);return s}(),i=h.sortBy(h.zip(n,t),function(t){var e,r;return r=t[0],e=t[1],r}),h.unzip(i)},this._width_formats={microseconds:t(this.microseconds),milliseconds:t(this.milliseconds),seconds:t(this.seconds),minsec:t(this.minsec),minutes:t(this.minutes),hourmin:t(this.hourmin),hours:t(this.hours),days:t(this.days),months:t(this.months),years:t(this.years)}},e.prototype._get_resolution_str=function(t,e){var r;switch(r=1.1*t,!1){case!(r<.001):return"microseconds";case!(r<1):return"milliseconds";case!(r<60):return e>=60?"minsec":"seconds";case!(r<3600):return e>=3600?"hourmin":"minutes";case!(r<86400):return"hours";case!(r<2678400):return"days";case!(r<31536e3):return"months";default:return"years"}},e.prototype.doFormat=function(t,e,r,i,s,a){var l,u,c,p,h,d,f,m,y,g,v,b,w,x,k,M,j,S,T,O,P,A,E,z,C,N,D,I;if(null==r&&(r=null),null==i&&(i=null),null==s&&(s=.3),null==a&&(a=null),0===t.length)return[];if(E=Math.abs(t[t.length-1]-t[0])/1e3,M=a?a.resolution:E/(t.length-1),O=this._get_resolution_str(M,E),j=this._width_formats[O],I=j[0],p=j[1],c=p[0],i){for(h=[],f=m=0,S=I.length;0<=S?m<S:m>S;f=0<=S?++m:--m)I[f]*t.length<s*i&&h.push(this._width_formats[f]);h.length>0&&(c=h[h.length-1])}for(v=[],P=this.format_order.indexOf(O),N={},T=this.format_order,y=0,b=T.length;y<b;y++)u=T[y],N[u]=0;for(N.seconds=5,N.minsec=4,N.minutes=4,N.hourmin=3,N.hours=3,g=0,w=t.length;g<w;g++){C=t[g];try{D=n(C),A=o(C,c)}catch(F){l=F,_.logger.warn("unable to format tick for timestamp value "+C),_.logger.warn(" - "+l),v.push("ERR");continue}for(d=!1,k=P;0===D[N[this.format_order[k]]]&&(k+=1,k!==this.format_order.length);){if(("minsec"===O||"hourmin"===O)&&!d){if("minsec"===O&&0===D[4]&&0!==D[5]||"hourmin"===O&&0===D[3]&&0!==D[4]){x=this._width_formats[this.format_order[P-1]][1][0],A=o(C,x);break}d=!0}x=this._width_formats[this.format_order[k]][1][0],A=o(C,x)}this.strip_leading_zeros?(z=A.replace(/^0+/g,""),z!==A&&isNaN(parseInt(z))&&(z="0"+z),v.push(z)):v.push(A)}return v},e}(c.TickFormatter)},{"./tick_formatter":"models/formatters/tick_formatter","core/logging":"core/logging","core/properties":"core/properties","core/util/array":"core/util/array","core/util/types":"core/util/types",sprintf:"sprintf",timezone:"timezone/index"}],"models/formatters/func_tick_formatter":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=[].slice,s=t("./tick_formatter"),a=t("core/properties"),l=t("core/util/object");r.FuncTickFormatter=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return n(r,e),r.prototype.type="FuncTickFormatter",r.define({args:[a.Any,{}],code:[a.String,""]}),r.prototype._make_func=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Function,["tick"].concat(i.call(Object.keys(this.args)),["require"],[this.code]),function(){})},r.prototype.doFormat=function(e,r){var n,o;return n=this._make_func(),function(){var r,s,a;for(a=[],r=0,s=e.length;r<s;r++)o=e[r],a.push(n.apply(null,[o].concat(i.call(l.values(this.args)),[t])));return a}.call(this)},r}(s.TickFormatter)},{"./tick_formatter":"models/formatters/tick_formatter","core/properties":"core/properties","core/util/object":"core/util/object"}],"models/formatters/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./basic_tick_formatter");r.BasicTickFormatter=n.BasicTickFormatter;var o=t("./categorical_tick_formatter");r.CategoricalTickFormatter=o.CategoricalTickFormatter;var i=t("./datetime_tick_formatter");r.DatetimeTickFormatter=i.DatetimeTickFormatter;var s=t("./func_tick_formatter");r.FuncTickFormatter=s.FuncTickFormatter;var a=t("./log_tick_formatter");r.LogTickFormatter=a.LogTickFormatter;var l=t("./mercator_tick_formatter");r.MercatorTickFormatter=l.MercatorTickFormatter;var u=t("./numeral_tick_formatter");r.NumeralTickFormatter=u.NumeralTickFormatter;var c=t("./printf_tick_formatter");r.PrintfTickFormatter=c.PrintfTickFormatter;var _=t("./tick_formatter");r.TickFormatter=_.TickFormatter},{"./basic_tick_formatter":"models/formatters/basic_tick_formatter","./categorical_tick_formatter":"models/formatters/categorical_tick_formatter","./datetime_tick_formatter":"models/formatters/datetime_tick_formatter","./func_tick_formatter":"models/formatters/func_tick_formatter","./log_tick_formatter":"models/formatters/log_tick_formatter","./mercator_tick_formatter":"models/formatters/mercator_tick_formatter","./numeral_tick_formatter":"models/formatters/numeral_tick_formatter","./printf_tick_formatter":"models/formatters/printf_tick_formatter","./tick_formatter":"models/formatters/tick_formatter"}],"models/formatters/log_tick_formatter":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./basic_tick_formatter"),s=t("./tick_formatter"),a=t("core/logging"),l=t("core/properties");r.LogTickFormatter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="LogTickFormatter",e.define({ticker:[l.Instance,null]}),e.prototype.initialize=function(t,r){if(e.__super__.initialize.call(this,t,r),this.basic_formatter=new i.BasicTickFormatter,null==this.ticker)return a.logger.warn("LogTickFormatter not configured with a ticker, using default base of 10 (labels will be incorrect if ticker base is not 10)")},e.prototype.doFormat=function(t,e){var r,n,o,i,s,a;if(0===t.length)return[];for(r=null!=this.ticker?this.ticker.base:10,a=!1,i=new Array(t.length),n=o=0,s=t.length;0<=s?o<s:o>s;n=0<=s?++o:--o)if(i[n]=r+"^"+Math.round(Math.log(t[n])/Math.log(r)),n>0&&i[n]===i[n-1]){a=!0;break}return a&&(i=this.basic_formatter.doFormat(t)),i},e}(s.TickFormatter)},{"./basic_tick_formatter":"models/formatters/basic_tick_formatter","./tick_formatter":"models/formatters/tick_formatter","core/logging":"core/logging","core/properties":"core/properties"}],"models/formatters/mercator_tick_formatter":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./basic_tick_formatter"),s=t("core/properties"),a=t("core/util/proj4");r.MercatorTickFormatter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="MercatorTickFormatter",e.define({dimension:[s.LatLon]}),e.prototype.doFormat=function(t,r){var n,o,i,s,l,u,c,_,p,h;if(null==this.dimension)throw new Error("MercatorTickFormatter.dimension not configured");if(0===t.length)return[];if(u=new Array(t.length),"lon"===this.dimension)for(n=o=0,c=t.length;0<=c?o<c:o>c;n=0<=c?++o:--o)_=a.proj4(a.mercator).inverse([t[n],r.loc]),l=_[0],s=_[1],u[n]=l;else for(n=i=0,p=t.length;0<=p?i<p:i>p;n=0<=p?++i:--i)h=a.proj4(a.mercator).inverse([r.loc,t[n]]),l=h[0],s=h[1],u[n]=s;return e.__super__.doFormat.call(this,u,r)},e}(i.BasicTickFormatter)},{"./basic_tick_formatter":"models/formatters/basic_tick_formatter","core/properties":"core/properties","core/util/proj4":"core/util/proj4"}],"models/formatters/numeral_tick_formatter":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("numbro"),s=t("./tick_formatter"),a=t("core/properties");r.NumeralTickFormatter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="NumeralTickFormatter",e.define({format:[a.String,"0,0"],language:[a.String,"en"],rounding:[a.String,"round"]}),e.prototype.doFormat=function(t,e){var r,n,o,s,a;return r=this.format,o=this.language,s=function(){switch(this.rounding){case"round":case"nearest":return Math.round;case"floor":case"rounddown":return Math.floor;case"ceil":case"roundup":return Math.ceil}}.call(this),n=function(){var e,n,l;for(l=[],e=0,n=t.length;e<n;e++)a=t[e],l.push(i.format(a,r,o,s));return l}()},e}(s.TickFormatter)},{"./tick_formatter":"models/formatters/tick_formatter","core/properties":"core/properties",numbro:"numbro"}],"models/formatters/printf_tick_formatter":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("sprintf"),s=t("./tick_formatter"),a=t("core/properties");r.PrintfTickFormatter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="PrintfTickFormatter",e.define({format:[a.String,"%s"]}),e.prototype.doFormat=function(t,e){var r,n,o;return r=this.format,n=function(){var e,n,s;for(s=[],e=0,n=t.length;e<n;e++)o=t[e],s.push(i.sprintf(r,o));return s}()},e}(s.TickFormatter)},{"./tick_formatter":"models/formatters/tick_formatter","core/properties":"core/properties",sprintf:"sprintf"}],"models/formatters/tick_formatter":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("../../model");r.TickFormatter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="TickFormatter",e.prototype.doFormat=function(t,e){},e}(i.Model)},{"../../model":"model"}],"models/glyphs/annular_wedge":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./xy_glyph"),s=t("core/hittest"),a=t("core/properties"),l=t("core/util/math");r.AnnularWedgeView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._map_data=function(){var t,e,r,n;for("data"===this.model.properties.inner_radius.units?this.sinner_radius=this.sdist(this.renderer.xscale,this._x,this._inner_radius):this.sinner_radius=this._inner_radius,"data"===this.model.properties.outer_radius.units?this.souter_radius=this.sdist(this.renderer.xscale,this._x,this._outer_radius):this.souter_radius=this._outer_radius,this._angle=new Float32Array(this._start_angle.length),n=[],t=e=0,r=this._start_angle.length;0<=r?e<r:e>r;t=0<=r?++e:--e)n.push(this._angle[t]=this._end_angle[t]-this._start_angle[t]);return n},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u,c,_,p,h;for(p=r.sx,h=r.sy,o=r._start_angle,n=r._angle,c=r.sinner_radius,_=r.souter_radius,i=this.model.properties.direction.value(),u=[],a=0,l=e.length;a<l;a++)s=e[a],isNaN(p[s]+h[s]+c[s]+_[s]+o[s]+n[s])||(t.translate(p[s],h[s]),t.rotate(o[s]),t.moveTo(_[s],0),t.beginPath(),t.arc(0,0,_[s],0,n[s],i),t.rotate(n[s]),t.lineTo(c[s],0),t.arc(0,0,c[s],0,-n[s],!i),t.closePath(),t.rotate(-n[s]-o[s]),t.translate(-p[s],-h[s]),this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(t,s),t.fill()),this.visuals.line.doit?(this.visuals.line.set_vectorize(t,s),u.push(t.stroke())):u.push(void 0));return u},e.prototype._hit_point=function(t){var e,r,n,o,i,a,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k,M,j,S,T,O,P,A,E,z,C,N,D,I,F,B;for(m=[t.vx,t.vy],T=m[0],A=m[1],C=this.renderer.xscale.invert(T,!0),I=this.renderer.yscale.invert(A,!0),"data"===this.model.properties.outer_radius.units?(N=C-this.max_outer_radius,D=C+this.max_outer_radius,F=I-this.max_outer_radius,B=I+this.max_outer_radius):(O=T-this.max_outer_radius,P=T+this.max_outer_radius,y=this.renderer.xscale.v_invert([O,P],!0),N=y[0],D=y[1],E=A-this.max_outer_radius,z=A+this.max_outer_radius,g=this.renderer.yscale.v_invert([E,z],!0),F=g[0],B=g[1]),n=[],r=s.validate_bbox_coords([N,D],[F,B]),v=this.index.indices(r),_=0,h=v.length;_<h;_++)u=v[_],f=Math.pow(this.souter_radius[u],2),c=Math.pow(this.sinner_radius[u],2),x=this.renderer.xscale.compute(C,!0),k=this.renderer.xscale.compute(this._x[u],!0),j=this.renderer.yscale.compute(I,!0),S=this.renderer.yscale.compute(this._y[u],!0),i=Math.pow(x-k,2)+Math.pow(j-S,2),i<=f&&i>=c&&n.push([u,i]);for(o=this.model.properties.direction.value(),a=[],p=0,d=n.length;p<d;p++)b=n[p],u=b[0],i=b[1],w=this.renderer.plot_view.canvas.vx_to_sx(T),M=this.renderer.plot_view.canvas.vy_to_sy(A),e=Math.atan2(M-this.sy[u],w-this.sx[u]),l.angle_between(-e,-this._start_angle[u],-this._end_angle[u],o)&&a.push([u,i]);return s.create_1d_hit_test_result(a)},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){return this._generic_area_legend(t,e,r,n,o,i)},e.prototype._scxy=function(t){var e,r;return r=(this.sinner_radius[t]+this.souter_radius[t])/2,e=(this._start_angle[t]+this._end_angle[t])/2,{x:this.sx[t]+r*Math.cos(e),y:this.sy[t]+r*Math.sin(e)}},e.prototype.scx=function(t){return this._scxy(t).x},e.prototype.scy=function(t){return this._scxy(t).y},e}(i.XYGlyphView),r.AnnularWedge=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.AnnularWedgeView,e.prototype.type="AnnularWedge",e.mixins(["line","fill"]),e.define({direction:[a.Direction,"anticlock"],inner_radius:[a.DistanceSpec],outer_radius:[a.DistanceSpec],start_angle:[a.AngleSpec],end_angle:[a.AngleSpec]}),e}(i.XYGlyph)},{"./xy_glyph":"models/glyphs/xy_glyph","core/hittest":"core/hittest","core/properties":"core/properties","core/util/math":"core/util/math"}],"models/glyphs/annulus":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./xy_glyph"),s=t("core/hittest"),a=t("core/properties");r.AnnulusView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._map_data=function(){return"data"===this.model.properties.inner_radius.units?this.sinner_radius=this.sdist(this.renderer.xscale,this._x,this._inner_radius):this.sinner_radius=this._inner_radius,"data"===this.model.properties.outer_radius.units?this.souter_radius=this.sdist(this.renderer.xscale,this._x,this._outer_radius):this.souter_radius=this._outer_radius},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u,c,_,p,h,d,f;for(d=r.sx,f=r.sy,p=r.sinner_radius,h=r.souter_radius,_=[],s=0,l=e.length;s<l;s++)if(o=e[s],!isNaN(d[o]+f[o]+p[o]+h[o])){if(i=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>0||navigator.userAgent.indexOf("Edge")>0,this.visuals.fill.doit){if(this.visuals.fill.set_vectorize(t,o),t.beginPath(),i)for(c=[!1,!0],a=0,u=c.length;a<u;a++)n=c[a],t.arc(d[o],f[o],p[o],0,Math.PI,n),t.arc(d[o],f[o],h[o],Math.PI,0,!n);else t.arc(d[o],f[o],p[o],0,2*Math.PI,!0),t.arc(d[o],f[o],h[o],2*Math.PI,0,!1);t.fill()}this.visuals.line.doit?(this.visuals.line.set_vectorize(t,o),t.beginPath(),t.arc(d[o],f[o],p[o],0,2*Math.PI),t.moveTo(d[o]+h[o],f[o]),t.arc(d[o],f[o],h[o],0,2*Math.PI),_.push(t.stroke())):_.push(void 0)}return _},e.prototype._hit_point=function(t){var e,r,n,o,i,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k;for(c=[t.vx,t.vy],m=c[0],y=c[1],g=this.renderer.xscale.invert(m,!0),v=g-this.max_radius,b=g+this.max_radius,w=this.renderer.yscale.invert(y,!0),x=w-this.max_radius,k=w+this.max_radius,n=[],e=s.validate_bbox_coords([v,b],[x,k]),_=this.index.indices(e),a=0,l=_.length;a<l;a++)o=_[a],u=Math.pow(this.souter_radius[o],2),i=Math.pow(this.sinner_radius[o],2),p=this.renderer.xscale.compute(g),h=this.renderer.xscale.compute(this._x[o]),d=this.renderer.yscale.compute(w),f=this.renderer.yscale.compute(this._y[o]),r=Math.pow(p-h,2)+Math.pow(d-f,2),r<=u&&r>=i&&n.push([o,r]);return s.create_1d_hit_test_result(n)},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){var s,a,l,u,c,_,p;return a=[i],_={},_[i]=(e+r)/2,p={},p[i]=(n+o)/2,l=.5*Math.min(Math.abs(r-e),Math.abs(o-n)),u={},u[i]=.4*l,c={},c[i]=.8*l,s={sx:_,sy:p,sinner_radius:u,souter_radius:c},this._render(t,a,s)},e}(i.XYGlyphView),r.Annulus=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.AnnulusView,e.prototype.type="Annulus",e.mixins(["line","fill"]),e.define({inner_radius:[a.DistanceSpec],outer_radius:[a.DistanceSpec]}),e}(i.XYGlyph)},{"./xy_glyph":"models/glyphs/xy_glyph","core/hittest":"core/hittest","core/properties":"core/properties"}],"models/glyphs/arc":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./xy_glyph"),s=t("core/properties");r.ArcView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._map_data=function(){return"data"===this.model.properties.radius.units?this.sradius=this.sdist(this.renderer.xscale,this._x,this._radius):this.sradius=this._radius},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u,c,_,p;if(_=r.sx,p=r.sy,c=r.sradius,o=r._start_angle,n=r._end_angle,this.visuals.line.doit){for(i=this.model.properties.direction.value(),u=[],a=0,l=e.length;a<l;a++)s=e[a],isNaN(_[s]+p[s]+c[s]+o[s]+n[s])||(t.beginPath(),t.arc(_[s],p[s],c[s],o[s],n[s],i),this.visuals.line.set_vectorize(t,s),u.push(t.stroke()));return u}},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){return this._generic_line_legend(t,e,r,n,o,i)},e}(i.XYGlyphView),r.Arc=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.ArcView,e.prototype.type="Arc",e.mixins(["line"]),e.define({direction:[s.Direction,"anticlock"],radius:[s.DistanceSpec],start_angle:[s.AngleSpec],end_angle:[s.AngleSpec]}),e}(i.XYGlyph)},{"./xy_glyph":"models/glyphs/xy_glyph","core/properties":"core/properties"}],"models/glyphs/bezier":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=t("core/util/spatial"),a=t("./glyph");n=function(t,e,r,n,o,i,s,a){var l,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k,M;for(x=[],_=[[],[]],h=m=0;m<=2;h=++m)if(0===h?(u=6*t-12*r+6*o,l=-3*t+9*r-9*o+3*s,p=3*r-3*t):(u=6*e-12*n+6*i,l=-3*e+9*n-9*i+3*a,p=3*n-3*e),Math.abs(l)<1e-12){if(Math.abs(u)<1e-12)continue;v=-p/u,0<v&&v<1&&x.push(v)}else c=u*u-4*p*l,g=Math.sqrt(c),c<0||(b=(-u+g)/(2*l),0<b&&b<1&&x.push(b),w=(-u-g)/(2*l),0<w&&w<1&&x.push(w));for(d=x.length,f=d;d--;)v=x[d],y=1-v,k=y*y*y*t+3*y*y*v*r+3*y*v*v*o+v*v*v*s,_[0][d]=k,M=y*y*y*e+3*y*y*v*n+3*y*v*v*i+v*v*v*a,_[1][d]=M;return _[0][f]=t,_[1][f]=e,_[0][f+1]=s,_[1][f+1]=a,[Math.min.apply(null,_[0]),Math.max.apply(null,_[1]),Math.max.apply(null,_[0]),Math.min.apply(null,_[1])]},r.BezierView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype._index_data=function(){var t,e,r,o,i,a,l,u,c;for(r=[],t=e=0,o=this._x0.length;0<=o?e<o:e>o;t=0<=o?++e:--e)isNaN(this._x0[t]+this._x1[t]+this._y0[t]+this._y1[t]+this._cx0[t]+this._cy0[t]+this._cx1[t]+this._cy1[t])||(i=n(this._x0[t],this._y0[t],this._x1[t],this._y1[t],this._cx0[t],this._cy0[t],this._cx1[t],this._cy1[t]),a=i[0],u=i[1],l=i[2],c=i[3],r.push({minX:a,minY:u,maxX:l,maxY:c,i:t}));return new s.RBush(r)},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u,c,_,p,h,d,f;if(p=r.sx0,d=r.sy0,h=r.sx1,f=r.sy1,a=r.scx,l=r.scx0,c=r.scy0,u=r.scx1,_=r.scy1,this.visuals.line.doit){for(s=[],o=0,i=e.length;o<i;o++)n=e[o],isNaN(p[n]+d[n]+h[n]+f[n]+l[n]+c[n]+u[n]+_[n])||(t.beginPath(),t.moveTo(p[n],d[n]),t.bezierCurveTo(l[n],c[n],u[n],_[n],h[n],f[n]),this.visuals.line.set_vectorize(t,n),s.push(t.stroke()));return s}},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){return this._generic_line_legend(t,e,r,n,o,i)},e}(a.GlyphView),r.Bezier=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.default_view=r.BezierView,e.prototype.type="Bezier",e.coords([["x0","y0"],["x1","y1"],["cx0","cy0"],["cx1","cy1"]]),e.mixins(["line"]),e}(a.Glyph)},{"./glyph":"models/glyphs/glyph","core/util/spatial":"core/util/spatial"}],"models/glyphs/circle":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./xy_glyph"),s=t("core/hittest"),a=t("core/properties");r.CircleView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._map_data=function(){var t,e;return null!=this._radius?"data"===this.model.properties.radius.spec.units?(t=this.model.properties.radius_dimension.spec.value,this.sradius=this.sdist(this.renderer[t+"scale"],this["_"+t],this._radius)):(this.sradius=this._radius,this.max_size=2*this.max_radius):this.sradius=function(){var t,r,n,o;for(n=this._size,o=[],t=0,r=n.length;t<r;t++)e=n[t],o.push(e/2);return o}.call(this)},e.prototype._mask_data=function(t){var e,r,n,o,i,a,l,u,c,_,p,h,d,f,m;return r=this.renderer.plot_view.frame.h_range,p=this.renderer.plot_view.frame.v_range,null!=this._radius&&"data"===this.model.properties.radius.units?(l=r.start,u=r.end,n=this.renderer.xscale.v_invert([l,u],!0),h=n[0],d=n[1],h-=this.max_radius,d+=this.max_radius,c=p.start,_=p.end,o=this.renderer.yscale.v_invert([c,_],!0),f=o[0],m=o[1],f-=this.max_radius,m+=this.max_radius):(l=r.start-this.max_size,u=r.end+this.max_size,i=this.renderer.xscale.v_invert([l,u],!0),h=i[0],d=i[1],c=p.start-this.max_size,_=p.end+this.max_size,a=this.renderer.yscale.v_invert([c,_],!0),f=a[0],m=a[1]),e=s.validate_bbox_coords([h,d],[f,m]),this.index.indices(e)},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u;for(l=r.sx,u=r.sy,a=r.sradius,n=!1,this.data||(n=!0,this.data={name:this.model.name,model_id:this.model.id,data_fields:["points"],points:[]}),i=0,s=e.length;i<s;i++)o=e[i],isNaN(l[o]+u[o]+a[o])||(t.beginPath(),t.arc(l[o],u[o],a[o],0,2*Math.PI,!1),n&&this.data.points.push({bbox:{x:Math.round(l[o]-a[o]),y:Math.round(u[o]-a[o]),w:2*a[o],h:2*a[o]}}),this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(t,o),t.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(t,o),t.stroke()));if(console.log("Render circle"),console.log(this),n)return window.localStorage.setItem(this.data.name,JSON.stringify(this.data))},e.prototype._hit_point=function(t){var e,r,n,o,i,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k,M,j,S,T,O,P,A,E,z,C,N;if(p=[t.vx,t.vy],k=p[0],S=p[1],P=this.renderer.xscale.invert(k,!0),z=this.renderer.yscale.invert(S,!0),null!=this._radius&&"data"===this.model.properties.radius.units?(A=P-this.max_radius,E=P+this.max_radius,C=z-this.max_radius,N=z+this.max_radius):(M=k-this.max_size,j=k+this.max_size,h=this.renderer.xscale.v_invert([M,j],!0),A=h[0],E=h[1],d=[Math.min(A,E),Math.max(A,E)],A=d[0],E=d[1],T=S-this.max_size,O=S+this.max_size,f=this.renderer.yscale.v_invert([T,O],!0),C=f[0],N=f[1],m=[Math.min(C,N),Math.max(C,N)],C=m[0],N=m[1]),e=s.validate_bbox_coords([A,E],[C,N]),r=this.index.indices(e),o=[],null!=this._radius&&"data"===this.model.properties.radius.units)for(a=0,u=r.length;a<u;a++)i=r[a],_=Math.pow(this.sradius[i],2),g=this.renderer.xscale.compute(P,!0),v=this.renderer.xscale.compute(this._x[i],!0),w=this.renderer.yscale.compute(z,!0),x=this.renderer.yscale.compute(this._y[i],!0),n=Math.pow(g-v,2)+Math.pow(w-x,2),n<=_&&o.push([i,n]);else for(y=this.renderer.plot_view.canvas.vx_to_sx(k),b=this.renderer.plot_view.canvas.vy_to_sy(S),l=0,c=r.length;l<c;l++)i=r[l],_=Math.pow(this.sradius[i],2),n=Math.pow(this.sx[i]-y,2)+Math.pow(this.sy[i]-b,2),n<=_&&o.push([i,n]);return s.create_1d_hit_test_result(o)},e.prototype._hit_span=function(t){var e,r,n,o,i,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k,M,j;return u=[t.vx,t.vy],m=u[0],v=u[1],c=this.bounds(),i=c.minX,a=c.minY,n=c.maxX,o=c.maxY,f=s.create_hit_test_result(),"h"===t.direction?(M=a,j=o,null!=this._radius&&"data"===this.model.properties.radius.units?(y=m-this.max_radius,g=m+this.max_radius,_=this.renderer.xscale.v_invert([y,g]),x=_[0],k=_[1]):(l=this.max_size/2,y=m-l,g=m+l,p=this.renderer.xscale.v_invert([y,g],!0),x=p[0],k=p[1])):(x=i,k=n,null!=this._radius&&"data"===this.model.properties.radius.units?(b=v-this.max_radius,w=v+this.max_radius,h=this.renderer.yscale.v_invert([b,w]),M=h[0],j=h[1]):(l=this.max_size/2,b=v-l,w=v+l,d=this.renderer.yscale.v_invert([b,w],!0),M=d[0],j=d[1])),e=s.validate_bbox_coords([x,k],[M,j]),r=this.index.indices(e),f["1d"].indices=r,f},e.prototype._hit_rect=function(t){var e,r,n,o,i,a,l,u;return r=this.renderer.xscale.v_invert([t.vx0,t.vx1],!0),i=r[0],a=r[1],n=this.renderer.yscale.v_invert([t.vy0,t.vy1],!0),l=n[0],u=n[1],e=s.validate_bbox_coords([i,a],[l,u]),o=s.create_hit_test_result(),o["1d"].indices=this.index.indices(e),o},e.prototype._hit_poly=function(t){var e,r,n,o,i,a,l,u,c,_,p,h,d;for(a=[t.vx,t.vy],h=a[0],d=a[1],_=this.renderer.plot_view.canvas.v_vx_to_sx(h),p=this.renderer.plot_view.canvas.v_vy_to_sy(d),e=function(){c=[];for(var t=0,e=this.sx.length;0<=e?t<e:t>e;0<=e?t++:t--)c.push(t);return c}.apply(this),r=[],n=i=0,l=e.length;0<=l?i<l:i>l;n=0<=l?++i:--i)o=e[n],s.point_in_poly(this.sx[n],this.sy[n],_,p)&&r.push(o);return u=s.create_hit_test_result(),u["1d"].indices=r,u},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){var s,a,l,u,c;return a=[i],u={},u[i]=(e+r)/2,c={},c[i]=(n+o)/2,l={},l[i]=.2*Math.min(Math.abs(r-e),Math.abs(o-n)),s={sx:u,sy:c,sradius:l},this._render(t,a,s)},e}(i.XYGlyphView),r.Circle=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.CircleView,e.prototype.type="Circle",e.mixins(["line","fill"]),e.define({angle:[a.AngleSpec,0],size:[a.DistanceSpec,{units:"screen",value:4}],radius:[a.DistanceSpec,null],radius_dimension:[a.String,"x"]}),e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this.properties.radius.optional=!0},e}(i.XYGlyph)},{"./xy_glyph":"models/glyphs/xy_glyph","core/hittest":"core/hittest","core/properties":"core/properties"}],"models/glyphs/ellipse":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./xy_glyph"),s=t("core/properties");r.EllipseView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._set_data=function(){if(this.max_w2=0,"data"===this.model.properties.width.units&&(this.max_w2=this.max_width/2),
this.max_h2=0,"data"===this.model.properties.height.units)return this.max_h2=this.max_height/2},e.prototype._map_data=function(){return"data"===this.model.properties.width.units?this.sw=this.sdist(this.renderer.xscale,this._x,this._width,"center"):this.sw=this._width,"data"===this.model.properties.height.units?this.sh=this.sdist(this.renderer.yscale,this._y,this._height,"center"):this.sh=this._height},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u,c;for(u=r.sx,c=r.sy,l=r.sw,a=r.sh,s=[],o=0,i=e.length;o<i;o++)n=e[o],isNaN(u[n]+c[n]+l[n]+a[n]+this._angle[n])||(t.beginPath(),t.ellipse(u[n],c[n],l[n]/2,a[n]/2,this._angle[n],0,2*Math.PI),this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(t,n),t.fill()),this.visuals.line.doit?(this.visuals.line.set_vectorize(t,n),s.push(t.stroke())):s.push(void 0));return s},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){var s,a,l,u,c,_,p,h;return l=[i],p={},p[i]=(e+r)/2,h={},h[i]=(n+o)/2,u=this.sw[i]/this.sh[i],s=.8*Math.min(Math.abs(r-e),Math.abs(o-n)),_={},c={},u>1?(_[i]=s,c[i]=s/u):(_[i]=s*u,c[i]=s),a={sx:p,sy:h,sw:_,sh:c},this._render(t,l,a)},e.prototype._bounds=function(t){return this.max_wh2_bounds(t)},e}(i.XYGlyphView),r.Ellipse=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.EllipseView,e.prototype.type="Ellipse",e.mixins(["line","fill"]),e.define({angle:[s.AngleSpec,0],width:[s.DistanceSpec],height:[s.DistanceSpec]}),e}(i.XYGlyph)},{"./xy_glyph":"models/glyphs/xy_glyph","core/properties":"core/properties"}],"models/glyphs/glyph":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/properties"),s=t("core/util/bbox"),a=t("core/util/projections"),l=t("core/view"),u=t("../../model"),c=t("core/visuals"),_=t("core/logging"),p=t("core/util/object"),h=t("core/util/types");r.GlyphView=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return n(r,e),r.prototype.initialize=function(e){var n,o,i,s;if(r.__super__.initialize.call(this,e),this._nohit_warned={},this.renderer=e.renderer,this.visuals=new c.Visuals(this.model),o=this.renderer.plot_view.canvas_view.ctx,null!=o.glcanvas){try{s=t("models/glyphs/webgl/index")}catch(a){if(i=a,"MODULE_NOT_FOUND"!==i.code)throw i;_.logger.warn("WebGL was requested and is supported, but bokeh-gl(.min).js is not available, falling back to 2D rendering."),s=null}if(null!=s&&(n=s[this.model.type+"GLGlyph"],null!=n))return this.glglyph=new n(o.glcanvas.gl,this)}},r.prototype.set_visuals=function(t){if(this.visuals.warm_cache(t),null!=this.glglyph)return this.glglyph.set_visuals_changed()},r.prototype.render=function(t,e,r){if(t.beginPath(),null==this.glglyph||!this.glglyph.render(t,e,r))return this._render(t,e,r)},r.prototype.has_finished=function(){return!0},r.prototype.notify_finished=function(){return this.renderer.notify_finished()},r.prototype.bounds=function(){return null==this.index?s.empty():this._bounds(this.index.bbox)},r.prototype.log_bounds=function(){var t,e,r,n,o,i,a,l,u;if(null==this.index)return s.empty();for(t=s.empty(),i=this.index.search(s.positive_x()),a=this.index.search(s.positive_y()),e=0,n=i.length;e<n;e++)l=i[e],l.minX<t.minX&&(t.minX=l.minX),l.maxX>t.maxX&&(t.maxX=l.maxX);for(r=0,o=a.length;r<o;r++)u=a[r],u.minY<t.minY&&(t.minY=u.minY),u.maxY>t.maxY&&(t.maxY=u.maxY);return this._bounds(t)},r.prototype.max_wh2_bounds=function(t){return{minX:t.minX-this.max_w2,maxX:t.maxX+this.max_w2,minY:t.minY-this.max_h2,maxY:t.maxY+this.max_h2}},r.prototype.get_anchor_point=function(t,e,r){var n,o;switch(n=r[0],o=r[1],t){case"center":return{x:this.scx(e,n,o),y:this.scy(e,n,o)};default:return null}},r.prototype.scx=function(t){return this.sx[t]},r.prototype.scy=function(t){return this.sy[t]},r.prototype.sdist=function(t,e,r,n,o){var i,s,a,l,u,c,_;return null==n&&(n="edge"),null==o&&(o=!1),h.isString(e[0])&&(e=t.v_compute(e)),"center"===n?(s=function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(i/2);return n}(),l=function(){var t,r,n;for(n=[],a=t=0,r=e.length;0<=r?t<r:t>r;a=0<=r?++t:--t)n.push(e[a]-s[a]);return n}(),u=function(){var t,r,n;for(n=[],a=t=0,r=e.length;0<=r?t<r:t>r;a=0<=r?++t:--t)n.push(e[a]+s[a]);return n}()):(l=e,u=function(){var t,e,n;for(n=[],a=t=0,e=l.length;0<=e?t<e:t>e;a=0<=e?++t:--t)n.push(l[a]+r[a]);return n}()),c=t.v_compute(l),_=t.v_compute(u),o?function(){var t,e,r;for(r=[],a=t=0,e=c.length;0<=e?t<e:t>e;a=0<=e?++t:--t)r.push(Math.ceil(Math.abs(_[a]-c[a])));return r}():function(){var t,e,r;for(r=[],a=t=0,e=c.length;0<=e?t<e:t>e;a=0<=e?++t:--t)r.push(Math.abs(_[a]-c[a]));return r}()},r.prototype.draw_legend_for_index=function(t,e,r,n,o,i){return null},r.prototype._generic_line_legend=function(t,e,r,n,o,i){return t.save(),t.beginPath(),t.moveTo(e,(n+o)/2),t.lineTo(r,(n+o)/2),this.visuals.line.doit&&(this.visuals.line.set_vectorize(t,i),t.stroke()),t.restore()},r.prototype._generic_area_legend=function(t,e,r,n,o,i){var s,a,l,u,c,_,p,h,d;if(u=[i],d=Math.abs(r-e),a=.1*d,l=Math.abs(o-n),s=.1*l,c=e+a,_=r-a,p=n+s,h=o-s,this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(t,i),t.fillRect(c,p,_-c,h-p)),this.visuals.line.doit)return t.beginPath(),t.rect(c,p,_-c,h-p),this.visuals.line.set_vectorize(t,i),t.stroke()},r.prototype.hit_test=function(t){var e,r;return r=null,e="_hit_"+t.type,null!=this[e]?r=this[e](t):null==this._nohit_warned[t.type]&&(_.logger.debug("'"+t.type+"' selection not available for "+this.model.type),this._nohit_warned[t.type]=!0),r},r.prototype.set_data=function(t,e){var r,n,o;return r=this.model.materialize_dataspecs(t),p.extend(this,r),this.renderer.plot_view.model.use_map&&(null!=this._x&&(n=a.project_xy(this._x,this._y),this._x=n[0],this._y=n[1]),null!=this._xs&&(o=a.project_xsys(this._xs,this._ys),this._xs=o[0],this._ys=o[1])),null!=this.glglyph&&this.glglyph.set_data_changed(this._x.length),this._set_data(t,e),this.index=this._index_data()},r.prototype._set_data=function(){},r.prototype._index_data=function(){},r.prototype.mask_data=function(t){return null!=this.glglyph?t:this._mask_data(t)},r.prototype._mask_data=function(t){return t},r.prototype._bounds=function(t){return t},r.prototype.map_data=function(){var t,e,r,n,o,i,s,a,l,u,c,_,p,d,f,m,y,g,v;for(o=this.model._coords,e=0,n=o.length;e<n;e++)if(i=o[e],g=i[0],v=i[1],f="s"+g,y="s"+v,g="_"+g,v="_"+v,h.isArray(null!=(s=this[g])?s[0]:void 0)||(null!=(a=this[g])&&null!=(l=a[0])?l.buffer:void 0)instanceof ArrayBuffer)for(u=[[],[]],this[f]=u[0],this[y]=u[1],t=r=0,c=this[g].length;0<=c?r<c:r>c;t=0<=c?++r:--r)_=this.map_to_screen(this[g][t],this[v][t]),d=_[0],m=_[1],this[f].push(d),this[y].push(m);else p=this.map_to_screen(this[g],this[v]),this[f]=p[0],this[y]=p[1];return this._map_data()},r.prototype._map_data=function(){},r.prototype.map_to_screen=function(t,e){return this.renderer.plot_view.map_to_screen(t,e,this.model.x_range_name,this.model.y_range_name)},r}(l.View),r.Glyph=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._coords=[],e.coords=function(t){var e,r,n,o,s,a,l;for(e=this.prototype._coords.concat(t),this.prototype._coords=e,s={},r=0,n=t.length;r<n;r++)o=t[r],a=o[0],l=o[1],s[a]=[i.NumberSpec],s[l]=[i.NumberSpec];return this.define(s)},e.internal({x_range_name:[i.String,"default"],y_range_name:[i.String,"default"]}),e}(u.Model)},{"../../model":"model","core/logging":"core/logging","core/properties":"core/properties","core/util/bbox":"core/util/bbox","core/util/object":"core/util/object","core/util/projections":"core/util/projections","core/util/types":"core/util/types","core/view":"core/view","core/visuals":"core/visuals","models/glyphs/webgl/index":void 0}],"models/glyphs/hbar":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/util/spatial"),s=t("./glyph"),a=t("../scales/categorical_scale"),l=t("core/hittest"),u=t("core/properties");r.HBarView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._map_data=function(){var t,e,r,n,o,i;for(i=this.renderer.yscale.v_compute(this._y),this.sy=this.renderer.plot_view.canvas.v_vy_to_sy(i),o=this.renderer.xscale.v_compute(this._right),n=this.renderer.xscale.v_compute(this._left),this.sright=this.renderer.plot_view.canvas.v_vx_to_sx(o),this.sleft=this.renderer.plot_view.canvas.v_vx_to_sx(n),this.stop=[],this.sbottom=[],this.sh=this.sdist(this.renderer.yscale,this._y,this._height,"center"),t=e=0,r=this.sy.length;0<=r?e<r:e>r;t=0<=r?++e:--e)this.stop.push(this.sy[t]-this.sh[t]/2),this.sbottom.push(this.sy[t]+this.sh[t]/2);return null},e.prototype._index_data=function(){var t,e,r,n,o,s,l,u,c,_,p,h,d;for(l=function(t,e){return t instanceof a.CategoricalScale?t.v_compute(e,!0):e},s=l(this.renderer.xscale,this._left),p=l(this.renderer.xscale,this._right),d=l(this.renderer.yscale,this._y),e=l(this.renderer.yscale,this._height),u=[],r=n=0,_=d.length;0<=_?n<_:n>_;r=0<=_?++n:--n)o=s[r],c=p[r],h=d[r]+.5*e[r],t=d[r]-.5*e[r],!isNaN(o+c+h+t)&&isFinite(o+c+h+t)&&u.push({minX:o,minY:t,maxX:c,maxY:h,i:r});return new i.RBush(u)},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u,c,_,p;for(l=r.sleft,u=r.sright,c=r.stop,a=r.sbottom,this.data={name:this.renderer.model.name,model_id:this.model.id,model_type:"hbar",renderer_id:this.renderer.model.id,data_fields:["bars"],bars:[]},i=0,s=e.length;i<s;i++)o=e[i],isNaN(l[o]+c[o]+u[o]+a[o])||(this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(t,o),t.fillRect(l[o],c[o],u[o]-l[o],a[o]-c[o]),n={x:Math.round(l[o]),y:Math.round(c[o]),w:Math.round(u[o]-l[o]),h:Math.round(a[o]-c[o])},_=this.renderer.model.data_source.attributes.data.right[o],p=this.renderer.model.data_source.attributes.data.y[o],this.data.bars.push({bbox:n,x:_,y:p,height:this.model.attributes.height.value})),this.visuals.line.doit&&(t.beginPath(),t.rect(l[o],c[o],u[o]-l[o],a[o]-c[o]),this.visuals.line.set_vectorize(t,o),t.stroke()));return console.log("render hbar"),console.log(this),window.localStorage.setItem(this.data.name,JSON.stringify(this.data))},e.prototype._hit_point=function(t){var e,r,n,o,i,s,a;return r=[t.vx,t.vy],o=r[0],i=r[1],s=this.renderer.xscale.invert(o,!0),a=this.renderer.yscale.invert(i,!0),e=this.index.indices({minX:s,minY:a,maxX:s,maxY:a}),n=l.create_hit_test_result(),n["1d"].indices=e,n},e.prototype.scx=function(t){return(this.sleft[t]+this.sright[t])/2},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){return this._generic_area_legend(t,e,r,n,o,i)},e}(s.GlyphView),r.HBar=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.HBarView,e.prototype.type="HBar",e.mixins(["line","fill"]),e.define({y:[u.NumberSpec],height:[u.DistanceSpec],left:[u.NumberSpec,0],right:[u.NumberSpec]}),e}(s.Glyph)},{"../scales/categorical_scale":"models/scales/categorical_scale","./glyph":"models/glyphs/glyph","core/hittest":"core/hittest","core/properties":"core/properties","core/util/spatial":"core/util/spatial"}],"models/glyphs/image":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=t("./xy_glyph"),a=t("../mappers/linear_color_mapper"),l=t("core/properties"),u=t("core/util/array");r.ImageView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.connect(this.model.color_mapper.change,function(){return this._update_image()})},e.prototype._update_image=function(){if(null!=this.image_data)return this._set_data(),this.renderer.plot_view.request_render()},e.prototype._set_data=function(){var t,e,r,n,o,i,s,a,l,c,_,p;for(null!=this.image_data&&this.image_data.length===this._image.length||(this.image_data=new Array(this._image.length)),null!=this._width&&this._width.length===this._image.length||(this._width=new Array(this._image.length)),null!=this._height&&this._height.length===this._image.length||(this._height=new Array(this._image.length)),_=[],i=l=0,c=this._image.length;0<=c?l<c:l>c;i=0<=c?++l:--l)p=[],null!=this._image_shape&&(p=this._image_shape[i]),p.length>0?(a=this._image[i],this._height[i]=p[0],this._width[i]=p[1]):(a=u.concat(this._image[i]),this._height[i]=this._image[i].length,this._width[i]=this._image[i][0].length),null!=this.image_data[i]&&this.image_data[i].width===this._width[i]&&this.image_data[i].height===this._height[i]?r=this.image_data[i]:(r=document.createElement("canvas"),r.width=this._width[i],r.height=this._height[i]),o=r.getContext("2d"),s=o.getImageData(0,0,this._width[i],this._height[i]),n=this.model.color_mapper,t=n.v_map_screen(a,!0),e=new Uint8Array(t),s.data.set(e),o.putImageData(s,0,0),this.image_data[i]=r,this.max_dw=0,"data"===this._dw.units&&(this.max_dw=u.max(this._dw)),this.max_dh=0,"data"===this._dh.units?_.push(this.max_dh=u.max(this._dh)):_.push(void 0);return _},e.prototype._map_data=function(){switch(this.model.properties.dw.units){case"data":this.sw=this.sdist(this.renderer.xscale,this._x,this._dw,"edge",this.model.dilate);break;case"screen":this.sw=this._dw}switch(this.model.properties.dh.units){case"data":return this.sh=this.sdist(this.renderer.yscale,this._y,this._dh,"edge",this.model.dilate);case"screen":return this.sh=this._dh}},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u,c,_,p;for(o=r.image_data,c=r.sx,_=r.sy,u=r.sw,l=r.sh,a=t.getImageSmoothingEnabled(),t.setImageSmoothingEnabled(!1),i=0,s=e.length;i<s;i++)n=e[i],null!=o[n]&&(isNaN(c[n]+_[n]+u[n]+l[n])||(p=_[n],t.translate(0,p),t.scale(1,-1),t.translate(0,-p),t.drawImage(o[n],0|c[n],0|_[n],u[n],l[n]),t.translate(0,p),t.scale(1,-1),t.translate(0,-p)));return t.setImageSmoothingEnabled(a)},e.prototype.bounds=function(){var t;return t=this.index.bbox,t.maxX+=this.max_dw,t.maxY+=this.max_dh,t},e}(s.XYGlyphView),n=function(){return[0,2434341,5395026,7566195,9868950,12434877,14277081,15790320,16777215]},r.Image=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.default_view=r.ImageView,e.prototype.type="Image",e.define({image:[l.NumberSpec],dw:[l.DistanceSpec],dh:[l.DistanceSpec],dilate:[l.Bool,!1],color_mapper:[l.Instance,function(){return new a.LinearColorMapper({palette:n()})}]}),e}(s.XYGlyph)},{"../mappers/linear_color_mapper":"models/mappers/linear_color_mapper","./xy_glyph":"models/glyphs/xy_glyph","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/glyphs/image_rgba":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./xy_glyph"),s=t("core/properties"),a=t("core/util/array");r.ImageRGBAView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._set_data=function(t,e){var r,n,o,i,s,l,u,c,_,p,h,d,f,m,y,g,v;for(null!=this.image_data&&this.image_data.length===this._image.length||(this.image_data=new Array(this._image.length)),null!=this._width&&this._width.length===this._image.length||(this._width=new Array(this._image.length)),null!=this._height&&this._height.length===this._image.length||(this._height=new Array(this._image.length)),g=[],u=p=0,f=this._image.length;0<=f?p<f:p>f;u=0<=f?++p:--p)if(!(null!=e&&e.indexOf(u)<0)){if(v=[],null!=this._image_shape&&(v=this._image_shape[u]),null!=this._rows)if(this._height[u]=this._rows[u],this._width[u]=this._cols[u],v.length>0)r=this._image[u].buffer;else for(l=this._image[u],r=new ArrayBuffer(4*l.length),i=new Uint32Array(r),_=h=0,m=l.length;0<=m?h<m:h>m;_=0<=m?++h:--h)i[_]=l[_];else if(v.length>0)r=this._image[u].buffer,this._height[u]=v[0],this._width[u]=v[1];else{for(l=a.concat(this._image[u]),r=new ArrayBuffer(4*l.length),i=new Uint32Array(r),_=d=0,y=l.length;0<=y?d<y:d>y;_=0<=y?++d:--d)i[_]=l[_];this._height[u]=this._image[u].length,this._width[u]=this._image[u][0].length}null!=this.image_data[u]&&this.image_data[u].width===this._width[u]&&this.image_data[u].height===this._height[u]?o=this.image_data[u]:(o=document.createElement("canvas"),o.width=this._width[u],o.height=this._height[u]),s=o.getContext("2d"),c=s.getImageData(0,0,this._width[u],this._height[u]),n=new Uint8Array(r),c.data.set(n),s.putImageData(c,0,0),this.image_data[u]=o,this.max_dw=0,"data"===this._dw.units&&(this.max_dw=a.max(this._dw)),this.max_dh=0,"data"===this._dh.units?g.push(this.max_dh=a.max(this._dh)):g.push(void 0)}return g},e.prototype._map_data=function(){switch(this.model.properties.dw.units){case"data":this.sw=this.sdist(this.renderer.xscale,this._x,this._dw,"edge",this.model.dilate);break;case"screen":this.sw=this._dw}switch(this.model.properties.dh.units){case"data":return this.sh=this.sdist(this.renderer.yscale,this._y,this._dh,"edge",this.model.dilate);case"screen":return this.sh=this._dh}},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u,c,_,p;for(o=r.image_data,c=r.sx,_=r.sy,u=r.sw,l=r.sh,a=t.getImageSmoothingEnabled(),t.setImageSmoothingEnabled(!1),i=0,s=e.length;i<s;i++)n=e[i],isNaN(c[n]+_[n]+u[n]+l[n])||(p=_[n],t.translate(0,p),t.scale(1,-1),t.translate(0,-p),t.drawImage(o[n],0|c[n],0|_[n],u[n],l[n]),t.translate(0,p),t.scale(1,-1),t.translate(0,-p));return t.setImageSmoothingEnabled(a)},e.prototype.bounds=function(){var t;return t=this.index.bbox,t.maxX+=this.max_dw,t.maxY+=this.max_dh,t},e}(i.XYGlyphView),r.ImageRGBA=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.ImageRGBAView,e.prototype.type="ImageRGBA",e.define({image:[s.NumberSpec],rows:[s.NumberSpec],cols:[s.NumberSpec],dw:[s.DistanceSpec],dh:[s.DistanceSpec],dilate:[s.Bool,!1]}),e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this.properties.rows.optional=!0,this.properties.cols.optional=!0},e}(i.XYGlyph)},{"./xy_glyph":"models/glyphs/xy_glyph","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/glyphs/image_url":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./glyph"),s=t("core/logging"),a=t("core/properties");r.ImageURLView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.connect(this.model.properties.global_alpha.change,function(t){return function(){return t.renderer.request_render()}}(this))},e.prototype._index_data=function(){},e.prototype._set_data=function(){var t,e,r,n,o,i,a;for(null!=this.image&&this.image.length===this._url.length||(this.image=function(){var t,r,n,o;for(n=this._url,o=[],t=0,r=n.length;t<r;t++)e=n[t],o.push(null);return o}.call(this)),i=this.model.retry_attempts,a=this.model.retry_timeout,this.retries=function(){var t,r,n,o;for(n=this._url,o=[],t=0,r=n.length;t<r;t++)e=n[t],o.push(i);return o}.call(this),o=[],t=r=0,n=this._url.length;0<=n?r<n:r>n;t=0<=n?++r:--r)null!=this._url[t]&&(e=new Image,e.onerror=function(t){return function(e,r){return function(){return t.retries[e]>0?(s.logger.trace("ImageURL failed to load "+t._url[e]+" image, retrying in "+a+" ms"),setTimeout(function(){return r.src=t._url[e]},a)):s.logger.warn("ImageURL unable to load "+t._url[e]+" image after "+i+" retries"),t.retries[e]-=1}}}(this)(t,e),e.onload=function(t){return function(e,r){return function(){return t.image[r]=e,t.renderer.request_render()}}}(this)(e,t),o.push(e.src=this._url[t]));return o},e.prototype.has_finished=function(){return e.__super__.has_finished.call(this)&&this._images_rendered===!0},e.prototype._map_data=function(){var t,e,r;switch(e=function(){var t,e,n,o;if(null!=this.model.w)return this._w;for(n=this._x,o=[],t=0,e=n.length;t<e;t++)r=n[t],o.push(NaN);return o}.call(this),t=function(){var t,e,n,o;if(null!=this.model.h)return this._h;for(n=this._x,o=[],t=0,e=n.length;t<e;t++)r=n[t],o.push(NaN);return o}.call(this),this.model.properties.w.units){case"data":this.sw=this.sdist(this.renderer.xscale,this._x,e,"edge",this.model.dilate);break;case"screen":this.sw=e}switch(this.model.properties.h.units){case"data":return this.sh=this.sdist(this.renderer.yscale,this._y,t,"edge",this.model.dilate);case"screen":return this.sh=t}},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u,c,_,p,h,d;for(o=r._url,l=r.image,h=r.sx,d=r.sy,p=r.sw,_=r.sh,n=r._angle,s=this.renderer.plot_view.frame,t.rect(s._left.value+1,s._bottom.value+1,s._width.value-2,s._height.value-2),t.clip(),i=!0,u=0,c=e.length;u<c;u++)a=e[u],isNaN(h[a]+d[a]+n[a])||this.retries[a]!==-1&&(null!=l[a]?this._render_image(t,a,l[a],h,d,p,_,n):i=!1);if(i&&!this._images_rendered)return this._images_rendered=!0,this.notify_finished()},e.prototype._final_sx_sy=function(t,e,r,n,o){switch(t){case"top_left":return[e,r];case"top_center":return[e-n/2,r];case"top_right":return[e-n,r];case"center_right":return[e-n,r-o/2];case"bottom_right":return[e-n,r-o];case"bottom_center":return[e-n/2,r-o];case"bottom_left":return[e,r-o];case"center_left":return[e,r-o/2];case"center":return[e-n/2,r-o/2]}},e.prototype._render_image=function(t,e,r,n,o,i,s,a){var l,u;return isNaN(i[e])&&(i[e]=r.width),isNaN(s[e])&&(s[e]=r.height),l=this.model.anchor,u=this._final_sx_sy(l,n[e],o[e],i[e],s[e]),n=u[0],o=u[1],t.save(),t.globalAlpha=this.model.global_alpha,a[e]?(t.translate(n,o),t.rotate(a[e]),t.drawImage(r,0,0,i[e],s[e]),t.rotate(-a[e]),t.translate(-n,-o)):t.drawImage(r,n,o,i[e],s[e]),t.restore()},e}(i.GlyphView),r.ImageURL=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.ImageURLView,e.prototype.type="ImageURL",e.coords([["x","y"]]),e.mixins([]),e.define({url:[a.StringSpec],anchor:[a.Anchor,"top_left"],global_alpha:[a.Number,1],angle:[a.AngleSpec,0],w:[a.DistanceSpec],h:[a.DistanceSpec],dilate:[a.Bool,!1],retry_attempts:[a.Number,0],retry_timeout:[a.Number,0]}),e}(i.Glyph)},{"./glyph":"models/glyphs/glyph","core/logging":"core/logging","core/properties":"core/properties"}],"models/glyphs/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./annular_wedge");r.AnnularWedge=n.AnnularWedge;var o=t("./annulus");r.Annulus=o.Annulus;var i=t("./arc");r.Arc=i.Arc;var s=t("./bezier");r.Bezier=s.Bezier;var a=t("./circle");r.Circle=a.Circle;var l=t("./ellipse");r.Ellipse=l.Ellipse;var u=t("./glyph");r.Glyph=u.Glyph;var c=t("./hbar");r.HBar=c.HBar;var _=t("./image");r.Image=_.Image;var p=t("./image_rgba");r.ImageRGBA=p.ImageRGBA;var h=t("./image_url");r.ImageURL=h.ImageURL;var d=t("./line");r.Line=d.Line;var f=t("./multi_line");r.MultiLine=f.MultiLine;var m=t("./oval");r.Oval=m.Oval;var y=t("./patch");r.Patch=y.Patch;var g=t("./patches");r.Patches=g.Patches;var v=t("./quad");r.Quad=v.Quad;var b=t("./quadratic");r.Quadratic=b.Quadratic;var w=t("./ray");r.Ray=w.Ray;var x=t("./rect");r.Rect=x.Rect;var k=t("./segment");r.Segment=k.Segment;var M=t("./text");r.Text=M.Text;var j=t("./vbar");r.VBar=j.VBar;var S=t("./wedge");r.Wedge=S.Wedge;var T=t("./xy_glyph");r.XYGlyph=T.XYGlyph},{"./annular_wedge":"models/glyphs/annular_wedge","./annulus":"models/glyphs/annulus","./arc":"models/glyphs/arc","./bezier":"models/glyphs/bezier","./circle":"models/glyphs/circle","./ellipse":"models/glyphs/ellipse","./glyph":"models/glyphs/glyph","./hbar":"models/glyphs/hbar","./image":"models/glyphs/image","./image_rgba":"models/glyphs/image_rgba","./image_url":"models/glyphs/image_url","./line":"models/glyphs/line","./multi_line":"models/glyphs/multi_line","./oval":"models/glyphs/oval","./patch":"models/glyphs/patch","./patches":"models/glyphs/patches","./quad":"models/glyphs/quad","./quadratic":"models/glyphs/quadratic","./ray":"models/glyphs/ray","./rect":"models/glyphs/rect","./segment":"models/glyphs/segment","./text":"models/glyphs/text","./vbar":"models/glyphs/vbar","./wedge":"models/glyphs/wedge","./xy_glyph":"models/glyphs/xy_glyph"}],"models/glyphs/line":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./xy_glyph"),s=t("core/hittest"),a=t("lodash");r.LineView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._render=function(t,e,r){var n,o,i,s,l,u,c,_,p,h;for(p=r.sx,h=r.sy,i=!1,this.visuals.line.set_value(t),_=this.model.name,a.isNil(_)&&(_=this.renderer.model.name),this.data={name:_,model_id:this.model.id,data_fields:["segments"],segments:[]},u=null,o=null,l=0,c=e.length;l<c;l++)s=e[l],isFinite(p[s]+h[s])||!i?i?(t.lineTo(p[s],h[s]),o={x:Math.round(p[s]),y:Math.round(h[s])},n={x:a.min([u.x,o.x]),y:a.min([u.y,o.y]),w:Math.abs(o.x-u.x),h:Math.abs(o.y-u.y)},this.data.segments.push({bbox:n,start:u,end:o}),u=o):(t.beginPath(),t.moveTo(p[s],h[s]),i=!0,u={x:Math.round(p[s]),y:Math.round(h[s])}):(t.stroke(),t.beginPath(),i=!1);return i&&t.stroke(),console.log("render line"),console.log(this),window.localStorage.setItem(this.data.name,JSON.stringify(this.data))},e.prototype._hit_point=function(t){var e,r,n,o,i,a,l,u,c,_,p;for(c=s.create_hit_test_result(),a={x:this.renderer.plot_view.canvas.vx_to_sx(t.vx),y:this.renderer.plot_view.canvas.vy_to_sy(t.vy)},_=9999,p=Math.max(2,this.visuals.line.line_width.value()/2),r=n=0,l=this.sx.length-1;0<=l?n<l:n>l;r=0<=l?++n:--n)u=[{x:this.sx[r],y:this.sy[r]},{x:this.sx[r+1],y:this.sy[r+1]}],o=u[0],i=u[1],e=s.dist_to_segment(a,o,i),e<p&&e<_&&(_=e,c["0d"].glyph=this.model,c["0d"].get_view=function(){return this}.bind(this),c["0d"].flag=!0,c["0d"].indices=[r]);return c},e.prototype._hit_span=function(t){var e,r,n,o,i,a,l,u,c;for(n=[t.vx,t.vy],u=n[0],c=n[1],i=s.create_hit_test_result(),"v"===t.direction?(a=this.renderer.yscale.invert(c),l=this._y):(a=this.renderer.xscale.invert(u),l=this._x),e=r=0,o=l.length-1;0<=o?r<o:r>o;e=0<=o?++r:--r)(l[e]<=a&&a<=l[e+1]||l[e+1]<=a&&a<=l[e])&&(i["0d"].glyph=this.model,i["0d"].get_view=function(){return this}.bind(this),i["0d"].flag=!0,i["0d"].indices.push(e));return i},e.prototype.get_interpolation_hit=function(t,e){var r,n,o,i,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w;return r=[e.vx,e.vy],p=r[0],h=r[1],n=[this._x[t],this._y[t],this._x[t+1],this._y[t+1]],m=n[0],b=n[1],y=n[2],w=n[3],"point"===e.type?(o=this.renderer.yscale.v_invert([h-1,h+1]),g=o[0],v=o[1],i=this.renderer.xscale.v_invert([p-1,p+1]),d=i[0],f=i[1]):"v"===e.direction?(a=this.renderer.yscale.v_invert([h,h]),g=a[0],v=a[1],l=[m,y],d=l[0],f=l[1]):(u=this.renderer.xscale.v_invert([p,p]),d=u[0],f=u[1],c=[b,w],g=c[0],v=c[1]),_=s.check_2_segments_intersect(d,g,f,v,m,b,y,w),[_.x,_.y]},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){return this._generic_line_legend(t,e,r,n,o,i)},e}(i.XYGlyphView),r.Line=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.LineView,e.prototype.type="Line",e.mixins(["line"]),e}(i.XYGlyph)},{"./xy_glyph":"models/glyphs/xy_glyph","core/hittest":"core/hittest",lodash:"lodash"}],"models/glyphs/multi_line":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/util/spatial"),s=t("core/hittest"),a=t("core/util/array"),l=t("core/util/types"),u=t("./glyph");r.MultiLineView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._index_data=function(){var t,e,r,n,o,s,u,c;for(r=[],t=e=0,n=this._xs.length;0<=n?e<n:e>n;t=0<=n?++e:--e)s=function(){var e,r,n,i;for(n=this._xs[t],i=[],e=0,r=n.length;e<r;e++)o=n[e],l.isStrictNaN(o)||i.push(o);return i}.call(this),c=function(){var e,r,n,o;for(n=this._ys[t],o=[],e=0,r=n.length;e<r;e++)u=n[e],l.isStrictNaN(u)||o.push(u);return o}.call(this),0!==s.length&&r.push({minX:a.min(s),minY:a.min(c),maxX:a.max(s),maxY:a.max(c),i:t});return new i.RBush(r)},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u,c,_,p,h,d;for(p=r.sxs,d=r.sys,c=[],i=0,a=e.length;i<a;i++){for(n=e[i],l=[p[n],d[n]],_=l[0],h=l[1],this.visuals.line.set_vectorize(t,n),o=s=0,u=_.length;0<=u?s<u:s>u;o=0<=u?++s:--s)0!==o?isNaN(_[o])||isNaN(h[o])?(t.stroke(),t.beginPath()):t.lineTo(_[o],h[o]):(t.beginPath(),t.moveTo(_[o],h[o]));c.push(t.stroke())}return c},e.prototype._hit_point=function(t){var e,r,n,o,i,a,l,u,c,_,p,h,d,f,m,y;for(f=s.create_hit_test_result(),c={x:this.renderer.plot_view.canvas.vx_to_sx(t.vx),y:this.renderer.plot_view.canvas.vy_to_sy(t.vy)},m=9999,r={},n=i=0,p=this.sxs.length;0<=p?i<p:i>p;n=0<=p?++i:--i){for(y=Math.max(2,this.visuals.line.cache_select("line_width",n)/2),_=null,o=a=0,h=this.sxs[n].length-1;0<=h?a<h:a>h;o=0<=h?++a:--a)d=[{x:this.sxs[n][o],y:this.sys[n][o]},{x:this.sxs[n][o+1],y:this.sys[n][o+1]}],l=d[0],u=d[1],e=s.dist_to_segment(c,l,u),e<y&&e<m&&(m=e,_=[o]);_&&(r[n]=_)}return f["1d"].indices=Object.keys(r),f["2d"].indices=r,f},e.prototype._hit_span=function(t){var e,r,n,o,i,a,l,u,c,_,p,h,d,f;for(l=[t.vx,t.vy],d=l[0],f=l[1],_=s.create_hit_test_result(),"v"===t.direction?(p=this.renderer.yscale.invert(f),h=this._ys):(p=this.renderer.xscale.invert(d),h=this._xs),e={},r=o=0,u=h.length;0<=u?o<u:o>u;r=0<=u?++o:--o){for(a=[],n=i=0,c=h[r].length-1;0<=c?i<c:i>c;n=0<=c?++i:--i)h[r][n]<=p&&p<=h[r][n+1]&&a.push(n);a.length>0&&(e[r]=a)}return _["1d"].indices=Object.keys(e),_["2d"].indices=e,_},e.prototype.get_interpolation_hit=function(t,e,r){var n,o,i,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w,x;return n=[r.vx,r.vy],h=n[0],d=n[1],o=[this._xs[t][e],this._ys[t][e],this._xs[t][e+1],this._ys[t][e+1]],y=o[0],w=o[1],g=o[2],x=o[3],"point"===r.type?(i=this.renderer.yscale.v_invert([d-1,d+1]),v=i[0],b=i[1],a=this.renderer.xscale.v_invert([h-1,h+1]),f=a[0],m=a[1]):"v"===r.direction?(l=this.renderer.yscale.v_invert([d,d]),v=l[0],b=l[1],u=[y,g],f=u[0],m=u[1]):(c=this.renderer.xscale.v_invert([h,h]),f=c[0],m=c[1],_=[w,x],v=_[0],b=_[1]),p=s.check_2_segments_intersect(f,v,m,b,y,w,g,x),[p.x,p.y]},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){return this._generic_line_legend(t,e,r,n,o,i)},e}(u.GlyphView),r.MultiLine=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.MultiLineView,e.prototype.type="MultiLine",e.coords([["xs","ys"]]),e.mixins(["line"]),e}(u.Glyph)},{"./glyph":"models/glyphs/glyph","core/hittest":"core/hittest","core/util/array":"core/util/array","core/util/spatial":"core/util/spatial","core/util/types":"core/util/types"}],"models/glyphs/oval":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./xy_glyph"),s=t("core/properties");r.OvalView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._set_data=function(){if(this.max_w2=0,"data"===this.model.properties.width.units&&(this.max_w2=this.max_width/2),
this.max_h2=0,"data"===this.model.properties.height.units)return this.max_h2=this.max_height/2},e.prototype._map_data=function(){return"data"===this.model.properties.width.units?this.sw=this.sdist(this.renderer.xscale,this._x,this._width,"center"):this.sw=this._width,"data"===this.model.properties.height.units?this.sh=this.sdist(this.renderer.yscale,this._y,this._height,"center"):this.sh=this._height},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u,c;for(u=r.sx,c=r.sy,l=r.sw,a=r.sh,s=[],o=0,i=e.length;o<i;o++)n=e[o],isNaN(u[n]+c[n]+l[n]+a[n]+this._angle[n])||(t.translate(u[n],c[n]),t.rotate(this._angle[n]),t.beginPath(),t.moveTo(0,-a[n]/2),t.bezierCurveTo(l[n]/2,-a[n]/2,l[n]/2,a[n]/2,0,a[n]/2),t.bezierCurveTo(-l[n]/2,a[n]/2,-l[n]/2,-a[n]/2,0,-a[n]/2),t.closePath(),this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(t,n),t.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(t,n),t.stroke()),t.rotate(-this._angle[n]),s.push(t.translate(-u[n],-c[n])));return s},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){var s,a,l,u,c,_,p,h;return l=[i],p={},p[i]=(e+r)/2,h={},h[i]=(n+o)/2,u=this.sw[i]/this.sh[i],s=.8*Math.min(Math.abs(r-e),Math.abs(o-n)),_={},c={},u>1?(_[i]=s,c[i]=s/u):(_[i]=s*u,c[i]=s),a={sx:p,sy:h,sw:_,sh:c},this._render(t,l,a)},e.prototype._bounds=function(t){return this.max_wh2_bounds(t)},e}(i.XYGlyphView),r.Oval=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.OvalView,e.prototype.type="Oval",e.mixins(["line","fill"]),e.define({angle:[s.AngleSpec,0],width:[s.DistanceSpec],height:[s.DistanceSpec]}),e}(i.XYGlyph)},{"./xy_glyph":"models/glyphs/xy_glyph","core/properties":"core/properties"}],"models/glyphs/patch":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./xy_glyph");r.PatchView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u;if(l=r.sx,u=r.sy,this.visuals.fill.doit){for(this.visuals.fill.set_value(t),o=0,s=e.length;o<s;o++)n=e[o],0!==n?isNaN(l[n]+u[n])?(t.closePath(),t.fill(),t.beginPath()):t.lineTo(l[n],u[n]):(t.beginPath(),t.moveTo(l[n],u[n]));t.closePath(),t.fill()}if(this.visuals.line.doit){for(this.visuals.line.set_value(t),i=0,a=e.length;i<a;i++)n=e[i],0!==n?isNaN(l[n]+u[n])?(t.closePath(),t.stroke(),t.beginPath()):t.lineTo(l[n],u[n]):(t.beginPath(),t.moveTo(l[n],u[n]));return t.closePath(),t.stroke()}},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){return this._generic_area_legend(t,e,r,n,o,i)},e}(i.XYGlyphView),r.Patch=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.PatchView,e.prototype.type="Patch",e.mixins(["line","fill"]),e}(i.XYGlyph)},{"./xy_glyph":"models/glyphs/xy_glyph"}],"models/glyphs/patches":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/util/spatial"),s=t("./glyph"),a=t("core/util/array"),l=t("core/util/types"),u=t("core/hittest");r.PatchesView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._build_discontinuous_object=function(t){var e,r,n,o,i,s,u,c,_;for(r={},n=o=0,_=t.length;0<=_?o<_:o>_;n=0<=_?++o:--o)for(r[n]=[],u=a.copy(t[n]);u.length>0;)i=a.findLastIndex(u,function(t){return l.isStrictNaN(t)}),i>=0?c=u.splice(i):(c=u,u=[]),e=function(){var t,e,r;for(r=[],t=0,e=c.length;t<e;t++)s=c[t],l.isStrictNaN(s)||r.push(s);return r}(),r[n].push(e);return r},e.prototype._index_data=function(){var t,e,r,n,o,s,l,u,c,_,p;for(c=this._build_discontinuous_object(this._xs),p=this._build_discontinuous_object(this._ys),o=[],t=r=0,s=this._xs.length;0<=s?r<s:r>s;t=0<=s?++r:--r)for(e=n=0,l=c[t].length;0<=l?n<l:n>l;e=0<=l?++n:--n)u=c[t][e],_=p[t][e],0!==u.length&&o.push({minX:a.min(u),minY:a.min(_),maxX:a.max(u),maxY:a.max(_),i:t});return new i.RBush(o)},e.prototype._mask_data=function(t){var e,r,n,o,i,s,a,l,c;return s=this.renderer.plot_view.frame.x_ranges["default"],r=[s.min,s.max],o=r[0],i=r[1],c=this.renderer.plot_view.frame.y_ranges["default"],n=[c.min,c.max],a=n[0],l=n[1],e=u.validate_bbox_coords([o,i],[a,l]),this.index.indices(e)},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u,c,_,p,h,d,f,m;for(d=r.sxs,m=r.sys,this.renderer.sxss=this._build_discontinuous_object(d),this.renderer.syss=this._build_discontinuous_object(m),p=[],i=0,a=e.length;i<a;i++){if(n=e[i],u=[d[n],m[n]],h=u[0],f=u[1],this.visuals.fill.doit){for(this.visuals.fill.set_vectorize(t,n),o=s=0,c=h.length;0<=c?s<c:s>c;o=0<=c?++s:--s)0!==o?isNaN(h[o]+f[o])?(t.closePath(),t.fill(),t.beginPath()):t.lineTo(h[o],f[o]):(t.beginPath(),t.moveTo(h[o],f[o]));t.closePath(),t.fill()}if(this.visuals.line.doit){for(this.visuals.line.set_vectorize(t,n),o=l=0,_=h.length;0<=_?l<_:l>_;o=0<=_?++l:--l)0!==o?isNaN(h[o]+f[o])?(t.closePath(),t.stroke(),t.beginPath()):t.lineTo(h[o],f[o]):(t.beginPath(),t.moveTo(h[o],f[o]));t.closePath(),p.push(t.stroke())}else p.push(void 0)}return p},e.prototype._hit_point=function(t){var e,r,n,o,i,s,a,l,c,_,p,h,d,f,m,y,g,v,b;for(l=[t.vx,t.vy],y=l[0],g=l[1],h=this.renderer.plot_view.canvas.vx_to_sx(y),f=this.renderer.plot_view.canvas.vy_to_sy(g),v=this.renderer.xscale.invert(y,!0),b=this.renderer.yscale.invert(g,!0),e=this.index.indices({minX:v,minY:b,maxX:v,maxY:b}),r=[],n=s=0,c=e.length;0<=c?s<c:s>c;n=0<=c?++s:--s)for(o=e[n],d=this.renderer.sxss[o],m=this.renderer.syss[o],i=a=0,_=d.length;0<=_?a<_:a>_;i=0<=_?++a:--a)u.point_in_poly(h,f,d[i],m[i])&&r.push(o);return p=u.create_hit_test_result(),p["1d"].indices=r,p},e.prototype._get_snap_coord=function(t){var e,r,n,o;for(o=0,e=0,r=t.length;e<r;e++)n=t[e],o+=n;return o/t.length},e.prototype.scx=function(t,e,r){var n,o,i,s,a;if(1===this.renderer.sxss[t].length)return this._get_snap_coord(this.sxs[t]);for(s=this.renderer.sxss[t],a=this.renderer.syss[t],n=o=0,i=s.length;0<=i?o<i:o>i;n=0<=i?++o:--o)if(u.point_in_poly(e,r,s[n],a[n]))return this._get_snap_coord(s[n]);return null},e.prototype.scy=function(t,e,r){var n,o,i,s,a;if(1===this.renderer.syss[t].length)return this._get_snap_coord(this.sys[t]);for(s=this.renderer.sxss[t],a=this.renderer.syss[t],n=o=0,i=s.length;0<=i?o<i:o>i;n=0<=i?++o:--o)if(u.point_in_poly(e,r,s[n],a[n]))return this._get_snap_coord(a[n])},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){return this._generic_area_legend(t,e,r,n,o,i)},e}(s.GlyphView),r.Patches=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.PatchesView,e.prototype.type="Patches",e.coords([["xs","ys"]]),e.mixins(["line","fill"]),e}(s.Glyph)},{"./glyph":"models/glyphs/glyph","core/hittest":"core/hittest","core/util/array":"core/util/array","core/util/spatial":"core/util/spatial","core/util/types":"core/util/types"}],"models/glyphs/quad":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/util/spatial"),s=t("./glyph"),a=t("../scales/categorical_scale"),l=t("core/hittest");r.QuadView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._index_data=function(){var t,e,r,n,o,s,l,u,c,_,p,h,d;for(l=function(t,e){return t instanceof a.CategoricalScale?t.v_compute(e,!0):e},s=l(this.renderer.xscale,this._left),p=l(this.renderer.xscale,this._right),d=l(this.renderer.yscale,this._top),e=l(this.renderer.yscale,this._bottom),u=[],r=n=0,_=s.length;0<=_?n<_:n>_;r=0<=_?++n:--n)o=s[r],c=p[r],h=d[r],t=e[r],!isNaN(o+c+h+t)&&isFinite(o+c+h+t)&&u.push({minX:o,minY:t,maxX:c,maxY:h,i:r});return new i.RBush(u)},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u,c;for(l=r.sleft,u=r.sright,c=r.stop,a=r.sbottom,s=[],o=0,i=e.length;o<i;o++)n=e[o],isNaN(l[n]+c[n]+u[n]+a[n])||(this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(t,n),t.fillRect(l[n],c[n],u[n]-l[n],a[n]-c[n])),this.visuals.line.doit?(t.beginPath(),t.rect(l[n],c[n],u[n]-l[n],a[n]-c[n]),this.visuals.line.set_vectorize(t,n),s.push(t.stroke())):s.push(void 0));return s},e.prototype._hit_point=function(t){var e,r,n,o,i,s,a;return r=[t.vx,t.vy],o=r[0],i=r[1],s=this.renderer.xscale.invert(o,!0),a=this.renderer.yscale.invert(i,!0),e=this.index.indices({minX:s,minY:a,maxX:s,maxY:a}),n=l.create_hit_test_result(),n["1d"].indices=e,n},e.prototype.get_anchor_point=function(t,e,r){var n,o,i,s;switch(o=Math.min(this.sleft[e],this.sright[e]),i=Math.max(this.sright[e],this.sleft[e]),s=Math.min(this.stop[e],this.sbottom[e]),n=Math.max(this.sbottom[e],this.stop[e]),t){case"top_left":return{x:o,y:s};case"top_center":return{x:(o+i)/2,y:s};case"top_right":return{x:i,y:s};case"center_right":return{x:i,y:(s+n)/2};case"bottom_right":return{x:i,y:n};case"bottom_center":return{x:(o+i)/2,y:n};case"bottom_left":return{x:o,y:n};case"center_left":return{x:o,y:(s+n)/2};case"center":return{x:(o+i)/2,y:(s+n)/2}}},e.prototype.scx=function(t){return(this.sleft[t]+this.sright[t])/2},e.prototype.scy=function(t){return(this.stop[t]+this.sbottom[t])/2},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){return this._generic_area_legend(t,e,r,n,o,i)},e}(s.GlyphView),r.Quad=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.QuadView,e.prototype.type="Quad",e.coords([["right","bottom"],["left","top"]]),e.mixins(["line","fill"]),e}(s.Glyph)},{"../scales/categorical_scale":"models/scales/categorical_scale","./glyph":"models/glyphs/glyph","core/hittest":"core/hittest","core/util/spatial":"core/util/spatial"}],"models/glyphs/quadratic":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=t("core/util/spatial"),a=t("./glyph");n=function(t,e,r){var n,o;return e===(t+r)/2?[t,r]:(o=(t-e)/(t-2*e+r),n=t*Math.pow(1-o,2)+2*e*(1-o)*o+r*Math.pow(o,2),[Math.min(t,r,n),Math.max(t,r,n)])},r.QuadraticView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype._index_data=function(){var t,e,r,o,i,a,l,u,c,_;for(r=[],t=e=0,o=this._x0.length;0<=o?e<o:e>o;t=0<=o?++e:--e)isNaN(this._x0[t]+this._x1[t]+this._y0[t]+this._y1[t]+this._cx[t]+this._cy[t])||(i=n(this._x0[t],this._cx[t],this._x1[t]),l=i[0],u=i[1],a=n(this._y0[t],this._cy[t],this._y1[t]),c=a[0],_=a[1],r.push({minX:l,minY:c,maxX:u,maxY:_,i:t}));return new s.RBush(r)},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u,c,_,p;if(u=r.sx0,_=r.sy0,c=r.sx1,p=r.sy1,a=r.scx,l=r.scy,this.visuals.line.doit){for(s=[],o=0,i=e.length;o<i;o++)n=e[o],isNaN(u[n]+_[n]+c[n]+p[n]+a[n]+l[n])||(t.beginPath(),t.moveTo(u[n],_[n]),t.quadraticCurveTo(a[n],l[n],c[n],p[n]),this.visuals.line.set_vectorize(t,n),s.push(t.stroke()));return s}},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){return this._generic_line_legend(t,e,r,n,o,i)},e}(a.GlyphView),r.Quadratic=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.default_view=r.QuadraticView,e.prototype.type="Quadratic",e.coords([["x0","y0"],["x1","y1"],["cx","cy"]]),e.mixins(["line"]),e}(a.Glyph)},{"./glyph":"models/glyphs/glyph","core/util/spatial":"core/util/spatial"}],"models/glyphs/ray":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./xy_glyph"),s=t("core/properties");r.RayView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._map_data=function(){return this.slength=this.sdist(this.renderer.xscale,this._x,this._length)},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u,c,_,p,h,d,f;if(h=r.sx,d=r.sy,p=r.slength,n=r._angle,this.visuals.line.doit){for(f=this.renderer.plot_view.frame._width.value,o=this.renderer.plot_view.frame._height.value,s=2*(f+o),i=a=0,c=p.length;0<=c?a<c:a>c;i=0<=c?++a:--a)0===p[i]&&(p[i]=s);for(_=[],l=0,u=e.length;l<u;l++)i=e[l],isNaN(h[i]+d[i]+n[i]+p[i])||(t.translate(h[i],d[i]),t.rotate(n[i]),t.beginPath(),t.moveTo(0,0),t.lineTo(p[i],0),this.visuals.line.set_vectorize(t,i),t.stroke(),t.rotate(-n[i]),_.push(t.translate(-h[i],-d[i])));return _}},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){return this._generic_line_legend(t,e,r,n,o,i)},e}(i.XYGlyphView),r.Ray=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.RayView,e.prototype.type="Ray",e.mixins(["line"]),e.define({length:[s.DistanceSpec],angle:[s.AngleSpec]}),e}(i.XYGlyph)},{"./xy_glyph":"models/glyphs/xy_glyph","core/properties":"core/properties"}],"models/glyphs/rect":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./xy_glyph"),s=t("core/hittest"),a=t("core/properties"),l=t("core/util/array"),u=t("core/util/types"),c=t("../scales/categorical_scale");r.RectView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._set_data=function(){if(this.max_w2=0,"data"===this.model.properties.width.units&&(this.max_w2=this.max_width/2),this.max_h2=0,"data"===this.model.properties.height.units)return this.max_h2=this.max_height/2},e.prototype._map_data=function(){var t,e,r,n;return t=this.renderer.plot_view.canvas,"data"===this.model.properties.width.units?(r=this._map_dist_corner_for_data_side_length(this._x,this._width,this.renderer.xscale,t,0),this.sw=r[0],this.sx0=r[1]):(this.sw=this._width,this.sx0=function(){var t,r,n;for(n=[],e=t=0,r=this.sx.length;0<=r?t<r:t>r;e=0<=r?++t:--t)n.push(this.sx[e]-this.sw[e]/2);return n}.call(this)),"data"===this.model.properties.height.units?(n=this._map_dist_corner_for_data_side_length(this._y,this._height,this.renderer.yscale,t,1),this.sh=n[0],this.sy1=n[1]):(this.sh=this._height,this.sy1=function(){var t,r,n;for(n=[],e=t=0,r=this.sy.length;0<=r?t<r:t>r;e=0<=r?++t:--t)n.push(this.sy[e]-this.sh[e]/2);return n}.call(this)),this.ssemi_diag=function(){var t,r,n;for(n=[],e=t=0,r=this.sw.length;0<=r?t<r:t>r;e=0<=r?++t:--t)n.push(Math.sqrt(this.sw[e]/2*this.sw[e]/2+this.sh[e]/2*this.sh[e]/2));return n}.call(this)},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u,c,_,p,h,d;if(_=r.sx,h=r.sy,p=r.sx0,d=r.sy1,c=r.sw,u=r.sh,n=r._angle,this.visuals.fill.doit)for(i=0,a=e.length;i<a;i++)o=e[i],isNaN(_[o]+h[o]+p[o]+d[o]+c[o]+u[o]+n[o])||(this.visuals.fill.set_vectorize(t,o),n[o]?(t.translate(_[o],h[o]),t.rotate(n[o]),t.fillRect(-c[o]/2,-u[o]/2,c[o],u[o]),t.rotate(-n[o]),t.translate(-_[o],-h[o])):t.fillRect(p[o],d[o],c[o],u[o]));if(this.visuals.line.doit){for(t.beginPath(),s=0,l=e.length;s<l;s++)o=e[s],isNaN(_[o]+h[o]+p[o]+d[o]+c[o]+u[o]+n[o])||0!==c[o]&&0!==u[o]&&(n[o]?(t.translate(_[o],h[o]),t.rotate(n[o]),t.rect(-c[o]/2,-u[o]/2,c[o],u[o]),t.rotate(-n[o]),t.translate(-_[o],-h[o])):t.rect(p[o],d[o],c[o],u[o]),this.visuals.line.set_vectorize(t,o),t.stroke(),t.beginPath());return t.stroke()}},e.prototype._hit_rect=function(t){var e,r,n,o,i,a,l,u;return r=this.renderer.xscale.v_invert([t.vx0,t.vx1],!0),i=r[0],a=r[1],n=this.renderer.yscale.v_invert([t.vy0,t.vy1],!0),l=n[0],u=n[1],e=s.validate_bbox_coords([i,a],[l,u]),o=s.create_hit_test_result(),o["1d"].indices=this.index.indices(e),o},e.prototype._hit_point=function(t){var e,r,n,o,i,a,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k,M,j,S,T,O,P,A,E;for(f=[t.vx,t.vy],k=f[0],M=f[1],S=this.renderer.xscale.invert(k,!0),P=this.renderer.yscale.invert(M,!0),v=function(){var t,e,r;for(r=[],a=t=0,e=this.sx0.length;0<=e?t<e:t>e;a=0<=e?++t:--t)r.push(this.sx0[a]+this.sw[a]/2);return r}.call(this),b=function(){var t,e,r;for(r=[],a=t=0,e=this.sy1.length;0<=e?t<e:t>e;a=0<=e?++t:--t)r.push(this.sy1[a]+this.sh[a]/2);return r}.call(this),_=l.max(this._ddist(0,v,this.ssemi_diag)),p=l.max(this._ddist(1,b,this.ssemi_diag)),T=S-_,O=S+_,A=P-p,E=P+p,i=[],e=s.validate_bbox_coords([T,O],[A,E]),m=this.index.indices(e),u=0,c=m.length;u<c;u++)a=m[u],w=this.renderer.plot_view.canvas.vx_to_sx(k),x=this.renderer.plot_view.canvas.vy_to_sy(M),this._angle[a]?(n=Math.sqrt(Math.pow(w-this.sx[a],2)+Math.pow(x-this.sy[a],2)),g=Math.sin(-this._angle[a]),r=Math.cos(-this._angle[a]),h=r*(w-this.sx[a])-g*(x-this.sy[a])+this.sx[a],d=g*(w-this.sx[a])+r*(x-this.sy[a])+this.sy[a],w=h,x=d,j=Math.abs(this.sx[a]-w)<=this.sw[a]/2,o=Math.abs(this.sy[a]-x)<=this.sh[a]/2):(j=w-this.sx0[a]<=this.sw[a]&&w-this.sx0[a]>=0,o=x-this.sy1[a]<=this.sh[a]&&x-this.sy1[a]>=0),o&&j&&i.push(a);return y=s.create_hit_test_result(),y["1d"].indices=i,y},e.prototype._map_dist_corner_for_data_side_length=function(t,e,r,n,o){var i,s,a,l,_,p,h,d,f,m;return u.isString(t[0])&&r instanceof c.CategoricalScale?(l=!0,p=r.v_compute(t,l),0===o?h=function(){var r,n,o;for(o=[],i=r=0,n=t.length;0<=n?r<n:r>n;i=0<=n?++r:--r)o.push(p[i]-e[i]/2);return o}():1===o&&(h=function(){var r,n,o;for(o=[],i=r=0,n=t.length;0<=n?r<n:r>n;i=0<=n?++r:--r)o.push(p[i]+e[i]/2);return o}()),m=r.v_compute(h),_=this.sdist(r,t,e,"center",this.model.dilate)):(s=function(){var r,n,o;for(o=[],i=r=0,n=t.length;0<=n?r<n:r>n;i=0<=n?++r:--r)o.push(Number(t[i])-e[i]/2);return o}(),a=function(){var r,n,o;for(o=[],i=r=0,n=t.length;0<=n?r<n:r>n;i=0<=n?++r:--r)o.push(Number(t[i])+e[i]/2);return o}(),d=r.v_compute(s),f=r.v_compute(a),_=this.sdist(r,s,e,"edge",this.model.dilate),0===o?m=d[0]<f[0]?d:f:1===o&&(m=d[0]<f[0]?f:d)),0===o?[_,n.v_vx_to_sx(m)]:1===o?[_,n.v_vy_to_sy(m)]:void 0},e.prototype._ddist=function(t,e,r){var n,o,i,s,a,l,u;return 0===t?(u=this.renderer.plot_view.canvas.v_sx_to_vx(e),s=this.renderer.xscale):(u=this.renderer.plot_view.canvas.v_vy_to_sy(e),s=this.renderer.yscale),a=u,l=function(){var t,e,o;for(o=[],n=t=0,e=a.length;0<=e?t<e:t>e;n=0<=e?++t:--t)o.push(a[n]+r[n]);return o}(),o=s.v_invert(a),i=s.v_invert(l),function(){var t,e,r;for(r=[],n=t=0,e=o.length;0<=e?t<e:t>e;n=0<=e?++t:--t)r.push(Math.abs(i[n]-o[n]));return r}()},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){return this._generic_area_legend(t,e,r,n,o,i)},e.prototype._bounds=function(t){return this.max_wh2_bounds(t)},e}(i.XYGlyphView),r.Rect=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.RectView,e.prototype.type="Rect",e.mixins(["line","fill"]),e.define({angle:[a.AngleSpec,0],width:[a.DistanceSpec],height:[a.DistanceSpec],dilate:[a.Bool,!1]}),e}(i.XYGlyph)},{"../scales/categorical_scale":"models/scales/categorical_scale","./xy_glyph":"models/glyphs/xy_glyph","core/hittest":"core/hittest","core/properties":"core/properties","core/util/array":"core/util/array","core/util/types":"core/util/types"}],"models/glyphs/segment":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/hittest"),s=t("core/util/spatial"),a=t("./glyph"),l=t("lodash");r.SegmentView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._index_data=function(){var t,e,r,n;for(r=[],t=e=0,n=this._x0.length;0<=n?e<n:e>n;t=0<=n?++e:--e)isNaN(this._x0[t]+this._x1[t]+this._y0[t]+this._y1[t])||r.push({minX:Math.min(this._x0[t],this._x1[t]),minY:Math.min(this._y0[t],this._y1[t]),maxX:Math.max(this._x0[t],this._x1[t]),maxY:Math.max(this._y0[t],this._y1[t]),i:t});return new s.RBush(r)},e.prototype._render=function(t,e,r){var n,o,i,s,a,u,c,_;if(a=r.sx0,c=r.sy0,u=r.sx1,_=r.sy1,this.data={name:this.model.name,model_id:this.model.id,data_fields:["segments"],segments:[]},this.visuals.line.doit)for(i=0,s=e.length;i<s;i++)o=e[i],isNaN(a[o]+c[o]+u[o]+_[o])||(t.beginPath(),t.moveTo(a[o],c[o]),t.lineTo(u[o],_[o]),n={x:Math.round(l.min([a[o],u[o]])),y:Math.round(l.min([c[o],_[o]])),w:Math.round(Math.abs(a[o]-u[o])),h:Math.round(Math.abs(c[o]-_[o]))},this.data.segments.push({bbox:n,start:{x:Math.round(a[o]),y:Math.round(c[o])},end:{x:Math.round(u[o]),y:Math.round(_[o])}}),this.visuals.line.set_vectorize(t,o),t.stroke());return console.log("render segment"),console.log(this),window.localStorage.setItem(this.data.name,JSON.stringify(this.data))},e.prototype._hit_point=function(t){var e,r,n,o,s,a,l,u,c,_,p,h,d,f,m,y,g;for(_=[t.vx,t.vy],f=_[0],m=_[1],y=this.renderer.xscale.invert(f,!0),g=this.renderer.yscale.invert(m,!0),c={x:this.renderer.plot_view.canvas.vx_to_sx(f),y:this.renderer.plot_view.canvas.vy_to_sy(m)},n=[],e=this.index.indices({minX:y,minY:g,maxX:y,maxY:g}),s=0,a=e.length;s<a;s++)o=e[s],d=Math.max(2,this.visuals.line.cache_select("line_width",o)/2),p=[{x:this.sx0[o],y:this.sy0[o]},{x:this.sx1[o],y:this.sy1[o]}],l=p[0],u=p[1],r=i.dist_to_segment(c,l,u),r<d&&n.push(o);return h=i.create_hit_test_result(),h["1d"].indices=n,h},e.prototype._hit_span=function(t){var e,r,n,o,s,a,l,u,c,_,p,h,d,f,m,y;for(n=this.renderer.plot_view.frame.h_range,f=this.renderer.plot_view.frame.v_range,l=[t.vx,t.vy],m=l[0],y=l[1],"v"===t.direction?(d=this.renderer.yscale.invert(y),u=[this._y0,this._y1],p=u[0],h=u[1]):(d=this.renderer.xscale.invert(m),c=[this._x0,this._x1],p=c[0],h=c[1]),r=[],e=this.index.indices({minX:this.renderer.xscale.invert(n.min),minY:this.renderer.yscale.invert(f.min),maxX:this.renderer.xscale.invert(n.max),maxY:this.renderer.yscale.invert(f.max)}),s=0,a=e.length;s<a;s++)o=e[s],(p[o]<=d&&d<=h[o]||h[o]<=d&&d<=p[o])&&r.push(o);return _=i.create_hit_test_result(),_["1d"].indices=r,_},e.prototype.scx=function(t){return(this.sx0[t]+this.sx1[t])/2},e.prototype.scy=function(t){return(this.sy0[t]+this.sy1[t])/2},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){return this._generic_line_legend(t,e,r,n,o,i)},e}(a.GlyphView),r.Segment=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.SegmentView,e.prototype.type="Segment",e.coords([["x0","y0"],["x1","y1"]]),e.mixins(["line"]),e}(a.Glyph)},{"./glyph":"models/glyphs/glyph","core/hittest":"core/hittest","core/util/spatial":"core/util/spatial",lodash:"lodash"}],"models/glyphs/text":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./xy_glyph"),s=t("core/properties");r.TextView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u,c,_,p;for(_=r.sx,p=r.sy,i=r._x_offset,s=r._y_offset,n=r._angle,o=r._text,c=[],l=0,u=e.length;l<u;l++)a=e[l],isNaN(_[a]+p[a]+i[a]+s[a]+n[a])||null==o[a]||(this.visuals.text.doit?(t.save(),t.translate(_[a]+i[a],p[a]+s[a]),t.rotate(n[a]),this.visuals.text.set_vectorize(t,a),t.fillText(o[a],0,0),c.push(t.restore())):c.push(void 0));return c},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){return t.save(),this.text_props.set_value(t),t.font=this.text_props.font_value(),t.font=t.font.replace(/\b[\d\.]+[\w]+\b/,"10pt"),t.textAlign="right",t.textBaseline="middle",t.fillText("text",x2,(o+y2)/2),t.restore()},e}(i.XYGlyphView),r.Text=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.TextView,e.prototype.type="Text",e.mixins(["text"]),e.define({text:[s.StringSpec,{field:"text"}],angle:[s.AngleSpec,0],x_offset:[s.NumberSpec,0],y_offset:[s.NumberSpec,0]}),e}(i.XYGlyph)},{"./xy_glyph":"models/glyphs/xy_glyph","core/properties":"core/properties"}],"models/glyphs/vbar":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/util/spatial"),s=t("./glyph"),a=t("../scales/categorical_scale"),l=t("core/hittest"),u=t("core/properties");r.VBarView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._map_data=function(){var t,e,r,n,o;for(this.sx=this.renderer.xscale.v_compute(this._x),o=this.renderer.yscale.v_compute(this._top),n=this.renderer.yscale.v_compute(this._bottom),this.stop=this.renderer.plot_view.canvas.v_vy_to_sy(o),this.sbottom=this.renderer.plot_view.canvas.v_vy_to_sy(n),this.sleft=[],this.sright=[],this.sw=this.sdist(this.renderer.xscale,this._x,this._width,"center"),t=e=0,r=this.sx.length;0<=r?e<r:e>r;t=0<=r?++e:--e)this.sleft.push(this.sx[t]-this.sw[t]/2),this.sright.push(this.sx[t]+this.sw[t]/2);return null},e.prototype._index_data=function(){var t,e,r,n,o,s,l,u,c,_,p,h,d;for(s=function(t,e){return t instanceof a.CategoricalScale?t.v_compute(e,!0):e},d=s(this.renderer.xscale,this._x),h=s(this.renderer.xscale,this._width),p=s(this.renderer.yscale,this._top),e=s(this.renderer.yscale,this._bottom),l=[],r=n=0,c=d.length;0<=c?n<c:n>c;r=0<=c?++n:--n)o=d[r]-h[r]/2,u=d[r]+h[r]/2,_=p[r],t=e[r],!isNaN(o+u+_+t)&&isFinite(o+u+_+t)&&l.push({minX:o,minY:t,maxX:u,maxY:_,i:r});return new i.RBush(l)},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u,c,_,p;for(l=r.sleft,u=r.sright,c=r.stop,a=r.sbottom,this.data={name:this.renderer.model.name,model_id:this.model.id,model_type:"vbar",renderer_id:this.renderer.model.id,data_fields:["bars"],bars:[]},i=0,s=e.length;i<s;i++)o=e[i],isNaN(l[o]+c[o]+u[o]+a[o])||(this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(t,o),t.fillRect(l[o],c[o],u[o]-l[o],a[o]-c[o]),n={x:Math.round(l[o]),y:Math.round(c[o]),w:Math.round(u[o]-l[o]),h:Math.round(a[o]-c[o])},_=this.renderer.model.data_source.attributes.data.x[o],p=this.renderer.model.data_source.attributes.data.top[o],this.data.bars.push({bbox:n,x:_,y:p,width:this.model.attributes.width.value})),this.visuals.line.doit&&(t.beginPath(),t.rect(l[o],c[o],u[o]-l[o],a[o]-c[o]),this.visuals.line.set_vectorize(t,o),t.stroke()));return console.log("render vbar"),console.log(this),window.localStorage.setItem(this.data.name,JSON.stringify(this.data))},e.prototype._hit_point=function(t){var e,r,n,o,i,s,a;return r=[t.vx,t.vy],o=r[0],i=r[1],s=this.renderer.xscale.invert(o,!0),a=this.renderer.yscale.invert(i,!0),e=this.index.indices({minX:s,minY:a,maxX:s,maxY:a}),n=l.create_hit_test_result(),n["1d"].indices=e,n},e.prototype.scy=function(t){return(this.stop[t]+this.sbottom[t])/2},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){return this._generic_area_legend(t,e,r,n,o,i)},e}(s.GlyphView),r.VBar=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.VBarView,e.prototype.type="VBar",e.mixins(["line","fill"]),e.define({x:[u.NumberSpec],width:[u.DistanceSpec],top:[u.NumberSpec],bottom:[u.NumberSpec,0]}),e}(s.Glyph)},{"../scales/categorical_scale":"models/scales/categorical_scale","./glyph":"models/glyphs/glyph","core/hittest":"core/hittest","core/properties":"core/properties","core/util/spatial":"core/util/spatial"}],"models/glyphs/wedge":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./xy_glyph"),s=t("core/hittest"),a=t("core/properties"),l=t("core/util/math"),u=t("lodash");r.WedgeView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._map_data=function(){return"data"===this.model.properties.radius.units?this.sradius=this.sdist(this.renderer.xscale,this._x,this._radius):this.sradius=this._radius},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,c,_,p,h,d;for(h=r.sx,d=r.sy,p=r.sradius,o=r._start_angle,n=r._end_angle,i=this.model.properties.direction.value(),this.data={name:this.renderer.model.name,model_id:this.model.id,data_fields:["slices"],slices:[]},s=function(t,e,r,n,o){var i,s,a,l,c,_,p,h,d,f,m,y,g,v,b,w,x;if(n*=-1,o*=-1,o-n>=Math.PI)return{x:t-r,y:e-r,w:2*r,h:2*r};for(c=r*Math.cos(-n),p=r*Math.sin(-n),_=r*Math.cos(-o),h=r*Math.sin(-o),g=[0,c,_],v=[0,p,h],x=-n,y=null,x>-Math.PI/2?(x=-Math.PI/2,y=3):x>-Math.PI?(x=-Math.PI,y=2):x>-3*Math.PI/2?(x=-3*Math.PI/2,y=1):(x=0,y=0);x>-o;){switch(y){case 3:v.push(-r);break;case 2:g.push(-r);break;case 1:v.push(r);break;case 0:g.push(r)}y=y>0?(y-1)%4:0,x-=Math.PI/2}for(a=[],d=f=0,b=g.length;0<=b?f<b:f>b;d=0<=b?++f:--f)a.push(g[d]+t);for(l=[],d=m=0,w=v.length;0<=w?m<w:m>w;d=0<=w?++m:--m)l.push(v[d]+e);return i=Math.round(u.min(a)),s=Math.round(u.min(l)),{x:i,y:s,w:Math.round(u.max(a))-i,h:Math.round(u.max(l))-s}},l=0,c=e.length;l<c;l++)a=e[l],isNaN(h[a]+d[a]+p[a]+o[a]+n[a])||(t.beginPath(),t.arc(h[a],d[a],p[a],o[a],n[a],i),t.lineTo(h[a],d[a]),t.closePath(),this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(t,a),t.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(t,a),t.stroke()),_=180*-(n[a]-o[a])/Math.PI,this.data.slices.push({bbox:s(h[a],d[a],p[a],o[a],n[a]),span:_}));return console.log("render wedge"),console.log(this),window.localStorage.setItem(this.data.name,JSON.stringify(this.data))},e.prototype._hit_point=function(t){var e,r,n,o,i,a,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k,M,j,S,T,O,P,A,E,z,C,N,D,I,F;for(f=[t.vx,t.vy],S=f[0],P=f[1],z=this.renderer.xscale.invert(S,!0),D=this.renderer.yscale.invert(P,!0),"data"===this.model.properties.radius.units?(C=z-this.max_radius,N=z+this.max_radius,I=D-this.max_radius,F=D+this.max_radius):(T=S-this.max_radius,O=S+this.max_radius,m=this.renderer.xscale.v_invert([T,O],!0),C=m[0],N=m[1],A=P-this.max_radius,E=P+this.max_radius,y=this.renderer.yscale.v_invert([A,E],!0),I=y[0],F=y[1]),n=[],r=s.validate_bbox_coords([C,N],[I,F]),g=this.index.indices(r),c=0,p=g.length;c<p;c++)u=g[c],d=Math.pow(this.sradius[u],2),w=this.renderer.xscale.compute(z,!0),x=this.renderer.xscale.compute(this._x[u],!0),M=this.renderer.yscale.compute(D,!0),j=this.renderer.yscale.compute(this._y[u],!0),i=Math.pow(w-x,2)+Math.pow(M-j,2),i<=d&&n.push([u,i]);for(o=this.model.properties.direction.value(),a=[],_=0,h=n.length;_<h;_++)v=n[_],u=v[0],i=v[1],b=this.renderer.plot_view.canvas.vx_to_sx(S),k=this.renderer.plot_view.canvas.vy_to_sy(P),e=Math.atan2(k-this.sy[u],b-this.sx[u]),l.angle_between(-e,-this._start_angle[u],-this._end_angle[u],o)&&a.push([u,i]);return s.create_1d_hit_test_result(a)},e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){return this._generic_area_legend(t,e,r,n,o,i)},e}(i.XYGlyphView),r.Wedge=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.WedgeView,e.prototype.type="Wedge",e.mixins(["line","fill"]),e.define({direction:[a.Direction,"anticlock"],radius:[a.DistanceSpec],start_angle:[a.AngleSpec],end_angle:[a.AngleSpec]}),e}(i.XYGlyph)},{"./xy_glyph":"models/glyphs/xy_glyph","core/hittest":"core/hittest","core/properties":"core/properties","core/util/math":"core/util/math",lodash:"lodash"}],"models/glyphs/xy_glyph":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{
value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/util/spatial"),s=t("./glyph"),a=t("../scales/categorical_scale");r.XYGlyphView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._index_data=function(){var t,e,r,n,o,s,l,u;for(s=this.renderer.xscale instanceof a.CategoricalScale?this.renderer.xscale.v_compute(this._x,!0):this._x,u=this.renderer.yscale instanceof a.CategoricalScale?this.renderer.yscale.v_compute(this._y,!0):this._y,r=[],t=e=0,n=s.length;0<=n?e<n:e>n;t=0<=n?++e:--e)o=s[t],!isNaN(o)&&isFinite(o)&&(l=u[t],!isNaN(l)&&isFinite(l)&&r.push({minX:o,minY:l,maxX:o,maxY:l,i:t}));return new i.RBush(r)},e}(s.GlyphView),r.XYGlyph=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="XYGlyph",e.prototype.default_view=r.XYGlyphView,e.coords([["x","y"]]),e}(s.Glyph)},{"../scales/categorical_scale":"models/scales/categorical_scale","./glyph":"models/glyphs/glyph","core/util/spatial":"core/util/spatial"}],"models/grids/grid":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("../renderers/guide_renderer"),s=t("../renderers/renderer"),a=t("core/properties"),l=t("core/util/types");r.GridView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this._x_range_name=this.model.x_range_name,this._y_range_name=this.model.y_range_name,this.data={name:this.model.name,model_id:this.model.id,model_type:"grid_view",data_fields:["gridlines"],gridlines:null}},e.prototype.render=function(){var t;if(this.model.visible!==!1)return t=this.plot_view.canvas_view.ctx,t.save(),this._draw_regions(t),this._draw_minor_grids(t),this._draw_grids(t),t.restore(),console.log("render GridView"),console.log(this),window.localStorage.setItem(this.data.name,JSON.stringify(this.data))},e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),this.connect(this.model.change,function(){return this.request_render()})},e.prototype._draw_regions=function(t){var e,r,n,o,i,s,a,l,u,c,_,p;if(this.visuals.band_fill.doit)for(n=this.model.grid_coords("major",!1),_=n[0],p=n[1],this.visuals.band_fill.set_value(t),e=r=0,o=_.length-1;0<=o?r<o:r>o;e=0<=o?++r:--r)e%2===1&&(i=this.plot_view.map_to_screen(_[e],p[e],this._x_range_name,this._y_range_name),a=i[0],u=i[1],s=this.plot_view.map_to_screen(_[e+1],p[e+1],this._x_range_name,this._y_range_name),l=s[0],c=s[1],t.fillRect(a[0],u[0],l[1]-a[0],c[1]-u[0]),t.fill())},e.prototype._draw_grids=function(t){var e,r,n;if(this.visuals.grid_line.doit)return e=this.model.grid_coords("major"),r=e[0],n=e[1],this._draw_grid_helper(t,this.visuals.grid_line,r,n)},e.prototype._draw_minor_grids=function(t){var e,r,n;if(this.visuals.minor_grid_line.doit)return e=this.model.grid_coords("minor"),r=e[0],n=e[1],this._draw_grid_helper(t,this.visuals.minor_grid_line,r,n)},e.prototype._draw_grid_helper=function(t,e,r,n){var o,i,s,a,l,u,c,_,p,h,d,f,m,y,g;for(e.set_value(t),i=2,l=[],u=_=0,h=r.length;0<=h?_<h:_>h;u=0<=h?++_:--_){for(d=this.plot_view.map_to_screen(r[u],n[u],this._x_range_name,this._y_range_name),m=d[0],y=d[1],t.beginPath(),t.moveTo(Math.round(m[0]),Math.round(y[0])),o={x:m[0],y:y[0],w:null,h:null},c=p=1,f=m.length;1<=f?p<f:p>f;c=1<=f?++p:--p)t.lineTo(Math.round(m[c]),Math.round(y[c])),c===m.length-1&&(s=m[c],a=y[c],s<o.x&&(g=o.x,o.x=s,s=g),a<o.y&&(g=o.y,o.y=a,a=g),o.w=Math.round(s-o.x),o.h=Math.round(a-o.y),o.x=Math.round(o.x),o.y=Math.round(o.y),0===o.w?(o.x-=i,o.w=2*i):0===o.h&&(o.y-=i,o.h=2*i));l.push({bbox:o,value:r[u][0]}),t.stroke()}this.data.gridlines=l},e}(s.RendererView),r.Grid=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.GridView,e.prototype.type="Grid",e.mixins(["line:grid_","line:minor_grid_","fill:band_"]),e.define({bounds:[a.Any,"auto"],dimension:[a.Number,0],ticker:[a.Instance],x_range_name:[a.String,"default"],y_range_name:[a.String,"default"]}),e.override({level:"underlay",band_fill_color:null,band_fill_alpha:0,grid_line_color:"#e5e5e5",minor_grid_line_color:null}),e.prototype.ranges=function(){var t,e,r,n;return e=this.dimension,r=(e+1)%2,t=this.plot.plot_canvas.frame,n=[t.x_ranges[this.x_range_name],t.y_ranges[this.y_range_name]],[n[e],n[r]]},e.prototype.computed_bounds=function(){var t,e,r,n,o,i,s;return o=this.ranges(),r=o[0],t=o[1],s=this.bounds,n=[r.min,r.max],l.isArray(s)?(i=Math.min(s[0],s[1]),e=Math.max(s[0],s[1]),i<n[0]?i=n[0]:i>n[1]&&(i=null),e>n[1]?e=n[1]:e<n[0]&&(e=null)):(i=n[0],e=n[1]),[i,e]},e.prototype.grid_coords=function(t,e){var r,n,o,i,s,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k,M,j,S;for(null==e&&(e=!0),c=this.dimension,p=(c+1)%2,b=this.ranges(),v=b[0],s=b[1],w=this.computed_bounds(),M=w[0],u=w[1],S=Math.min(M,u),u=Math.max(M,u),M=S,j=this.ticker.get_ticks(M,u,v,s.min,{})[t],y=v.min,m=v.max,o=s.min,n=s.max,i=[[],[]],_=h=0,x=j.length;0<=x?h<x:h>x;_=0<=x?++h:--h)if(j[_]!==y&&j[_]!==m||!e){for(a=[],l=[],r=2,g=d=0,k=r;0<=k?d<k:d>k;g=0<=k?++d:--d)f=o+(n-o)/(r-1)*g,a.push(j[_]),l.push(f);i[c].push(a),i[p].push(l)}return i},e}(i.GuideRenderer)},{"../renderers/guide_renderer":"models/renderers/guide_renderer","../renderers/renderer":"models/renderers/renderer","core/properties":"core/properties","core/util/types":"core/util/types"}],"models/grids/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./grid");r.Grid=n.Grid},{"./grid":"models/grids/grid"}],"models/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("tslib");n.__exportStar(t("./annotations"),r),n.__exportStar(t("./axes"),r),n.__exportStar(t("./callbacks"),r),n.__exportStar(t("./canvas"),r),n.__exportStar(t("./formatters"),r),n.__exportStar(t("./glyphs"),r),n.__exportStar(t("./grids"),r),n.__exportStar(t("./layouts"),r),n.__exportStar(t("./mappers"),r),n.__exportStar(t("./transforms"),r),n.__exportStar(t("./markers"),r),n.__exportStar(t("./plots"),r),n.__exportStar(t("./ranges"),r),n.__exportStar(t("./renderers"),r),n.__exportStar(t("./scales"),r),n.__exportStar(t("./sources"),r),n.__exportStar(t("./tickers"),r),n.__exportStar(t("./tiles"),r),n.__exportStar(t("./tools"),r)},{"./annotations":"models/annotations/index","./axes":"models/axes/index","./callbacks":"models/callbacks/index","./canvas":"models/canvas/index","./formatters":"models/formatters/index","./glyphs":"models/glyphs/index","./grids":"models/grids/index","./layouts":"models/layouts/index","./mappers":"models/mappers/index","./markers":"models/markers/index","./plots":"models/plots/index","./ranges":"models/ranges/index","./renderers":"models/renderers/index","./scales":"models/scales/index","./sources":"models/sources/index","./tickers":"models/tickers/index","./tiles":"models/tiles/index","./tools":"models/tools/index","./transforms":"models/transforms/index",tslib:"tslib/tslib"}],"models/layouts/box":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},s=t("core/layout/solver"),a=t("core/properties"),l=t("core/util/array"),u=t("core/util/object"),c=t("./layout_dom");r.BoxView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.className="bk-grid",e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),this.connect(this.model.properties.children.change,function(t){return function(){return t.rebuild_child_views()}}(this))},e.prototype.get_height=function(){var t,e,r;return e=this.model.get_layoutable_children(),t=e.map(function(t){return t._height.value}),r=this.model._horizontal?l.max(t):l.sum(t)},e.prototype.get_width=function(){var t,e,r;return e=this.model.get_layoutable_children(),t=e.map(function(t){return t._width.value}),r=this.model._horizontal?l.sum(t):l.max(t)},e}(c.LayoutDOMView),r.Box=function(t){function e(t,r){e.__super__.constructor.call(this,t,r),this._child_equal_size_width=new s.Variable,this._child_equal_size_height=new s.Variable,this._box_equal_size_top=new s.Variable,this._box_equal_size_bottom=new s.Variable,this._box_equal_size_left=new s.Variable,this._box_equal_size_right=new s.Variable,this._box_cell_align_top=new s.Variable,this._box_cell_align_bottom=new s.Variable,this._box_cell_align_left=new s.Variable,this._box_cell_align_right=new s.Variable}return n(e,t),e.prototype.default_view=r.BoxView,e.define({children:[a.Array,[]]}),e.internal({spacing:[a.Number,6]}),e.prototype.get_layoutable_children=function(){return this.children},e.prototype.get_edit_variables=function(){var t,r,n,o,i;for(r=e.__super__.get_edit_variables.call(this),i=this.get_layoutable_children(),n=0,o=i.length;n<o;n++)t=i[n],r=r.concat(t.get_edit_variables());return r},e.prototype.get_constrained_variables=function(){return u.extend({},e.__super__.get_constrained_variables.call(this),{box_equal_size_top:this._box_equal_size_top,box_equal_size_bottom:this._box_equal_size_bottom,box_equal_size_left:this._box_equal_size_left,box_equal_size_right:this._box_equal_size_right,box_cell_align_top:this._box_cell_align_top,box_cell_align_bottom:this._box_cell_align_bottom,box_cell_align_left:this._box_cell_align_left,box_cell_align_right:this._box_cell_align_right})},e.prototype.get_constraints=function(){var t,e,r,n,o,i,a,l,u,c,_,p;if(r=[],e=this.get_layoutable_children(),0===e.length)return r;for(o=0,l=e.length;o<l;o++)t=e[o],p=t.get_constrained_variables(),c=this._child_rect(p),this._horizontal?null!=p.height&&r.push(s.EQ(c.height,[-1,this._height])):null!=p.width&&r.push(s.EQ(c.width,[-1,this._width])),this._horizontal?null!=p.box_equal_size_left&&null!=p.box_equal_size_right&&null!=p.width&&r.push(s.EQ([-1,p.box_equal_size_left],[-1,p.box_equal_size_right],p.width,this._child_equal_size_width)):null!=p.box_equal_size_top&&null!=p.box_equal_size_bottom&&null!=p.height&&r.push(s.EQ([-1,p.box_equal_size_top],[-1,p.box_equal_size_bottom],p.height,this._child_equal_size_height)),r=r.concat(t.get_constraints());for(a=this._info(e[0].get_constrained_variables()),r.push(s.EQ(a.span.start,0)),n=i=1,_=e.length;1<=_?i<_:i>_;n=1<=_?++i:--i)u=this._info(e[n].get_constrained_variables()),a.span.size&&r.push(s.EQ(a.span.start,a.span.size,[-1,u.span.start])),r.push(s.WEAK_EQ(a.whitespace.after,u.whitespace.before,0-this.spacing)),r.push(s.GE(a.whitespace.after,u.whitespace.before,0-this.spacing)),a=u;return this._horizontal?null!=p.width&&r.push(s.EQ(a.span.start,a.span.size,[-1,this._width])):null!=p.height&&r.push(s.EQ(a.span.start,a.span.size,[-1,this._height])),r=r.concat(this._align_outer_edges_constraints(!0),this._align_outer_edges_constraints(!1),this._align_inner_cell_edges_constraints(),this._box_equal_size_bounds(!0),this._box_equal_size_bounds(!1),this._box_cell_align_bounds(!0),this._box_cell_align_bounds(!1),this._box_whitespace(!0),this._box_whitespace(!1))},e.prototype._child_rect=function(t){return{x:t.origin_x,y:t.origin_y,width:t.width,height:t.height}},e.prototype._span=function(t){return this._horizontal?{start:t.x,size:t.width}:{start:t.y,size:t.height}},e.prototype._info=function(t){var e,r;return r=this._horizontal?{before:t.whitespace_left,after:t.whitespace_right}:{before:t.whitespace_top,after:t.whitespace_bottom},e=this._span(this._child_rect(t)),{span:e,whitespace:r}},e.prototype._flatten_cell_edge_variables=function(t){var r,n,o,i,s,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w,x;for(w=t?e._top_bottom_inner_cell_edge_variables:e._left_right_inner_cell_edge_variables,r=t!==this._horizontal,l=this.get_layoutable_children(),o=l.length,c={},i=0,_=0,f=l.length;_<f;_++){for(a=l[_],s=a instanceof e?a._flatten_cell_edge_variables(t):{},n=a.get_constrained_variables(),p=0,m=w.length;p<m;p++)y=w[p],y in n&&(s[y]=[n[y]]);for(h in s)x=s[h],r?(v=h.split(" "),d=v[0],b=v.length>1?v[1]:"",u=this._horizontal?"row":"col",g=d+" "+u+"-"+o+"-"+i+"-"+b):g=h,g in c?c[g]=c[g].concat(x):c[g]=x;i+=1}return c},e.prototype._align_inner_cell_edges_constraints=function(){var t,e,r,n,o,a,l,u;if(t=[],null!=this.document&&i.call(this.document.roots(),this)>=0){e=this._flatten_cell_edge_variables(this._horizontal);for(o in e)if(u=e[o],u.length>1)for(a=u[0],r=n=1,l=u.length;1<=l?n<l:n>l;r=1<=l?++n:--n)t.push(s.EQ(u[r],[-1,a]))}return t},e.prototype._find_edge_leaves=function(t){var r,n,o,i,s,a,l,u;if(o=this.get_layoutable_children(),a=[[],[]],o.length>0)if(this._horizontal===t)u=o[0],i=o[o.length-1],u instanceof e?a[0]=a[0].concat(u._find_edge_leaves(t)[0]):a[0].push(u),i instanceof e?a[1]=a[1].concat(i._find_edge_leaves(t)[1]):a[1].push(i);else for(s=0,l=o.length;s<l;s++)r=o[s],r instanceof e?(n=r._find_edge_leaves(t),a[0]=a[0].concat(n[0]),a[1]=a[1].concat(n[1])):(a[0].push(r),a[1].push(r));return a},e.prototype._align_outer_edges_constraints=function(t){var e,r,n,o,i,a,l,u,c,_;return a=this._find_edge_leaves(t),c=a[0],o=a[1],t?(_="on_edge_align_left",i="on_edge_align_right"):(_="on_edge_align_top",i="on_edge_align_bottom"),r=function(t,e){var r,n,o,i,s;for(r=[],n=0,i=t.length;n<i;n++)o=t[n],s=o.get_constrained_variables(),e in s&&r.push(s[e]);return r},u=r(c,_),n=r(o,i),l=[],e=function(t){var e,r,n,o,i;if(t.length>1){for(r=t[0],n=o=1,i=t.length;1<=i?o<i:o>i;n=1<=i?++o:--o)e=t[n],l.push(s.EQ([-1,r],e));return null}},e(u),e(n),l},e.prototype._box_insets_from_child_insets=function(t,e,r,n){var o,i,a,l,u,c,_,p,h;return c=this._find_edge_leaves(t),p=c[0],i=c[1],t?(h=e+"_left",a=e+"_right",u=this[r+"_left"],l=this[r+"_right"]):(h=e+"_top",a=e+"_bottom",u=this[r+"_top"],l=this[r+"_bottom"]),_=[],o=function(t,e,r){var o,i,a,l,u;for(o=[],i=0,l=e.length;i<l;i++)a=e[i],u=a.get_constrained_variables(),r in u&&(n?_.push(s.GE([-1,t],u[r])):_.push(s.EQ([-1,t],u[r])));return null},o(u,p,h),o(l,i,a),_},e.prototype._box_equal_size_bounds=function(t){return this._box_insets_from_child_insets(t,"box_equal_size","_box_equal_size",!1)},e.prototype._box_cell_align_bounds=function(t){return this._box_insets_from_child_insets(t,"box_cell_align","_box_cell_align",!1)},e.prototype._box_whitespace=function(t){return this._box_insets_from_child_insets(t,"whitespace","_whitespace",!0)},e._left_right_inner_cell_edge_variables=["box_cell_align_left","box_cell_align_right"],e._top_bottom_inner_cell_edge_variables=["box_cell_align_top","box_cell_align_bottom"],e}(c.LayoutDOM)},{"./layout_dom":"models/layouts/layout_dom","core/layout/solver":"core/layout/solver","core/properties":"core/properties","core/util/array":"core/util/array","core/util/object":"core/util/object"}],"models/layouts/column":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./box");r.ColumnView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.className="bk-grid-column",e}(i.BoxView),r.Column=function(t){function e(t,r){e.__super__.constructor.call(this,t,r),this._horizontal=!1}return n(e,t),e.prototype.type="Column",e.prototype.default_view=r.ColumnView,e}(i.Box)},{"./box":"models/layouts/box"}],"models/layouts/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./box");r.Box=n.Box;var o=t("./column");r.Column=o.Column;var i=t("./layout_dom");r.LayoutDOM=i.LayoutDOM;var s=t("./row");r.Row=s.Row;var a=t("./spacer");r.Spacer=a.Spacer;var l=t("./widget_box");r.WidgetBox=l.WidgetBox},{"./box":"models/layouts/box","./column":"models/layouts/column","./layout_dom":"models/layouts/layout_dom","./row":"models/layouts/row","./spacer":"models/layouts/spacer","./widget_box":"models/layouts/widget_box"}],"models/layouts/layout_dom":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("../../model"),s=t("core/dom"),a=t("core/properties"),l=t("core/layout/solver"),u=t("core/build_views"),c=t("core/dom_view"),_=t("core/logging");r.LayoutDOMView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.is_root&&(this._solver=new l.Solver),this.child_views={},this.build_child_views(),this.connect_signals()},e.prototype.remove=function(){var t,r,n;r=this.child_views;for(t in r)n=r[t],n.remove();return this.child_views={},e.__super__.remove.call(this)},e.prototype.has_finished=function(){var t,r,n;if(!e.__super__.has_finished.call(this))return!1;n=this.child_views;for(t in n)if(r=n[t],!r.has_finished())return!1;return!0},e.prototype.notify_finished=function(){return this.is_root?!this._idle_notified&&this.has_finished()&&null!=this.model.document?(this._idle_notified=!0,this.model.document.notify_idle(this.model)):void 0:e.__super__.notify_finished.call(this)},e.prototype._calc_width_height=function(){var t,e,r,n;for(e=this.el;;){if(e=e.parentNode,null==e){_.logger.warn("detached element"),n=t=null;break}if(r=e.getBoundingClientRect(),n=r.width,t=r.height,0!==t)break}return[n,t]},e.prototype._init_solver=function(){var t,e,r,n,o,i,s,a,u,c,_;for(this._root_width=new l.Variable("root_width"),this._root_height=new l.Variable("root_height"),this._solver.add_edit_variable(this._root_width),this._solver.add_edit_variable(this._root_height),n=this.model.get_edit_variables(),e=this.model.get_constraints(),_=this.model.get_constrained_variables(),o=0,s=n.length;o<s;o++)u=n[o],r=u.edit_variable,c=u.strength,this._solver.add_edit_variable(r,c);for(i=0,a=e.length;i<a;i++)t=e[i],this._solver.add_constraint(t);return null!=_.width&&this._solver.add_constraint(l.EQ(_.width,this._root_width)),null!=_.height&&this._solver.add_constraint(l.EQ(_.height,this._root_height)),this._solver.update_variables()},e.prototype._suggest_dims=function(t,e){var r,n;if(n=this.model.get_constrained_variables(),null!=n.width||null!=n.height)return null!==t&&null!==e||(r=this._calc_width_height(),t=r[0],e=r[1]),null!=n.width&&null!=t&&this._solver.suggest_value(this._root_width,t),null!=n.height&&null!=e&&this._solver.suggest_value(this._root_height,e),this._solver.update_variables()},e.prototype.resize=function(t,e){return null==t&&(t=null),null==e&&(e=null),this.is_root?this._do_layout(!1,t,e):this.root.resize(t,e)},e.prototype.layout=function(t){return null==t&&(t=!0),this.is_root?this._do_layout(t):this.root.layout(t)},e.prototype._do_layout=function(t,e,r){return null==e&&(e=null),null==r&&(r=null),t&&(this._solver.clear(),this._init_solver()),this._suggest_dims(e,r),this._layout(),this._layout(),this._layout(!0),this.notify_finished()},e.prototype._layout=function(t){var e,r,n,o,i;for(null==t&&(t=!1),i=this.model.get_layoutable_children(),n=0,o=i.length;n<o;n++)e=i[n],r=this.child_views[e.id],null!=r._layout&&r._layout(t);if(this.render(),t)return this._has_finished=!0},e.prototype.rebuild_child_views=function(){return this.solver.clear(),this.build_child_views(),this.layout()},e.prototype.build_child_views=function(){var t,e,r,n,o,i;for(r=this.model.get_layoutable_children(),u.build_views(this.child_views,r,{parent:this}),s.empty(this.el),i=[],n=0,o=r.length;n<o;n++)t=r[n],e=this.child_views[t.id],i.push(this.el.appendChild(e.el));return i},e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),this.is_root&&window.addEventListener("resize",function(t){return function(){return t.resize()}}(this)),this.connect(this.model.properties.sizing_mode.change,function(t){return function(){return t.layout()}}(this))},e.prototype._render_classes=function(){var t,e,r,n,o;if(this.el.className="",null!=this.className&&this.el.classList.add(this.className),null!=this.model.sizing_mode&&this.el.classList.add("bk-layout-"+this.model.sizing_mode),null!=this.model.css_classes){for(n=this.model.css_classes,o=[],e=0,r=n.length;e<r;e++)t=n[e],o.push(this.el.classList.add(t));return o}},e.prototype.render=function(){var t,e;switch(this._render_classes(),this.model.sizing_mode){case"fixed":return null!=this.model.width?e=this.model.width:(e=this.get_width(),this.model.setv({width:e},{silent:!0})),null!=this.model.height?t=this.model.height:(t=this.get_height(),this.model.setv({height:t},{silent:!0})),this.solver.suggest_value(this.model._width,e),this.solver.suggest_value(this.model._height,t),this.solver.update_variables(),this.el.style.position="relative",this.el.style.left="",this.el.style.top="",this.el.style.width=e+"px",this.el.style.height=t+"px";case"scale_width":return t=this.get_height(),this.solver.suggest_value(this.model._height,t),this.solver.update_variables(),this.el.style.position="relative",this.el.style.left="",this.el.style.top="",this.el.style.width=this.model._width.value+"px",this.el.style.height=this.model._height.value+"px";case"scale_height":return e=this.get_width(),this.solver.suggest_value(this.model._width,e),this.solver.update_variables(),this.el.style.position="relative",this.el.style.left="",this.el.style.top="",this.el.style.width=this.model._width.value+"px",this.el.style.height=this.model._height.value+"px";case"stretch_both":return this.el.style.position="absolute",this.el.style.left=this.model._dom_left.value+"px",this.el.style.top=this.model._dom_top.value+"px",this.el.style.width=this.model._width.value+"px",this.el.style.height=this.model._height.value+"px"}},e.prototype.get_height=function(){return null},e.prototype.get_width=function(){return null},e}(c.DOMView),r.LayoutDOM=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="LayoutDOM",e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this._width=new l.Variable("_width "+this.id),this._height=new l.Variable("_height "+this.id),this._left=new l.Variable("_left "+this.id),this._right=new l.Variable("_right "+this.id),this._top=new l.Variable("_top "+this.id),this._bottom=new l.Variable("_bottom "+this.id),this._dom_top=new l.Variable("_dom_top "+this.id),this._dom_left=new l.Variable("_dom_left "+this.id),this._width_minus_right=new l.Variable("_width_minus_right "+this.id),this._height_minus_bottom=new l.Variable("_height_minus_bottom "+this.id),this._whitespace_top=new l.Variable,this._whitespace_bottom=new l.Variable,this._whitespace_left=new l.Variable,this._whitespace_right=new l.Variable},e.getters({layout_bbox:function(){return{top:this._top.value,left:this._left.value,width:this._width.value,height:this._height.value,right:this._right.value,bottom:this._bottom.value,dom_top:this._dom_top.value,dom_left:this._dom_left.value}}}),e.prototype.dump_layout=function(){var t,e,r,n,o;for(console.log(this.toString(),this.layout_bbox),n=this.get_layoutable_children(),o=[],e=0,r=n.length;e<r;e++)t=n[e],o.push(t.dump_layout());return o},e.prototype.get_constraints=function(){return[l.GE(this._dom_left),l.GE(this._dom_top),l.GE(this._left),l.GE(this._width,[-1,this._right]),l.GE(this._top),l.GE(this._height,[-1,this._bottom]),l.EQ(this._width_minus_right,[-1,this._width],this._right),l.EQ(this._height_minus_bottom,[-1,this._height],this._bottom)]},e.prototype.get_layoutable_children=function(){return[]},e.prototype.get_edit_variables=function(){var t;return t=[],"fixed"===this.sizing_mode&&(t.push({edit_variable:this._height,strength:l.Strength.strong}),t.push({edit_variable:this._width,strength:l.Strength.strong})),"scale_width"===this.sizing_mode&&t.push({edit_variable:this._height,strength:l.Strength.strong}),"scale_height"===this.sizing_mode&&t.push({edit_variable:this._width,strength:l.Strength.strong}),t},e.prototype.get_constrained_variables=function(){var t;switch(t={origin_x:this._dom_left,origin_y:this._dom_top,whitespace_top:this._whitespace_top,whitespace_bottom:this._whitespace_bottom,whitespace_left:this._whitespace_left,whitespace_right:this._whitespace_right},this.sizing_mode){case"stretch_both":t.width=this._width,t.height=this._height;break;case"scale_width":t.width=this._width;break;case"scale_height":t.height=this._height}return t},e.define({height:[a.Number],width:[a.Number],disabled:[a.Bool,!1],sizing_mode:[a.SizingMode,"fixed"],css_classes:[a.Array]}),e}(i.Model)},{"../../model":"model","core/build_views":"core/build_views","core/dom":"core/dom","core/dom_view":"core/dom_view","core/layout/solver":"core/layout/solver","core/logging":"core/logging","core/properties":"core/properties"}],"models/layouts/row":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./box");r.RowView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.className="bk-grid-row",e}(i.BoxView),r.Row=function(t){function e(t,r){e.__super__.constructor.call(this,t,r),this._horizontal=!0}return n(e,t),e.prototype.type="Row",e.prototype.default_view=r.RowView,e}(i.Box)},{"./box":"models/layouts/box"}],"models/layouts/spacer":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./layout_dom"),s=t("core/util/object");r.SpacerView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.className="bk-spacer-box",e.prototype.render=function(){if(e.__super__.render.call(this),"fixed"===this.sizing_mode)return this.el.style.width=this.model.width+"px",this.el.style.height=this.model.height+"px"},e.prototype.get_height=function(){return 1},e}(i.LayoutDOMView),r.Spacer=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="Spacer",e.prototype.default_view=r.SpacerView,e.prototype.get_constrained_variables=function(){return s.extend({},e.__super__.get_constrained_variables.call(this),{on_edge_align_top:this._top,on_edge_align_bottom:this._height_minus_bottom,on_edge_align_left:this._left,on_edge_align_right:this._width_minus_right,box_cell_align_top:this._top,box_cell_align_bottom:this._height_minus_bottom,box_cell_align_left:this._left,box_cell_align_right:this._width_minus_right,box_equal_size_top:this._top,box_equal_size_bottom:this._height_minus_bottom,box_equal_size_left:this._left,box_equal_size_right:this._width_minus_right})},e}(i.LayoutDOM)},{"./layout_dom":"models/layouts/layout_dom","core/util/object":"core/util/object"}],"models/layouts/widget_box":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/logging"),s=t("core/properties"),a=t("core/util/object"),l=t("../layouts/layout_dom");r.WidgetBoxView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.className="bk-widget-box",e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),this.connect(this.model.properties.children.change,function(t){return function(){return t.rebuild_child_views()}}(this))},e.prototype.render=function(){var t,e,r;return this._render_classes(),"fixed"!==this.model.sizing_mode&&"scale_height"!==this.model.sizing_mode||(r=this.get_width(),this.model._width.value!==r&&this.solver.suggest_value(this.model._width,r)),"fixed"!==this.model.sizing_mode&&"scale_width"!==this.model.sizing_mode||(e=this.get_height(),this.model._height.value!==e&&this.solver.suggest_value(this.model._height,e)),this.solver.update_variables(),"stretch_both"===this.model.sizing_mode?(this.el.style.position="absolute",this.el.style.left=this.model._dom_left.value+"px",this.el.style.top=this.model._dom_top.value+"px",this.el.style.width=this.model._width.value+"px",this.el.style.height=this.model._height.value+"px"):(t=this.model._width.value-20>0?this.model._width.value-20+"px":"100%",this.el.style.width=t)},e.prototype.get_height=function(){var t,e,r,n;e=0,n=this.child_views;for(r in n)o.call(n,r)&&(t=n[r],e+=t.el.scrollHeight);return e+20},e.prototype.get_width=function(){var t,e,r,n,i;if(null!=this.model.width)return this.model.width;i=this.el.scrollWidth+20,n=this.child_views;for(r in n)o.call(n,r)&&(t=n[r],e=t.el.scrollWidth,e>i&&(i=e));return i},e}(l.LayoutDOMView),r.WidgetBox=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="WidgetBox",e.prototype.default_view=r.WidgetBoxView,e.prototype.initialize=function(t){if(e.__super__.initialize.call(this,t),"fixed"===this.sizing_mode&&null===this.width&&(this.width=300,i.logger.info("WidgetBox mode is fixed, but no width specified. Using default of 300.")),"scale_height"===this.sizing_mode)return i.logger.warn("sizing_mode `scale_height` is not experimental for WidgetBox. Please report your results to the bokeh dev team so we can improve.")},e.prototype.get_edit_variables=function(){var t,r,n,o,i;for(r=e.__super__.get_edit_variables.call(this),i=this.get_layoutable_children(),n=0,o=i.length;n<o;n++)t=i[n],r=r.concat(t.get_edit_variables());return r},e.prototype.get_constraints=function(){var t,r,n,o,i;for(r=e.__super__.get_constraints.call(this),i=this.get_layoutable_children(),n=0,o=i.length;n<o;n++)t=i[n],r=r.concat(t.get_constraints());return r},e.prototype.get_constrained_variables=function(){var t;return t=a.extend({},e.__super__.get_constrained_variables.call(this),{on_edge_align_top:this._top,on_edge_align_bottom:this._height_minus_bottom,on_edge_align_left:this._left,on_edge_align_right:this._width_minus_right,box_cell_align_top:this._top,box_cell_align_bottom:this._height_minus_bottom,box_cell_align_left:this._left,box_cell_align_right:this._width_minus_right,box_equal_size_top:this._top,box_equal_size_bottom:this._height_minus_bottom}),"fixed"!==this.sizing_mode&&(t.box_equal_size_left=this._left,t.box_equal_size_right=this._width_minus_right),t},e.prototype.get_layoutable_children=function(){return this.children},e.define({children:[s.Array,[]]}),e}(l.LayoutDOM)},{"../layouts/layout_dom":"models/layouts/layout_dom","core/logging":"core/logging","core/properties":"core/properties","core/util/object":"core/util/object"}],"models/mappers/categorical_color_mapper":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/properties"),s=t("./color_mapper");r.CategoricalColorMapper=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="CategoricalColorMapper",e.define({factors:[i.Array]}),e.prototype._get_values=function(t,e){var r,n,o,i,s,a;for(a=[],o=0,s=t.length;o<s;o++)n=t[o],i=this.factors.indexOf(n),r=i<0||i>=e.length?this.nan_color:e[i],
a.push(r);return a},e}(s.ColorMapper)},{"./color_mapper":"models/mappers/color_mapper","core/properties":"core/properties"}],"models/mappers/color_mapper":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/properties"),s=t("../transforms/transform"),a=t("core/util/types");r.ColorMapper=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="ColorMapper",e.define({palette:[i.Any],nan_color:[i.Color,"gray"]}),e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this._little_endian=this._is_little_endian(),this._palette=this._build_palette(this.palette),this.connect(this.change,function(){return this._palette=this._build_palette(this.palette)})},e.prototype.v_map_screen=function(t,e){var r,n,o,i,s,a,l,u,c;if(null==e&&(e=!1),c=this._get_values(t,this._palette,e),r=new ArrayBuffer(4*t.length),n=new Uint32Array(r),this._little_endian)for(o=i=0,a=t.length;0<=a?i<a:i>a;o=0<=a?++i:--i)u=c[o],n[o]=255<<24|(16711680&u)>>16|65280&u|(255&u)<<16;else for(o=s=0,l=t.length;0<=l?s<l:s>l;o=0<=l?++s:--s)u=c[o],n[o]=u<<8|255;return r},e.prototype.compute=function(t){return null},e.prototype.v_compute=function(t){var e;return e=this._get_values(t,this.palette)},e.prototype._get_values=function(t,e,r){return null==r&&(r=!1),[]},e.prototype._is_little_endian=function(){var t,e,r,n;return t=new ArrayBuffer(4),r=new Uint8Array(t),e=new Uint32Array(t),e[1]=168496141,n=!0,10===r[4]&&11===r[5]&&12===r[6]&&13===r[7]&&(n=!1),n},e.prototype._build_palette=function(t){var e,r,n,o,i;for(o=new Uint32Array(t.length),e=function(t){return a.isNumber(t)?t:parseInt(t.slice(1),16)},r=n=0,i=t.length;0<=i?n<i:n>i;r=0<=i?++n:--n)o[r]=e(t[r]);return o},e}(s.Transform)},{"../transforms/transform":"models/transforms/transform","core/properties":"core/properties","core/util/types":"core/util/types"}],"models/mappers/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./categorical_color_mapper");r.CategoricalColorMapper=n.CategoricalColorMapper;var o=t("./color_mapper");r.ColorMapper=o.ColorMapper;var i=t("./linear_color_mapper");r.LinearColorMapper=i.LinearColorMapper;var s=t("./log_color_mapper");r.LogColorMapper=s.LogColorMapper},{"./categorical_color_mapper":"models/mappers/categorical_color_mapper","./color_mapper":"models/mappers/color_mapper","./linear_color_mapper":"models/mappers/linear_color_mapper","./log_color_mapper":"models/mappers/log_color_mapper"}],"models/mappers/linear_color_mapper":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/properties"),s=t("core/util/color"),a=t("core/util/array"),l=t("./color_mapper");r.LinearColorMapper=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="LinearColorMapper",e.define({high:[i.Number],low:[i.Number],high_color:[i.Color],low_color:[i.Color]}),e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this._nan_color=this._build_palette([s.color2hex(this.nan_color)])[0],this._high_color=null!=this.high_color?this._build_palette([s.color2hex(this.high_color)])[0]:void 0,this._low_color=null!=this.low_color?this._build_palette([s.color2hex(this.low_color)])[0]:void 0},e.prototype._get_values=function(t,e,r){var n,o,i,s,l,u,c,_,p,h,d,f,m,y,g,v;for(null==r&&(r=!1),c=null!=(y=this.low)?y:a.min(t),o=null!=(g=this.high)?g:a.max(t),p=e.length-1,v=[],h=r?this._nan_color:this.nan_color,_=r?this._low_color:this.low_color,i=r?this._high_color:this.high_color,d=1/(o-c),m=1/e.length,s=0,u=t.length;s<u;s++)n=t[s],isNaN(n)?v.push(h):n!==o?(f=(n-c)*d,l=Math.floor(f/m),l<0?null!=this.low_color?v.push(_):v.push(e[0]):l>p?null!=this.high_color?v.push(i):v.push(e[p]):v.push(e[l])):v.push(e[p]);return v},e}(l.ColorMapper)},{"./color_mapper":"models/mappers/color_mapper","core/properties":"core/properties","core/util/array":"core/util/array","core/util/color":"core/util/color"}],"models/mappers/log_color_mapper":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty,a=t("core/properties"),l=t("core/util/color"),u=t("core/util/array"),c=t("./color_mapper");n=null!=(o=Math.log1p)?o:function(t){return Math.log(1+t)},r.LogColorMapper=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.type="LogColorMapper",e.define({high:[a.Number],low:[a.Number],high_color:[a.Color],low_color:[a.Color]}),e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this._nan_color=this._build_palette([l.color2hex(this.nan_color)])[0],this._high_color=null!=this.high_color?this._build_palette([l.color2hex(this.high_color)])[0]:void 0,this._low_color=null!=this.low_color?this._build_palette([l.color2hex(this.low_color)])[0]:void 0},e.prototype._get_values=function(t,e,r){var o,i,s,a,l,c,_,p,h,d,f,m,y,g,v,b;for(null==r&&(r=!1),f=e.length,p=null!=(y=this.low)?y:u.min(t),i=null!=(g=this.high)?g:u.max(t),v=f/(n(i)-n(p)),d=e.length-1,b=[],m=r?this._nan_color:this.nan_color,s=r?this._high_color:this.high_color,h=r?this._low_color:this.low_color,a=0,c=t.length;a<c;a++)o=t[a],isNaN(o)?b.push(m):o>i?null!=this.high_color?b.push(s):b.push(e[d]):o!==i?o<p?null!=this.low_color?b.push(h):b.push(e[0]):(_=n(o)-n(p),l=Math.floor(_*v),l>d&&(l=d),b.push(e[l])):b.push(e[d]);return b},e}(c.ColorMapper)},{"./color_mapper":"models/mappers/color_mapper","core/properties":"core/properties","core/util/array":"core/util/array","core/util/color":"core/util/color"}],"models/markers/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,i,s,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w=function(t,e){function r(){this.constructor=t}for(var n in e)x.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},x={}.hasOwnProperty,k=t("./marker");n=Math.sqrt(3),l=function(t,e){return t.moveTo(-e,e),t.lineTo(e,-e),t.moveTo(-e,-e),t.lineTo(e,e),{x:-e,y:-e,w:2*e,h:2*e}},i=function(t,e){return t.moveTo(0,e),t.lineTo(0,-e),t.moveTo(-e,0),t.lineTo(e,0),{x:-e,y:-e,w:2*e,h:2*e}},s=function(t,e){return t.moveTo(0,e),t.lineTo(e/1.5,0),t.lineTo(0,-e),t.lineTo(-e/1.5,0),t.closePath(),{x:-e/1.5,y:-e,w:2*e/1.5,h:2*e}},a=function(t,e){var r,o;return o=e*n,r=o/3,t.moveTo(-e,r),t.lineTo(e,r),t.lineTo(0,r-o),t.closePath(),{x:-e,y:r-o,w:2*e,h:r+o}},u=function(t,e,r,n,o,s,a){var u,c;return c=.65*o,u=i(t,o),l(t,c),s.doit&&(s.set_vectorize(t,e),t.stroke()),u},c=function(t,e,r,n,o,s,a){return t.arc(0,0,o,0,2*Math.PI,!1),a.doit&&(a.set_vectorize(t,e),t.fill()),s.doit&&(s.set_vectorize(t,e),i(t,o),t.stroke()),{x:-o,y:-o,w:2*o,h:2*o}},_=function(t,e,r,n,o,i,s){return t.arc(0,0,o,0,2*Math.PI,!1),s.doit&&(s.set_vectorize(t,e),t.fill()),i.doit&&(i.set_vectorize(t,e),l(t,o),t.stroke()),{x:-o,y:-o,w:2*o,h:2*o}},p=function(t,e,r,n,o,s,a){var l;return l=i(t,o),s.doit&&(s.set_vectorize(t,e),t.stroke()),l},h=function(t,e,r,n,o,i,a){var l;return l=s(t,o),a.doit&&(a.set_vectorize(t,e),t.fill()),i.doit&&(i.set_vectorize(t,e),t.stroke()),l},d=function(t,e,r,n,o,a,l){var u;return u=s(t,o),l.doit&&(l.set_vectorize(t,e),t.fill()),a.doit&&(a.set_vectorize(t,e),i(t,o),t.stroke()),u},f=function(t,e,r,n,o,i,s){var l;return t.rotate(Math.PI),l=a(t,o),t.rotate(-Math.PI),s.doit&&(s.set_vectorize(t,e),t.fill()),i.doit&&(i.set_vectorize(t,e),t.stroke()),l},m=function(t,e,r,n,o,i,s){var a;return a=2*o,t.rect(-o,-o,a,a),s.doit&&(s.set_vectorize(t,e),t.fill()),i.doit&&(i.set_vectorize(t,e),t.stroke()),{x:-o,y:-o,w:a,h:a}},y=function(t,e,r,n,o,s,a){var l;return l=2*o,t.rect(-o,-o,l,l),a.doit&&(a.set_vectorize(t,e),t.fill()),s.doit&&(s.set_vectorize(t,e),i(t,o),t.stroke()),{x:-o,y:-o,w:l,h:l}},g=function(t,e,r,n,o,i,s){var a;return a=2*o,t.rect(-o,-o,a,a),s.doit&&(s.set_vectorize(t,e),t.fill()),i.doit&&(i.set_vectorize(t,e),l(t,o),t.stroke()),{x:-o,y:-o,w:a,h:a}},v=function(t,e,r,n,o,i,s){var l;return l=a(t,o),s.doit&&(s.set_vectorize(t,e),t.fill()),i.doit&&(i.set_vectorize(t,e),t.stroke()),l},b=function(t,e,r,n,o,i,s){var a;return a=l(t,o),i.doit&&(i.set_vectorize(t,e),t.stroke()),a},o=function(t,e){var r,n;return n=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return w(r,t),r.prototype._render_one=e,r}(k.MarkerView),r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return w(r,e),r.prototype.default_view=n,r.prototype.type=t,r}(k.Marker)},r.Asterisk=o("Asterisk",u),r.CircleCross=o("CircleCross",c),r.CircleX=o("CircleX",_),r.Cross=o("Cross",p),r.Diamond=o("Diamond",h),r.DiamondCross=o("DiamondCross",d),r.InvertedTriangle=o("InvertedTriangle",f),r.Square=o("Square",m),r.SquareCross=o("SquareCross",y),r.SquareX=o("SquareX",g),r.Triangle=o("Triangle",v),r.X=o("X",b)},{"./marker":"models/markers/marker"}],"models/markers/marker":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("../glyphs/xy_glyph"),s=t("core/hittest"),a=t("core/properties");r.MarkerView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.draw_legend_for_index=function(t,e,r,n,o,i){var s,a,l,u,c,_;return l=[i],c={},c[i]=(e+r)/2,_={},_[i]=(n+o)/2,u={},u[i]=.4*Math.min(Math.abs(r-e),Math.abs(o-n)),s={},s[i]=this._angle[i],a={sx:c,sy:_,_size:u,_angle:s},this._render(t,l,a)},e.prototype._render=function(t,e,r){var n,o,i,s,a,l,u,c,_,p;for(_=r.sx,p=r.sy,o=r._size,n=r._angle,s=!1,this.data||(s=!0,this.data={name:this.model.name,model_id:this.model.id,data_fields:["markers"],markers:[]}),l=0,u=e.length;l<u;l++)a=e[l],isNaN(_[a]+p[a]+o[a]+n[a])||(c=o[a]/2,t.beginPath(),t.translate(_[a],p[a]),n[a]&&t.rotate(n[a]),s&&(i=this._render_one(t,a,_[a],p[a],c,this.visuals.line,this.visuals.fill),i.x=Math.round(i.x+_[a]),i.y=Math.round(i.y+p[a]),i.w=Math.round(i.w),i.h=Math.round(i.h),this.data.markers.push({bbox:i})),n[a]&&t.rotate(-n[a]),t.translate(-_[a],-p[a]));if(console.log("render marker"),console.log(this),s)return window.localStorage.setItem(this.data.name,JSON.stringify(this.data))},e.prototype._mask_data=function(t){var e,r,n,o,i,a,l,u,c,_,p,h,d;return r=this.renderer.plot_view.frame.h_range,a=r.start-this.max_size,l=r.end+this.max_size,n=this.renderer.xscale.v_invert([a,l],!0),_=n[0],p=n[1],i=this.renderer.plot_view.frame.v_range,u=i.start-this.max_size,c=i.end+this.max_size,o=this.renderer.yscale.v_invert([u,c],!0),h=o[0],d=o[1],e=s.validate_bbox_coords([_,p],[h,d]),this.index.indices(e)},e.prototype._hit_point=function(t){var e,r,n,o,i,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k,M;for(u=[t.vx,t.vy],f=u[0],g=u[1],h=this.renderer.plot_view.canvas.vx_to_sx(f),d=this.renderer.plot_view.canvas.vy_to_sy(g),m=f-this.max_size,y=f+this.max_size,c=this.renderer.xscale.v_invert([m,y],!0),w=c[0],x=c[1],v=g-this.max_size,b=g+this.max_size,_=this.renderer.yscale.v_invert([v,b],!0),k=_[0],M=_[1],e=s.validate_bbox_coords([w,x],[k,M]),r=this.index.indices(e),o=[],a=0,l=r.length;a<l;a++)i=r[a],p=this._size[i]/2,n=Math.abs(this.sx[i]-h)+Math.abs(this.sy[i]-d),Math.abs(this.sx[i]-h)<=p&&Math.abs(this.sy[i]-d)<=p&&o.push([i,n]);return s.create_1d_hit_test_result(o)},e.prototype._hit_span=function(t){var e,r,n,o,i,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k;return u=[t.vx,t.vy],d=u[0],y=u[1],c=this.bounds(),i=c.minX,a=c.minY,n=c.maxX,o=c.maxY,h=s.create_hit_test_result(),"h"===t.direction?(x=a,k=o,l=this.max_size/2,f=d-l,m=d+l,_=this.renderer.xscale.v_invert([f,m],!0),b=_[0],w=_[1]):(b=i,w=n,l=this.max_size/2,g=y-l,v=y+l,p=this.renderer.yscale.v_invert([g,v],!0),x=p[0],k=p[1]),e=s.validate_bbox_coords([b,w],[x,k]),r=this.index.indices(e),h["1d"].indices=r,h},e.prototype._hit_rect=function(t){var e,r,n,o,i,a,l,u;return r=this.renderer.xscale.v_invert([t.vx0,t.vx1],!0),i=r[0],a=r[1],n=this.renderer.yscale.v_invert([t.vy0,t.vy1],!0),l=n[0],u=n[1],e=s.validate_bbox_coords([i,a],[l,u]),o=s.create_hit_test_result(),o["1d"].indices=this.index.indices(e),o},e.prototype._hit_poly=function(t){var e,r,n,o,i,a,l,u,c,_,p,h,d;for(a=[t.vx,t.vy],h=a[0],d=a[1],_=this.renderer.plot_view.canvas.v_vx_to_sx(h),p=this.renderer.plot_view.canvas.v_vy_to_sy(d),e=function(){c=[];for(var t=0,e=this.sx.length;0<=e?t<e:t>e;0<=e?t++:t--)c.push(t);return c}.apply(this),r=[],n=i=0,l=e.length;0<=l?i<l:i>l;n=0<=l?++i:--i)o=e[n],s.point_in_poly(this.sx[n],this.sy[n],_,p)&&r.push(o);return u=s.create_hit_test_result(),u["1d"].indices=r,u},e}(i.XYGlyphView),r.Marker=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.mixins(["line","fill"]),e.define({size:[a.DistanceSpec,{units:"screen",value:4}],angle:[a.AngleSpec,0]}),e}(i.XYGlyph)},{"../glyphs/xy_glyph":"models/glyphs/xy_glyph","core/hittest":"core/hittest","core/properties":"core/properties"}],"models/plots/gmap_plot":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/logging"),s=t("./gmap_plot_canvas"),a=t("./plot"),l=t("core/properties"),u=t("../../model");r.MapOptions=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="MapOptions",e.define({lat:[l.Number],lng:[l.Number],zoom:[l.Number,12]}),e}(u.Model),r.GMapOptions=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="GMapOptions",e.define({map_type:[l.String,"roadmap"],scale_control:[l.Bool,!1],styles:[l.String]}),e}(r.MapOptions),r.GMapPlotView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e}(a.PlotView),r.GMapPlot=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="GMapPlot",e.prototype.default_view=r.GMapPlotView,e.prototype.initialize=function(t){if(e.__super__.initialize.call(this,t),!this.api_key)return i.logger.error("api_key is required. See https://developers.google.com/maps/documentation/javascript/get-api-key for more information on how to obtain your own.")},e.prototype._init_plot_canvas=function(){return new s.GMapPlotCanvas({plot:this})},e.define({map_options:[l.Instance],api_key:[l.String]}),e}(a.Plot)},{"../../model":"model","./gmap_plot_canvas":"models/plots/gmap_plot_canvas","./plot":"models/plots/plot","core/logging":"core/logging","core/properties":"core/properties"}],"models/plots/gmap_plot_canvas":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,i=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty,l=t("core/util/proj4"),u=t("./plot_canvas"),c=t("core/signaling");n=new c.Signal(this,"gmaps_ready"),o=function(t){var e;return window._bokeh_gmaps_callback=function(){return n.emit()},e=document.createElement("script"),e.type="text/javascript",e.src="https://maps.googleapis.com/maps/api/js?key="+t+"&callback=_bokeh_gmaps_callback",document.body.appendChild(e)},r.GMapPlotCanvasView=function(t){function e(){return this._set_bokeh_ranges=i(this._set_bokeh_ranges,this),this._get_projected_bounds=i(this._get_projected_bounds,this),this._get_latlon_bounds=i(this._get_latlon_bounds,this),e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.initialize=function(t){var r,i;return this.pause(),e.__super__.initialize.call(this,t),this._tiles_loaded=!1,this.zoom_count=0,r=this.model.plot.map_options,this.initial_zoom=r.zoom,this.initial_lat=r.lat,this.initial_lng=r.lng,this.canvas_view.map_el.style.position="absolute",null==(null!=(i=window.google)?i.maps:void 0)&&(null==window._bokeh_gmaps_callback&&o(this.model.plot.api_key),n.connect(function(t){return function(){return t.request_render()}}(this))),this.unpause()},e.prototype.update_range=function(t){var r,n,o,i,s,a,l,u,c;if(null==t)r=this.model.plot.map_options,this.map.setCenter({lat:this.initial_lat,lng:this.initial_lng}),this.map.setOptions({zoom:this.initial_zoom}),e.__super__.update_range.call(this,null);else if(null!=t.sdx||null!=t.sdy)this.map.panBy(t.sdx,t.sdy),e.__super__.update_range.call(this,t);else if(null!=t.factor){if(10!==this.zoom_count)return void(this.zoom_count+=1);this.zoom_count=0,this.pause(),e.__super__.update_range.call(this,t),c=t.factor<0?-1:1,o=this.map.getZoom(),n=o+c,n>=2&&(this.map.setZoom(n),u=this._get_projected_bounds(),s=u[0],i=u[1],l=u[2],a=u[3],i-s<0&&this.map.setZoom(o)),this.unpause()}return this._set_bokeh_ranges()},e.prototype._build_map=function(){var t,e,r;return e=window.google.maps,this.map_types={satellite:e.MapTypeId.SATELLITE,terrain:e.MapTypeId.TERRAIN,roadmap:e.MapTypeId.ROADMAP,hybrid:e.MapTypeId.HYBRID},r=this.model.plot.map_options,t={center:new e.LatLng(r.lat,r.lng),zoom:r.zoom,disableDefaultUI:!0,mapTypeId:this.map_types[r.map_type],scaleControl:r.scale_control},null!=r.styles&&(t.styles=JSON.parse(r.styles)),this.map=new e.Map(this.canvas_view.map_el,t),e.event.addListener(this.map,"idle",function(t){return function(){return t._set_bokeh_ranges()}}(this)),e.event.addListener(this.map,"bounds_changed",function(t){return function(){return t._set_bokeh_ranges()}}(this)),e.event.addListenerOnce(this.map,"tilesloaded",function(t){return function(){return t._render_finished()}}(this)),this.connect(this.model.plot.properties.map_options.change,function(t){return function(){return t._update_options()}}(this)),this.connect(this.model.plot.map_options.properties.styles.change,function(t){return function(){return t._update_styles()}}(this)),this.connect(this.model.plot.map_options.properties.lat.change,function(t){return function(){return t._update_center("lat")}}(this)),this.connect(this.model.plot.map_options.properties.lng.change,function(t){return function(){return t._update_center("lng")}}(this)),this.connect(this.model.plot.map_options.properties.zoom.change,function(t){return function(){return t._update_zoom()}}(this)),this.connect(this.model.plot.map_options.properties.map_type.change,function(t){return function(){return t._update_map_type()}}(this)),this.connect(this.model.plot.map_options.properties.scale_control.change,function(t){return function(){return t._update_scale_control()}}(this))},e.prototype._render_finished=function(){return this._tiles_loaded=!0,this.notify_finished()},e.prototype.has_finished=function(){return e.__super__.has_finished.call(this)&&this._tiles_loaded===!0},e.prototype._get_latlon_bounds=function(){var t,e,r,n,o,i,s;return e=this.map.getBounds(),r=e.getNorthEast(),t=e.getSouthWest(),o=t.lng(),n=r.lng(),s=t.lat(),i=r.lat(),[o,n,s,i]},e.prototype._get_projected_bounds=function(){var t,e,r,n,o,i,s,a,u,c,_;return o=this._get_latlon_bounds(),u=o[0],a=o[1],_=o[2],c=o[3],i=l.proj4(l.mercator,[u,_]),e=i[0],n=i[1],s=l.proj4(l.mercator,[a,c]),t=s[0],r=s[1],[e,t,n,r]},e.prototype._set_bokeh_ranges=function(){var t,e,r,n,o;return o=this._get_projected_bounds(),e=o[0],t=o[1],n=o[2],r=o[3],this.frame.x_range.setv({start:e,end:t}),this.frame.y_range.setv({start:n,end:r})},e.prototype._update_center=function(t){var e;return e=this.map.getCenter().toJSON(),e[t]=this.model.plot.map_options[t],this.map.setCenter(e),this._set_bokeh_ranges()},e.prototype._update_map_type=function(){var t;return t=window.google.maps,this.map.setOptions({mapTypeId:this.map_types[this.model.plot.map_options.map_type]})},e.prototype._update_scale_control=function(){var t;return t=window.google.maps,this.map.setOptions({scaleControl:this.model.plot.map_options.scale_control})},e.prototype._update_options=function(){return this._update_styles(),this._update_center("lat"),this._update_center("lng"),this._update_zoom(),this._update_map_type()},e.prototype._update_styles=function(){return this.map.setOptions({styles:JSON.parse(this.model.plot.map_options.styles)})},e.prototype._update_zoom=function(){return this.map.setOptions({zoom:this.model.plot.map_options.zoom}),this._set_bokeh_ranges()},e.prototype._map_hook=function(t,e){var r,n,o,i,s;if(n=e[0],i=e[1],s=e[2],r=e[3],this.canvas_view.map_el.style.top=i+"px",this.canvas_view.map_el.style.left=n+"px",this.canvas_view.map_el.style.width=s+"px",this.canvas_view.map_el.style.height=r+"px",null==this.map&&null!=(null!=(o=window.google)?o.maps:void 0))return this._build_map()},e.prototype._paint_empty=function(t,e){var r,n,o,i,s,a;return s=this.canvas._width.value,i=this.canvas._height.value,o=e[0],a=e[1],n=e[2],r=e[3],t.clearRect(0,0,s,i),t.beginPath(),t.moveTo(0,0),t.lineTo(0,i),t.lineTo(s,i),t.lineTo(s,0),t.lineTo(0,0),t.moveTo(o,a),t.lineTo(o+n,a),t.lineTo(o+n,a+r),t.lineTo(o,a+r),t.lineTo(o,a),t.closePath(),t.fillStyle=this.model.plot.border_fill_color,t.fill()},e}(u.PlotCanvasView),r.GMapPlotCanvas=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.type="GMapPlotCanvas",e.prototype.default_view=r.GMapPlotCanvasView,e.prototype.initialize=function(t,r){return this.use_map=!0,e.__super__.initialize.call(this,t,r)},e}(u.PlotCanvas)},{"./plot_canvas":"models/plots/plot_canvas","core/signaling":"core/signaling","core/util/proj4":"core/util/proj4"}],"models/plots/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./gmap_plot");r.MapOptions=n.MapOptions;var o=t("./gmap_plot");r.GMapOptions=o.GMapOptions;var i=t("./gmap_plot");r.GMapPlot=i.GMapPlot;var s=t("./gmap_plot_canvas");r.GMapPlotCanvas=s.GMapPlotCanvas;var a=t("./plot");r.Plot=a.Plot;var l=t("./plot_canvas");r.PlotCanvas=l.PlotCanvas},{"./gmap_plot":"models/plots/gmap_plot","./gmap_plot_canvas":"models/plots/gmap_plot_canvas","./plot":"models/plots/plot","./plot_canvas":"models/plots/plot_canvas"}],"models/plots/plot":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=[].slice,s=t("core/layout/solver"),a=t("core/logging"),l=t("core/properties"),u=t("core/util/object"),c=t("core/util/types"),_=t("../layouts/layout_dom"),p=t("../annotations/title"),h=t("../scales/linear_scale"),d=t("../tools/toolbar"),f=t("../tools/tool_events"),m=t("./plot_canvas"),y=t("../sources/column_data_source"),g=t("../renderers/glyph_renderer"),v=t("core/bokeh_events");r.PlotView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.className="bk-plot-layout",e.prototype.connect_signals=function(){var t;return e.__super__.connect_signals.call(this),t="Title object cannot be replaced. Try changing properties on title to update it after initialization.",this.connect(this.model.properties.title.change,function(e){return function(){return a.logger.warn(t)}}(this))},e.prototype.render=function(){var t,r,n;if(e.__super__.render.call(this),"scale_both"===this.model.sizing_mode)return r=this.get_width_height(),n=r[0],t=r[1],this.solver.suggest_value(this.model._width,n),this.solver.suggest_value(this.model._height,t),this.solver.update_variables(),this.el.style.position="absolute",this.el.style.left=this.model._dom_left.value+"px",this.el.style.top=this.model._dom_top.value+"px",this.el.style.width=this.model._width.value+"px",this.el.style.height=this.model._height.value+"px"},e.prototype.get_width_height=function(){var t,e,r,n,o,i,s,a,l;return s=this.el.parentNode.clientHeight,a=this.el.parentNode.clientWidth,t=this.model.get_aspect_ratio(),o=a,r=a/t,i=s*t,n=s,o<i?(l=o,e=r):(l=i,e=n),[l,e]},e.prototype.get_height=function(){return this.model._width.value/this.model.get_aspect_ratio()},e.prototype.get_width=function(){return this.model._height.value*this.model.get_aspect_ratio()},e.prototype.save=function(t){return this.plot_canvas_view.save(t)},e.getters({plot_canvas_view:function(){var t;return function(){var e,r,n,o;for(n=u.values(this.child_views),o=[],e=0,r=n.length;e<r;e++)t=n[e],t instanceof m.PlotCanvasView&&o.push(t);return o}.call(this)[0]}}),e}(_.LayoutDOMView),r.Plot=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="Plot",e.prototype.default_view=r.PlotView,e.prototype.initialize=function(t){var r,n,o,i,s,a,l,_,h,d,f,m,y,g,v,b,w,x,k,M;for(e.__super__.initialize.call(this,t),m=u.values(this.extra_x_ranges).concat(this.x_range),n=0,l=m.length;n<l;n++)k=m[n],f=k.plots,c.isArray(f)&&(f=f.concat(this),k.setv("plots",f,{silent:!0}));for(y=u.values(this.extra_y_ranges).concat(this.y_range),o=0,_=y.length;o<_;o++)M=y[o],f=M.plots,c.isArray(f)&&(f=f.concat(this),M.setv("plots",f,{silent:!0}));for(this._horizontal="left"===(g=this.toolbar_location)||"right"===g,null!=this.min_border&&(null==this.min_border_top&&(this.min_border_top=this.min_border),null==this.min_border_bottom&&(this.min_border_bottom=this.min_border),null==this.min_border_left&&(this.min_border_left=this.min_border),null==this.min_border_right&&(this.min_border_right=this.min_border)),null!=this.title&&(x=c.isString(this.title)?new p.Title({text:this.title}):this.title,this.add_layout(x,this.title_location)),this._plot_canvas=this._init_plot_canvas(),this.toolbar.toolbar_location=this.toolbar_location,this.toolbar.toolbar_sticky=this.toolbar_sticky,this.plot_canvas.toolbar=this.toolbar,null==this.width&&(this.width=this.plot_width),null==this.height&&(this.height=this.plot_height),v=["above","below","left","right"],i=0,h=v.length;i<h;i++)for(w=v[i],a=this.getv(w),s=0,d=a.length;s<d;s++)b=a[s],b.add_panel(w);return r=function(t){return function(e){return e._sizeable=t._horizontal?e._width:e._height}}(this),r(this),r(this.plot_canvas)},e.prototype._init_plot_canvas=function(){return new m.PlotCanvas({plot:this})},e.getters({plot_canvas:function(){return this._plot_canvas}}),e.prototype._doc_attached=function(){return this.plot_canvas.attach_document(this.document),e.__super__._doc_attached.call(this)},e.prototype.add_renderers=function(){var t,e;return t=1<=arguments.length?i.call(arguments,0):[],e=this.renderers,e=e.concat(t),this.renderers=e},e.prototype.add_layout=function(t,e){var r;return null==e&&(e="center"),null!=t.props.plot&&(t.plot=this),"center"!==e&&(r=this.getv(e),r.push(t),t.add_panel(e)),this.add_renderers(t)},e.prototype.add_glyph=function(t,e,r){var n;return null==r&&(r={}),null==e&&(e=new y.ColumnDataSource),r=u.extend({},r,{data_source:e,glyph:t}),n=new g.GlyphRenderer(r),this.add_renderers(n),n},e.prototype.add_tools=function(){var t,e,r,n;return n=1<=arguments.length?i.call(arguments,0):[],e=function(){var e,o,i;for(i=[],e=0,o=n.length;e<o;e++)r=n[e],null!=r.overlay&&this.add_renderers(r.overlay),null!=r.plot?i.push(r):(t=u.clone(r.attributes),t.plot=this,i.push(new r.constructor(t)));return i}.call(this),this.toolbar.tools=this.toolbar.tools.concat(e)},e.prototype.get_aspect_ratio=function(){return this.width/this.height},e.prototype.get_layoutable_children=function(){var t;return t=[this.plot_canvas],null!=this.toolbar_location&&(t=[this.toolbar,this.plot_canvas]),t},e.prototype.get_edit_variables=function(){var t,r,n,o,i;for(r=e.__super__.get_edit_variables.call(this),"scale_both"===this.sizing_mode&&(r.push({edit_variable:this._width,strength:s.Strength.strong}),r.push({edit_variable:this._height,strength:s.Strength.strong})),i=this.get_layoutable_children(),n=0,o=i.length;n<o;n++)t=i[n],r=r.concat(t.get_edit_variables());return r},e.prototype.get_constraints=function(){var t,r,n,o,i,a,l,u;for(r=e.__super__.get_constraints.call(this),null!=this.toolbar_location&&(this.toolbar_sticky===!0?r.push(s.EQ(this._sizeable,[-1,this.plot_canvas._sizeable])):r.push(s.EQ(this._sizeable,[-1,this.plot_canvas._sizeable],[-1,this.toolbar._sizeable])),this._horizontal?r.push(s.EQ(this._height,[-1,this.plot_canvas._height])):r.push(s.EQ(this._width,[-1,this.plot_canvas._width])),"above"===this.toolbar_location&&(u=this.toolbar_sticky===!0?this.plot_canvas._top:this.plot_canvas._dom_top,r.push(s.EQ(u,[-1,this.toolbar._dom_top],[-1,this.toolbar._height]))),"below"===this.toolbar_location&&(this.toolbar_sticky===!1&&r.push(s.EQ(this.toolbar._dom_top,[-1,this.plot_canvas._height],this.toolbar._bottom,[-1,this.toolbar._height])),this.toolbar_sticky===!0&&(r.push(s.GE(this.plot_canvas.below_panel._height,[-1,this.toolbar._height])),r.push(s.WEAK_EQ(this.toolbar._dom_top,[-1,this.plot_canvas._height],this.plot_canvas.below_panel._height)))),"left"===this.toolbar_location&&(u=this.toolbar_sticky===!0?this.plot_canvas._left:this.plot_canvas._dom_left,r.push(s.EQ(u,[-1,this.toolbar._dom_left],[-1,this.toolbar._width]))),"right"===this.toolbar_location&&(this.toolbar_sticky===!1&&r.push(s.EQ(this.toolbar._dom_left,[-1,this.plot_canvas._width],this.toolbar._right,[-1,this.toolbar._width])),this.toolbar_sticky===!0&&(r.push(s.GE(this.plot_canvas.right_panel._width,[-1,this.toolbar._width])),r.push(s.WEAK_EQ(this.toolbar._dom_left,[-1,this.plot_canvas._width],this.plot_canvas.right_panel._width)))),"above"!==(i=this.toolbar_location)&&"below"!==i||r.push(s.EQ(this._width,[-1,this.toolbar._width],[-1,this.plot_canvas._width_minus_right])),"left"!==(a=this.toolbar_location)&&"right"!==a||(r.push(s.EQ(this._height,[-1,this.toolbar._height],[-1,this.plot_canvas.above_panel._height])),r.push(s.EQ(this.toolbar._dom_top,[-1,this.plot_canvas.above_panel._height])))),null==this.toolbar_location&&(r.push(s.EQ(this._width,[-1,this.plot_canvas._width])),r.push(s.EQ(this._height,[-1,this.plot_canvas._height]))),l=this.get_layoutable_children(),n=0,o=l.length;n<o;n++)t=l[n],r=r.concat(t.get_constraints());return r},e.prototype.get_constrained_variables=function(){var t;return t=u.extend({},e.__super__.get_constrained_variables.call(this),{on_edge_align_top:this.plot_canvas._top,on_edge_align_bottom:this.plot_canvas._height_minus_bottom,on_edge_align_left:this.plot_canvas._left,on_edge_align_right:this.plot_canvas._width_minus_right,box_cell_align_top:this.plot_canvas._top,box_cell_align_bottom:this.plot_canvas._height_minus_bottom,box_cell_align_left:this.plot_canvas._left,box_cell_align_right:this.plot_canvas._width_minus_right,box_equal_size_top:this.plot_canvas._top,box_equal_size_bottom:this.plot_canvas._height_minus_bottom}),"fixed"!==this.sizing_mode&&(t.box_equal_size_left=this.plot_canvas._left,t.box_equal_size_right=this.plot_canvas._width_minus_right),t},e.mixins(["line:outline_","fill:background_","fill:border_"]),e.define({toolbar:[l.Instance,function(){return new d.Toolbar}],toolbar_location:[l.Location,"right"],toolbar_sticky:[l.Bool,!0],plot_width:[l.Number,600],plot_height:[l.Number,600],title:[l.Any,function(){return new p.Title({text:""})}],title_location:[l.Location,"above"],h_symmetry:[l.Bool,!0],v_symmetry:[l.Bool,!1],above:[l.Array,[]],below:[l.Array,[]],left:[l.Array,[]],right:[l.Array,[]],renderers:[l.Array,[]],x_range:[l.Instance],extra_x_ranges:[l.Any,{}],y_range:[l.Instance],extra_y_ranges:[l.Any,{}],x_scale:[l.Instance,function(){return new h.LinearScale}],y_scale:[l.Instance,function(){return new h.LinearScale;
}],tool_events:[l.Instance,function(){return new f.ToolEvents}],lod_factor:[l.Number,10],lod_interval:[l.Number,300],lod_threshold:[l.Number,2e3],lod_timeout:[l.Number,500],hidpi:[l.Bool,!0],output_backend:[l.OutputBackend,"canvas"],min_border:[l.Number,5],min_border_top:[l.Number,null],min_border_left:[l.Number,null],min_border_bottom:[l.Number,null],min_border_right:[l.Number,null],inner_width:[l.Number],inner_height:[l.Number],layout_width:[l.Number],layout_height:[l.Number]}),e.override({outline_line_color:"#e5e5e5",border_fill_color:"#ffffff",background_fill_color:"#ffffff"}),e.getters({all_renderers:function(){var t,e,r,n,o;for(n=this.renderers,r=this.toolbar.tools,t=0,e=r.length;t<e;t++)o=r[t],n=n.concat(o.synthetic_renderers);return n},x_mapper_type:function(){return log.warning("x_mapper_type attr is deprecated, use x_scale"),this.x_scale},y_mapper_type:function(){return log.warning("y_mapper_type attr is deprecated, use y_scale"),this.y_scale},webgl:function(){return log.warning("webgl attr is deprecated, use output_backend"),"webgl"===this.output_backend}}),e}(_.LayoutDOM),v.register_with_event(v.UIEvent,r.Plot)},{"../annotations/title":"models/annotations/title","../layouts/layout_dom":"models/layouts/layout_dom","../renderers/glyph_renderer":"models/renderers/glyph_renderer","../scales/linear_scale":"models/scales/linear_scale","../sources/column_data_source":"models/sources/column_data_source","../tools/tool_events":"models/tools/tool_events","../tools/toolbar":"models/tools/toolbar","./plot_canvas":"models/plots/plot_canvas","core/bokeh_events":"core/bokeh_events","core/layout/solver":"core/layout/solver","core/logging":"core/logging","core/properties":"core/properties","core/util/object":"core/util/object","core/util/types":"core/util/types"}],"models/plots/plot_canvas":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},a=t("../canvas/canvas"),l=t("../canvas/cartesian_frame"),u=t("../ranges/data_range1d"),c=t("../renderers/glyph_renderer"),_=t("../layouts/layout_dom"),p=t("core/signaling"),h=t("core/build_views"),d=t("core/ui_events"),f=t("core/bokeh_events"),m=t("core/layout/layout_canvas"),y=t("core/visuals"),g=t("core/dom_view"),v=t("core/layout/solver"),b=t("core/logging"),w=t("core/enums"),x=t("core/properties"),k=t("core/util/throttle"),M=t("core/util/types"),j=t("core/util/array"),S=t("core/util/object"),T=t("core/layout/side_panel");n=null,r.PlotCanvasView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.className="bk-plot-wrapper",e.prototype.state={history:[],index:-1},e.prototype.view_options=function(){return S.extend({plot_view:this,parent:this},this.options)},e.prototype.pause=function(){return null==this._is_paused?this._is_paused=1:this._is_paused+=1},e.prototype.unpause=function(t){if(null==t&&(t=!1),this._is_paused-=1,0===this._is_paused&&!t)return this.request_render()},e.prototype.request_render=function(){return this.request_paint()},e.prototype.request_paint=function(){this.is_paused||this.throttled_paint()},e.prototype.remove=function(){return h.remove_views(this.renderer_views),h.remove_views(this.tool_views),this.canvas_view.remove(),this.canvas_view=null,e.__super__.remove.call(this)},e.prototype.initialize=function(t){var r,n,o,i;for(this.pause(),e.__super__.initialize.call(this,t),this.force_paint=new p.Signal(this,"force_paint"),this.state_changed=new p.Signal(this,"state_changed"),this.lod_started=!1,this.visuals=new y.Visuals(this.model.plot),this._initial_state_info={range:null,selection:{},dimensions:{width:this.model.canvas._width.value,height:this.model.canvas._height.value}},this.frame=this.model.frame,this.canvas=this.model.canvas,this.canvas_view=new this.canvas.default_view({model:this.canvas,parent:this}),this.el.appendChild(this.canvas_view.el),this.canvas_view.render(),"webgl"===this.model.plot.output_backend&&this.init_webgl(),this.throttled_paint=k.throttle(function(t){return function(){return t.force_paint.emit()}}(this),15),this.ui_event_bus=new d.UIEvents(this,this.model.toolbar,this.canvas_view.el,this.model.plot),this.levels={},i=w.RenderLevel,r=0,n=i.length;r<n;r++)o=i[r],this.levels[o]={};return this.renderer_views={},this.tool_views={},this.build_levels(),this.build_tools(),this.connect_signals(),this.update_dataranges(),this.unpause(!0),b.logger.debug("PlotView initialized"),this},e.prototype.set_cursor=function(t){return null==t&&(t="default"),this.canvas_view.el.style.cursor=t},e.getters({canvas_overlays:function(){return this.canvas_view.overlays_el},is_paused:function(){return null!=this._is_paused&&0!==this._is_paused}}),e.prototype.init_webgl=function(){var t,e,r;return t=this.canvas_view.ctx,e=n,null==e&&(n=e=document.createElement("canvas"),r={premultipliedAlpha:!0},e.gl=e.getContext("webgl",r)||e.getContext("experimental-webgl",r)),null!=e.gl?t.glcanvas=e:b.logger.warn("WebGL is not supported, falling back to 2D canvas.")},e.prototype.prepare_webgl=function(t,e){var r,n,o,i;if(n=this.canvas_view.ctx,r=this.canvas_view.get_canvas_element(),n.glcanvas)return n.glcanvas.width=r.width,n.glcanvas.height=r.height,i=n.glcanvas.gl,i.viewport(0,0,n.glcanvas.width,n.glcanvas.height),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT||i.DEPTH_BUFFER_BIT),i.enable(i.SCISSOR_TEST),o=n.glcanvas.height-t*(e[1]+e[3]),i.scissor(t*e[0],o,t*e[2],t*e[3]),i.enable(i.BLEND),i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE_MINUS_DST_ALPHA,i.ONE)},e.prototype.blit_webgl=function(t){var e;if(e=this.canvas_view.ctx,e.glcanvas)return b.logger.debug("drawing with WebGL"),e.restore(),e.drawImage(e.glcanvas,0,0),e.save(),e.scale(t,t),e.translate(.5,.5)},e.prototype.update_dataranges=function(){var t,e,r,n,o,i,s,a,l,c,_,p,h,d,f,m,y,g,v,w,x,k,M,j,T,O,P,A,E,z,C,N;for(i=this.model.frame,e={},y={},n=!1,k=S.values(i.x_ranges).concat(S.values(i.y_ranges)),a=0,_=k.length;a<_;a++)x=k[a],x instanceof u.DataRange1d&&"log"===x.scale_hint&&(n=!0);M=this.renderer_views;for(l in M)z=M[l],t=null!=(j=z.glyph)&&"function"==typeof j.bounds?j.bounds():void 0,null!=t&&(e[l]=t),n&&(m=null!=(T=z.glyph)&&"function"==typeof T.log_bounds?T.log_bounds():void 0,null!=m&&(y[l]=m));for(o=!1,s=!1,O=S.values(i.x_ranges),c=0,p=O.length;c<p;c++)C=O[c],C instanceof u.DataRange1d&&(r="log"===C.scale_hint?y:e,C.update(r,0,this.model.id),C.follow&&(o=!0)),null!=C.bounds&&(s=!0);for(P=S.values(i.y_ranges),g=0,h=P.length;g<h;g++)N=P[g],N instanceof u.DataRange1d&&(r="log"===N.scale_hint?y:e,N.update(r,1,this.model.id),N.follow&&(o=!0)),null!=N.bounds&&(s=!0);if(o&&s){for(b.logger.warn("Follow enabled so bounds are unset."),A=S.values(i.x_ranges),v=0,d=A.length;v<d;v++)C=A[v],C.bounds=null;for(E=S.values(i.y_ranges),w=0,f=E.length;w<f;w++)N=E[w],N.bounds=null}return this.range_update_timestamp=Date.now()},e.prototype.map_to_screen=function(t,e,r,n){return null==r&&(r="default"),null==n&&(n="default"),this.frame.map_to_screen(t,e,this.canvas,r,n)},e.prototype.push_state=function(t,e){var r,n;return r=(null!=(n=this.state.history[this.state.index])?n.info:void 0)||{},e=S.extend({},this._initial_state_info,r,e),this.state.history.slice(0,this.state.index+1),this.state.history.push({type:t,info:e}),this.state.index=this.state.history.length-1,this.state_changed.emit()},e.prototype.clear_state=function(){return this.state={history:[],index:-1},this.state_changed.emit()},e.prototype.can_undo=function(){return this.state.index>=0},e.prototype.can_redo=function(){return this.state.index<this.state.history.length-1},e.prototype.undo=function(){if(this.can_undo())return this.state.index-=1,this._do_state_change(this.state.index),this.state_changed.emit()},e.prototype.redo=function(){if(this.can_redo())return this.state.index+=1,this._do_state_change(this.state.index),this.state_changed.emit()},e.prototype._do_state_change=function(t){var e,r;if(e=(null!=(r=this.state.history[t])?r.info:void 0)||this._initial_state_info,null!=e.range&&this.update_range(e.range),null!=e.selection&&this.update_selection(e.selection),null!=e.dimensions)return this.canvas_view.set_dims([e.dimensions.width,e.dimensions.height])},e.prototype.reset_dimensions=function(){return this.update_dimensions(this.canvas.initial_width,this.canvas.initial_height)},e.prototype.update_dimensions=function(t,e){return this.pause(),this.model.plot.width=t,this.model.plot.height=e,this.parent.layout(),this.unpause()},e.prototype.get_selection=function(){var t,e,r,n,o,i;for(i=[],r=this.model.plot.renderers,t=0,e=r.length;t<e;t++)n=r[t],n instanceof c.GlyphRenderer&&(o=n.data_source.selected,i[n.id]=o);return i},e.prototype.update_selection=function(t){var e,r,n,o,i,a,l;for(o=this.model.plot.renderers,l=[],r=0,n=o.length;r<n;r++)a=o[r],a instanceof c.GlyphRenderer&&(e=a.data_source,null!=t?(i=a.id,s.call(t,i)>=0?l.push(e.selected=t[a.id]):l.push(void 0)):l.push(e.selection_manager.clear()));return l},e.prototype.reset_selection=function(){return this.update_selection(null)},e.prototype._update_ranges_together=function(t){var e,r,n,o,i,s,a,l,u,c;for(c=1,e=0,n=t.length;e<n;e++)s=t[e],u=s[0],i=s[1],c=Math.min(c,this._get_weight_to_constrain_interval(u,i));if(c<1){for(l=[],r=0,o=t.length;r<o;r++)a=t[r],u=a[0],i=a[1],i.start=c*i.start+(1-c)*u.start,l.push(i.end=c*i.end+(1-c)*u.end);return l}},e.prototype._update_ranges_individually=function(t,e,r){var n,o,i,s,a,l,u,c,_,p,h,d,f,m,y;for(n=!1,o=0,s=t.length;o<s;o++)p=t[o],m=p[0],_=p[1],f=m.start>m.end,r||(y=this._get_weight_to_constrain_interval(m,_),y<1&&(_.start=y*_.start+(1-y)*m.start,_.end=y*_.end+(1-y)*m.end)),null!=m.bounds&&(u=m.bounds[0],l=m.bounds[1],c=Math.abs(_.end-_.start),f?(null!=u&&u>=_.end&&(n=!0,_.end=u,null==e&&null==r||(_.start=u+c)),null!=l&&l<=_.start&&(n=!0,_.start=l,null==e&&null==r||(_.end=l-c))):(null!=u&&u>=_.start&&(n=!0,_.start=u,null==e&&null==r||(_.end=u+c)),null!=l&&l<=_.end&&(n=!0,_.end=l,null==e&&null==r||(_.start=l-c))));if(!r||!n){for(d=[],i=0,a=t.length;i<a;i++)h=t[i],m=h[0],_=h[1],m.have_updated_interactively=!0,m.start!==_.start||m.end!==_.end?d.push(m.setv(_)):d.push(void 0);return d}},e.prototype._get_weight_to_constrain_interval=function(t,e){var r,n,o,i,s,a,l,u,c;return s=t.min_interval,n=t.max_interval,c=1,null!=t.bounds&&(u=t.bounds,i=u[0],r=u[1],null!=i&&null!=r&&(o=Math.abs(r-i),n=null!=n?Math.min(n,o):o)),null==s&&null==n||(l=Math.abs(t.end-t.start),a=Math.abs(e.end-e.start),s>0&&a<s&&(c=(l-s)/(l-a)),n>0&&a>n&&(c=(n-l)/(a-l)),c=Math.max(0,Math.min(1,c))),c},e.prototype.update_range=function(t,e,r){var n,o,i,s,a,l,u;if(this.pause(),null==t){i=this.frame.x_ranges;for(n in i)u=i[n],u.reset();s=this.frame.y_ranges;for(n in s)u=s[n],u.reset();this.update_dataranges()}else{o=[],a=this.frame.x_ranges;for(n in a)u=a[n],o.push([u,t.xrs[n]]);l=this.frame.y_ranges;for(n in l)u=l[n],o.push([u,t.yrs[n]]);r&&this._update_ranges_together(o),this._update_ranges_individually(o,e,r)}return this.unpause()},e.prototype.reset_range=function(){return this.update_range(null)},e.prototype.build_levels=function(){var t,e,r,n,o,i,s,a,l,u,c;for(l=this.model.plot.all_renderers,a=Object.keys(this.renderer_views),s=h.build_views(this.renderer_views,l,this.view_options()),u=j.difference(a,function(){var t,e,r;for(r=[],t=0,e=l.length;t<e;t++)i=l[t],r.push(i.id);return r}()),e=0,n=u.length;e<n;e++)t=u[e],delete this.levels.glyph[t];for(r=0,o=s.length;r<o;r++)c=s[r],this.levels[c.model.level][c.model.id]=c,c.connect_signals();return this},e.prototype.get_renderer_views=function(){var t,e,r,n,o;for(n=this.model.plot.renderers,o=[],t=0,e=n.length;t<e;t++)r=n[t],o.push(this.levels[r.level][r.id]);return o},e.prototype.build_tools=function(){var t,e,r,n,o,i;for(o=this.model.plot.toolbar.tools,r=h.build_views(this.tool_views,o,this.view_options()),n=[],t=0,e=r.length;t<e;t++)i=r[t],i.connect_signals(),n.push(this.ui_event_bus.register_tool(i));return n},e.prototype.connect_signals=function(){var t,r,n,o;e.__super__.connect_signals.call(this),this.connect(this.force_paint,function(t){return function(){return t.paint()}}(this)),r=this.model.frame.x_ranges;for(t in r)o=r[t],this.connect(o.change,function(){return this.request_render()});n=this.model.frame.y_ranges;for(t in n)o=n[t],this.connect(o.change,function(){return this.request_render()});return this.connect(this.model.plot.properties.renderers.change,function(t){return function(){return t.build_levels()}}(this)),this.connect(this.model.plot.toolbar.properties.tools.change,function(t){return function(){return t.build_levels(),t.build_tools()}}(this)),this.connect(this.model.plot.change,function(){return this.request_render()})},e.prototype.set_initial_range=function(){var t,e,r,n,o,i,s;t=!0,i={},r=this.frame.x_ranges;for(e in r){if(o=r[e],null==o.start||null==o.end||M.isStrictNaN(o.start+o.end)){t=!1;break}i[e]={start:o.start,end:o.end}}if(t){s={},n=this.frame.y_ranges;for(e in n){if(o=n[e],null==o.start||null==o.end||M.isStrictNaN(o.start+o.end)){t=!1;break}s[e]={start:o.start,end:o.end}}}return t?(this._initial_state_info.range=this.initial_range_info={xrs:i,yrs:s},b.logger.debug("initial ranges set")):b.logger.warn("could not set initial ranges")},e.prototype.update_constraints=function(){var t,e,r;this.solver.suggest_value(this.frame._width,this.canvas._width.value-1),this.solver.suggest_value(this.frame._height,this.canvas._height.value-1),e=this.renderer_views;for(t in e)r=e[t],null!=r.model.panel&&T.update_panel_constraints(r);return this.solver.update_variables()},e.prototype._layout=function(t){if(null==t&&(t=!1),this.render(),t)return this.model.plot.setv({inner_width:Math.round(this.frame._width.value),inner_height:Math.round(this.frame._height.value),layout_width:Math.round(this.canvas._width.value),layout_height:Math.round(this.canvas._height.value)},{no_change:!0}),this.request_paint()},e.prototype.has_finished=function(){var t,r,n,o;if(!e.__super__.has_finished.call(this))return!1;r=this.levels;for(t in r){n=r[t];for(t in n)if(o=n[t],!o.has_finished())return!1}return!0},e.prototype.render=function(){var t,e;return e=this.model._width.value,t=this.model._height.value,this.canvas_view.set_dims([e,t]),this.update_constraints(),this.el.style.position="absolute",this.el.style.left=this.model._dom_left.value+"px",this.el.style.top=this.model._dom_top.value+"px",this.el.style.width=this.model._width.value+"px",this.el.style.height=this.model._height.value+"px"},e.prototype.paint=function(){var t,e,r,n,o,i,s;if(!this.is_paused){b.logger.trace("PlotCanvas.render() for "+this.model.id),this.canvas_view.prepare_canvas(),Date.now()-this.interactive_timestamp<this.model.plot.lod_interval?(this.lod_started||(this.model.plot.trigger_event(new f.LODStart({})),this.lod_started=!0),this.interactive=!0,n=this.model.plot.lod_timeout,setTimeout(function(t){return function(){return t.interactive&&Date.now()-t.interactive_timestamp>n&&(t.interactive=!1),t.request_render()}}(this),n)):(this.interactive=!1,this.lod_started&&(this.model.plot.trigger_event(new f.LODEnd({})),this.lod_started=!1)),i=this.renderer_views;for(r in i)if(s=i[r],null==this.range_update_timestamp||s.set_data_timestamp>this.range_update_timestamp){this.update_dataranges();break}return this.model.frame._update_scales(),t=this.canvas_view.ctx,t.pixel_ratio=o=this.canvas.pixel_ratio,t.save(),t.scale(o,o),t.translate(.5,.5),e=[this.canvas.vx_to_sx(this.frame._left.value),this.canvas.vy_to_sy(this.frame._top.value),this.frame._width.value,this.frame._height.value],this._map_hook(t,e),this._paint_empty(t,e),this.prepare_webgl(o,e),t.save(),this.visuals.outline_line.doit&&(this.visuals.outline_line.set_value(t),t.strokeRect.apply(t,e)),t.restore(),this._paint_levels(t,["image","underlay","glyph"],e),this.blit_webgl(o),this._paint_levels(t,["annotation"],e),this._paint_levels(t,["overlay"]),null==this.initial_range_info&&this.set_initial_range(),t.restore(),this._has_finished?void 0:(this._has_finished=!0,this.notify_finished())}},e.prototype._paint_levels=function(t,e,r){var n,o,i,s,a,l,u,c,_,p,h,d,f,m;for(t.save(),null!=r&&"canvas"===this.model.plot.output_backend&&(t.beginPath(),t.rect.apply(t,r),t.clip()),o={},p=this.model.plot.renderers,n=i=0,a=p.length;i<a;n=++i)h=p[n],o[h.id]=n;for(m=function(t){return o[t.model.id]},s=0,l=e.length;s<l;s++)for(c=e[s],f=j.sortBy(S.values(this.levels[c]),m),_=0,u=f.length;_<u;_++)d=f[_],d.render();return t.restore()},e.prototype._map_hook=function(t,e){},e.prototype._paint_empty=function(t,e){if(t.clearRect(0,0,this.canvas_view.model._width.value,this.canvas_view.model._height.value),this.visuals.border_fill.doit&&(this.visuals.border_fill.set_value(t),t.fillRect(0,0,this.canvas_view.model._width.value,this.canvas_view.model._height.value),t.clearRect.apply(t,e)),this.visuals.background_fill.doit)return this.visuals.background_fill.set_value(t),t.fillRect.apply(t,e)},e.prototype.save=function(t){var e,r,n,o,i,s;return"canvas"===this.model.plot.output_backend?(r=this.canvas_view.get_canvas_element(),null!=r.msToBlob?(e=r.msToBlob(),window.navigator.msSaveBlob(e,t)):(o=document.createElement("a"),o.href=r.toDataURL("image/png"),o.download=t+".png",o.target="_blank",o.dispatchEvent(new MouseEvent("click")))):"svg"===this.model.plot.output_backend?(i=this.canvas_view.ctx.getSerializedSvg(!0),s=new Blob([i],{type:"text/plain"}),n=document.createElement("a"),n.download=t+".svg",n.innerHTML="Download svg",n.href=window.URL.createObjectURL(s),n.onclick=function(t){return document.body.removeChild(t.target)},n.style.display="none",document.body.appendChild(n),n.click()):void 0},e}(g.DOMView),r.PlotCanvas=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.type="PlotCanvas",e.prototype.default_view=r.PlotCanvasView,e.prototype.initialize=function(t,r){var n;return e.__super__.initialize.call(this,t,r),this.canvas=new a.Canvas({map:null!=(n=this.use_map)&&n,initial_width:this.plot.plot_width,initial_height:this.plot.plot_height,use_hidpi:this.plot.hidpi,output_backend:this.plot.output_backend}),this.frame=new l.CartesianFrame({x_range:this.plot.x_range,extra_x_ranges:this.plot.extra_x_ranges,x_scale:this.plot.x_scale,y_range:this.plot.y_range,extra_y_ranges:this.plot.extra_y_ranges,y_scale:this.plot.y_scale}),this.above_panel=new m.LayoutCanvas,this.below_panel=new m.LayoutCanvas,this.left_panel=new m.LayoutCanvas,this.right_panel=new m.LayoutCanvas,b.logger.debug("PlotCanvas initialized")},e.prototype._doc_attached=function(){return this.canvas.attach_document(this.document),this.frame.attach_document(this.document),this.above_panel.attach_document(this.document),this.below_panel.attach_document(this.document),this.left_panel.attach_document(this.document),this.right_panel.attach_document(this.document),e.__super__._doc_attached.call(this),b.logger.debug("PlotCanvas attached to document")},e.override({sizing_mode:"stretch_both"}),e.internal({plot:[x.Instance],toolbar:[x.Instance],canvas:[x.Instance],frame:[x.Instance]}),e.prototype.get_layoutable_children=function(){var t,e;return t=[this.above_panel,this.below_panel,this.left_panel,this.right_panel,this.canvas,this.frame],e=function(e){var r,n,o,i;for(i=[],r=0,n=e.length;r<n;r++)o=e[r],null!=o.panel?i.push(t.push(o.panel)):i.push(void 0);return i},e(this.plot.above),e(this.plot.below),e(this.plot.left),e(this.plot.right),t},e.prototype.get_edit_variables=function(){var t,e,r,n,o;for(e=[],o=this.get_layoutable_children(),r=0,n=o.length;r<n;r++)t=o[r],e=e.concat(t.get_edit_variables());return e},e.prototype.get_constraints=function(){var t,r,n,o,i;for(r=e.__super__.get_constraints.call(this),r=r.concat(this._get_constant_constraints()),r=r.concat(this._get_side_constraints()),i=this.get_layoutable_children(),n=0,o=i.length;n<o;n++)t=i[n],r=r.concat(t.get_constraints());return r},e.prototype._get_constant_constraints=function(){return[v.GE(this.above_panel._height,-this.plot.min_border_top),v.GE(this.below_panel._height,-this.plot.min_border_bottom),v.GE(this.left_panel._width,-this.plot.min_border_left),v.GE(this.right_panel._width,-this.plot.min_border_right),v.EQ(this.above_panel._top,[-1,this.canvas._top]),v.EQ(this.above_panel._bottom,[-1,this.frame._top]),v.EQ(this.below_panel._bottom,[-1,this.canvas._bottom]),v.EQ(this.below_panel._top,[-1,this.frame._bottom]),v.EQ(this.left_panel._left,[-1,this.canvas._left]),v.EQ(this.left_panel._right,[-1,this.frame._left]),v.EQ(this.right_panel._right,[-1,this.canvas._right]),v.EQ(this.right_panel._left,[-1,this.frame._right]),v.EQ(this.above_panel._height,[-1,this._top]),v.EQ(this.above_panel._height,[-1,this.canvas._top],this.frame._top),v.EQ(this.below_panel._height,[-1,this._height],this._bottom),v.EQ(this.below_panel._height,[-1,this.frame._bottom]),v.EQ(this.left_panel._width,[-1,this._left]),v.EQ(this.left_panel._width,[-1,this.frame._left]),v.EQ(this.right_panel._width,[-1,this._width],this._right),v.EQ(this.right_panel._width,[-1,this.canvas._right],this.frame._right)]},e.prototype._get_side_constraints=function(){var t,e,r,n,o,i,s,a,l,u,c,_;for(e=[],_=[["above",this.plot.above],["below",this.plot.below],["left",this.plot.left],["right",this.plot.right]],r=0,s=_.length;r<s;r++){for(u=_[r],c=u[0],i=u[1],o=this.frame,n=0,a=i.length;n<a;n++)l=i[n],t=function(){switch(c){case"above":return v.EQ(o.panel._top,[-1,l.panel._bottom]);case"below":return v.EQ(o.panel._bottom,[-1,l.panel._top]);case"left":return v.EQ(o.panel._left,[-1,l.panel._right]);case"right":return v.EQ(o.panel._right,[-1,l.panel._left])}}(),e.push(t),o=l;0!==i.length&&(t=function(){switch(c){case"above":return v.EQ(o.panel._top,[-1,this.above_panel._top]);case"below":return v.EQ(o.panel._bottom,[-1,this.below_panel._bottom]);case"left":return v.EQ(o.panel._left,[-1,this.left_panel._left]);case"right":return v.EQ(o.panel._right,[-1,this.right_panel._right])}}.call(this),e.push(t))}return e},e}(_.LayoutDOM)},{"../canvas/canvas":"models/canvas/canvas","../canvas/cartesian_frame":"models/canvas/cartesian_frame","../layouts/layout_dom":"models/layouts/layout_dom","../ranges/data_range1d":"models/ranges/data_range1d","../renderers/glyph_renderer":"models/renderers/glyph_renderer","core/bokeh_events":"core/bokeh_events","core/build_views":"core/build_views","core/dom_view":"core/dom_view","core/enums":"core/enums","core/layout/layout_canvas":"core/layout/layout_canvas","core/layout/side_panel":"core/layout/side_panel","core/layout/solver":"core/layout/solver","core/logging":"core/logging","core/properties":"core/properties","core/signaling":"core/signaling","core/ui_events":"core/ui_events","core/util/array":"core/util/array","core/util/object":"core/util/object","core/util/throttle":"core/util/throttle","core/util/types":"core/util/types","core/visuals":"core/visuals"}],"models/ranges/data_range":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./range"),s=t("core/properties");r.DataRange=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="DataRange",e.define({names:[s.Array,[]],renderers:[s.Array,[]]}),e}(i.Range)},{"./range":"models/ranges/range","core/properties":"core/properties"}],"models/ranges/data_range1d":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./data_range"),s=t("../renderers/glyph_renderer"),a=t("core/logging"),l=t("core/properties"),u=t("core/util/bbox");r.DataRange1d=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="DataRange1d",e.define({start:[l.Number],end:[l.Number],range_padding:[l.Number,.1],range_padding_units:[l.PaddingUnits,"percent"],flipped:[l.Bool,!1],follow:[l.StartEnd],follow_interval:[l.Number],default_span:[l.Number,2],bounds:[l.Any],min_interval:[l.Any],max_interval:[l.Any]}),e.internal({scale_hint:[l.String,"auto"]}),e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this.plot_bounds={},this.have_updated_interactively=!1,this._initial_start=this.start,this._initial_end=this.end,this._initial_range_padding=this.range_padding,this._initial_range_padding_units=this.range_padding_units,this._initial_follow=this.follow,this._initial_follow_interval=this.follow_interval,this._initial_default_span=this.default_span},e.getters({min:function(){return Math.min(this.start,this.end)},max:function(){return Math.max(this.start,this.end)}}),e.prototype.computed_renderers=function(){var t,e,r,n,o,i,l,u,c,_,p;if(i=this.names,_=this.renderers,0===_.length)for(c=this.plots,e=0,n=c.length;e<n;e++)l=c[e],t=l.renderers,p=function(){var e,r,n;for(n=[],e=0,r=t.length;e<r;e++)u=t[e],u instanceof s.GlyphRenderer&&n.push(u);return n}(),_=_.concat(p);for(i.length>0&&(_=function(){var t,e,r;for(r=[],t=0,e=_.length;t<e;t++)u=_[t],i.indexOf(u.name)>=0&&r.push(u);return r}()),a.logger.debug("computed "+_.length+" renderers for DataRange1d "+this.id),r=0,o=_.length;r<o;r++)u=_[r],a.logger.trace(" - "+u.type+" "+u.id);return _},e.prototype._compute_plot_bounds=function(t,e){var r,n,o,i;for(i=u.empty(),r=0,n=t.length;r<n;r++)o=t[r],null!=e[o.id]&&(i=u.union(i,e[o.id]));return i},e.prototype._compute_min_max=function(t,e){var r,n,o,i,s,a,l;i=u.empty();for(r in t)l=t[r],i=u.union(i,l);return 0===e?(s=[i.minX,i.maxX],o=s[0],n=s[1]):(a=[i.minY,i.maxY],o=a[0],n=a[1]),[o,n]},e.prototype._compute_range=function(t,e){var r,n,o,i,s,l,u,c,_,p,h,d,f;return u=this.range_padding,null!=u&&u>0?"log"===this.scale_hint?((isNaN(t)||!isFinite(t)||t<=0)&&(t=isNaN(e)||!isFinite(e)||e<=0?.1:e/100,a.logger.warn("could not determine minimum data value for log axis, DataRange1d using value "+t)),(isNaN(e)||!isFinite(e)||e<=0)&&(e=isNaN(t)||!isFinite(t)||t<=0?10:100*t,a.logger.warn("could not determine maximum data value for log axis, DataRange1d using value "+e)),e===t?(d=this.default_span+.001,r=Math.log(t)/Math.log(10)):("percent"===this.range_padding_units?(l=Math.log(t)/Math.log(10),s=Math.log(e)/Math.log(10),d=(s-l)*(1+u)):(l=Math.log(t-u)/Math.log(10),s=Math.log(e+u)/Math.log(10),d=s-l),r=(l+s)/2),c=[Math.pow(10,r-d/2),Math.pow(10,r+d/2)],f=c[0],n=c[1]):(d=e===t?this.default_span:"percent"===this.range_padding_units?(e-t)*(1+u):e-t+2*u,r=(e+t)/2,_=[r-d/2,r+d/2],f=_[0],n=_[1]):(p=[t,e],f=p[0],n=p[1]),i=1,this.flipped&&(h=[n,f],f=h[0],n=h[1],i=-1),o=this.follow_interval,null!=o&&Math.abs(f-n)>o&&("start"===this.follow?n=f+i*o:"end"===this.follow&&(f=n-i*o)),[f,n]},e.prototype.update=function(t,e,r){var n,o,i,s,a,l,u,c,_,p,h;if(!this.have_updated_interactively)return p=this.computed_renderers(),this.plot_bounds[r]=this._compute_plot_bounds(p,t),u=this._compute_min_max(this.plot_bounds,e),a=u[0],s=u[1],c=this._compute_range(a,s),h=c[0],i=c[1],null!=this._initial_start&&("log"===this.scale_hint?this._initial_start>0&&(h=this._initial_start):h=this._initial_start),null!=this._initial_end&&("log"===this.scale_hint?this._initial_end>0&&(i=this._initial_end):i=this._initial_end),_=[this.start,this.end],o=_[0],n=_[1],h===o&&i===n||(l={},h!==o&&(l.start=h),i!==n&&(l.end=i),this.setv(l)),"auto"===this.bounds&&this.setv({bounds:[h,i]},{silent:!0}),this.change.emit()},e.prototype.reset=function(){return this.have_updated_interactively=!1,this.setv({range_padding:this._initial_range_padding,range_padding_units:this._initial_range_padding_units,follow:this._initial_follow,follow_interval:this._initial_follow_interval,default_span:this._initial_default_span},{silent:!0}),this.change.emit()},e}(i.DataRange)},{"../renderers/glyph_renderer":"models/renderers/glyph_renderer","./data_range":"models/ranges/data_range","core/logging":"core/logging","core/properties":"core/properties","core/util/bbox":"core/util/bbox"}],"models/ranges/factor_range":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./range"),s=t("core/properties");r.FactorRange=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="FactorRange",e.define({offset:[s.Number,0],factors:[s.Array,[]],bounds:[s.Any],min_interval:[s.Any],max_interval:[s.Any]}),e.internal({_bounds_as_factors:[s.Any],start:[s.Number],end:[s.Number]}),e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),null!=this.bounds&&"auto"!==this.bounds?this.setv({_bounds_as_factors:this.bounds},{silent:!0}):this.setv({_bounds_as_factors:this.factors},{silent:!0}),this._init(),this.connect(this.properties.factors.change,function(){return this._update_factors()}),this.connect(this.properties.offset.change,function(){return this._init()})},e.getters({min:function(){return this.start},max:function(){return this.end}}),e.prototype.reset=function(){return this._init(),this.change.emit()},e.prototype._update_factors=function(){return this.setv("_bounds_as_factors",this.factors,{silent:!0}),this._init()},e.prototype._init=function(){var t,e,r;if(e=this.factors,null!=this.bounds&&"auto"!==this.bounds&&(e=this._bounds_as_factors,this.setv({factors:e},{silent:!0})),r=.5+this.offset,t=e.length+r,this.setv({start:r,end:t},{silent:!0}),null!=this.bounds)return this.setv({bounds:[r,t]},{silent:!0})},e}(i.Range)},{"./range":"models/ranges/range","core/properties":"core/properties"}],"models/ranges/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./data_range");r.DataRange=n.DataRange;var o=t("./data_range1d");r.DataRange1d=o.DataRange1d;var i=t("./factor_range");r.FactorRange=i.FactorRange;var s=t("./range");r.Range=s.Range;var a=t("./range1d");r.Range1d=a.Range1d},{"./data_range":"models/ranges/data_range","./data_range1d":"models/ranges/data_range1d","./factor_range":"models/ranges/factor_range","./range":"models/ranges/range","./range1d":"models/ranges/range1d"}],"models/ranges/range":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("../../model"),s=t("core/properties");r.Range=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="Range",e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.connect(this.change,function(){var t;return null!=(t=this.callback)?t.execute(this):void 0})},e.define({callback:[s.Instance]}),e.internal({plots:[s.Array,[]]}),e.prototype.reset=function(){return this.change.emit()},e}(i.Model)},{"../../model":"model","core/properties":"core/properties"}],"models/ranges/range1d":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./range"),s=t("core/properties");r.Range1d=function(t){function e(){var t,r;return this instanceof e?e.__super__.constructor.apply(this,arguments):(r=arguments[0],t=arguments[1],new e({start:r,end:t}))}return n(e,t),e.prototype.type="Range1d",e.define({start:[s.Number,0],end:[s.Number,1],
bounds:[s.Any],min_interval:[s.Any],max_interval:[s.Any]}),e.prototype._set_auto_bounds=function(){var t,e;if("auto"===this.bounds)return e=Math.min(this._initial_start,this._initial_end),t=Math.max(this._initial_start,this._initial_end),this.setv({bounds:[e,t]},{silent:!0})},e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this._initial_start=this.start,this._initial_end=this.end,this._set_auto_bounds()},e.getters({min:function(){return Math.min(this.start,this.end)},max:function(){return Math.max(this.start,this.end)}}),e.prototype.reset=function(){return this._set_auto_bounds(),this.start!==this._initial_start||this.end!==this._initial_end?this.setv({start:this._initial_start,end:this._initial_end}):this.change.emit()},e}(i.Range)},{"./range":"models/ranges/range","core/properties":"core/properties"}],"models/renderers/glyph_renderer":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},s=t("./renderer"),a=t("../sources/remote_data_source"),l=t("core/logging"),u=t("core/properties"),c=t("core/util/array"),_=t("core/util/object");r.GlyphRendererView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){var r,n,o,s,l,u,c,p,h,d;if(e.__super__.initialize.call(this,t),r=this.model.glyph,s=i.call(r.mixins,"fill")>=0,l=i.call(r.mixins,"line")>=0,o=_.clone(r.attributes),delete o.id,c=function(t){var e;return e=_.clone(o),s&&_.extend(e,t.fill),l&&_.extend(e,t.line),new r.constructor(e)},this.glyph=this.build_glyph_view(r),d=this.model.selection_glyph,null==d?d=c({fill:{},line:{}}):"auto"===d&&(d=c(this.model.selection_defaults)),this.selection_glyph=this.build_glyph_view(d),h=this.model.nonselection_glyph,null==h?h=c({fill:{},line:{}}):"auto"===h&&(h=c(this.model.nonselection_defaults)),this.nonselection_glyph=this.build_glyph_view(h),u=this.model.hover_glyph,null!=u&&(this.hover_glyph=this.build_glyph_view(u)),p=this.model.muted_glyph,null!=p&&(this.muted_glyph=this.build_glyph_view(p)),n=c(this.model.decimated_defaults),this.decimated_glyph=this.build_glyph_view(n),this.xscale=this.plot_view.frame.xscales[this.model.x_range_name],this.yscale=this.plot_view.frame.yscales[this.model.y_range_name],this.set_data(!1),this.model.data_source instanceof a.RemoteDataSource)return this.model.data_source.setup(this.plot_view,this.glyph)},e.getters({xmapper:function(){return log.warning("xmapper attr is deprecated, use xscale"),this.xscale},ymapper:function(){return log.warning("ymapper attr is deprecated, use yscale"),this.yscale}}),e.prototype.build_glyph_view=function(t){return new t.default_view({model:t,renderer:this,plot_view:this.plot_view,parent:this})},e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),this.connect(this.model.change,function(){return this.request_render()}),this.connect(this.model.data_source.change,function(){return this.set_data()}),this.connect(this.model.data_source.streaming,function(){return this.set_data()}),this.connect(this.model.data_source.patching,function(t){return this.set_data(!0,t)}),this.connect(this.model.data_source.select,function(){return this.request_render()}),null!=this.hover_glyph&&this.connect(this.model.data_source.inspect,function(){return this.request_render()}),this.connect(this.model.glyph.transformchange,function(){return this.set_data()}),this.connect(this.model.glyph.propchange,function(){return this.glyph.set_visuals(this.model.data_source),this.request_render()})},e.prototype.have_selection_glyphs=function(){return null!=this.selection_glyph&&null!=this.nonselection_glyph},e.prototype.set_data=function(t,e){var r,n,o,i,s,a,u,c,_;for(null==t&&(t=!0),_=Date.now(),c=this.model.data_source,this.glyph.model.setv({x_range_name:this.model.x_range_name,y_range_name:this.model.y_range_name},{silent:!0}),this.glyph.set_data(c,e),this.glyph.set_visuals(c),this.decimated_glyph.set_visuals(c),this.have_selection_glyphs()&&(this.selection_glyph.set_visuals(c),this.nonselection_glyph.set_visuals(c)),null!=this.hover_glyph&&this.hover_glyph.set_visuals(c),null!=this.muted_glyph&&this.muted_glyph.set_visuals(c),i=c.get_length(),null==i&&(i=1),this.all_indices=function(){u=[];for(var t=0;0<=i?t<i:t>i;0<=i?t++:t--)u.push(t);return u}.apply(this),s=this.plot_model.plot.lod_factor,this.decimated=[],n=o=0,a=Math.floor(this.all_indices.length/s);0<=a?o<a:o>a;n=0<=a?++o:--o)this.decimated.push(this.all_indices[n*s]);if(r=Date.now()-_,l.logger.debug(this.glyph.model.type+" GlyphRenderer ("+this.model.id+"): set_data finished in "+r+"ms"),this.set_data_timestamp=Date.now(),t)return this.request_render()},e.prototype.render=function(){var t,e,r,n,o,i,s,a,u,_,p,h,d,f,m,y,g,v,b,w,x,k,M,j,S,T;if(this.model.visible){if(k=Date.now(),s=this.glyph.glglyph,M=Date.now(),this.glyph.map_data(),e=Date.now()-k,j=Date.now(),_=this.glyph.mask_data(this.all_indices),r=Date.now()-j,t=this.plot_view.canvas_view.ctx,t.save(),b=this.model.data_source.selected,b=b&&0!==b.length?b["0d"].glyph?_:b["1d"].indices.length>0?b["1d"].indices:[]:[],p=this.model.data_source.inspected,p=p&&0!==p.length?p["0d"].glyph?_:p["1d"].indices.length>0?p["1d"].indices:[]:[],y=this.plot_model.plot.lod_threshold,this.plot_view.interactive&&!s&&null!=y&&this.all_indices.length>y?(_=this.decimated,a=this.decimated_glyph,v=this.decimated_glyph,x=this.selection_glyph):(a=this.model.muted&&null!=this.muted_glyph?this.muted_glyph:this.glyph,v=this.nonselection_glyph,x=this.selection_glyph),null!=this.hover_glyph&&p.length&&(_=c.difference(_,p)),b.length&&this.have_selection_glyphs()){for(T=Date.now(),w={},h=0,f=b.length;h<f;h++)u=b[h],w[u]=!0;for(b=new Array,g=new Array,d=0,m=_.length;d<m;d++)u=_[d],null!=w[u]?b.push(u):g.push(u);o=Date.now()-T,S=Date.now(),v.render(t,g,this.glyph),x.render(t,b,this.glyph),null!=this.hover_glyph&&this.hover_glyph.render(t,p,this.glyph),n=Date.now()-S}else S=Date.now(),a.render(t,_,this.glyph),this.hover_glyph&&p.length&&this.hover_glyph.render(t,p,this.glyph),n=Date.now()-S;return this.last_dtrender=n,i=Date.now()-k,l.logger.debug(this.glyph.model.type+" GlyphRenderer ("+this.model.id+"): render finished in "+i+"ms"),l.logger.trace(" - map_data finished in       : "+e+"ms"),null!=r&&l.logger.trace(" - mask_data finished in      : "+r+"ms"),null!=o&&l.logger.trace(" - selection mask finished in : "+o+"ms"),l.logger.trace(" - glyph renders finished in  : "+n+"ms"),t.restore()}},e.prototype.map_to_screen=function(t,e){return this.plot_view.map_to_screen(t,e,this.model.x_range_name,this.model.y_range_name)},e.prototype.draw_legend=function(t,e,r,n,o,i,s){var a;return a=this.model.get_reference_point(i,s),this.glyph.draw_legend_for_index(t,e,r,n,o,a)},e.prototype.hit_test=function(t){return this.model.hit_test_helper(t,this.glyph)},e}(s.RendererView),r.GlyphRenderer=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.GlyphRendererView,e.prototype.type="GlyphRenderer",e.prototype.get_reference_point=function(t,e){var r,n,o;return o=0,null!=t&&null!=this.data_source.get_column&&(r=this.data_source.get_column(t),r&&(n=r.indexOf(e),n>0&&(o=n))),o},e.prototype.hit_test_helper=function(t,e){return this.visible?e.hit_test(t):null},e.define({x_range_name:[u.String,"default"],y_range_name:[u.String,"default"],data_source:[u.Instance],glyph:[u.Instance],hover_glyph:[u.Instance],nonselection_glyph:[u.Any,"auto"],selection_glyph:[u.Any,"auto"],muted_glyph:[u.Instance],muted:[u.Bool,!1]}),e.override({level:"glyph"}),e.prototype.selection_defaults={fill:{},line:{}},e.prototype.decimated_defaults={fill:{fill_alpha:.3,fill_color:"grey"},line:{line_alpha:.3,line_color:"grey"}},e.prototype.nonselection_defaults={fill:{fill_alpha:.2,line_alpha:.2},line:{}},e}(s.Renderer)},{"../sources/remote_data_source":"models/sources/remote_data_source","./renderer":"models/renderers/renderer","core/logging":"core/logging","core/properties":"core/properties","core/util/array":"core/util/array","core/util/object":"core/util/object"}],"models/renderers/guide_renderer":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./renderer"),s=t("core/properties");r.GuideRenderer=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="GuideRenderer",e.define({plot:[s.Instance]}),e.override({level:"overlay"}),e}(i.Renderer)},{"./renderer":"models/renderers/renderer","core/properties":"core/properties"}],"models/renderers/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./glyph_renderer");r.GlyphRenderer=n.GlyphRenderer;var o=t("./guide_renderer");r.GuideRenderer=o.GuideRenderer;var i=t("./renderer");r.Renderer=i.Renderer},{"./glyph_renderer":"models/renderers/glyph_renderer","./guide_renderer":"models/renderers/guide_renderer","./renderer":"models/renderers/renderer"}],"models/renderers/renderer":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/dom_view"),s=t("core/visuals"),a=t("core/properties"),l=t("core/util/projections"),u=t("core/util/object"),c=t("../../model");r.RendererView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.plot_view=t.plot_view,this.visuals=new s.Visuals(this.model),this._has_finished=!0},e.getters({plot_model:function(){return this.plot_view.model}}),e.prototype.request_render=function(){return this.plot_view.request_render()},e.prototype.set_data=function(t){var e,r,n;if(e=this.model.materialize_dataspecs(t),u.extend(this,e),this.plot_model.use_map&&(null!=this._x&&(r=l.project_xy(this._x,this._y),this._x=r[0],this._y=r[1]),null!=this._xs))return n=l.project_xsys(this._xs,this._ys),this._xs=n[0],this._ys=n[1],n},e.prototype.map_to_screen=function(t,e){return this.plot_view.map_to_screen(t,e,this.model.x_range_name,this.model.y_range_name)},e}(i.DOMView),r.Renderer=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="Renderer",e.define({level:[a.RenderLevel,null],visible:[a.Bool,!0]}),e}(c.Model)},{"../../model":"model","core/dom_view":"core/dom_view","core/properties":"core/properties","core/util/object":"core/util/object","core/util/projections":"core/util/projections","core/visuals":"core/visuals"}],"models/scales/categorical_scale":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./linear_scale"),s=t("core/util/types");r.CategoricalScale=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="CategoricalScale",e.prototype.compute=function(t,r){var n,o,i,a,l,u;return null==r&&(r=!1),s.isNumber(t)?r?t:e.__super__.compute.call(this,t):(a=this.source_range,o=a.factors,t.indexOf(":")>=0?(l=t.split(":"),n=l[0],i=l[1],i=parseFloat(i),u=o.indexOf(n)+.5+a.offset+i):u=o.indexOf(t)+1+a.offset,r?u:e.__super__.compute.call(this,u))},e.prototype.v_compute=function(t,r){var n,o,i,a,l,u,c,_,p,h;if(null==r&&(r=!1),s.isNumber(t[0]))return r?t:e.__super__.v_compute.call(this,t);for(u=this.source_range,o=u.factors,p=Array(t.length),i=a=0,c=t.length;0<=c?a<c:a>c;i=0<=c?++a:--a)h=t[i],h.indexOf(":")>=0?(_=h.split(":"),n=_[0],l=_[1],l=parseFloat(l),p[i]=o.indexOf(n)+.5+u.offset+l):p[i]=o.indexOf(h)+1+u.offset;return r?p:e.__super__.v_compute.call(this,p)},e.prototype.invert=function(t,r){var n,o;return null==r&&(r=!1),t=e.__super__.invert.call(this,t),r?t:(o=this.source_range,n=o.factors,n[Math.floor(t-.5-o.offset)])},e.prototype.v_invert=function(t,r){var n,o,i,s,a,l,u,c,_;for(null==r&&(r=!1),_=e.__super__.v_invert.call(this,t),o=i=0,l=_.length;0<=l?i<l:i>l;o=0<=l?++i:--i)_[o]=_[o];if(r)return _;for(c=Array(_),a=this.source_range,n=a.factors,o=s=0,u=t.length;0<=u?s<u:s>u;o=0<=u?++s:--s)c[o]=n[Math.floor(_[o]-.5-a.offset)];return c},e}(i.LinearScale)},{"./linear_scale":"models/scales/linear_scale","core/util/types":"core/util/types"}],"models/scales/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./categorical_scale");r.CategoricalScale=n.CategoricalScale;var o=t("./linear_scale");r.LinearScale=o.LinearScale;var i=t("./log_scale");r.LogScale=i.LogScale;var s=t("./scale");r.Scale=s.Scale},{"./categorical_scale":"models/scales/categorical_scale","./linear_scale":"models/scales/linear_scale","./log_scale":"models/scales/log_scale","./scale":"models/scales/scale"}],"models/scales/linear_scale":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./scale"),s=t("core/properties");r.LinearScale=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="LinearScale",e.prototype.compute=function(t){var e,r,n;return n=this._compute_state(),e=n[0],r=n[1],e*t+r},e.prototype.v_compute=function(t){var e,r,n,o,i,s,a,l;for(s=this._compute_state(),e=s[0],i=s[1],a=new Float64Array(t.length),n=r=0,o=t.length;r<o;n=++r)l=t[n],a[n]=e*l+i;return a},e.prototype.invert=function(t){var e,r,n;return n=this._compute_state(),e=n[0],r=n[1],(t-r)/e},e.prototype.v_invert=function(t){var e,r,n,o,i,s,a,l;for(s=this._compute_state(),e=s[0],i=s[1],a=new Float64Array(t.length),n=r=0,o=t.length;r<o;n=++r)l=t[n],a[n]=(l-i)/e;return a},e.prototype._compute_state=function(){var t,e,r,n,o,i;return n=this.source_range.start,r=this.source_range.end,i=this.target_range.start,o=this.target_range.end,t=(o-i)/(r-n),e=-(t*n)+i,[t,e]},e.internal({source_range:[s.Any],target_range:[s.Any]}),e}(i.Scale)},{"./scale":"models/scales/scale","core/properties":"core/properties"}],"models/scales/log_scale":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./scale"),s=t("core/properties");r.LogScale=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="LogScale",e.prototype.compute=function(t){var e,r,n,o,i,s,a;return s=this._compute_state(),r=s[0],i=s[1],n=s[2],o=s[3],0===n?a=0:(e=(Math.log(t)-o)/n,a=isFinite(e)?e*r+i:NaN),a},e.prototype.v_compute=function(t){var e,r,n,o,i,s,a,l,u,c,_,p,h;if(u=this._compute_state(),r=u[0],l=u[1],o=u[2],i=u[3],p=new Float64Array(t.length),0===o)for(n=s=0,c=t.length;0<=c?s<c:s>c;n=0<=c?++s:--s)p[n]=0;else for(n=a=0,_=t.length;0<=_?a<_:a>_;n=0<=_?++a:--a)e=(Math.log(t[n])-i)/o,h=isFinite(e)?e*r+l:NaN,p[n]=h;return p},e.prototype.invert=function(t){var e,r,n,o,i,s;return i=this._compute_state(),e=i[0],o=i[1],r=i[2],n=i[3],s=(t-o)/e,Math.exp(r*s+n)},e.prototype.v_invert=function(t){var e,r,n,o,i,s,a,l,u,c;for(a=this._compute_state(),e=a[0],s=a[1],n=a[2],o=a[3],u=new Float64Array(t.length),r=i=0,l=t.length;0<=l?i<l:i>l;r=0<=l?++i:--i)c=(t[r]-s)/e,u[r]=Math.exp(n*c+o);return u},e.prototype._get_safe_factor=function(t,e){var r,n,o,i;return i=t<0?0:t,r=e<0?0:e,i===r&&(0===i?(o=[1,10],i=o[0],r=o[1]):(n=Math.log(i)/Math.log(10),i=Math.pow(10,Math.floor(n)),r=Math.ceil(n)!==Math.floor(n)?Math.pow(10,Math.ceil(n)):Math.pow(10,Math.ceil(n)+1))),[i,r]},e.prototype._compute_state=function(){var t,e,r,n,o,i,s,a,l,u,c,_;return l=this.source_range.start,a=this.source_range.end,_=this.target_range.start,c=this.target_range.end,s=c-_,i=this._get_safe_factor(l,a),u=i[0],t=i[1],0===u?(r=Math.log(t),n=0):(r=Math.log(t)-Math.log(u),n=Math.log(u)),e=s,o=_,[e,o,r,n]},e.internal({source_range:[s.Any],target_range:[s.Any]}),e}(i.Scale)},{"./scale":"models/scales/scale","core/properties":"core/properties"}],"models/scales/scale":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=[].slice,s=t("../transforms");r.Scale=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.map_to_target=function(){var t,e;return e=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],this.compute.apply(this,[e].concat(i.call(t)))},e.prototype.v_map_to_target=function(){var t,e;return e=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],this.v_compute.apply(this,[e].concat(i.call(t)))},e.prototype.map_from_target=function(t){return this.invert(t)},e.prototype.v_map_from_target=function(t){return this.v_invert(t)},e}(s.Transform)},{"../transforms":"models/transforms/index"}],"models/sources/ajax_data_source":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=t("./remote_data_source"),a=t("core/logging"),l=t("core/properties");r.AjaxDataSource=function(t){function e(){return this.get_data=n(this.get_data,this),this.setup=n(this.setup,this),this.destroy=n(this.destroy,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.type="AjaxDataSource",e.define({mode:[l.String,"replace"],content_type:[l.String,"application/json"],http_headers:[l.Any,{}],max_size:[l.Number],method:[l.String,"POST"],if_modified:[l.Bool,!1]}),e.prototype.destroy=function(){if(null!=this.interval)return clearInterval(this.interval)},e.prototype.setup=function(t,e){if(this.pv=t,this.get_data(this.mode),this.polling_interval)return this.interval=setInterval(this.get_data,this.polling_interval,this.mode,this.max_size,this.if_modified)},e.prototype.get_data=function(t,e,r){var n,o,i,s;null==e&&(e=0),null==r&&(r=!1),s=new XMLHttpRequest,s.open(this.method,this.data_url,!0),s.withCredentials=!1,s.setRequestHeader("Content-Type",this.content_type),o=this.http_headers;for(n in o)i=o[n],s.setRequestHeader(n,i);return s.addEventListener("load",function(r){return function(){var n,o,i,a,l,u;if(200===s.status)switch(o=JSON.parse(s.responseText),t){case"replace":return r.data=o;case"append":for(l=r.data,u=r.columns(),i=0,a=u.length;i<a;i++)n=u[i],o[n]=l[n].concat(o[n]).slice(-e);return r.data=o}}}(this)),s.addEventListener("error",function(t){return function(){return a.logger.error("Failed to fetch JSON from "+t.data_url+" with code "+s.status)}}(this)),s.send(),null},e}(s.RemoteDataSource)},{"./remote_data_source":"models/sources/remote_data_source","core/logging":"core/logging","core/properties":"core/properties"}],"models/sources/column_data_source":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./columnar_data_source"),s=t("core/has_props"),a=t("core/properties"),l=t("core/util/data_structures"),u=t("core/util/serialization"),c=t("core/util/types");r.concat_typed_arrays=function(t,e){var r;return r=new t.constructor(t.length+e.length),r.set(t,0),r.set(e,t.length),r},r.stream_to_column=function(t,e,n){var o,i,s,a,l,u,c,_,p,h;if(null!=t.concat)return t=t.concat(e),t.length>n&&(t=t.slice(-n)),t;if(h=t.length+e.length,null!=n&&h>n){for(_=h-n,o=t.length,t.length<n&&(p=new t.constructor(n),p.set(t,0),t=p),i=s=l=_,u=o;l<=u?s<u:s>u;i=l<=u?++s:--s)t[i-_]=t[i];for(i=a=0,c=e.length;0<=c?a<c:a>c;i=0<=c?++a:--a)t[i+(o-_)]=e[i];return t}return p=new t.constructor(e),r.concat_typed_arrays(t,p)},r.slice=function(t,e){var r,n,o,i,s,a,l;return c.isObject(t)?[null!=(r=t.start)?r:0,null!=(n=t.stop)?n:e,null!=(o=t.step)?o:1]:(i=[t,t+1,1],s=i[0],l=i[1],a=i[2],i)},r.patch_to_column=function(t,e,n){var o,i,s,a,u,_,p,h,d,f,m,y,g,v,b,w,x,k,M,j,S,T,O,P,A,E,z,C;for(w=new l.Set,x=!1,y=0,g=e.length;y<g;y++)for(k=e[y],s=k[0],C=k[1],c.isArray(s)?(w.push(s[0]),z=n[s[0]],p=t[s[0]]):(c.isNumber(s)?(C=[C],w.push(s)):x=!0,s=[0,0,s],z=[1,t.length],p=t),2===s.length&&(z=[1,z[0]],s=[s[0],0,s[1]]),o=0,M=r.slice(s[1],z[0]),a=M[0],_=M[1],u=M[2],j=r.slice(s[2],z[1]),d=j[0],m=j[1],f=j[2],i=v=S=a,T=_,O=u;O>0?v<T:v>T;i=v+=O)for(h=b=P=d,A=m,E=f;E>0?b<A:b>A;h=b+=E)x&&w.push(h),p[i*z[1]+h]=C[o],o++;return w},r.ColumnDataSource=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="ColumnDataSource",e.prototype.initialize=function(t){var r;return e.__super__.initialize.call(this,t),r=u.decode_column_data(this.data),this.data=r[0],this._shapes=r[1],r},e.define({data:[a.Any,{}]}),e.prototype.attributes_as_json=function(t,r){var n,i,s,a;null==t&&(t=!0),null==r&&(r=e._value_to_json),n={},s=this.serializable_attributes();for(i in s)o.call(s,i)&&(a=s[i],"data"===i&&(a=u.encode_column_data(a,this._shapes)),t?n[i]=a:i in this._set_after_defaults&&(n[i]=a));return r("attributes",n,this)},e._value_to_json=function(t,e,r){return c.isObject(e)&&"data"===t?u.encode_column_data(e,r._shapes):s.HasProps._value_to_json(t,e,r)},e.prototype.stream=function(t,e){var n,o,i;n=this.data;for(o in t)i=t[o],n[o]=r.stream_to_column(n[o],t[o],e);return this.setv("data",n,{silent:!0}),this.streaming.emit()},e.prototype.patch=function(t){var e,n,o,i;e=this.data,i=new l.Set;for(n in t)o=t[n],i=i.union(r.patch_to_column(e[n],o,this._shapes[n]));return this.setv("data",e,{silent:!0}),this.patching.emit(i.values)},e}(i.ColumnarDataSource)},{"./columnar_data_source":"models/sources/columnar_data_source","core/has_props":"core/has_props","core/properties":"core/properties","core/util/data_structures":"core/util/data_structures","core/util/serialization":"core/util/serialization","core/util/types":"core/util/types"}],"models/sources/columnar_data_source":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./data_source"),s=t("core/signaling"),a=t("core/logging"),l=t("core/selection_manager"),u=t("core/properties"),c=t("core/util/array");r.ColumnarDataSource=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="ColumnarDataSource",e.define({column_names:[u.Array,[]]}),e.internal({selection_manager:[u.Instance,function(t){return new l.SelectionManager({source:t})}],inspected:[u.Any],_shapes:[u.Any,{}]}),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.select=new s.Signal(this,"select"),this.inspect=new s.Signal(this,"inspect"),this.streaming=new s.Signal(this,"streaming"),this.patching=new s.Signal(this,"patching")},e.prototype.get_column=function(t){var e;return null!=(e=this.data[t])?e:null},e.prototype.columns=function(){return Object.keys(this.data)},e.prototype.get_length=function(t){var e,r,n,o;switch(null==t&&(t=!0),r=c.uniq(function(){var t,r;t=this.data,r=[];for(e in t)o=t[e],r.push(o.length);return r}.call(this)),r.length){case 0:return null;case 1:return r[0];default:if(n="data source has columns of inconsistent lengths",t)return a.logger.warn(n),r.sort()[0];throw new Error(n)}},e}(i.DataSource)},{"./data_source":"models/sources/data_source","core/logging":"core/logging","core/properties":"core/properties","core/selection_manager":"core/selection_manager","core/signaling":"core/signaling","core/util/array":"core/util/array"}],"models/sources/data_source":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("../../model"),s=t("core/hittest"),a=t("core/properties"),l=t("core/util/types");r.DataSource=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="DataSource",e.define({selected:[a.Any,s.create_hit_test_result()],callback:[a.Any]}),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.connect(this.properties.selected.change,function(t){return function(){var e;if(e=t.callback,null!=e)return l.isFunction(e)?e(t):e.execute(t)}}(this))},e}(i.Model)},{"../../model":"model","core/hittest":"core/hittest","core/properties":"core/properties","core/util/types":"core/util/types"}],"models/sources/geojson_data_source":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./columnar_data_source"),s=t("core/logging"),a=t("core/properties");r.GeoJSONDataSource=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="GeoJSONDataSource",e.define({geojson:[a.Any]}),e.internal({data:[a.Any,{}]}),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this._update_data(),this.connect(this.properties.geojson.change,function(t){return function(){return t._update_data()}}(this))},e.prototype._update_data=function(){return this.data=this.geojson_to_column_data()},e.prototype._get_new_list_array=function(t){var e,r,n,o;for(o=[],e=r=0,n=t;0<=n?r<n:r>n;e=0<=n?++r:--r)o.push([]);return o},e.prototype._get_new_nan_array=function(t){var e,r,n,o;for(o=[],e=r=0,n=t;0<=n?r<n:r>n;e=0<=n?++r:--r)o.push(NaN);return o},e.prototype._flatten_function=function(t,e){return t.concat([[NaN,NaN,NaN]]).concat(e)},e.prototype._add_properties=function(t,e,r,n){var o,i;i=[];for(o in t.properties)e.hasOwnProperty(o)||(e[o]=this._get_new_nan_array(n)),i.push(e[o][r]=t.properties[o]);return i},e.prototype._add_geometry=function(t,e,r){var n,o,i,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k,M,j,S,T,O,P,A;switch(t.type){case"Point":return o=t.coordinates,e.x[r]=o[0],e.y[r]=o[1],e.z[r]=null!=(w=o[2])?w:NaN;case"LineString":for(n=t.coordinates,T=[],u=c=0,p=n.length;c<p;u=++c)o=n[u],e.xs[r][u]=o[0],e.ys[r][u]=o[1],T.push(e.zs[r][u]=null!=(x=o[2])?x:NaN);return T;case"Polygon":for(t.coordinates.length>1&&s.logger.warn("Bokeh does not support Polygons with holes in, only exterior ring used."),i=t.coordinates[0],O=[],u=_=0,h=i.length;_<h;u=++_)o=i[u],e.xs[r][u]=o[0],e.ys[r][u]=o[1],O.push(e.zs[r][u]=null!=(k=o[2])?k:NaN);return O;case"MultiPoint":return s.logger.warn("MultiPoint not supported in Bokeh");case"MultiLineString":for(l=t.coordinates.reduce(this._flatten_function),P=[],u=y=0,d=l.length;y<d;u=++y)o=l[u],e.xs[r][u]=o[0],e.ys[r][u]=o[1],P.push(e.zs[r][u]=null!=(M=o[2])?M:NaN);return P;case"MultiPolygon":for(a=[],j=t.coordinates,g=0,f=j.length;g<f;g++)b=j[g],b.length>1&&s.logger.warn("Bokeh does not support Polygons with holes in, only exterior ring used."),a.push(b[0]);for(l=a.reduce(this._flatten_function),A=[],u=v=0,m=l.length;v<m;u=++v)o=l[u],e.xs[r][u]=o[0],e.ys[r][u]=o[1],A.push(e.zs[r][u]=null!=(S=o[2])?S:NaN);return A;default:throw new Error("Invalid type "+t.type)}},e.prototype._get_items_length=function(t){var e,r,n,o,i,s,a,l,u,c,_;for(e=0,o=a=0,u=t.length;a<u;o=++a)if(i=t[o],n="Feature"===i.type?i.geometry:i,"GeometryCollection"===n.type)for(_=n.geometries,s=l=0,c=_.length;l<c;s=++l)r=_[s],e+=1;else e+=1;return e},e.prototype.geojson_to_column_data=function(){var t,e,r,n,o,i,s,a,l,u,c,_,p,h,d,f;if(n=JSON.parse(this.geojson),"GeometryCollection"!==(d=n.type)&&"FeatureCollection"!==d)throw new Error("Bokeh only supports type GeometryCollection and FeatureCollection at top level");if("GeometryCollection"===n.type){if(null==n.geometries)throw new Error("No geometries found in GeometryCollection");if(0===n.geometries.length)throw new Error("geojson.geometries must have one or more items");l=n.geometries}if("FeatureCollection"===n.type){if(null==n.features)throw new Error("No features found in FeaturesCollection");if(0===n.features.length)throw new Error("geojson.features must have one or more items");l=n.features}for(a=this._get_items_length(l),e={x:this._get_new_nan_array(a),y:this._get_new_nan_array(a),z:this._get_new_nan_array(a),xs:this._get_new_list_array(a),ys:this._get_new_list_array(a),zs:this._get_new_list_array(a)},t=0,i=c=0,p=l.length;c<p;i=++c)if(s=l[i],o="Feature"===s.type?s.geometry:s,"GeometryCollection"===o.type)for(f=o.geometries,u=_=0,h=f.length;_<h;u=++_)r=f[u],this._add_geometry(r,e,t),"Feature"===s.type&&this._add_properties(s,e,t,a),t+=1;else this._add_geometry(o,e,t),"Feature"===s.type&&this._add_properties(s,e,t,a),t+=1;return e},e}(i.ColumnarDataSource)},{"./columnar_data_source":"models/sources/columnar_data_source","core/logging":"core/logging","core/properties":"core/properties"}],"models/sources/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./ajax_data_source");r.AjaxDataSource=n.AjaxDataSource;var o=t("./column_data_source");r.ColumnDataSource=o.ColumnDataSource;var i=t("./columnar_data_source");r.ColumnarDataSource=i.ColumnarDataSource;var s=t("./data_source");r.DataSource=s.DataSource;var a=t("./geojson_data_source");r.GeoJSONDataSource=a.GeoJSONDataSource;var l=t("./remote_data_source");r.RemoteDataSource=l.RemoteDataSource},{"./ajax_data_source":"models/sources/ajax_data_source","./column_data_source":"models/sources/column_data_source","./columnar_data_source":"models/sources/columnar_data_source","./data_source":"models/sources/data_source","./geojson_data_source":"models/sources/geojson_data_source","./remote_data_source":"models/sources/remote_data_source"}],"models/sources/remote_data_source":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./column_data_source"),s=t("core/properties");r.RemoteDataSource=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="RemoteDataSource",e.define({data_url:[s.String],polling_interval:[s.Number]}),e}(i.ColumnDataSource)},{"./column_data_source":"models/sources/column_data_source","core/properties":"core/properties"}],"models/tickers/adaptive_ticker":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty,a=[].slice,l=t("./continuous_ticker"),u=t("core/properties"),c=t("core/util/array");n=function(t,e,r){return Math.max(e,Math.min(r,t))},
o=function(t,e){return null==e&&(e=Math.E),Math.log(t)/Math.log(e)},r.AdaptiveTicker=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.type="AdaptiveTicker",e.define({base:[u.Number,10],mantissas:[u.Array,[1,2,5]],min_interval:[u.Number,0],max_interval:[u.Number]}),e.prototype.initialize=function(t,r){var n,o;return e.__super__.initialize.call(this,t,r),n=c.nth(this.mantissas,-1)/this.base,o=c.nth(this.mantissas,0)*this.base,this.extended_mantissas=[n].concat(a.call(this.mantissas),[o]),this.base_factor=0===this.get_min_interval()?1:this.get_min_interval()},e.prototype.get_interval=function(t,e,r){var i,s,a,l,u,_,p,h,d;return a=e-t,u=this.get_ideal_interval(t,e,r),d=Math.floor(o(u/this.base_factor,this.base)),_=Math.pow(this.base,d)*this.base_factor,p=u/_,s=this.extended_mantissas,l=s.map(function(t){return Math.abs(r-a/(t*_))}),i=s[c.argmin(l)],h=i*_,n(h,this.get_min_interval(),this.get_max_interval())},e}(l.ContinuousTicker)},{"./continuous_ticker":"models/tickers/continuous_ticker","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/tickers/basic_ticker":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./adaptive_ticker");r.BasicTicker=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="BasicTicker",e}(i.AdaptiveTicker)},{"./adaptive_ticker":"models/tickers/adaptive_ticker"}],"models/tickers/categorical_ticker":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./ticker");r.CategoricalTicker=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="CategoricalTicker",e.prototype.get_ticks=function(t,e,r,n,o){var i,s,a,l,u,c,_;for(i=o.desired_n_ticks,c=[],s=r.factors,a=u=0,_=s.length;0<=_?u<_:u>_;a=0<=_?++u:--u)l=a+r.offset,l+1>t&&l+1<e&&c.push(s[a]);return{major:c,minor:[]}},e}(i.Ticker)},{"./ticker":"models/tickers/ticker"}],"models/tickers/composite_ticker":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./continuous_ticker"),s=t("core/properties"),a=t("core/util/array"),l=t("core/util/object");r.CompositeTicker=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="CompositeTicker",e.define({tickers:[s.Array,[]]}),e.getters({min_intervals:function(){var t,e,r,n,o;for(r=this.tickers,n=[],t=0,e=r.length;t<e;t++)o=r[t],n.push(o.get_min_interval());return n},max_intervals:function(){var t,e,r,n,o;for(r=this.tickers,n=[],t=0,e=r.length;t<e;t++)o=r[t],n.push(o.get_max_interval());return n},min_interval:function(){return this.min_intervals[0]},max_interval:function(){return this.max_intervals[0]}}),e.prototype.get_best_ticker=function(t,e,r){var n,o,i,s,u,c,_,p;return s=e-t,c=this.get_ideal_interval(t,e,r),p=[a.sortedIndex(this.min_intervals,c)-1,a.sortedIndex(this.max_intervals,c)],_=[this.min_intervals[p[0]],this.max_intervals[p[1]]],u=_.map(function(t){return Math.abs(r-s/t)}),l.isEmpty(u.filter(function(t){return!isNaN(t)}))?o=this.tickers[0]:(n=a.argmin(u),i=p[n],o=this.tickers[i]),o},e.prototype.get_interval=function(t,e,r){var n;return n=this.get_best_ticker(t,e,r),n.get_interval(t,e,r)},e.prototype.get_ticks_no_defaults=function(t,e,r,n){var o,i;return o=this.get_best_ticker(t,e,n),i=o.get_ticks_no_defaults(t,e,r,n)},e}(i.ContinuousTicker)},{"./continuous_ticker":"models/tickers/continuous_ticker","core/properties":"core/properties","core/util/array":"core/util/array","core/util/object":"core/util/object"}],"models/tickers/continuous_ticker":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./ticker"),s=t("core/properties");r.ContinuousTicker=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="ContinuousTicker",e.define({num_minor_ticks:[s.Number,5],desired_num_ticks:[s.Number,6]}),e.prototype.get_interval=void 0,e.prototype.get_min_interval=function(){return this.min_interval},e.prototype.get_max_interval=function(){var t;return null!=(t=this.max_interval)?t:Infinity},e.prototype.get_ideal_interval=function(t,e,r){var n;return n=e-t,n/r},e}(i.Ticker)},{"./ticker":"models/tickers/ticker","core/properties":"core/properties"}],"models/tickers/datetime_ticker":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,i,s,a,l=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,c=t("core/util/array"),_=t("./adaptive_ticker"),p=t("./composite_ticker"),h=t("./days_ticker"),d=t("./months_ticker"),f=t("./years_ticker"),m=t("./util");o=m.ONE_MILLI,a=m.ONE_SECOND,i=m.ONE_MINUTE,n=m.ONE_HOUR,s=m.ONE_MONTH,r.DatetimeTicker=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.type="DatetimeTicker",e.override({num_minor_ticks:0,tickers:function(){return[new _.AdaptiveTicker({mantissas:[1,2,5],base:10,min_interval:0,max_interval:500*o,num_minor_ticks:0}),new _.AdaptiveTicker({mantissas:[1,2,5,10,15,20,30],base:60,min_interval:a,max_interval:30*i,num_minor_ticks:0}),new _.AdaptiveTicker({mantissas:[1,2,4,6,8,12],base:24,min_interval:n,max_interval:12*n,num_minor_ticks:0}),new h.DaysTicker({days:c.range(1,32)}),new h.DaysTicker({days:c.range(1,31,3)}),new h.DaysTicker({days:[1,8,15,22]}),new h.DaysTicker({days:[1,15]}),new d.MonthsTicker({months:c.range(0,12,1)}),new d.MonthsTicker({months:c.range(0,12,2)}),new d.MonthsTicker({months:c.range(0,12,4)}),new d.MonthsTicker({months:c.range(0,12,6)}),new f.YearsTicker({})]}}),e}(p.CompositeTicker)},{"./adaptive_ticker":"models/tickers/adaptive_ticker","./composite_ticker":"models/tickers/composite_ticker","./days_ticker":"models/tickers/days_ticker","./months_ticker":"models/tickers/months_ticker","./util":"models/tickers/util","./years_ticker":"models/tickers/years_ticker","core/util/array":"core/util/array"}],"models/tickers/days_ticker":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty,u=t("./single_interval_ticker"),c=t("./util"),_=t("core/properties"),p=t("core/util/array");o=c.copy_date,s=c.last_month_no_later_than,n=c.ONE_DAY,i=function(t,e){var r,n,i,a,l;for(l=s(new Date(t)),i=s(new Date(e)),a=o(i),i.setUTCMonth(i.getUTCMonth()+1),n=[],r=l;;)if(n.push(o(r)),r.setUTCMonth(r.getUTCMonth()+1),r>i)break;return n},r.DaysTicker=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.type="DaysTicker",e.define({days:[_.Array,[]]}),e.prototype.initialize=function(t,r){var o,i;return t.num_minor_ticks=0,e.__super__.initialize.call(this,t,r),o=this.days,i=o.length>1?(o[1]-o[0])*n:31*n,this.interval=i},e.prototype.get_ticks_no_defaults=function(t,e,r,n){var s,a,l,u,c,_,h,d,f;return d=i(t,e),c=this.days,_=function(t){return function(t,e){var r,n,i,s,a,l;for(r=[],a=0,l=c.length;a<l;a++)n=c[a],i=o(t),i.setUTCDate(n),s=new Date(i.getTime()+e/2),s.getUTCMonth()===t.getUTCMonth()&&r.push(i);return r}}(this),h=this.interval,u=p.concat(function(){var t,e,r;for(r=[],t=0,e=d.length;t<e;t++)a=d[t],r.push(_(a,h));return r}()),s=function(){var t,e,r;for(r=[],t=0,e=u.length;t<e;t++)l=u[t],r.push(l.getTime());return r}(),f=s.filter(function(r){return t<=r&&r<=e}),{major:f,minor:[]}},e}(u.SingleIntervalTicker)},{"./single_interval_ticker":"models/tickers/single_interval_ticker","./util":"models/tickers/util","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/tickers/fixed_ticker":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./continuous_ticker"),s=t("core/properties");r.FixedTicker=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="FixedTicker",e.define({ticks:[s.Array,[]]}),e.prototype.get_ticks_no_defaults=function(t,e,r,n){return{major:this.ticks,minor:[]}},e}(i.ContinuousTicker)},{"./continuous_ticker":"models/tickers/continuous_ticker","core/properties":"core/properties"}],"models/tickers/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./adaptive_ticker");r.AdaptiveTicker=n.AdaptiveTicker;var o=t("./basic_ticker");r.BasicTicker=o.BasicTicker;var i=t("./categorical_ticker");r.CategoricalTicker=i.CategoricalTicker;var s=t("./composite_ticker");r.CompositeTicker=s.CompositeTicker;var a=t("./continuous_ticker");r.ContinuousTicker=a.ContinuousTicker;var l=t("./datetime_ticker");r.DatetimeTicker=l.DatetimeTicker;var u=t("./days_ticker");r.DaysTicker=u.DaysTicker;var c=t("./fixed_ticker");r.FixedTicker=c.FixedTicker;var _=t("./log_ticker");r.LogTicker=_.LogTicker;var p=t("./mercator_ticker");r.MercatorTicker=p.MercatorTicker;var h=t("./months_ticker");r.MonthsTicker=h.MonthsTicker;var d=t("./single_interval_ticker");r.SingleIntervalTicker=d.SingleIntervalTicker;var f=t("./ticker");r.Ticker=f.Ticker;var m=t("./years_ticker");r.YearsTicker=m.YearsTicker},{"./adaptive_ticker":"models/tickers/adaptive_ticker","./basic_ticker":"models/tickers/basic_ticker","./categorical_ticker":"models/tickers/categorical_ticker","./composite_ticker":"models/tickers/composite_ticker","./continuous_ticker":"models/tickers/continuous_ticker","./datetime_ticker":"models/tickers/datetime_ticker","./days_ticker":"models/tickers/days_ticker","./fixed_ticker":"models/tickers/fixed_ticker","./log_ticker":"models/tickers/log_ticker","./mercator_ticker":"models/tickers/mercator_ticker","./months_ticker":"models/tickers/months_ticker","./single_interval_ticker":"models/tickers/single_interval_ticker","./ticker":"models/tickers/ticker","./years_ticker":"models/tickers/years_ticker"}],"models/tickers/log_ticker":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/util/array"),s=t("./adaptive_ticker");r.LogTicker=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="LogTicker",e.override({mantissas:[1,5]}),e.prototype.get_ticks_no_defaults=function(t,e,r,n){var o,s,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k,M,j,S,T,O,P,A,E,z,C,N,D,I;if(P=this.num_minor_ticks,T=[],o=this.base,k=Math.log(t)/Math.log(o),w=Math.log(e)/Math.log(o),x=w-k,isFinite(x)){if(x<2){if(_=this.get_interval(t,e,n),z=Math.floor(t/_),s=Math.ceil(e/_),u=i.range(z,s+1),D=function(){var t,e,r;for(r=[],t=0,e=u.length;t<e;t++)l=u[t],0!==l&&r.push(l*_);return r}(),D=D.filter(function(r){return t<=r&&r<=e}),P>0&&D.length>0){for(j=_/P,S=function(){var t,e,r;for(r=[],c=t=0,e=P;0<=e?t<e:t>e;c=0<=e?++t:--t)r.push(c*j);return r}(),E=S.slice(1,+S.length+1||9e9),p=0,f=E.length;p<f;p++)I=E[p],T.push(D[0]-I);for(h=0,m=D.length;h<m;h++)for(N=D[h],d=0,y=S.length;d<y;d++)I=S[d],T.push(N+I)}}else if(C=Math.ceil(.999999*k),a=Math.floor(1.000001*w),_=Math.ceil((a-C)/9),D=i.range(C,a+1,_),D=D.map(function(t){return Math.pow(o,t)}),D=D.filter(function(r){return t<=r&&r<=e}),P>0&&D.length>0){for(j=Math.pow(o,_)/P,S=function(){var t,e,r;for(r=[],c=t=1,e=P;1<=e?t<=e:t>=e;c=1<=e?++t:--t)r.push(c*j);return r}(),M=0,g=S.length;M<g;M++)I=S[M],T.push(D[0]/I);for(T.push(D[0]),O=0,v=D.length;O<v;O++)for(N=D[O],A=0,b=S.length;A<b;A++)I=S[A],T.push(N*I)}}else D=[];return{major:D,minor:T}},e}(s.AdaptiveTicker)},{"./adaptive_ticker":"models/tickers/adaptive_ticker","core/util/array":"core/util/array"}],"models/tickers/mercator_ticker":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./basic_ticker"),s=t("core/properties"),a=t("core/util/proj4");r.MercatorTicker=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="MercatorTicker",e.define({dimension:[s.LatLon]}),e.prototype.get_ticks_no_defaults=function(t,r,n,o){var i,s,l,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k,M,j,S,T,O,P,A,E,z,C,N;if(null==this.dimension)throw new Error("MercatorTicker.dimension not configured");if("lon"===this.dimension?(w=a.proj4(a.mercator).inverse([t,n]),v=w[0],y=w[1],x=a.proj4(a.mercator).inverse([r,n]),g=x[0],y=x[1]):(j=a.proj4(a.mercator).inverse([n,t]),y=j[0],v=j[1],S=a.proj4(a.mercator).inverse([n,r]),y=S[0],g=S[1]),b=e.__super__.get_ticks_no_defaults.call(this,v,g,n,o),N={major:[],minor:[]},"lon"===this.dimension){for(T=b.major,s=0,p=T.length;s<p;s++)C=T[s],O=a.proj4(a.mercator).forward([C,y]),m=O[0],i=O[1],N.major.push(m);for(P=b.minor,l=0,h=P.length;l<h;l++)C=P[l],A=a.proj4(a.mercator).forward([C,y]),m=A[0],i=A[1],N.minor.push(m)}else{for(E=b.major,u=0,d=E.length;u<d;u++)C=E[u],z=a.proj4(a.mercator).forward([y,C]),i=z[0],_=z[1],N.major.push(_);for(k=b.minor,c=0,f=k.length;c<f;c++)C=k[c],M=a.proj4(a.mercator).forward([y,C]),i=M[0],_=M[1],N.minor.push(_)}return N},e}(i.BasicTicker)},{"./basic_ticker":"models/tickers/basic_ticker","core/properties":"core/properties","core/util/proj4":"core/util/proj4"}],"models/tickers/months_ticker":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty,u=t("./single_interval_ticker"),c=t("./util"),_=t("core/properties"),p=t("core/util/array");o=c.copy_date,s=c.last_year_no_later_than,n=c.ONE_MONTH,i=function(t,e){var r,n,i,a;for(a=s(new Date(t)),i=s(new Date(e)),i.setUTCFullYear(i.getUTCFullYear()+1),n=[],r=a;;)if(n.push(o(r)),r.setUTCFullYear(r.getUTCFullYear()+1),r>i)break;return n},r.MonthsTicker=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.type="MonthsTicker",e.define({months:[_.Array,[]]}),e.prototype.initialize=function(t,r){var o,i;return e.__super__.initialize.call(this,t,r),i=this.months,o=i.length>1?(i[1]-i[0])*n:12*n,this.interval=o},e.prototype.get_ticks_no_defaults=function(t,e,r,n){var s,a,l,u,c,_,h,d;return d=i(t,e),c=this.months,_=function(t){return c.map(function(e){var r;return r=o(t),r.setUTCMonth(e),r})},u=p.concat(function(){var t,e,r;for(r=[],t=0,e=d.length;t<e;t++)a=d[t],r.push(_(a));return r}()),s=function(){var t,e,r;for(r=[],t=0,e=u.length;t<e;t++)l=u[t],r.push(l.getTime());return r}(),h=s.filter(function(r){return t<=r&&r<=e}),{major:h,minor:[]}},e}(u.SingleIntervalTicker)},{"./single_interval_ticker":"models/tickers/single_interval_ticker","./util":"models/tickers/util","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/tickers/single_interval_ticker":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./continuous_ticker"),s=t("core/properties");r.SingleIntervalTicker=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="SingleIntervalTicker",e.define({interval:[s.Number]}),e.getters({min_interval:function(){return this.interval},max_interval:function(){return this.interval}}),e.prototype.get_interval=function(t,e,r){return this.interval},e}(i.ContinuousTicker)},{"./continuous_ticker":"models/tickers/continuous_ticker","core/properties":"core/properties"}],"models/tickers/ticker":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("../../model"),s=t("core/util/array"),a=t("core/util/types");r.Ticker=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="Ticker",e.prototype.get_ticks=function(t,e,r,n,o){var i;return i=o.desired_n_ticks,this.get_ticks_no_defaults(t,e,n,this.desired_num_ticks)},e.prototype.get_ticks_no_defaults=function(t,e,r,n){var o,i,l,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k,M,j;if(c=this.get_interval(t,e,n),x=Math.floor(t/c),o=Math.ceil(e/c),l=a.isStrictNaN(x)||a.isStrictNaN(o)?[]:s.range(x,o+1),M=function(){var t,e,r;for(r=[],t=0,e=l.length;t<e;t++)i=l[t],r.push(i*c);return r}(),M=M.filter(function(r){return t<=r&&r<=e}),b=this.num_minor_ticks,v=[],b>0&&M.length>0){for(y=c/b,g=function(){var t,e,r;for(r=[],u=t=0,e=b;0<=e?t<e:t>e;u=0<=e?++t:--t)r.push(u*y);return r}(),w=g.slice(1,+g.length+1||9e9),_=0,d=w.length;_<d;_++)j=w[_],v.push(M[0]-j);for(p=0,f=M.length;p<f;p++)for(k=M[p],h=0,m=g.length;h<m;h++)j=g[h],v.push(k+j)}return{major:M,minor:v}},e}(i.Model)},{"../../model":"model","core/util/array":"core/util/array","core/util/types":"core/util/types"}],"models/tickers/util":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ONE_MILLI=1,r.ONE_SECOND=1e3,r.ONE_MINUTE=60*r.ONE_SECOND,r.ONE_HOUR=60*r.ONE_MINUTE,r.ONE_DAY=24*r.ONE_HOUR,r.ONE_MONTH=30*r.ONE_DAY,r.ONE_YEAR=365*r.ONE_DAY,r.copy_date=function(t){return new Date(t.getTime())},r.last_month_no_later_than=function(t){return t=r.copy_date(t),t.setUTCDate(1),t.setUTCHours(0),t.setUTCMinutes(0),t.setUTCSeconds(0),t.setUTCMilliseconds(0),t},r.last_year_no_later_than=function(t){return t=r.last_month_no_later_than(t),t.setUTCMonth(0),t}},{}],"models/tickers/years_ticker":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty,a=t("./basic_ticker"),l=t("./single_interval_ticker"),u=t("./util");o=u.last_year_no_later_than,n=u.ONE_YEAR,r.YearsTicker=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.type="YearsTicker",e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this.interval=n,this.basic_ticker=new a.BasicTicker({num_minor_ticks:0})},e.prototype.get_ticks_no_defaults=function(t,e,r,n){var i,s,a,l,u,c;return a=o(new Date(t)).getUTCFullYear(),s=o(new Date(e)).getUTCFullYear(),c=this.basic_ticker.get_ticks_no_defaults(a,s,r,n).major,i=function(){var t,e,r;for(r=[],t=0,e=c.length;t<e;t++)u=c[t],r.push(Date.UTC(u,0,1));return r}(),l=i.filter(function(r){return t<=r&&r<=e}),{major:l,minor:[]}},e}(l.SingleIntervalTicker)},{"./basic_ticker":"models/tickers/basic_ticker","./single_interval_ticker":"models/tickers/single_interval_ticker","./util":"models/tickers/util"}],"models/tiles/bbox_tile_source":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./mercator_tile_source"),s=t("core/properties");r.BBoxTileSource=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="BBoxTileSource",e.define({use_latlon:[s.Bool,!1]}),e.prototype.get_image_url=function(t,e,r){var n,o,i,s,a,l,u;return n=this.string_lookup_replace(this.url,this.extra_url_vars),this.use_latlon?(o=this.get_tile_geographic_bounds(t,e,r),a=o[0],u=o[1],s=o[2],l=o[3]):(i=this.get_tile_meter_bounds(t,e,r),a=i[0],u=i[1],s=i[2],l=i[3]),n.replace("{XMIN}",a).replace("{YMIN}",u).replace("{XMAX}",s).replace("{YMAX}",l)},e}(i.MercatorTileSource)},{"./mercator_tile_source":"models/tiles/mercator_tile_source","core/properties":"core/properties"}],"models/tiles/dynamic_image_renderer":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=t("../renderers/renderer"),a=t("core/logging"),l=t("core/properties");r.DynamicImageView=function(t){function e(){return this._on_image_error=n(this._on_image_error,this),this._on_image_load=n(this._on_image_load,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),this.connect(this.model.change,function(){return this.request_render()})},e.prototype.get_extent=function(){return[this.x_range.start,this.y_range.start,this.x_range.end,this.y_range.end]},e.prototype._set_data=function(){return this.map_plot=this.plot_view.model.plot,this.map_canvas=this.plot_view.canvas_view.ctx,this.map_frame=this.plot_view.frame,this.x_range=this.map_plot.x_range,this.y_range=this.map_plot.y_range,this.lastImage=void 0,this.extent=this.get_extent()},e.prototype._map_data=function(){return this.initial_extent=this.get_extent()},e.prototype._on_image_load=function(t){var e;if(e=t.target.image_data,e.img=t.target,e.loaded=!0,this.lastImage=e,this.get_extent().join(":")===e.cache_key)return this.request_render()},e.prototype._on_image_error=function(t){var e;return a.logger.error("Error loading image: "+t.target.src),e=t.target.image_data,this.model.image_source.remove_image(e)},e.prototype._create_image=function(t){var e;return e=new Image,e.onload=this._on_image_load,e.onerror=this._on_image_error,e.alt="",e.image_data={bounds:t,loaded:!1,cache_key:t.join(":")},this.model.image_source.add_image(e.image_data),e.src=this.model.image_source.get_image_url(t[0],t[1],t[2],t[3],Math.ceil(this.map_frame._height.value),Math.ceil(this.map_frame._width.value)),e},e.prototype.render=function(t,e,r){var n,o;return null==this.map_initialized&&(this._set_data(),this._map_data(),this.map_initialized=!0),n=this.get_extent(),this.render_timer&&clearTimeout(this.render_timer),o=this.model.image_source.images[n.join(":")],null!=o&&o.loaded?void this._draw_image(n.join(":")):(null!=this.lastImage&&this._draw_image(this.lastImage.cache_key),null==o?this.render_timer=setTimeout(function(t){return function(){return t._create_image(n)}}(this),125):void 0)},e.prototype._draw_image=function(t){var e,r,n,o,i,s,a,l,u,c,_;if(e=this.model.image_source.images[t],null!=e)return this.map_canvas.save(),this._set_rect(),this.map_canvas.globalAlpha=this.model.alpha,r=this.plot_view.frame.map_to_screen([e.bounds[0]],[e.bounds[3]],this.plot_view.canvas),l=r[0],_=r[1],n=this.plot_view.frame.map_to_screen([e.bounds[2]],[e.bounds[1]],this.plot_view.canvas),a=n[0],c=n[1],l=l[0],_=_[0],a=a[0],c=c[0],i=a-l,o=c-_,s=l,u=_,this.map_canvas.drawImage(e.img,s,u,i,o),this.map_canvas.restore()},e.prototype._set_rect=function(){var t,e,r,n,o;return r=this.plot_model.plot.properties.outline_line_width.value(),e=this.plot_view.canvas.vx_to_sx(this.map_frame._left.value)+r/2,n=this.plot_view.canvas.vy_to_sy(this.map_frame._top.value)+r/2,o=this.map_frame._width.value-r,t=this.map_frame._height.value-r,this.map_canvas.rect(e,n,o,t),this.map_canvas.clip()},e}(s.RendererView),r.DynamicImageRenderer=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.default_view=r.DynamicImageView,e.prototype.type="DynamicImageRenderer",e.define({alpha:[l.Number,1],image_source:[l.Instance],render_parents:[l.Bool,!0]}),e.override({level:"underlay"}),e}(s.Renderer)},{"../renderers/renderer":"models/renderers/renderer","core/logging":"core/logging","core/properties":"core/properties"}],"models/tiles/image_pool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ImagePool=function(){function t(){this.images=[]}return t.prototype.pop=function(){var t;return t=this.images.pop(),null!=t?t:new Image},t.prototype.push=function(t){if(!(this.images.length>50))return t.constructor===Array?Array.prototype.push.apply(this.images,t):this.images.push(t)},t}()},{}],"models/tiles/image_source":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/properties"),s=t("../../model");r.ImageSource=function(t){function e(t){null==t&&(t={}),e.__super__.constructor.apply(this,arguments),this.images={},this.normalize_case()}return n(e,t),e.prototype.type="ImageSource",e.define({url:[i.String,""],extra_url_vars:[i.Any,{}]}),e.prototype.normalize_case=function(){"Note: should probably be refactored into subclasses.";var t;return t=this.url,t=t.replace("{xmin}","{XMIN}"),t=t.replace("{ymin}","{YMIN}"),t=t.replace("{xmax}","{XMAX}"),t=t.replace("{ymax}","{YMAX}"),t=t.replace("{height}","{HEIGHT}"),t=t.replace("{width}","{WIDTH}"),this.url=t},e.prototype.string_lookup_replace=function(t,e){var r,n,o;n=t;for(r in e)o=e[r],n=n.replace("{"+r+"}",o.toString());return n},e.prototype.add_image=function(t){return this.images[t.cache_key]=t},e.prototype.remove_image=function(t){return delete this.images[t.cache_key]},e.prototype.get_image_url=function(t,e,r,n,o,i){var s;return s=this.string_lookup_replace(this.url,this.extra_url_vars),s.replace("{XMIN}",t).replace("{YMIN}",e).replace("{XMAX}",r).replace("{YMAX}",n).replace("{WIDTH}",i).replace("{HEIGHT}",o)},e}(s.Model)},{"../../model":"model","core/properties":"core/properties"}],"models/tiles/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./bbox_tile_source");r.BBoxTileSource=n.BBoxTileSource;var o=t("./dynamic_image_renderer");r.DynamicImageRenderer=o.DynamicImageRenderer;var i=t("./image_source");r.ImageSource=i.ImageSource;var s=t("./mercator_tile_source");r.MercatorTileSource=s.MercatorTileSource;var a=t("./quadkey_tile_source");r.QUADKEYTileSource=a.QUADKEYTileSource;var l=t("./tile_renderer");r.TileRenderer=l.TileRenderer;var u=t("./tile_source");r.TileSource=u.TileSource;var c=t("./tms_tile_source");r.TMSTileSource=c.TMSTileSource;var _=t("./wmts_tile_source");r.WMTSTileSource=_.WMTSTileSource},{"./bbox_tile_source":"models/tiles/bbox_tile_source","./dynamic_image_renderer":"models/tiles/dynamic_image_renderer","./image_source":"models/tiles/image_source","./mercator_tile_source":"models/tiles/mercator_tile_source","./quadkey_tile_source":"models/tiles/quadkey_tile_source","./tile_renderer":"models/tiles/tile_renderer","./tile_source":"models/tiles/tile_source","./tms_tile_source":"models/tiles/tms_tile_source","./wmts_tile_source":"models/tiles/wmts_tile_source"}],"models/tiles/mercator_tile_source":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},s=t("./tile_source"),a=t("core/properties");r.MercatorTileSource=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="MercatorTileSource",e.define({wrap_around:[a.Bool,!0]}),e.override({x_origin_offset:20037508.34,y_origin_offset:20037508.34,initial_resolution:156543.03392804097}),e.prototype.initialize=function(t){var r;return e.__super__.initialize.call(this,t),this._resolutions=function(){var t,e;for(e=[],r=t=0;t<=30;r=++t)e.push(this.get_resolution(r));return e}.call(this)},e.prototype._computed_initial_resolution=function(){return null!=this.initial_resolution?this.initial_resolution:2*Math.PI*6378137/this.tile_size},e.prototype.is_valid_tile=function(t,e,r){return!(!this.wrap_around&&(t<0||t>=Math.pow(2,r)))&&!(e<0||e>=Math.pow(2,r))},e.prototype.retain_children=function(t){var e,r,n,o,i,s,a;o=t.quadkey,n=o.length,r=n+3,i=this.tiles,s=[];for(e in i)a=i[e],0===a.quadkey.indexOf(o)&&a.quadkey.length>n&&a.quadkey.length<=r?s.push(a.retain=!0):s.push(void 0);return s},e.prototype.retain_neighbors=function(t){var e,r,n,o,s,a,l,u,c,_,p,h,d,f,m;r=4,s=t.tile_coords,p=s[0],h=s[1],d=s[2],n=function(){var t,e,n,o;for(o=[],f=t=e=p-r,n=p+r;e<=n?t<=n:t>=n;f=e<=n?++t:--t)o.push(f);return o}(),o=function(){var t,e,n,o;for(o=[],m=t=e=h-r,n=h+r;e<=n?t<=n:t>=n;m=e<=n?++t:--t)o.push(m);return o}(),a=this.tiles,c=[];for(e in a)_=a[e],_.tile_coords[2]===d&&(l=_.tile_coords[0],i.call(n,l)>=0)&&(u=_.tile_coords[1],i.call(o,u)>=0)?c.push(_.retain=!0):c.push(void 0);return c},e.prototype.retain_parents=function(t){var e,r,n,o,i;r=t.quadkey,n=this.tiles,o=[];for(e in n)i=n[e],o.push(i.retain=0===r.indexOf(i.quadkey));return o},e.prototype.children_by_tile_xyz=function(t,e,r){var n,o,i,s,a,l,u,c,_;for(_=this.calculate_world_x_by_tile_xyz(t,e,r),0!==_&&(l=this.normalize_xyz(t,e,r),t=l[0],e=l[1],r=l[2]),a=this.tile_xyz_to_quadkey(t,e,r),o=[],i=s=0;s<=3;i=s+=1)u=this.quadkey_to_tile_xyz(a+i.toString()),t=u[0],e=u[1],r=u[2],0!==_&&(c=this.denormalize_xyz(t,e,r,_),t=c[0],e=c[1],r=c[2]),n=this.get_tile_meter_bounds(t,e,r),null!=n&&o.push([t,e,r,n]);return o},e.prototype.parent_by_tile_xyz=function(t,e,r){var n,o;return o=this.tile_xyz_to_quadkey(t,e,r),n=o.substring(0,o.length-1),this.quadkey_to_tile_xyz(n)},e.prototype.get_resolution=function(t){return this._computed_initial_resolution()/Math.pow(2,t)},e.prototype.get_resolution_by_extent=function(t,e,r){var n,o;return n=(t[2]-t[0])/r,o=(t[3]-t[1])/e,[n,o]},e.prototype.get_level_by_extent=function(t,e,r){var n,o,i,s,a,l,u,c;for(u=(t[2]-t[0])/r,c=(t[3]-t[1])/e,l=Math.max(u,c),n=0,a=this._resolutions,o=0,i=a.length;o<i;o++){if(s=a[o],l>s){if(0===n)return 0;if(n>0)return n-1}n+=1}},e.prototype.get_closest_level_by_extent=function(t,e,r){var n,o,i,s,a;return s=(t[2]-t[0])/r,a=(t[3]-t[1])/e,o=Math.max(s,a),i=this._resolutions,n=this._resolutions.reduce(function(t,e){return Math.abs(e-o)<Math.abs(t-o)?e:t}),this._resolutions.indexOf(n)},e.prototype.snap_to_zoom=function(t,e,r,n){var o,i,s,a,l,u,c,_,p;return o=this._resolutions[n],i=r*o,s=e*o,u=t[0],p=t[1],l=t[2],_=t[3],a=(i-(l-u))/2,c=(s-(_-p))/2,[u-a,p-c,l+a,_+c]},e.prototype.tms_to_wmts=function(t,e,r){"Note this works both ways";return[t,Math.pow(2,r)-1-e,r]},e.prototype.wmts_to_tms=function(t,e,r){"Note this works both ways";return[t,Math.pow(2,r)-1-e,r]},e.prototype.pixels_to_meters=function(t,e,r){var n,o,i;return i=this.get_resolution(r),n=t*i-this.x_origin_offset,o=e*i-this.y_origin_offset,[n,o];
},e.prototype.meters_to_pixels=function(t,e,r){var n,o,i;return i=this.get_resolution(r),n=(t+this.x_origin_offset)/i,o=(e+this.y_origin_offset)/i,[n,o]},e.prototype.pixels_to_tile=function(t,e){var r,n;return r=Math.ceil(t/parseFloat(this.tile_size)),r=0===r?r:r-1,n=Math.max(Math.ceil(e/parseFloat(this.tile_size))-1,0),[r,n]},e.prototype.pixels_to_raster=function(t,e,r){var n;return n=this.tile_size<<r,[t,n-e]},e.prototype.meters_to_tile=function(t,e,r){var n,o,i;return i=this.meters_to_pixels(t,e,r),n=i[0],o=i[1],this.pixels_to_tile(n,o)},e.prototype.get_tile_meter_bounds=function(t,e,r){var n,o,i,s,a,l;return n=this.pixels_to_meters(t*this.tile_size,e*this.tile_size,r),s=n[0],l=n[1],o=this.pixels_to_meters((t+1)*this.tile_size,(e+1)*this.tile_size,r),i=o[0],a=o[1],null!=s&&null!=l&&null!=i&&null!=a?[s,l,i,a]:void 0},e.prototype.get_tile_geographic_bounds=function(t,e,r){var n,o,i,s,a,l;return n=this.get_tile_meter_bounds(t,e,r),l=this.utils.meters_extent_to_geographic(n),a=l[0],s=l[1],i=l[2],o=l[3],[a,s,i,o]},e.prototype.get_tiles_by_extent=function(t,e,r){var n,o,i,s,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w;for(null==r&&(r=1),v=t[0],w=t[1],g=t[2],b=t[3],i=this.meters_to_tile(v,w,e),d=i[0],y=i[1],s=this.meters_to_tile(g,b,e),h=s[0],m=s[1],d-=r,y-=r,h+=r,m+=r,_=[],f=n=a=m,l=y;n>=l;f=n+=-1)for(p=o=u=d,c=h;o<=c;p=o+=1)this.is_valid_tile(p,f,e)&&_.push([p,f,e,this.get_tile_meter_bounds(p,f,e)]);return _=this.sort_tiles_from_center(_,[d,y,h,m])},e.prototype.quadkey_to_tile_xyz=function(t){"Computes tile x, y and z values based on quadKey.";var e,r,n,o,i,s,a,l;for(i=0,s=0,a=t.length,e=r=o=a;r>0;e=r+=-1)switch(l=t.charAt(a-e),n=1<<e-1,l){case"0":continue;case"1":i|=n;break;case"2":s|=n;break;case"3":i|=n,s|=n;break;default:throw new TypeError("Invalid Quadkey: "+t)}return[i,s,a]},e.prototype.tile_xyz_to_quadkey=function(t,e,r){"Computes quadkey value based on tile x, y and z values.";var n,o,i,s,a,l;for(a="",o=i=l=r;i>0;o=i+=-1)n=0,s=1<<o-1,0!==(t&s)&&(n+=1),0!==(e&s)&&(n+=2),a+=n.toString();return a},e.prototype.children_by_tile_xyz=function(t,e,r){var n,o,i,s,a,l;for(a=this.tile_xyz_to_quadkey(t,e,r),o=[],i=s=0;s<=3;i=s+=1)l=this.quadkey_to_tile_xyz(a+i.toString()),t=l[0],e=l[1],r=l[2],n=this.get_tile_meter_bounds(t,e,r),null!=n&&o.push([t,e,r,n]);return o},e.prototype.parent_by_tile_xyz=function(t,e,r){var n,o;return o=this.tile_xyz_to_quadkey(t,e,r),n=o.substring(0,o.length-1),this.quadkey_to_tile_xyz(n)},e.prototype.get_closest_parent_by_tile_xyz=function(t,e,r){var n,o,i,s,a;for(a=this.calculate_world_x_by_tile_xyz(t,e,r),o=this.normalize_xyz(t,e,r),t=o[0],e=o[1],r=o[2],n=this.tile_xyz_to_quadkey(t,e,r);n.length>0;)if(n=n.substring(0,n.length-1),i=this.quadkey_to_tile_xyz(n),t=i[0],e=i[1],r=i[2],s=this.denormalize_xyz(t,e,r,a),t=s[0],e=s[1],r=s[2],this.tile_xyz_to_key(t,e,r)in this.tiles)return[t,e,r];return[0,0,0]},e.prototype.normalize_xyz=function(t,e,r){var n;return this.wrap_around?(n=Math.pow(2,r),[(t%n+n)%n,e,r]):[t,e,r]},e.prototype.denormalize_xyz=function(t,e,r,n){return[t+n*Math.pow(2,r),e,r]},e.prototype.denormalize_meters=function(t,e,r,n){return[t+2*n*Math.PI*6378137,e]},e.prototype.calculate_world_x_by_tile_xyz=function(t,e,r){return Math.floor(t/Math.pow(2,r))},e}(s.TileSource)},{"./tile_source":"models/tiles/tile_source","core/properties":"core/properties"}],"models/tiles/quadkey_tile_source":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./mercator_tile_source");r.QUADKEYTileSource=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="QUADKEYTileSource",e.prototype.get_image_url=function(t,e,r){var n,o,i;return n=this.string_lookup_replace(this.url,this.extra_url_vars),i=this.tms_to_wmts(t,e,r),t=i[0],e=i[1],r=i[2],o=this.tile_xyz_to_quadkey(t,e,r),n.replace("{Q}",o)},e}(i.MercatorTileSource)},{"./mercator_tile_source":"models/tiles/mercator_tile_source"}],"models/tiles/tile_renderer":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},a=t("./image_pool"),l=t("./wmts_tile_source"),u=t("../renderers/renderer"),c=t("core/dom"),_=t("core/properties"),p=t("core/util/types");r.TileRendererView=function(t){function e(){return this._update=n(this._update,this),this._prefetch_tiles=n(this._prefetch_tiles,this),this._on_tile_error=n(this._on_tile_error,this),this._on_tile_cache_load=n(this._on_tile_cache_load,this),this._on_tile_load=n(this._on_tile_load,this),this._add_attribution=n(this._add_attribution,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.initialize=function(t){return this.attributionEl=null,this._tiles=[],e.__super__.initialize.apply(this,arguments)},e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),this.connect(this.model.change,function(){return this.request_render()})},e.prototype.get_extent=function(){return[this.x_range.start,this.y_range.start,this.x_range.end,this.y_range.end]},e.prototype._set_data=function(){return this.pool=new a.ImagePool,this.map_plot=this.plot_model.plot,this.map_canvas=this.plot_view.canvas_view.ctx,this.map_frame=this.plot_model.frame,this.x_range=this.map_plot.x_range,this.y_range=this.map_plot.y_range,this.extent=this.get_extent(),this._last_height=void 0,this._last_width=void 0},e.prototype._add_attribution=function(){var t,e,r,n,o,i;if(t=this.model.tile_source.attribution,p.isString(t)&&t.length>0)return null==this.attributionEl&&(e=this.map_plot.outline_line_width,r=this.map_plot.min_border_bottom+e,i=this.map_frame._right.value-this.map_frame._width.value,n=this.map_frame._width.value-e,this.attributionEl=c.div({"class":"bk-tile-attribution",style:{position:"absolute",bottom:r+"px",right:i+"px","max-width":n+"px","background-color":"rgba(255,255,255,0.8)","font-size":"9pt","font-family":"sans-serif"}}),o=this.plot_view.canvas_view.events_el,o.appendChild(this.attributionEl)),this.attributionEl.innerHTML=t},e.prototype._map_data=function(){var t,e;return this.initial_extent=this.get_extent(),e=this.model.tile_source.get_level_by_extent(this.initial_extent,this.map_frame._height.value,this.map_frame._width.value),t=this.model.tile_source.snap_to_zoom(this.initial_extent,this.map_frame._height.value,this.map_frame._width.value,e),this.x_range.start=t[0],this.y_range.start=t[1],this.x_range.end=t[2],this.y_range.end=t[3],this._add_attribution()},e.prototype._on_tile_load=function(t){var e;return e=t.target.tile_data,e.img=t.target,e.current=!0,e.loaded=!0,this.request_render()},e.prototype._on_tile_cache_load=function(t){var e;return e=t.target.tile_data,e.img=t.target,e.loaded=!0,e.finished=!0,this.notify_finished()},e.prototype._on_tile_error=function(t){var e;return e=t.target.tile_data,e.finished=!0},e.prototype._create_tile=function(t,e,r,n,o){var i,s,a;return null==o&&(o=!1),i=this.model.tile_source.normalize_xyz(t,e,r),a=this.pool.pop(),o?a.onload=this._on_tile_cache_load:a.onload=this._on_tile_load,a.onerror=this._on_tile_error,a.alt="",a.tile_data={tile_coords:[t,e,r],normalized_coords:i,quadkey:this.model.tile_source.tile_xyz_to_quadkey(t,e,r),cache_key:this.model.tile_source.tile_xyz_to_key(t,e,r),bounds:n,loaded:!1,finished:!1,x_coord:n[0],y_coord:n[3]},this.model.tile_source.tiles[a.tile_data.cache_key]=a.tile_data,a.src=(s=this.model.tile_source).get_image_url.apply(s,i),this._tiles.push(a),a},e.prototype._enforce_aspect_ratio=function(){var t,e,r;return(this._last_height!==this.map_frame._height.value||this._last_width!==this.map_frame._width.value)&&(t=this.get_extent(),r=this.model.tile_source.get_level_by_extent(t,this.map_frame._height.value,this.map_frame._width.value),e=this.model.tile_source.snap_to_zoom(t,this.map_frame._height.value,this.map_frame._width.value,r),this.x_range.setv({start:e[0],end:e[2]}),this.y_range.setv({start:e[1],end:e[3]}),this.extent=e,this._last_height=this.map_frame._height.value,this._last_width=this.map_frame._width.value,!0)},e.prototype.has_finished=function(){var t,r,n,o;if(!e.__super__.has_finished.call(this))return!1;if(0===this._tiles.length)return!1;for(n=this._tiles,t=0,r=n.length;t<r;t++)if(o=n[t],!o.tile_data.finished)return!1;return!0},e.prototype.render=function(t,e,r){if(null==this.map_initialized&&(this._set_data(),this._map_data(),this.map_initialized=!0),!this._enforce_aspect_ratio())return this._update(),null!=this.prefetch_timer&&clearTimeout(this.prefetch_timer),this.prefetch_timer=setTimeout(this._prefetch_tiles,500),this.has_finished()?this.notify_finished():void 0},e.prototype._draw_tile=function(t){var e,r,n,o,i,s,a,l,u,c,_;if(_=this.model.tile_source.tiles[t],null!=_)return e=this.plot_view.frame.map_to_screen([_.bounds[0]],[_.bounds[3]],this.plot_view.canvas),a=e[0],c=e[1],r=this.plot_view.frame.map_to_screen([_.bounds[2]],[_.bounds[1]],this.plot_view.canvas),s=r[0],u=r[1],a=a[0],c=c[0],s=s[0],u=u[0],o=s-a,n=u-c,i=a,l=c,this.map_canvas.drawImage(_.img,i,l,o,n)},e.prototype._set_rect=function(){var t,e,r,n,o;return r=this.plot_model.plot.properties.outline_line_width.value(),e=this.plot_view.canvas.vx_to_sx(this.map_frame._left.value)+r/2,n=this.plot_view.canvas.vy_to_sy(this.map_frame._top.value)+r/2,o=this.map_frame._width.value-r,t=this.map_frame._height.value-r,this.map_canvas.rect(e,n,o,t),this.map_canvas.clip()},e.prototype._render_tiles=function(t){var e,r,n;for(this.map_canvas.save(),this._set_rect(),this.map_canvas.globalAlpha=this.model.alpha,e=0,r=t.length;e<r;e++)n=t[e],this._draw_tile(n);return this.map_canvas.restore()},e.prototype._prefetch_tiles=function(){var t,e,r,n,o,i,s,a,l,u,c,_,p,h,d,f,m,y,g,v;for(h=this.model.tile_source,a=this.get_extent(),l=this.map_frame._height.value,f=this.map_frame._width.value,v=this.model.tile_source.get_level_by_extent(a,l,f),d=this.model.tile_source.get_tiles_by_extent(a,v),_=[],p=u=0,c=Math.min(10,d.length);u<=c;p=u+=1)m=p[0],y=p[1],g=p[2],t=p[3],n=this.model.tile_source.children_by_tile_xyz(m,y,g),_.push(function(){var t,a,l;for(l=[],t=0,a=n.length;t<a;t++)e=n[t],o=e[0],i=e[1],s=e[2],r=e[3],h.tile_xyz_to_key(o,i,s)in h.tiles||l.push(this._create_tile(o,i,s,r,!0));return l}.call(this));return _},e.prototype._fetch_tiles=function(t){var e,r,n,o,i,s,a,l;for(o=[],r=0,n=t.length;r<n;r++)i=t[r],s=i[0],a=i[1],l=i[2],e=i[3],o.push(this._create_tile(s,a,l,e));return o},e.prototype._update=function(){var t,e,r,n,o,i,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k,M,j,S,T,O,P,A,E,z,C,N,D,I,F,B,R;for(z=this.model.tile_source,b=z.min_zoom,v=z.max_zoom,z.update(),c=this.get_extent(),R=this.extent[2]-this.extent[0]<c[2]-c[0],_=this.map_frame._height.value,N=this.map_frame._width.value,B=z.get_level_by_extent(c,_,N),P=!1,B<b?(c=this.extent,B=b,P=!0):B>v&&(c=this.extent,B=v,P=!0),P&&(this.x_range.setv({x_range:{start:c[0],end:c[2]}}),this.y_range.setv({start:c[1],end:c[3]}),this.extent=c),this.extent=c,C=z.get_tiles_by_extent(c,B),M=[],w=[],r=[],i=[],p=0,m=C.length;p<m;p++){if(A=C[p],D=A[0],I=A[1],F=A[2],t=A[3],f=z.tile_xyz_to_key(D,I,F),E=z.tiles[f],null!=E&&E.loaded===!0)r.push(f);else if(this.model.render_parents&&(O=z.get_closest_parent_by_tile_xyz(D,I,F),j=O[0],S=O[1],T=O[2],x=z.tile_xyz_to_key(j,S,T),k=z.tiles[x],null!=k&&k.loaded&&s.call(M,x)<0&&M.push(x),R))for(i=z.children_by_tile_xyz(D,I,F),h=0,y=i.length;h<y;h++)e=i[h],a=e[0],l=e[1],u=e[2],n=e[3],o=z.tile_xyz_to_key(a,l,u),o in z.tiles&&i.push(o);null==E&&w.push(A)}for(this._render_tiles(M),this._render_tiles(i),this._render_tiles(r),d=0,g=r.length;d<g;d++)A=r[d],z.tiles[A].current=!0;return null!=this.render_timer&&clearTimeout(this.render_timer),this.render_timer=setTimeout(function(t){return function(){return t._fetch_tiles(w)}}(this),65)},e}(u.RendererView),r.TileRenderer=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.default_view=r.TileRendererView,e.prototype.type="TileRenderer",e.define({alpha:[_.Number,1],x_range_name:[_.String,"default"],y_range_name:[_.String,"default"],tile_source:[_.Instance,function(){return new l.WMTSTileSource}],render_parents:[_.Bool,!0]}),e.override({level:"underlay"}),e}(u.Renderer)},{"../renderers/renderer":"models/renderers/renderer","./image_pool":"models/tiles/image_pool","./wmts_tile_source":"models/tiles/wmts_tile_source","core/dom":"core/dom","core/properties":"core/properties","core/util/types":"core/util/types"}],"models/tiles/tile_source":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./image_pool"),s=t("./tile_utils"),a=t("core/logging"),l=t("core/properties"),u=t("../../model");r.TileSource=function(t){function e(t){null==t&&(t={}),e.__super__.constructor.apply(this,arguments),this.utils=new s.ProjectionUtils,this.pool=new i.ImagePool,this.tiles={},this.normalize_case()}return n(e,t),e.prototype.type="TileSource",e.define({url:[l.String,""],tile_size:[l.Number,256],max_zoom:[l.Number,30],min_zoom:[l.Number,0],extra_url_vars:[l.Any,{}],attribution:[l.String,""],x_origin_offset:[l.Number],y_origin_offset:[l.Number],initial_resolution:[l.Number]}),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.normalize_case()},e.prototype.string_lookup_replace=function(t,e){var r,n,o;n=t;for(r in e)o=e[r],n=n.replace("{"+r+"}",o.toString());return n},e.prototype.normalize_case=function(){"Note: should probably be refactored into subclasses.";var t;return t=this.url,t=t.replace("{x}","{X}"),t=t.replace("{y}","{Y}"),t=t.replace("{z}","{Z}"),t=t.replace("{q}","{Q}"),t=t.replace("{xmin}","{XMIN}"),t=t.replace("{ymin}","{YMIN}"),t=t.replace("{xmax}","{XMAX}"),t=t.replace("{ymax}","{YMAX}"),this.url=t},e.prototype.update=function(){var t,e,r,n;a.logger.debug("TileSource: tile cache count: "+Object.keys(this.tiles).length),e=this.tiles,r=[];for(t in e)n=e[t],n.current=!1,r.push(n.retain=!1);return r},e.prototype.tile_xyz_to_key=function(t,e,r){var n;return n=t+":"+e+":"+r},e.prototype.key_to_tile_xyz=function(t){var e;return function(){var r,n,o,i;for(o=t.split(":"),i=[],r=0,n=o.length;r<n;r++)e=o[r],i.push(parseInt(e));return i}()},e.prototype.sort_tiles_from_center=function(t,e){var r,n,o,i,s,a;return i=e[0],a=e[1],o=e[2],s=e[3],r=(o-i)/2+i,n=(s-a)/2+a,t.sort(function(t,e){var o,i;return o=Math.sqrt(Math.pow(r-t[0],2)+Math.pow(n-t[1],2)),i=Math.sqrt(Math.pow(r-e[0],2)+Math.pow(n-e[1],2)),o-i}),t},e.prototype.prune_tiles=function(){var t,e,r,n,o;e=this.tiles;for(t in e)o=e[t],o.retain=o.current||o.tile_coords[2]<3,o.current&&(this.retain_neighbors(o),this.retain_children(o),this.retain_parents(o));r=this.tiles,n=[];for(t in r)o=r[t],o.retain?n.push(void 0):n.push(this.remove_tile(t));return n},e.prototype.remove_tile=function(t){var e;if(e=this.tiles[t],null!=e)return this.pool.push(e.img),delete this.tiles[t]},e.prototype.get_image_url=function(t,e,r){var n;return n=this.string_lookup_replace(this.url,this.extra_url_vars),n.replace("{X}",t).replace("{Y}",e).replace("{Z}",r)},e.prototype.retain_neighbors=function(t){throw new Error("Not Implemented")},e.prototype.retain_parents=function(t){throw new Error("Not Implemented")},e.prototype.retain_children=function(t){throw new Error("Not Implemented")},e.prototype.tile_xyz_to_quadkey=function(t,e,r){throw new Error("Not Implemented")},e.prototype.quadkey_to_tile_xyz=function(t){throw new Error("Not Implemented")},e}(u.Model)},{"../../model":"model","./image_pool":"models/tiles/image_pool","./tile_utils":"models/tiles/tile_utils","core/logging":"core/logging","core/properties":"core/properties"}],"models/tiles/tile_utils":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("core/util/proj4");r.ProjectionUtils=function(){function t(){this.origin_shift=2*Math.PI*6378137/2}return t.prototype.geographic_to_meters=function(t,e){return n.proj4(n.wgs84,n.mercator,[t,e])},t.prototype.meters_to_geographic=function(t,e){return n.proj4(n.mercator,n.wgs84,[t,e])},t.prototype.geographic_extent_to_meters=function(t){var e,r,n,o,i,s;return o=t[0],s=t[1],n=t[2],i=t[3],e=this.geographic_to_meters(o,s),o=e[0],s=e[1],r=this.geographic_to_meters(n,i),n=r[0],i=r[1],[o,s,n,i]},t.prototype.meters_extent_to_geographic=function(t){var e,r,n,o,i,s;return o=t[0],s=t[1],n=t[2],i=t[3],e=this.meters_to_geographic(o,s),o=e[0],s=e[1],r=this.meters_to_geographic(n,i),n=r[0],i=r[1],[o,s,n,i]},t}()},{"core/util/proj4":"core/util/proj4"}],"models/tiles/tms_tile_source":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./mercator_tile_source");r.TMSTileSource=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="TMSTileSource",e.prototype.get_image_url=function(t,e,r){var n;return n=this.string_lookup_replace(this.url,this.extra_url_vars),n.replace("{X}",t).replace("{Y}",e).replace("{Z}",r)},e}(i.MercatorTileSource)},{"./mercator_tile_source":"models/tiles/mercator_tile_source"}],"models/tiles/wmts_tile_source":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./mercator_tile_source");r.WMTSTileSource=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="WMTSTileSource",e.prototype.get_image_url=function(t,e,r){var n,o;return n=this.string_lookup_replace(this.url,this.extra_url_vars),o=this.tms_to_wmts(t,e,r),t=o[0],e=o[1],r=o[2],n.replace("{X}",t).replace("{Y}",e).replace("{Z}",r)},e}(i.MercatorTileSource)},{"./mercator_tile_source":"models/tiles/mercator_tile_source"}],"models/tools/actions/action_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("../button_tool"),s=t("core/signaling");r.ActionToolButtonView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._clicked=function(){return this.model["do"].emit()},e}(i.ButtonToolButtonView),r.ActionToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.connect(this.model["do"],function(){return this.doit()})},e}(i.ButtonToolView),r.ActionTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this["do"]=new s.Signal(this,"do")},e}(i.ButtonTool)},{"../button_tool":"models/tools/button_tool","core/signaling":"core/signaling"}],"models/tools/actions/help_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./action_tool"),s=t("core/properties");r.HelpToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.doit=function(){return window.open(this.model.redirect)},e}(i.ActionToolView),r.HelpTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.HelpToolView,e.prototype.type="HelpTool",e.prototype.tool_name="Help",e.prototype.icon="bk-tool-icon-help",e.define({help_tooltip:[s.String,"Click the question mark to learn more about Bokeh plot tools."],redirect:[s.String,"http://bokeh.pydata.org/en/latest/docs/user_guide/tools.html#built-in-tools"]}),e.getters({tooltip:function(){return this.help_tooltip}}),e}(i.ActionTool)},{"./action_tool":"models/tools/actions/action_tool","core/properties":"core/properties"}],"models/tools/actions/redo_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./action_tool");r.RedoToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.connect(this.plot_view.state_changed,function(t){return function(){return t.model.disabled=!t.plot_view.can_redo()}}(this))},e.prototype.doit=function(){return this.plot_view.redo()},e}(i.ActionToolView),r.RedoTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.RedoToolView,e.prototype.type="RedoTool",e.prototype.tool_name="Redo",e.prototype.icon="bk-tool-icon-redo",e.override({disabled:!0}),e}(i.ActionTool)},{"./action_tool":"models/tools/actions/action_tool"}],"models/tools/actions/reset_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./action_tool"),s=t("core/properties");r.ResetToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.doit=function(){if(this.plot_view.clear_state(),this.plot_view.reset_range(),this.plot_view.reset_selection(),this.model.reset_size)return this.plot_view.reset_dimensions()},e}(i.ActionToolView),r.ResetTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.ResetToolView,e.prototype.type="ResetTool",e.prototype.tool_name="Reset",e.prototype.icon="bk-tool-icon-reset",e.define({reset_size:[s.Bool,!0]}),e}(i.ActionTool)},{"./action_tool":"models/tools/actions/action_tool","core/properties":"core/properties"}],"models/tools/actions/save_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./action_tool");r.SaveToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.doit=function(){return this.plot_view.save("bokeh_plot")},e}(i.ActionToolView),r.SaveTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.SaveToolView,e.prototype.type="SaveTool",e.prototype.tool_name="Save",e.prototype.icon="bk-tool-icon-save",e}(i.ActionTool)},{"./action_tool":"models/tools/actions/action_tool"}],"models/tools/actions/undo_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./action_tool");r.UndoToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.connect(this.plot_view.state_changed,function(t){return function(){return t.model.disabled=!t.plot_view.can_undo()}}(this))},e.prototype.doit=function(){return this.plot_view.undo()},e}(i.ActionToolView),r.UndoTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.UndoToolView,e.prototype.type="UndoTool",e.prototype.tool_name="Undo",e.prototype.icon="bk-tool-icon-undo",e.override({disabled:!0}),e}(i.ActionTool)},{"./action_tool":"models/tools/actions/action_tool"}],"models/tools/actions/zoom_in_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./action_tool"),s=t("core/util/zoom"),a=t("core/properties");r.ZoomInToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.doit=function(){var t,e,r,n,o;return e=this.plot_model.frame,t=this.model.dimensions,r="width"===t||"both"===t,n="height"===t||"both"===t,o=s.scale_range(e,this.model.factor,r,n),this.plot_view.push_state("zoom_out",{range:o}),this.plot_view.update_range(o,!1,!0),this.plot_view.interactive_timestamp=Date.now(),null},e}(i.ActionToolView),r.ZoomInTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.ZoomInToolView,e.prototype.type="ZoomInTool",e.prototype.tool_name="Zoom In",e.prototype.icon="bk-tool-icon-zoom-in",e.getters({tooltip:function(){return this._get_dim_tooltip(this.tool_name,this.dimensions)}}),e.define({factor:[a.Percent,.1],dimensions:[a.Dimensions,"both"]}),e}(i.ActionTool)},{"./action_tool":"models/tools/actions/action_tool","core/properties":"core/properties","core/util/zoom":"core/util/zoom"}],"models/tools/actions/zoom_out_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./action_tool"),s=t("core/util/zoom"),a=t("core/properties");r.ZoomOutToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.doit=function(){var t,e,r,n,o;return e=this.plot_model.frame,t=this.model.dimensions,r="width"===t||"both"===t,n="height"===t||"both"===t,o=s.scale_range(e,-this.model.factor,r,n),this.plot_view.push_state("zoom_out",{range:o}),this.plot_view.update_range(o,!1,!0),this.plot_view.interactive_timestamp=Date.now(),null},e}(i.ActionToolView),r.ZoomOutTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.ZoomOutToolView,e.prototype.type="ZoomOutTool",e.prototype.tool_name="Zoom Out",e.prototype.icon="bk-tool-icon-zoom-out",e.getters({tooltip:function(){return this._get_dim_tooltip(this.tool_name,this.dimensions)}}),e.define({factor:[a.Percent,.1],dimensions:[a.Dimensions,"both"]}),e}(i.ActionTool)},{"./action_tool":"models/tools/actions/action_tool","core/properties":"core/properties","core/util/zoom":"core/util/zoom"}],"models/tools/button_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/dom_view"),s=t("./tool"),a=t("core/dom"),l=t("core/properties");r.ButtonToolButtonView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.className="bk-toolbar-button",e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.connect(this.model.change,function(t){return function(){return t.render()}}(this)),this.el.addEventListener("click",function(t){return function(e){return t._clicked(e)}}(this)),this.render()},e.prototype.render=function(){var t,e;return a.empty(this.el),this.el.disabled=this.model.disabled,t=a.div({"class":["bk-btn-icon",this.model.icon]}),e=a.span({"class":"bk-tip"},this.model.tooltip),this.el.appendChild(t),this.el.appendChild(e)},e.prototype._clicked=function(t){},e}(i.DOMView),r.ButtonToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e}(s.ToolView),r.ButtonTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.icon=null,e.getters({tooltip:function(){return this.tool_name}}),e.internal({disabled:[l.Boolean,!1]}),e}(s.Tool)},{"./tool":"models/tools/tool","core/dom":"core/dom","core/dom_view":"core/dom_view","core/properties":"core/properties"}],"models/tools/gestures/box_select_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=t("./select_tool"),a=t("../../annotations/box_annotation"),l=t("core/properties");r.BoxSelectToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype._pan_start=function(t){var e;return e=this.plot_view.canvas,this._baseboint=[e.sx_to_vx(t.bokeh.sx),e.sy_to_vy(t.bokeh.sy)],null},e.prototype._pan=function(t){var e,r,n,o,i,s,a,l,u;return r=this.plot_view.canvas,n=[r.sx_to_vx(t.bokeh.sx),r.sy_to_vy(t.bokeh.sy)],i=this.plot_model.frame,o=this.model.dimensions,s=this.model._get_dim_limits(this._baseboint,n,i,o),l=s[0],u=s[1],this.model.overlay.update({left:l[0],right:l[1],top:u[1],bottom:u[0]}),this.model.select_every_mousemove&&(e=null!=(a=t.srcEvent.shiftKey)&&a,this._select(l,u,!1,e)),null},e.prototype._pan_end=function(t){var e,r,n,o,i,s,a,l,u;return r=this.plot_view.canvas,n=[r.sx_to_vx(t.bokeh.sx),r.sy_to_vy(t.bokeh.sy)],i=this.plot_model.frame,o=this.model.dimensions,s=this.model._get_dim_limits(this._baseboint,n,i,o),l=s[0],u=s[1],e=null!=(a=t.srcEvent.shiftKey)&&a,this._select(l,u,!0,e),this.model.overlay.update({left:null,right:null,top:null,bottom:null}),this._baseboint=null,this.plot_view.push_state("box_select",{selection:this.plot_view.get_selection()}),null},e.prototype._select=function(t,e,r,n){var o,i,s,a,l,u,c,_,p,h;c=t[0],_=t[1],p=e[0],h=e[1],null==n&&(n=!1),i={type:"rect",vx0:c,vx1:_,vy0:p,vy1:h},l=this.model._computed_renderers_by_data_source();for(o in l)a=l[o],u=a[0].data_source.selection_manager,u.select(this,function(){var t,e,r;for(r=[],t=0,e=a.length;t<e;t++)s=a[t],r.push(this.plot_view.renderer_views[s.id]);return r}.call(this),i,r,n);return null!=this.model.callback&&this._emit_callback(i),this._save_geometry(i,r,n),null},e.prototype._emit_callback=function(t){var e,r,n,o,i;n=this.model.computed_renderers[0],e=this.plot_model.canvas,r=this.plot_model.frame,t.sx0=e.vx_to_sx(t.vx0),t.sx1=e.vx_to_sx(t.vx1),t.sy0=e.vy_to_sy(t.vy0),t.sy1=e.vy_to_sy(t.vy1),o=r.xscales[n.x_range_name],i=r.yscales[n.y_range_name],t.x0=o.invert(t.vx0),t.x1=o.invert(t.vx1),t.y0=i.invert(t.vy0),t.y1=i.invert(t.vy1),this.model.callback.execute(this.model,{geometry:t})},e}(s.SelectToolView),n=function(){return new a.BoxAnnotation({level:"overlay",render_mode:"css",top_units:"screen",left_units:"screen",bottom_units:"screen",right_units:"screen",fill_color:{value:"lightgrey"},fill_alpha:{value:.5},line_color:{value:"black"},line_alpha:{value:1},line_width:{value:2},line_dash:{value:[4,4]}})},r.BoxSelectTool=function(t){function e(){
return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.default_view=r.BoxSelectToolView,e.prototype.type="BoxSelectTool",e.prototype.tool_name="Box Select",e.prototype.icon="bk-tool-icon-box-select",e.prototype.event_type="pan",e.prototype.default_order=30,e.define({dimensions:[l.Dimensions,"both"],select_every_mousemove:[l.Bool,!1],callback:[l.Instance],overlay:[l.Instance,n]}),e.getters({tooltip:function(){return this._get_dim_tooltip(this.tool_name,this.dimensions)}}),e}(s.SelectTool)},{"../../annotations/box_annotation":"models/annotations/box_annotation","./select_tool":"models/tools/gestures/select_tool","core/properties":"core/properties"}],"models/tools/gestures/box_zoom_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=t("./gesture_tool"),a=t("../../annotations/box_annotation"),l=t("core/properties");r.BoxZoomToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype._match_aspect=function(t,e,r){var n,o,i,s,a,l,u,c,_,p,h,d,f,m,y,g,v,b;return s=r.h_range.end,a=r.h_range.start,d=r.v_range.end,m=r.v_range.start,g=s-a,i=d-m,n=g/i,y=Math.abs(t[0]-e[0]),f=Math.abs(t[1]-e[1]),h=0===f?0:y/f,h>=n?(u=[1,h/n],v=u[0],b=u[1]):(c=[n/h,1],v=c[0],b=c[1]),t[0]<=e[0]?(l=t[0],_=t[0]+y*v,_>s&&(_=s)):(_=t[0],l=t[0]-y*v,l<a&&(l=a)),y=Math.abs(_-l),t[1]<=e[1]?(o=t[1],p=t[1]+y/n,p>d&&(p=d)):(p=t[1],o=t[1]-y/n,o<m&&(o=m)),f=Math.abs(p-o),t[0]<=e[0]?_=t[0]+n*f:l=t[0]-n*f,[[l,_],[o,p]]},e.prototype._pan_start=function(t){var e;return e=this.plot_view.canvas,this._baseboint=[e.sx_to_vx(t.bokeh.sx),e.sy_to_vy(t.bokeh.sy)],null},e.prototype._pan=function(t){var e,r,n,o,i,s,a,l;return e=this.plot_view.canvas,r=[e.sx_to_vx(t.bokeh.sx),e.sy_to_vy(t.bokeh.sy)],o=this.plot_model.frame,n=this.model.dimensions,this.model.match_aspect&&"both"===n?(i=this._match_aspect(this._baseboint,r,o),a=i[0],l=i[1]):(s=this.model._get_dim_limits(this._baseboint,r,o,n),a=s[0],l=s[1]),this.model.overlay.update({left:a[0],right:a[1],top:l[1],bottom:l[0]}),null},e.prototype._pan_end=function(t){var e,r,n,o,i,s,a,l;return e=this.plot_view.canvas,r=[e.sx_to_vx(t.bokeh.sx),e.sy_to_vy(t.bokeh.sy)],o=this.plot_model.frame,n=this.model.dimensions,this.model.match_aspect&&"both"===n?(i=this._match_aspect(this._baseboint,r,o),a=i[0],l=i[1]):(s=this.model._get_dim_limits(this._baseboint,r,o,n),a=s[0],l=s[1]),this._update(a,l),this.model.overlay.update({left:null,right:null,top:null,bottom:null}),this._baseboint=null,null},e.prototype._update=function(t,e){var r,n,o,i,s,a,l,u,c,_,p;if(!(Math.abs(t[1]-t[0])<=5||Math.abs(e[1]-e[0])<=5)){c={},o=this.plot_view.frame.xscales;for(n in o)l=o[n],i=l.v_invert(t,!0),u=i[0],r=i[1],c[n]={start:u,end:r};_={},s=this.plot_view.frame.yscales;for(n in s)l=s[n],a=l.v_invert(e,!0),u=a[0],r=a[1],_[n]={start:u,end:r};return p={xrs:c,yrs:_},this.plot_view.push_state("box_zoom",{range:p}),this.plot_view.update_range(p)}},e}(s.GestureToolView),n=function(){return new a.BoxAnnotation({level:"overlay",render_mode:"css",top_units:"screen",left_units:"screen",bottom_units:"screen",right_units:"screen",fill_color:{value:"lightgrey"},fill_alpha:{value:.5},line_color:{value:"black"},line_alpha:{value:1},line_width:{value:2},line_dash:{value:[4,4]}})},r.BoxZoomTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.default_view=r.BoxZoomToolView,e.prototype.type="BoxZoomTool",e.prototype.tool_name="Box Zoom",e.prototype.icon="bk-tool-icon-box-zoom",e.prototype.event_type="pan",e.prototype.default_order=20,e.getters({tooltip:function(){return this._get_dim_tooltip(this.tool_name,this.dimensions)}}),e.define({dimensions:[l.Dimensions,"both"],overlay:[l.Instance,n],match_aspect:[l.Bool,!1]}),e}(s.GestureTool)},{"../../annotations/box_annotation":"models/annotations/box_annotation","./gesture_tool":"models/tools/gestures/gesture_tool","core/properties":"core/properties"}],"models/tools/gestures/gesture_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("../button_tool");r.GestureToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e}(i.ButtonToolView),r.GestureTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.event_type=null,e.prototype.default_order=null,e}(i.ButtonTool)},{"../button_tool":"models/tools/button_tool"}],"models/tools/gestures/lasso_select_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=t("./select_tool"),a=t("../../annotations/poly_annotation"),l=t("core/properties");r.LassoSelectToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.connect(this.model.properties.active.change,function(){return this._active_change()}),this.data=null},e.prototype._active_change=function(){if(!this.model.active)return this._clear_overlay()},e.prototype._keyup=function(t){if(13===t.keyCode)return this._clear_overlay()},e.prototype._pan_start=function(t){var e,r,n;return e=this.plot_view.canvas,r=e.sx_to_vx(t.bokeh.sx),n=e.sy_to_vy(t.bokeh.sy),this.data={vx:[r],vy:[n]},null},e.prototype._pan=function(t){var e,r,n,o,i,s,a,l;if(r=this.plot_view.canvas,a=r.sx_to_vx(t.bokeh.sx),l=r.sy_to_vy(t.bokeh.sy),n=this.plot_model.frame.h_range,s=this.plot_model.frame.v_range,a>n.end&&(a=n.end),a<n.start&&(a=n.start),l>s.end&&(l=s.end),l<s.start&&(l=s.start),this.data.vx.push(a),this.data.vy.push(l),o=this.model.overlay,o.update({xs:this.data.vx,ys:this.data.vy}),this.model.select_every_mousemove)return e=null!=(i=t.srcEvent.shiftKey)&&i,this._select(this.data.vx,this.data.vy,!1,e)},e.prototype._pan_end=function(t){var e,r;return this._clear_overlay(),e=null!=(r=t.srcEvent.shiftKey)&&r,this._select(this.data.vx,this.data.vy,!0,e),this.plot_view.push_state("lasso_select",{selection:this.plot_view.get_selection()})},e.prototype._clear_overlay=function(){return this.model.overlay.update({xs:[],ys:[]})},e.prototype._select=function(t,e,r,n){var o,i,s,a,l,u;i={type:"poly",vx:t,vy:e},l=this.model._computed_renderers_by_data_source();for(o in l)a=l[o],u=a[0].data_source.selection_manager,u.select(this,function(){var t,e,r;for(r=[],t=0,e=a.length;t<e;t++)s=a[t],r.push(this.plot_view.renderer_views[s.id]);return r}.call(this),i,r,n);return null!=this.model.callback&&this._emit_callback(i),this._save_geometry(i,r,n),null},e.prototype._emit_callback=function(t){var e,r,n,o,i;n=this.model.computed_renderers[0],e=this.plot_model.canvas,r=this.plot_model.frame,t.sx=e.v_vx_to_sx(t.vx),t.sy=e.v_vy_to_sy(t.vy),o=r.xscales[n.x_range_name],i=r.yscales[n.y_range_name],t.x=o.v_invert(t.vx),t.y=i.v_invert(t.vy),this.model.callback.execute(this.model,{geometry:t})},e}(s.SelectToolView),n=function(){return new a.PolyAnnotation({level:"overlay",xs_units:"screen",ys_units:"screen",fill_color:{value:"lightgrey"},fill_alpha:{value:.5},line_color:{value:"black"},line_alpha:{value:1},line_width:{value:2},line_dash:{value:[4,4]}})},r.LassoSelectTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.default_view=r.LassoSelectToolView,e.prototype.type="LassoSelectTool",e.prototype.tool_name="Lasso Select",e.prototype.icon="bk-tool-icon-lasso-select",e.prototype.event_type="pan",e.prototype.default_order=12,e.define({select_every_mousemove:[l.Bool,!0],callback:[l.Instance],overlay:[l.Instance,n]}),e}(s.SelectTool)},{"../../annotations/poly_annotation":"models/annotations/poly_annotation","./select_tool":"models/tools/gestures/select_tool","core/properties":"core/properties"}],"models/tools/gestures/pan_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./gesture_tool"),s=t("core/properties");r.PanToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._pan_start=function(t){var e,r,n,o,i,s;return this.last_dx=0,this.last_dy=0,e=this.plot_view.canvas,r=this.plot_view.frame,i=e.sx_to_vx(t.bokeh.sx),s=e.sy_to_vy(t.bokeh.sy),r.contains(i,s)||(n=r.h_range,o=r.v_range,(i<n.start||i>n.end)&&(this.v_axis_only=!0),(s<o.start||s>o.end)&&(this.h_axis_only=!0)),this.plot_view.interactive_timestamp=Date.now()},e.prototype._pan=function(t){return this._update(t.deltaX,-t.deltaY),this.plot_view.interactive_timestamp=Date.now()},e.prototype._pan_end=function(t){if(this.h_axis_only=!1,this.v_axis_only=!1,null!=this.pan_info)return this.plot_view.push_state("pan",{range:this.pan_info})},e.prototype._update=function(t,e){var r,n,o,i,s,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k,M,j,S,T,O;o=this.plot_view.frame,l=t-this.last_dx,u=e-this.last_dy,i=o.h_range,w=i.start-l,b=i.end-l,S=o.v_range,j=S.start-u,M=S.end-u,r=this.model.dimensions,"width"!==r&&"both"!==r||this.v_axis_only?(g=i.start,v=i.end,f=0):(g=w,v=b,f=-l),"height"!==r&&"both"!==r||this.h_axis_only?(x=S.start,k=S.end,m=0):(x=j,k=M,m=u),this.last_dx=t,this.last_dy=e,T={},c=o.xscales;for(a in c)d=c[a],_=d.v_invert([g,v],!0),y=_[0],n=_[1],T[a]={start:y,end:n};O={},p=o.yscales;for(a in p)d=p[a],h=d.v_invert([x,k],!0),y=h[0],n=h[1],O[a]={start:y,end:n};return this.pan_info={xrs:T,yrs:O,sdx:f,sdy:m},this.plot_view.update_range(this.pan_info,s=!0),null},e}(i.GestureToolView),r.PanTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.PanToolView,e.prototype.type="PanTool",e.prototype.tool_name="Pan",e.prototype.event_type="pan",e.prototype.default_order=10,e.define({dimensions:[s.Dimensions,"both"]}),e.getters({tooltip:function(){return this._get_dim_tooltip("Pan",this.dimensions)},icon:function(){var t;return t=function(){switch(this.dimensions){case"both":return"pan";case"width":return"xpan";case"height":return"ypan"}}.call(this),"bk-tool-icon-"+t}}),e}(i.GestureTool)},{"./gesture_tool":"models/tools/gestures/gesture_tool","core/properties":"core/properties"}],"models/tools/gestures/poly_select_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=t("./select_tool"),a=t("../../annotations/poly_annotation"),l=t("core/properties"),u=t("core/util/array");r.PolySelectToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.connect(this.model.properties.active.change,function(){return this._active_change()}),this.data={vx:[],vy:[]}},e.prototype._active_change=function(){if(!this.model.active)return this._clear_data()},e.prototype._keyup=function(t){if(13===t.keyCode)return this._clear_data()},e.prototype._doubletap=function(t){var e,r;return e=null!=(r=t.srcEvent.shiftKey)&&r,this._select(this.data.vx,this.data.vy,!0,e),this._clear_data()},e.prototype._clear_data=function(){return this.data={vx:[],vy:[]},this.model.overlay.update({xs:[],ys:[]})},e.prototype._tap=function(t){var e,r,n;return e=this.plot_view.canvas,r=e.sx_to_vx(t.bokeh.sx),n=e.sy_to_vy(t.bokeh.sy),this.data.vx.push(r),this.data.vy.push(n),this.model.overlay.update({xs:u.copy(this.data.vx),ys:u.copy(this.data.vy)})},e.prototype._select=function(t,e,r,n){var o,i,s,a,l,u;i={type:"poly",vx:t,vy:e},l=this.model._computed_renderers_by_data_source();for(o in l)a=l[o],u=a[0].data_source.selection_manager,u.select(this,function(){var t,e,r;for(r=[],t=0,e=a.length;t<e;t++)s=a[t],r.push(this.plot_view.renderer_views[s.id]);return r}.call(this),i,r,n);return this._save_geometry(i,r,n),this.plot_view.push_state("poly_select",{selection:this.plot_view.get_selection()}),null},e}(s.SelectToolView),n=function(){return new a.PolyAnnotation({level:"overlay",xs_units:"screen",ys_units:"screen",fill_color:{value:"lightgrey"},fill_alpha:{value:.5},line_color:{value:"black"},line_alpha:{value:1},line_width:{value:2},line_dash:{value:[4,4]}})},r.PolySelectTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.default_view=r.PolySelectToolView,e.prototype.type="PolySelectTool",e.prototype.tool_name="Poly Select",e.prototype.icon="bk-tool-icon-polygon-select",e.prototype.event_type="tap",e.prototype.default_order=11,e.define({overlay:[l.Instance,n]}),e}(s.SelectTool)},{"../../annotations/poly_annotation":"models/annotations/poly_annotation","./select_tool":"models/tools/gestures/select_tool","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/tools/gestures/resize_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./gesture_tool"),s=t("core/dom");r.ResizeToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.className="bk-resize-popup",e.prototype.initialize=function(t){var r;return e.__super__.initialize.call(this,t),this.overlay=s.div(),r=this.plot_view.canvas_view.el,r.appendChild(this.overlay),s.hide(this.overlay),this.active=!1,null},e.prototype.activate=function(){return this.active=!0,this.render(),null},e.prototype.deactivate=function(){return this.active=!1,this.render(),null},e.prototype.render=function(t){var e,r,n,o;return this.active?(e=this.plot_view.canvas,r=this.plot_view.frame,n=e.vx_to_sx(r.h_range.end-40),o=e.vy_to_sy(r.v_range.start+40),this.overlay.style.position="absolute",this.overlay.style.top=o+"px",this.overlay.style.left=n+"px",s.show(this.overlay)):s.hide(this.overlay),this},e.prototype._pan_start=function(t){var e;return e=this.plot_view.canvas,this.ch=e._height.value,this.cw=e._width.value,this.plot_view.interactive_timestamp=Date.now(),null},e.prototype._pan=function(t){return this._update(t.deltaX,t.deltaY),this.plot_view.interactive_timestamp=Date.now(),null},e.prototype._pan_end=function(t){return this.plot_view.push_state("resize",{dimensions:{width:this.plot_view.canvas._width.value,height:this.plot_view.canvas._height.value}})},e.prototype._update=function(t,e){var r,n;n=this.cw+t,r=this.ch+e,n<100||r<100||this.plot_view.update_dimensions(n,r)},e}(i.GestureToolView),r.ResizeTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.ResizeToolView,e.prototype.type="ResizeTool",e.prototype.tool_name="Resize",e.prototype.icon="bk-tool-icon-resize",e.prototype.event_type="pan",e.prototype.default_order=40,e}(i.GestureTool)},{"./gesture_tool":"models/tools/gestures/gesture_tool","core/dom":"core/dom"}],"models/tools/gestures/select_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./gesture_tool"),s=t("../../renderers/glyph_renderer"),a=t("core/logging"),l=t("core/properties"),u=t("core/util/object");r.SelectToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._keyup=function(t){var e,r,n,o,i,s,a;if(27===t.keyCode){for(i=this.model.computed_renderers,s=[],r=0,n=i.length;r<n;r++)o=i[r],e=o.data_source,a=e.selection_manager,s.push(a.clear());return s}},e.prototype._save_geometry=function(t,e,r){var n,o,i,s,l,c,_,p;switch(n=u.clone(t),_=this.plot_view.frame.xscales["default"],p=this.plot_view.frame.yscales["default"],n.type){case"point":n.x=_.invert(n.vx),n.y=p.invert(n.vy);break;case"rect":n.x0=_.invert(n.vx0),n.y0=p.invert(n.vy0),n.x1=_.invert(n.vx1),n.y1=p.invert(n.vy1);break;case"poly":for(n.x=new Array(n.vx.length),n.y=new Array(n.vy.length),i=s=0,l=n.vx.length;0<=l?s<l:s>l;i=0<=l?++s:--s)n.x[i]=_.invert(n.vx[i]),n.y[i]=p.invert(n.vy[i]);break;default:a.logger.debug("Unrecognized selection geometry type: '"+n.type+"'")}return e&&(c=this.plot_model.plot.tool_events,r?(o=c.geometries,o.push(n)):o=[n],c.geometries=o),null},e}(i.GestureToolView),r.SelectTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.define({renderers:[l.Array,[]],names:[l.Array,[]]}),e.internal({multi_select_modifier:[l.String,"shift"]}),e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),this.connect(this.properties.renderers.change,function(){return this._computed_renderers=null}),this.connect(this.properties.names.change,function(){return this._computed_renderers=null}),this.connect(this.properties.plot.change,function(){return this._computed_renderers=null})},e.prototype._compute_renderers=function(){var t,e,r,n;return n=this.renderers,e=this.names,0===n.length&&(t=this.plot.renderers,n=function(){var e,n,o;for(o=[],e=0,n=t.length;e<n;e++)r=t[e],r instanceof s.GlyphRenderer&&o.push(r);return o}()),e.length>0&&(n=function(){var t,o,i;for(i=[],t=0,o=n.length;t<o;t++)r=n[t],e.indexOf(r.name)>=0&&i.push(r);return i}()),n},e.getters({computed_renderers:function(){return null==this._computed_renderers&&(this._computed_renderers=this._compute_renderers()),this._computed_renderers}}),e.prototype._computed_renderers_by_data_source=function(){var t,e,r,n,o;for(o={},n=this.computed_renderers,t=0,e=n.length;t<e;t++)r=n[t],r.data_source.id in o?o[r.data_source.id]=o[r.data_source.id].concat([r]):o[r.data_source.id]=[r];return o},e}(i.GestureTool)},{"../../renderers/glyph_renderer":"models/renderers/glyph_renderer","./gesture_tool":"models/tools/gestures/gesture_tool","core/logging":"core/logging","core/properties":"core/properties","core/util/object":"core/util/object"}],"models/tools/gestures/tap_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./select_tool"),s=t("core/properties"),a=t("core/util/types");r.TapToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._tap=function(t){var e,r,n,o,i;return r=this.plot_view.canvas,o=r.sx_to_vx(t.bokeh.sx),i=r.sy_to_vy(t.bokeh.sy),e=null!=(n=t.srcEvent.shiftKey)&&n,this._select(o,i,!0,e)},e.prototype._select=function(t,e,r,n){var o,i,s,l,u,c,_,p,h,d,f,m,y,g;if(c={type:"point",vx:t,vy:e},i=this.model.callback,this._save_geometry(c,r,n),s={geometries:this.plot_model.plot.tool_events.geometries},"select"===this.model.behavior){m=this.model._computed_renderers_by_data_source();for(o in m)f=m[o],u=f[0].data_source,y=u.selection_manager,l=y.select(this,function(){var t,e,r;for(r=[],t=0,e=f.length;t<e;t++)h=f[t],r.push(this.plot_view.renderer_views[h.id]);return r}.call(this),c,r,n),l&&null!=i&&(a.isFunction(i)?i(u,s):i.execute(u,s));this.plot_view.push_state("tap",{selection:this.plot_view.get_selection()})}else for(d=this.model.computed_renderers,_=0,p=d.length;_<p;_++)h=d[_],u=h.data_source,y=u.selection_manager,g=this.plot_view.renderer_views[h.id],l=y.inspect(this,g,c,{geometry:c}),l&&null!=i&&(a.isFunction(i)?i(u,s):i.execute(u,s));return null},e}(i.SelectToolView),r.TapTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.TapToolView,e.prototype.type="TapTool",e.prototype.tool_name="Tap",e.prototype.icon="bk-tool-icon-tap-select",e.prototype.event_type="tap",e.prototype.default_order=10,e.define({behavior:[s.String,"select"],callback:[s.Any]}),e}(i.SelectTool)},{"./select_tool":"models/tools/gestures/select_tool","core/properties":"core/properties","core/util/types":"core/util/types"}],"models/tools/gestures/wheel_pan_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./gesture_tool"),s=t("core/properties");r.WheelPanToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._scroll=function(t){var e;return e=this.model.speed*t.bokeh.delta,e>.9?e=.9:e<-.9&&(e=-.9),this._update_ranges(e)},e.prototype._update_ranges=function(t){var e,r,n,o,i,s,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w,x,k,M,j,S;switch(r=this.plot_model.frame,n=r.h_range,g=r.v_range,s=[n.start,n.end],b=s[0],v=s[1],a=[g.start,g.end],k=a[0],x=a[1],this.model.dimension){case"height":M=Math.abs(x-k),d=b,f=v,m=k+M*t,y=x+M*t;break;case"width":w=Math.abs(v-b),d=b-w*t,f=v-w*t,m=k,y=x}j={},l=r.xscales;for(o in l)p=l[o],u=p.v_invert([d,f],!0),h=u[0],e=u[1],j[o]={start:h,end:e};S={},c=r.yscales;for(o in c)p=c[o],_=p.v_invert([m,y],!0),h=_[0],e=_[1],S[o]={start:h,end:e};return i={xrs:j,yrs:S,factor:t},this.plot_view.push_state("wheel_pan",{range:i}),this.plot_view.update_range(i,!1,!0),this.plot_view.interactive_timestamp=Date.now(),null},e}(i.GestureToolView),r.WheelPanTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="WheelPanTool",e.prototype.default_view=r.WheelPanToolView,e.prototype.tool_name="Wheel Pan",e.prototype.icon="bk-tool-icon-wheel-pan",e.prototype.event_type="scroll",e.prototype.default_order=12,e.getters({tooltip:function(){return this._get_dim_tooltip(this.tool_name,this.dimension)}}),e.define({dimension:[s.Dimension,"width"]}),e.internal({speed:[s.Number,.001]}),e}(i.GestureTool)},{"./gesture_tool":"models/tools/gestures/gesture_tool","core/properties":"core/properties"}],"models/tools/gestures/wheel_zoom_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=t("./gesture_tool"),a=t("core/util/zoom"),l=t("core/properties");"undefined"!=typeof n&&null!==n||(n={}),r.WheelZoomToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype._pinch=function(t){var e;return e=t.scale>=1?20*(t.scale-1):-20/t.scale,t.bokeh.delta=e,this._scroll(t)},e.prototype._scroll=function(t){var e,r,n,o,i,s,l,u,c,_;return n=this.plot_model.frame,i=n.h_range,l=n.v_range,u=this.plot_view.canvas.sx_to_vx(t.bokeh.sx),c=this.plot_view.canvas.sy_to_vy(t.bokeh.sy),e=this.model.dimensions,o=("width"===e||"both"===e)&&i.min<u&&u<i.max,s=("height"===e||"both"===e)&&l.min<c&&c<l.max,r=this.model.speed*t.bokeh.delta,_=a.scale_range(n,r,o,s,{x:u,y:c}),this.plot_view.push_state("wheel_zoom",{range:_}),this.plot_view.update_range(_,!1,!0),this.plot_view.interactive_timestamp=Date.now(),null},e}(s.GestureToolView),r.WheelZoomTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.default_view=r.WheelZoomToolView,e.prototype.type="WheelZoomTool",e.prototype.tool_name="Wheel Zoom",e.prototype.icon="bk-tool-icon-wheel-zoom",e.prototype.event_type="ontouchstart"in window||navigator.maxTouchPoints>0?"pinch":"scroll",e.prototype.default_order=10,e.getters({tooltip:function(){return this._get_dim_tooltip(this.tool_name,this.dimensions)}}),e.define({dimensions:[l.Dimensions,"both"]}),e.internal({speed:[l.Number,1/600]}),e}(s.GestureTool)},{"./gesture_tool":"models/tools/gestures/gesture_tool","core/properties":"core/properties","core/util/zoom":"core/util/zoom"}],"models/tools/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./actions/action_tool");r.ActionTool=n.ActionTool;var o=t("./actions/help_tool");r.HelpTool=o.HelpTool;var i=t("./actions/redo_tool");r.RedoTool=i.RedoTool;var s=t("./actions/reset_tool");r.ResetTool=s.ResetTool;var a=t("./actions/save_tool");r.SaveTool=a.SaveTool;var l=t("./actions/undo_tool");r.UndoTool=l.UndoTool;var u=t("./actions/zoom_in_tool");r.ZoomInTool=u.ZoomInTool;var c=t("./actions/zoom_out_tool");r.ZoomOutTool=c.ZoomOutTool;var _=t("./button_tool");r.ButtonTool=_.ButtonTool;var p=t("./gestures/box_select_tool");r.BoxSelectTool=p.BoxSelectTool;var h=t("./gestures/box_zoom_tool");r.BoxZoomTool=h.BoxZoomTool;var d=t("./gestures/gesture_tool");r.GestureTool=d.GestureTool;var f=t("./gestures/lasso_select_tool");r.LassoSelectTool=f.LassoSelectTool;var m=t("./gestures/pan_tool");r.PanTool=m.PanTool;var y=t("./gestures/poly_select_tool");r.PolySelectTool=y.PolySelectTool;var g=t("./gestures/resize_tool");r.ResizeTool=g.ResizeTool;var v=t("./gestures/select_tool");r.SelectTool=v.SelectTool;var b=t("./gestures/tap_tool");r.TapTool=b.TapTool;var w=t("./gestures/wheel_pan_tool");r.WheelPanTool=w.WheelPanTool;var x=t("./gestures/wheel_zoom_tool");r.WheelZoomTool=x.WheelZoomTool;var k=t("./inspectors/crosshair_tool");r.CrosshairTool=k.CrosshairTool;var M=t("./inspectors/hover_tool");r.HoverTool=M.HoverTool;var j=t("./inspectors/inspect_tool");r.InspectTool=j.InspectTool;var S=t("./tool");r.Tool=S.Tool;var T=t("./tool_events");r.ToolEvents=T.ToolEvents;var O=t("./tool_proxy");r.ToolProxy=O.ToolProxy;var P=t("./toolbar");r.Toolbar=P.Toolbar;var A=t("./toolbar_base");r.ToolbarBase=A.ToolbarBase;var E=t("./toolbar_box");r.ToolbarBoxToolbar=E.ToolbarBoxToolbar;var z=t("./toolbar_box");r.ToolbarBox=z.ToolbarBox},{"./actions/action_tool":"models/tools/actions/action_tool","./actions/help_tool":"models/tools/actions/help_tool","./actions/redo_tool":"models/tools/actions/redo_tool","./actions/reset_tool":"models/tools/actions/reset_tool","./actions/save_tool":"models/tools/actions/save_tool","./actions/undo_tool":"models/tools/actions/undo_tool","./actions/zoom_in_tool":"models/tools/actions/zoom_in_tool","./actions/zoom_out_tool":"models/tools/actions/zoom_out_tool","./button_tool":"models/tools/button_tool","./gestures/box_select_tool":"models/tools/gestures/box_select_tool","./gestures/box_zoom_tool":"models/tools/gestures/box_zoom_tool","./gestures/gesture_tool":"models/tools/gestures/gesture_tool","./gestures/lasso_select_tool":"models/tools/gestures/lasso_select_tool","./gestures/pan_tool":"models/tools/gestures/pan_tool","./gestures/poly_select_tool":"models/tools/gestures/poly_select_tool","./gestures/resize_tool":"models/tools/gestures/resize_tool","./gestures/select_tool":"models/tools/gestures/select_tool","./gestures/tap_tool":"models/tools/gestures/tap_tool","./gestures/wheel_pan_tool":"models/tools/gestures/wheel_pan_tool","./gestures/wheel_zoom_tool":"models/tools/gestures/wheel_zoom_tool","./inspectors/crosshair_tool":"models/tools/inspectors/crosshair_tool","./inspectors/hover_tool":"models/tools/inspectors/hover_tool","./inspectors/inspect_tool":"models/tools/inspectors/inspect_tool","./tool":"models/tools/tool","./tool_events":"models/tools/tool_events","./tool_proxy":"models/tools/tool_proxy","./toolbar":"models/tools/toolbar","./toolbar_base":"models/tools/toolbar_base","./toolbar_box":"models/tools/toolbar_box"}],"models/tools/inspectors/crosshair_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./inspect_tool"),s=t("../../annotations/span"),a=t("core/properties"),l=t("core/util/object");r.CrosshairToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._move=function(t){var e,r,n,o;if(this.model.active)return r=this.plot_model.frame,e=this.plot_model.canvas,n=e.sx_to_vx(t.bokeh.sx),o=e.sy_to_vy(t.bokeh.sy),r.contains(n,o)||(n=o=null),this._update_spans(n,o)},e.prototype._move_exit=function(t){return this._update_spans(null,null)},e.prototype._update_spans=function(t,e){var r;if(r=this.model.dimensions,"width"!==r&&"both"!==r||(this.model.spans.width.computed_location=e),"height"===r||"both"===r)return this.model.spans.height.computed_location=t},e}(i.InspectToolView),r.CrosshairTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.default_view=r.CrosshairToolView,e.prototype.type="CrosshairTool",e.prototype.tool_name="Crosshair",e.prototype.icon="bk-tool-icon-crosshair",e.define({dimensions:[a.Dimensions,"both"],line_color:[a.Color,"black"],line_width:[a.Number,1],line_alpha:[a.Number,1]}),e.internal({location_units:[a.SpatialUnits,"screen"],render_mode:[a.RenderMode,"css"],spans:[a.Any]}),e.getters({tooltip:function(){return this._get_dim_tooltip("Crosshair",this.dimensions)},synthetic_renderers:function(){return l.values(this.spans)}}),e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this.spans={width:new s.Span({for_hover:!0,dimension:"width",render_mode:this.render_mode,location_units:this.location_units,line_color:this.line_color,line_width:this.line_width,line_alpha:this.line_alpha}),height:new s.Span({for_hover:!0,dimension:"height",render_mode:this.render_mode,location_units:this.location_units,line_color:this.line_color,line_width:this.line_width,line_alpha:this.line_alpha})}},e}(i.InspectTool)},{"../../annotations/span":"models/annotations/span","./inspect_tool":"models/tools/inspectors/inspect_tool","core/properties":"core/properties","core/util/object":"core/util/object"}],"models/tools/inspectors/hover_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=t("./inspect_tool"),a=t("../../annotations/tooltip"),l=t("../../renderers/glyph_renderer"),u=t("core/hittest"),c=t("core/util/templating"),_=t("core/dom"),p=t("core/properties"),h=t("core/util/object"),d=t("core/util/types"),f=t("core/build_views");n=function(t){var e,r,n,o,i;return"#"===t.substr(0,1)?t:(r=/(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(t),o=parseInt(r[2]),n=parseInt(r[3]),e=parseInt(r[4]),i=e|n<<8|o<<16,r[1]+"#"+i.toString(16))},r.HoverToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.ttviews={}},e.prototype.remove=function(){return f.remove_views(this.ttviews),e.__super__.remove.call(this)},e.prototype.connect_signals=function(){var t,r,n,o;for(e.__super__.connect_signals.call(this),o=this.computed_renderers,t=0,r=o.length;t<r;t++)n=o[t],this.connect(n.data_source.inspect,this._update);return this.connect(this.model.properties.renderers.change,function(){return this._computed_renderers=this._ttmodels=null}),this.connect(this.model.properties.names.change,function(){return this._computed_renderers=this._ttmodels=null}),this.connect(this.model.properties.plot.change,function(){
return this._computed_renderers=this._ttmodels=null}),this.connect(this.model.properties.tooltips.change,function(){return this._ttmodels=null})},e.prototype._compute_renderers=function(){var t,e,r,n;return n=this.model.renderers,e=this.model.names,0===n.length&&(t=this.model.plot.renderers,n=function(){var e,n,o;for(o=[],e=0,n=t.length;e<n;e++)r=t[e],r instanceof l.GlyphRenderer&&o.push(r);return o}()),e.length>0&&(n=function(){var t,o,i;for(i=[],t=0,o=n.length;t<o;t++)r=n[t],e.indexOf(r.name)>=0&&i.push(r);return i}()),n},e.prototype._compute_ttmodels=function(){var t,e,r,n,o,i,s,l,u,c,_;if(c={},u=this.model.tooltips,null!=u)for(s=this.computed_renderers,t=0,r=s.length;t<r;t++)i=s[t],l=new a.Tooltip({custom:d.isString(u)||d.isFunction(u),attachment:this.model.attachment,show_arrow:this.model.show_arrow}),c[i.id]=l;for(o=f.build_views(this.ttviews,h.values(c),{parent:this,plot_view:this.plot_view}),e=0,n=o.length;e<n;e++)_=o[e],_.connect_signals();return c},e.getters({computed_renderers:function(){return null==this._computed_renderers&&(this._computed_renderers=this._compute_renderers()),this._computed_renderers},ttmodels:function(){return null==this._ttmodels&&(this._ttmodels=this._compute_ttmodels()),this._ttmodels}}),e.prototype._clear=function(){var t,e,r,n;this._inspect(Infinity,Infinity),t=this.ttmodels,e=[];for(r in t)n=t[r],e.push(n.clear());return e},e.prototype._move=function(t){var e,r,n;if(this.model.active)return e=this.plot_view.canvas,r=e.sx_to_vx(t.bokeh.sx),n=e.sy_to_vy(t.bokeh.sy),this.plot_view.frame.contains(r,n)?this._inspect(r,n):this._clear()},e.prototype._move_exit=function(){return this._clear()},e.prototype._inspect=function(t,e,r){var n,o,i,s,a,l,u,c;for(n={type:"point",vx:t,vy:e},"mouse"===this.model.mode?n.type="point":(n.type="span","vline"===this.model.mode?n.direction="h":n.direction="v"),o=[],i=[],u=this.computed_renderers,s=0,a=u.length;s<a;s++)l=u[s],c=l.data_source.selection_manager,c.inspect(this,this.plot_view.renderer_views[l.id],n,{geometry:n});null!=this.model.callback&&this._emit_callback(n)},e.prototype._update=function(t){var e,r,n,o,i,s,a,l,c,_,p,d,f,m,y,g,v,b,w,x,k,M,j,S,T,O,P,A,E,z,C,N,D,I,F,B,R,L,V,G,q,U,Y,X,W,H,J,$,Q,Z,K,tt,et;if(y=t[0],W=t[1],L=t[2],_=t[3],j=t[4],d=j.geometry,this.model.active&&(H=null!=(S=this.ttmodels[L.model.id])?S:null,null!=H&&(H.clear(),null!==y["0d"].glyph||0!==y["1d"].indices.length))){for($=d.vx,Q=d.vy,e=this.plot_model.canvas,p=this.plot_model.frame,Y=e.vx_to_sx($),X=e.vy_to_sy(Q),K=p.xscales[L.model.x_range_name],et=p.yscales[L.model.y_range_name],Z=K.invert($),tt=et.invert(Q),z=y["0d"].indices,b=0,x=z.length;b<x;b++){switch(f=z[b],s=L.glyph._x[f+1],a=L.glyph._y[f+1],m=f,this.model.line_policy){case"interp":C=L.glyph.get_interpolation_hit(f,d),s=C[0],a=C[1],V=K.compute(s),G=et.compute(a);break;case"prev":V=e.sx_to_vx(L.glyph.sx[f]),G=e.sy_to_vy(L.glyph.sy[f]);break;case"next":V=e.sx_to_vx(L.glyph.sx[f+1]),G=e.sy_to_vy(L.glyph.sy[f+1]),m=f+1;break;case"nearest":r=L.glyph.sx[f],n=L.glyph.sy[f],l=u.dist_2_pts(r,n,Y,X),o=L.glyph.sx[f+1],i=L.glyph.sy[f+1],c=u.dist_2_pts(o,i,Y,X),l<c?(N=[r,n],q=N[0],U=N[1]):(D=[o,i],q=D[0],U=D[1],m=f+1),s=L.glyph._x[f],a=L.glyph._y[f],V=e.sx_to_vx(q),G=e.sy_to_vy(U);break;default:I=[$,Q],V=I[0],G=I[1]}J={index:m,x:Z,y:tt,vx:$,vy:Q,sx:Y,sy:X,data_x:s,data_y:a,rx:V,ry:G},H.add(V,G,this._render_tooltips(_,m,J))}for(F=y["1d"].indices,w=0,k=F.length;w<k;w++)if(f=F[w],h.isEmpty(y["2d"].indices))s=null!=(P=L.glyph._x)?P[f]:void 0,a=null!=(A=L.glyph._y)?A[f]:void 0,"snap_to_data"===this.model.point_policy?(M=L.glyph.get_anchor_point(this.model.anchor,f,[Y,X]),null==M&&(M=L.glyph.get_anchor_point("center",f,[Y,X])),V=e.sx_to_vx(M.x),G=e.sy_to_vy(M.y)):(E=[$,Q],V=E[0],G=E[1]),J={index:f,x:Z,y:tt,vx:$,vy:Q,sx:Y,sy:X,data_x:s,data_y:a},H.add(V,G,this._render_tooltips(_,f,J));else{B=y["2d"].indices;for(f in B){switch(g=B[f][0],s=L.glyph._xs[f][g],a=L.glyph._ys[f][g],v=g,this.model.line_policy){case"interp":R=L.glyph.get_interpolation_hit(f,g,d),s=R[0],a=R[1],V=K.compute(s),G=et.compute(a);break;case"prev":V=e.sx_to_vx(L.glyph.sxs[f][g]),G=e.sy_to_vy(L.glyph.sys[f][g]);break;case"next":V=e.sx_to_vx(L.glyph.sxs[f][g+1]),G=e.sy_to_vy(L.glyph.sys[f][g+1]),v=g+1;break;case"nearest":r=L.glyph.sxs[f][g],n=L.glyph.sys[f][g],l=u.dist_2_pts(r,n,Y,X),o=L.glyph.sxs[f][g+1],i=L.glyph.sys[f][g+1],c=u.dist_2_pts(o,i,Y,X),l<c?(T=[r,n],q=T[0],U=T[1]):(O=[o,i],q=O[0],U=O[1],v=g+1),s=L.glyph._xs[f][g],a=L.glyph._ys[f][g],V=e.sx_to_vx(q),G=e.sy_to_vy(U)}J={index:f,segment_index:v,x:Z,y:tt,vx:$,vy:Q,sx:Y,sy:X,data_x:s,data_y:a},H.add(V,G,this._render_tooltips(_,f,J))}}return null}},e.prototype._emit_callback=function(t){var e,r,n,o,i,s,a,l,u,c;a=this.computed_renderers[0],i=this.plot_view.renderer_views[a.id].hit_test(t),r=this.plot_model.canvas,o=this.plot_model.frame,t.sx=r.vx_to_sx(t.vx),t.sy=r.vy_to_sy(t.vy),u=o.xscales[a.x_range_name],c=o.yscales[a.y_range_name],t.x=u.invert(t.vx),t.y=c.invert(t.vy),e=this.model.callback,l=[e,{index:i,geometry:t,renderer:a}],s=l[0],n=l[1],d.isFunction(e)?e(s,n):e.execute(s,n)},e.prototype._render_tooltips=function(t,e,r){var o,i,s,a,l,u,p,h,f,m,y,g,v,b,w,x,k,M;if(k=this.model.tooltips,d.isString(k))return l=_.div(),l.innerHTML=c.replace_placeholders(k,t,e,this.model.formatters,r),l;if(d.isFunction(k))return k(t,r);for(w=_.div({style:{display:"table",borderSpacing:"2px"}}),p=0,f=k.length;p<f;p++)if(g=k[p],h=g[0],M=g[1],b=_.div({style:{display:"table-row"}}),w.appendChild(b),o=_.div({style:{display:"table-cell"},"class":"bk-tooltip-row-label"},h+": "),b.appendChild(o),o=_.div({style:{display:"table-cell"},"class":"bk-tooltip-row-value"}),b.appendChild(o),M.indexOf("$color")>=0){if(v=M.match(/\$color(\[.*\])?:(\w*)/),m=v[0],y=v[1],i=v[2],a=t.get_column(i),null==a){l=_.span({},i+" unknown"),o.appendChild(l);continue}if(u=(null!=y?y.indexOf("hex"):void 0)>=0,x=(null!=y?y.indexOf("swatch"):void 0)>=0,s=a[e],null==s){l=_.span({},"(null)"),o.appendChild(l);continue}u&&(s=n(s)),l=_.span({},s),o.appendChild(l),x&&(l=_.span({"class":"bk-tooltip-color-block",style:{backgroundColor:s}}," "),o.appendChild(l))}else M=M.replace("$~","$data_"),l=_.span(),l.innerHTML=c.replace_placeholders(M,t,e,this.model.formatters,r),o.appendChild(l);return w},e}(s.InspectToolView),r.HoverTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.default_view=r.HoverToolView,e.prototype.type="HoverTool",e.prototype.tool_name="Hover",e.prototype.icon="bk-tool-icon-hover",e.define({tooltips:[p.Any,[["index","$index"],["data (x, y)","($x, $y)"],["canvas (x, y)","($sx, $sy)"]]],formatters:[p.Any,{}],renderers:[p.Array,[]],names:[p.Array,[]],mode:[p.String,"mouse"],point_policy:[p.String,"snap_to_data"],line_policy:[p.String,"nearest"],show_arrow:[p.Boolean,!0],anchor:[p.String,"center"],attachment:[p.String,"horizontal"],callback:[p.Any]}),e}(s.InspectTool)},{"../../annotations/tooltip":"models/annotations/tooltip","../../renderers/glyph_renderer":"models/renderers/glyph_renderer","./inspect_tool":"models/tools/inspectors/inspect_tool","core/build_views":"core/build_views","core/dom":"core/dom","core/hittest":"core/hittest","core/properties":"core/properties","core/util/object":"core/util/object","core/util/templating":"core/util/templating","core/util/types":"core/util/types"}],"models/tools/inspectors/inspect_tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/properties"),s=t("../button_tool");r.InspectToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e}(s.ButtonToolView),r.InspectTool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.event_type="move",e.define({toggleable:[i.Bool,!0]}),e.override({active:!0}),e}(s.ButtonTool)},{"../button_tool":"models/tools/button_tool","core/properties":"core/properties"}],"models/tools/on_off_button":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./button_tool");r.OnOffButtonView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.render=function(){return e.__super__.render.call(this),this.model.active?this.el.classList.add("bk-active"):this.el.classList.remove("bk-active")},e.prototype._clicked=function(){var t;return t=this.model.active,this.model.active=!t},e}(i.ButtonToolButtonView)},{"./button_tool":"models/tools/button_tool"}],"models/tools/tool":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/properties"),s=t("core/view"),a=t("core/util/array"),l=t("../../model");r.ToolView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.plot_view=t.plot_view},e.getters({plot_model:function(){return this.plot_view.model}}),e.prototype.connect_signals=function(){return e.__super__.connect_signals.call(this),this.connect(this.model.properties.active.change,function(t){return function(){return t.model.active?t.activate():t.deactivate()}}(this))},e.prototype.activate=function(){},e.prototype.deactivate=function(){},e}(s.View),r.Tool=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.getters({synthetic_renderers:function(){return[]}}),e.define({plot:[i.Instance]}),e.internal({active:[i.Boolean,!1]}),e.prototype._get_dim_tooltip=function(t,e){switch(e){case"width":return t+" (x-axis)";case"height":return t+" (y-axis)";case"both":return t}},e.prototype._get_dim_limits=function(t,e,r,n){var o,i,s,l,u,c,_,p;return s=t[0],c=t[1],l=e[0],_=e[1],o=r.h_range,"width"===n||"both"===n?(u=[a.min([s,l]),a.max([s,l])],u=[a.max([u[0],o.min]),a.min([u[1],o.max])]):u=[o.min,o.max],i=r.v_range,"height"===n||"both"===n?(p=[a.min([c,_]),a.max([c,_])],p=[a.max([p[0],i.min]),a.min([p[1],i.max])]):p=[i.min,i.max],[u,p]},e}(l.Model)},{"../../model":"model","core/properties":"core/properties","core/util/array":"core/util/array","core/view":"core/view"}],"models/tools/tool_events":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("../../model"),s=t("core/properties");r.ToolEvents=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="ToolEvents",e.define({geometries:[s.Array,[]]}),e}(i.Model)},{"../../model":"model","core/properties":"core/properties"}],"models/tools/tool_proxy":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/properties"),s=t("core/signaling"),a=t("../../model");r.ToolProxy=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this["do"]=new s.Signal(this,"do"),this.connect(this["do"],function(){return this.doit()}),this.connect(this.properties.active.change,function(){return this.set_active()})},e.prototype.doit=function(){var t,e,r,n;for(r=this.tools,t=0,e=r.length;t<e;t++)n=r[t],n["do"].emit();return null},e.prototype.set_active=function(){var t,e,r,n;for(r=this.tools,t=0,e=r.length;t<e;t++)n=r[t],n.active=this.active;return null},e.define({tools:[i.Array,[]],active:[i.Bool,!1],tooltip:[i.String],tool_name:[i.String],disabled:[i.Bool,!1],event_type:[i.String],icon:[i.String]}),e.prototype._clicked=function(){var t;return t=this.model.active,this.model.active=!t},e}(a.Model)},{"../../model":"model","core/properties":"core/properties","core/signaling":"core/signaling"}],"models/tools/toolbar":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},s=t("core/properties"),a=t("core/util/array"),l=t("./actions/action_tool"),u=t("./actions/help_tool"),c=t("./gestures/gesture_tool"),_=t("./inspectors/inspect_tool"),p=t("./toolbar_base");r.Toolbar=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="Toolbar",e.prototype.default_view=p.ToolbarBaseView,e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this.connect(this.properties.tools.change,function(){return this._init_tools()}),this._init_tools()},e.prototype._init_tools=function(){var t,e,r,n,o,s,p;for(n=this.tools,e=0,r=n.length;e<r;e++)if(s=n[e],s instanceof _.InspectTool)a.any(this.inspectors,function(t){return function(t){return t.id===s.id}}(this))||(this.inspectors=this.inspectors.concat([s]));else if(s instanceof u.HelpTool)a.any(this.help,function(t){return function(t){return t.id===s.id}}(this))||(this.help=this.help.concat([s]));else if(s instanceof l.ActionTool)a.any(this.actions,function(t){return function(t){return t.id===s.id}}(this))||(this.actions=this.actions.concat([s]));else if(s instanceof c.GestureTool){if(t=s.event_type,!(t in this.gestures)){logger.warn("Toolbar: unknown event type '"+t+"' for tool: "+s.type+" ("+s.id+")");continue}a.any(this.gestures[t].tools,function(t){return function(t){return t.id===s.id}}(this))||(this.gestures[t].tools=this.gestures[t].tools.concat([s])),this.connect(s.properties.active.change,this._active_change.bind(null,s))}"auto"===this.active_inspect||(this.active_inspect instanceof _.InspectTool?this.inspectors.map(function(t){return function(e){if(e!==t.active_inspect)return e.active=!1}}(this)):this.active_inspect instanceof Array?this.inspectors.map(function(t){return function(e){if(i.call(t.active_inspect,e)<0)return e.active=!1}}(this)):null===this.active_inspect&&this.inspectors.map(function(t){return t.active=!1})),o=[];for(t in this.gestures)if(p=this.gestures[t].tools,0!==p.length){if(this.gestures[t].tools=a.sortBy(p,function(t){return t.default_order}),"tap"===t){if(null===this.active_tap)continue;"auto"===this.active_tap?this.gestures[t].tools[0].active=!0:this.active_tap.active=!0}if("pan"===t){if(null===this.active_drag)continue;"auto"===this.active_drag?this.gestures[t].tools[0].active=!0:this.active_drag.active=!0}if("pinch"===t||"scroll"===t){if(null===this.active_scroll||"auto"===this.active_scroll)continue;o.push(this.active_scroll.active=!0)}else o.push(void 0)}return o},e.define({active_drag:[s.Any,"auto"],active_inspect:[s.Any,"auto"],active_scroll:[s.Any,"auto"],active_tap:[s.Any,"auto"]}),e}(p.ToolbarBase)},{"./actions/action_tool":"models/tools/actions/action_tool","./actions/help_tool":"models/tools/actions/help_tool","./gestures/gesture_tool":"models/tools/gestures/gesture_tool","./inspectors/inspect_tool":"models/tools/inspectors/inspect_tool","./toolbar_base":"models/tools/toolbar_base","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/tools/toolbar_base":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=function(t,e){return function(){return t.apply(e,arguments)}},s=t("core/logging"),a=t("core/layout/solver"),l=t("core/dom"),u=t("core/properties"),c=t("../layouts/layout_dom"),_=t("./actions/action_tool"),p=t("./on_off_button"),h=t("./toolbar_template");r.ToolbarBaseView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.className="bk-toolbar-wrapper",e.prototype.template=h["default"],e.prototype.render=function(){var t,e,r,n,o,i,s,a,u,c,h,d,f,m,y,g;for(l.empty(this.el),"fixed"!==this.model.sizing_mode&&(this.el.style.left=this.model._dom_left.value+"px",this.el.style.top=this.model._dom_top.value+"px",this.el.style.width=this.model._width.value+"px",this.el.style.height=this.model._height.value+"px"),this.el.appendChild(this.template({logo:this.model.logo,location:this.model.toolbar_location,sticky:this.model.toolbar_sticky?"sticky":"not-sticky"})),t=this.el.querySelector(".bk-button-bar-list[type='inspectors']"),f=this.model.inspectors,n=0,a=f.length;n<a;n++)d=f[n],d.toggleable&&t.appendChild(new p.OnOffButtonView({model:d,parent:this}).el);for(t=this.el.querySelector(".bk-button-bar-list[type='help']"),m=this.model.help,o=0,u=m.length;o<u;o++)d=m[o],t.appendChild(new _.ActionToolButtonView({model:d,parent:this}).el);for(t=this.el.querySelector(".bk-button-bar-list[type='actions']"),y=this.model.actions,i=0,c=y.length;i<c;i++)d=y[i],t.appendChild(new _.ActionToolButtonView({model:d,parent:this}).el);r=this.model.gestures;for(e in r)for(t=this.el.querySelector(".bk-button-bar-list[type='"+e+"']"),g=r[e].tools,s=0,h=g.length;s<h;s++)d=g[s],t.appendChild(new p.OnOffButtonView({model:d,parent:this}).el);return this},e}(c.LayoutDOMView),r.ToolbarBase=function(t){function e(){return this._active_change=i(this._active_change,this),e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="ToolbarBase",e.prototype.default_view=r.ToolbarBaseView,e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this._set_sizeable(),this.connect(this.properties.toolbar_location.change,function(t){return function(){return t._set_sizeable()}}(this))},e.prototype._set_sizeable=function(){var t,e;return t="left"===(e=this.toolbar_location)||"right"===e,this._sizeable=t?this._width:this._height},e.prototype._active_change=function(t){var e,r;return r=t.event_type,t.active?(e=this.gestures[r].active,null!=e&&(s.logger.debug("Toolbar: deactivating tool: "+e.type+" ("+e.id+") for event type '"+r+"'"),e.active=!1),this.gestures[r].active=t,s.logger.debug("Toolbar: activating tool: "+t.type+" ("+t.id+") for event type '"+r+"'")):this.gestures[r].active=null,null},e.prototype.get_constraints=function(){return e.__super__.get_constraints.call(this).concat([a.EQ(this._sizeable,-30)])},e.define({tools:[u.Array,[]],logo:[u.String,"normal"]}),e.internal({gestures:[u.Any,function(){return{pan:{tools:[],active:null},tap:{tools:[],active:null},doubletap:{tools:[],active:null},scroll:{tools:[],active:null},pinch:{tools:[],active:null},press:{tools:[],active:null},rotate:{tools:[],active:null}}}],actions:[u.Array,[]],inspectors:[u.Array,[]],help:[u.Array,[]],toolbar_location:[u.Location,"right"],toolbar_sticky:[u.Bool]}),e.override({sizing_mode:null}),e}(c.LayoutDOM)},{"../layouts/layout_dom":"models/layouts/layout_dom","./actions/action_tool":"models/tools/actions/action_tool","./on_off_button":"models/tools/on_off_button","./toolbar_template":"models/tools/toolbar_template","core/dom":"core/dom","core/layout/solver":"core/layout/solver","core/logging":"core/logging","core/properties":"core/properties"}],"models/tools/toolbar_box":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},s=t("core/properties"),a=t("core/util/array"),l=t("./actions/action_tool"),u=t("./actions/help_tool"),c=t("./gestures/gesture_tool"),_=t("./inspectors/inspect_tool"),p=t("./toolbar_base"),h=t("./tool_proxy"),d=t("../layouts/box");r.ToolbarBoxToolbar=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="ToolbarBoxToolbar",e.prototype.default_view=p.ToolbarBaseView,e.prototype.initialize=function(t){if(e.__super__.initialize.call(this,t),this._init_tools(),this.merge_tools===!0)return this._merge_tools()},e.define({merge_tools:[s.Bool,!0]}),e.prototype._init_tools=function(){var t,e,r,n,o,i;for(n=this.tools,o=[],e=0,r=n.length;e<r;e++)i=n[e],i instanceof _.InspectTool?a.any(this.inspectors,function(t){return function(t){return t.id===i.id}}(this))?o.push(void 0):o.push(this.inspectors=this.inspectors.concat([i])):i instanceof u.HelpTool?a.any(this.help,function(t){return function(t){return t.id===i.id}}(this))?o.push(void 0):o.push(this.help=this.help.concat([i])):i instanceof l.ActionTool?a.any(this.actions,function(t){return function(t){return t.id===i.id}}(this))?o.push(void 0):o.push(this.actions=this.actions.concat([i])):i instanceof c.GestureTool?(t=i.event_type,a.any(this.gestures[t].tools,function(t){return function(t){return t.id===i.id}}(this))?o.push(void 0):o.push(this.gestures[t].tools=this.gestures[t].tools.concat([i]))):o.push(void 0);return o},e.prototype._merge_tools=function(){var t,e,r,n,o,s,l,u,c,_,p,d,f,m,y,g,v,b,w,x,k,M,j,S,T,O,P,A,E,z,C;for(c={},t={},o={},b=[],w=[],k=this.help,l=0,f=k.length;l<f;l++)s=k[l],M=s.redirect,i.call(w,M)<0&&(b.push(s),w.push(s.redirect));this.help=b,j=this.gestures;for(n in j){u=j[n],n in o||(o[n]={}),S=u.tools;for(_=0,m=S.length;_<m;_++)E=S[_],E.type in o[n]||(o[n][E.type]=[]),o[n][E.type].push(E)}for(T=this.inspectors,p=0,y=T.length;p<y;p++)E=T[p],E.type in c||(c[E.type]=[]),c[E.type].push(E);for(O=this.actions,d=0,g=O.length;d<g;d++)E=O[d],E.type in t||(t[E.type]=[]),t[E.type].push(E);v=function(t,e){return null==e&&(e=!1),new h.ToolProxy({tools:t,event_type:t[0].event_type,tooltip:t[0].tool_name,tool_name:t[0].tool_name,icon:t[0].icon,active:e})};for(n in o){this.gestures[n].tools=[],P=o[n];for(z in P)C=P[z],C.length>0&&(x=v(C),this.gestures[n].tools.push(x),this.connect(x.properties.active.change,this._active_change.bind(null,x)))}this.actions=[];for(z in t)C=t[z],C.length>0&&this.actions.push(v(C));this.inspectors=[];for(z in c)C=c[z],C.length>0&&this.inspectors.push(v(C,e=!0));A=[];for(r in this.gestures)C=this.gestures[r].tools,0!==C.length&&(this.gestures[r].tools=a.sortBy(C,function(t){return t.default_order}),"pinch"!==r&&"scroll"!==r?A.push(this.gestures[r].tools[0].active=!0):A.push(void 0));return A},e}(p.ToolbarBase),r.ToolbarBoxView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.className="bk-toolbar-box",e.prototype.get_width=function(){return this.model._horizontal===!0?30:null},e.prototype.get_height=function(){return 30},e}(d.BoxView),r.ToolbarBox=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.type="ToolbarBox",e.prototype.default_view=r.ToolbarBoxView,e.prototype.initialize=function(t){var n;return e.__super__.initialize.call(this,t),this._toolbar=new r.ToolbarBoxToolbar(t),this._horizontal="left"===(n=this.toolbar_location)||"right"===n,this._sizeable=this._horizontal?this._width:this._height},e.prototype._doc_attached=function(){return this._toolbar.attach_document(this.document),e.__super__._doc_attached.call(this)},e.prototype.get_layoutable_children=function(){return[this._toolbar]},e.define({toolbar_location:[s.Location,"right"],merge_tools:[s.Bool,!0],tools:[s.Any,[]],logo:[s.String,"normal"]}),e}(d.Box)},{"../layouts/box":"models/layouts/box","./actions/action_tool":"models/tools/actions/action_tool","./actions/help_tool":"models/tools/actions/help_tool","./gestures/gesture_tool":"models/tools/gestures/gesture_tool","./inspectors/inspect_tool":"models/tools/inspectors/inspect_tool","./tool_proxy":"models/tools/tool_proxy","./toolbar_base":"models/tools/toolbar_base","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/tools/toolbar_template":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("core/dom");r["default"]=function(t){var e;if(null!=t.logo){var r="grey"===t.logo?"bk-grey":null;e=n.createElement("a",{href:"http://bokeh.pydata.org/",target:"_blank","class":["bk-logo","bk-logo-small",r]})}return n.createElement("div",{"class":["bk-toolbar-"+t.location,"bk-toolbar-"+t.sticky]},e,n.createElement("div",{"class":"bk-button-bar"},n.createElement("div",{"class":"bk-button-bar-list",type:"pan"}),n.createElement("div",{"class":"bk-button-bar-list",type:"scroll"}),n.createElement("div",{"class":"bk-button-bar-list",type:"pinch"}),n.createElement("div",{"class":"bk-button-bar-list",type:"tap"}),n.createElement("div",{"class":"bk-button-bar-list",type:"press"}),n.createElement("div",{"class":"bk-button-bar-list",type:"rotate"}),n.createElement("div",{"class":"bk-button-bar-list",type:"actions"}),n.createElement("div",{"class":"bk-button-bar-list",type:"inspectors"}),n.createElement("div",{"class":"bk-button-bar-list",type:"help"})))}},{"core/dom":"core/dom"}],"models/transforms/customjs_transform":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=[].slice,s=t("./transform"),a=t("core/properties"),l=t("core/util/object");r.CustomJSTransform=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.type="CustomJSTransform",o.define({args:[a.Any,{}],func:[a.String,""],v_func:[a.String,""]}),o.getters({values:function(){return this._make_values()},scalar_transform:function(){return this._make_transform("x",this.func)},vector_transform:function(){return this._make_transform("xs",this.v_func)}}),o.prototype.compute=function(e){return this.scalar_transform.apply(this,i.call(this.values).concat([e],[t],[r]))},o.prototype.v_compute=function(e){return this.vector_transform.apply(this,i.call(this.values).concat([e],[t],[r]))},o.prototype._make_transform=function(t,e){return function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(Function,i.call(Object.keys(this.args)).concat([t],["require"],["exports"],[e]),function(){})},o.prototype._make_values=function(){return l.values(this.args)},o}(s.Transform)},{"./transform":"models/transforms/transform","core/properties":"core/properties","core/util/object":"core/util/object"}],"models/transforms/index":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./customjs_transform");r.CustomJSTransform=n.CustomJSTransform;var o=t("./interpolator");r.Interpolator=o.Interpolator;var i=t("./jitter");r.Jitter=i.Jitter;var s=t("./linear_interpolator");r.LinearInterpolator=s.LinearInterpolator;var a=t("./step_interpolator");r.StepInterpolator=a.StepInterpolator;var l=t("./transform");r.Transform=l.Transform},{"./customjs_transform":"models/transforms/customjs_transform","./interpolator":"models/transforms/interpolator","./jitter":"models/transforms/jitter","./linear_interpolator":"models/transforms/linear_interpolator","./step_interpolator":"models/transforms/step_interpolator","./transform":"models/transforms/transform"}],"models/transforms/interpolator":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},s=t("./transform"),a=t("core/properties");r.Interpolator=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t,r){return e.__super__.initialize.call(this,t,r),this._x_sorted=[],this._y_sorted=[],this._sorted_dirty=!0,this.connect(this.change,function(){return this._sorted_dirty=!0})},e.define({x:[a.Any],y:[a.Any],data:[a.Any],clip:[a.Bool,!0]}),e.prototype.sort=function(t){var e,r,n,o,s,a,l,u,c,_,p;if(null==t&&(t=!1),typeof this.x!=typeof this.y)throw new Error("The parameters for x and y must be of the same type, either both strings which define a column in the data source or both arrays of the same length");if("string"==typeof this.x&&null===this.data)throw new Error("If the x and y parameters are not specified as an array, the data parameter is reqired.");if(this._sorted_dirty!==!1){if(_=[],p=[],"string"==typeof this.x){if(r=this.data,e=r.columns(),l=this.x,i.call(e,l)<0)throw new Error("The x parameter does not correspond to a valid column name defined in the data parameter");if(u=this.y,i.call(e,u)<0)throw new Error("The x parameter does not correspond to a valid column name defined in the data parameter");_=r.get_column(this.x),p=r.get_column(this.y)}else _=this.x,p=this.y;if(_.length!==p.length)throw new Error("The length for x and y do not match");if(_.length<2)throw new Error("x and y must have at least two elements to support interpolation");a=[];for(o in _)a.push({x:_[o],y:p[o]});for(t===!0?a.sort(function(t,e){var r,n;return null!=(r=t.x<e.x)?r:-{1:null!=(n=t.x===e.x)?n:{0:1}}}):a.sort(function(t,e){var r,n;return null!=(r=t.x>e.x)?r:-{1:null!=(n=t.x===e.x)?n:{0:1}}}),s=n=0,c=a.length;0<=c?n<c:n>c;s=0<=c?++n:--n)this._x_sorted[s]=a[s].x,this._y_sorted[s]=a[s].y;return this._sorted_dirty=!1}},e}(s.Transform)},{"./transform":"models/transforms/transform","core/properties":"core/properties"}],"models/transforms/jitter":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./transform"),s=t("core/properties"),a=t("core/util/math");r.Jitter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.define({mean:[s.Number,0],width:[s.Number,1],distribution:[s.Distribution,"uniform"]}),e.prototype.compute=function(t){return"uniform"===this.distribution?t+this.mean+(a.random()-.5)*this.width:"normal"===this.distribution?t+a.rnorm(this.mean,this.width):void 0},e.prototype.v_compute=function(t){var e,r,n,o,i;for(o=new Float64Array(t.length),r=e=0,n=t.length;e<n;r=++e)i=t[r],o[r]=this.compute(i);return o},e}(i.Transform)},{"./transform":"models/transforms/transform","core/properties":"core/properties","core/util/math":"core/util/math"}],"models/transforms/linear_interpolator":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("core/util/array"),s=t("./interpolator");r.LinearInterpolator=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.compute=function(t){var e,r,n,o,s,a,l;if(this.sort(e=!1),this.clip===!0){if(t<this._x_sorted[0]||t>this._x_sorted[this._x_sorted.length-1])return null}else{if(t<this._x_sorted[0])return this._y_sorted[0];if(t>this._x_sorted[this._x_sorted.length-1])return this._y_sorted[this._y_sorted.length-1]}return t===this._x_sorted[0]?this._y_sorted[0]:(r=i.findLastIndex(this._x_sorted,function(e){
return e<t}),o=this._x_sorted[r],s=this._x_sorted[r+1],a=this._y_sorted[r],l=this._y_sorted[r+1],n=a+(t-o)/(s-o)*(l-a))},e.prototype.v_compute=function(t){var e,r,n,o,i;for(o=new Float64Array(t.length),r=e=0,n=t.length;e<n;r=++e)i=t[r],o[r]=this.compute(i);return o},e}(s.Interpolator)},{"./interpolator":"models/transforms/interpolator","core/util/array":"core/util/array"}],"models/transforms/step_interpolator":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("./interpolator"),s=t("core/properties"),a=t("core/util/array");r.StepInterpolator=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.define({mode:[s.TransformStepMode,"after"]}),e.prototype.compute=function(t){var e,r,n,o,i,s;if(this.sort(e=!1),this.clip===!0){if(t<this._x_sorted[0]||t>this._x_sorted[this._x_sorted.length-1])return null}else{if(t<this._x_sorted[0])return this._y_sorted[0];if(t>this._x_sorted[this._x_sorted.length-1])return this._y_sorted[this._y_sorted.length-1]}return n=-1,"after"===this.mode&&(n=a.findLastIndex(this._x_sorted,function(e){return t>=e})),"before"===this.mode&&(n=a.findIndex(this._x_sorted,function(e){return t<=e})),"center"===this.mode&&(r=function(){var e,r,n,o;for(n=this._x_sorted,o=[],e=0,r=n.length;e<r;e++)s=n[e],o.push(Math.abs(s-t));return o}.call(this),o=a.min(r),n=a.findIndex(r,function(t){return o===t})),i=n!==-1?this._y_sorted[n]:null},e.prototype.v_compute=function(t){var e,r,n,o,i;for(o=new Float64Array(t.length),r=e=0,n=t.length;e<n;r=++e)i=t[r],o[r]=this.compute(i);return o},e}(i.Interpolator)},{"./interpolator":"models/transforms/interpolator","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/transforms/transform":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=t("../../model");r.Transform=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e}(i.Model)},{"../../model":"model"}],polyfill:[function(t,e,r){"use strict";"function"!=typeof WeakMap&&t("es6-weak-map/implement"),"function"!=typeof Set&&t("es6-set/implement")},{"es6-set/implement":"es6-set/implement","es6-weak-map/implement":"es6-weak-map/implement"}],safely:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n;n=function(t){var e,r,n,o,i,s;return r=document.createElement("div"),r.style["background-color"]="#f2dede",r.style.border="1px solid #a94442",r.style["border-radius"]="4px",r.style.display="inline-block",r.style["font-family"]="sans-serif",r.style["margin-top"]="5px",r.style["min-width"]="200px",r.style.padding="5px 5px 5px 10px",n=document.createElement("span"),n.style["background-color"]="#a94442",n.style["border-radius"]="0px 4px 0px 0px",n.style.color="white",n.style.cursor="pointer",n.style["float"]="right",n.style["font-size"]="0.8em",n.style.margin="-6px -6px 0px 0px",n.style.padding="2px 5px 4px 5px",n.title="close",n.setAttribute("aria-label","close"),n.appendChild(document.createTextNode("x")),n.addEventListener("click",function(){return e.removeChild(r)}),s=document.createElement("h3"),s.style.color="#a94442",s.style.margin="8px 0px 0px 0px",s.style.padding="0px",s.appendChild(document.createTextNode("Bokeh Error")),o=document.createElement("pre"),o.style["white-space"]="unset",o.style["overflow-x"]="auto",o.appendChild(document.createTextNode(null!=(i=t.message)?i:t)),r.appendChild(n),r.appendChild(s),r.appendChild(o),e=document.getElementsByTagName("body")[0],e.insertBefore(r,e.firstChild)},r.safely=function(t,e){var r;null==e&&(e=!1);try{return t()}catch(o){if(r=o,n(r),!e)throw r}}},{}],version:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.version="0.12.6"},{}],canvas2svg:[function(t,e,r){!function(){"use strict";function t(t,e){var r,n=Object.keys(e);for(r=0;r<n.length;r++)t=t.replace(new RegExp("\\{"+n[r]+"\\}","gi"),e[n[r]]);return t}function r(t){var e,r,n;if(!t)throw new Error("cannot create a random attribute name for an undefined object");e="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",r="";do for(r="",n=0;n<12;n++)r+=e[Math.floor(Math.random()*e.length)];while(t[r]);return r}function n(t,e){var r,n,o,i={};for(t=t.split(","),e=e||10,r=0;r<t.length;r+=2)n="&"+t[r+1]+";",o=parseInt(t[r],e),i[n]="&#"+o+";";return i["\\xa0"]="&#160;",i}function o(t){var e={left:"start",right:"end",center:"middle",start:"start",end:"end"};return e[t]||e.start}function i(t){var e={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return e[t]||e.alphabetic}var s,a,l,u,c;c=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),s={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},l=function(t,e){this.__root=t,this.__ctx=e},l.prototype.addColorStop=function(e,r){var n,o,i=this.__ctx.__createElement("stop");i.setAttribute("offset",e),r.indexOf("rgba")!==-1?(n=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,o=n.exec(r),i.setAttribute("stop-color",t("rgb({r},{g},{b})",{r:o[1],g:o[2],b:o[3]})),i.setAttribute("stop-opacity",o[4])):i.setAttribute("stop-color",r),this.__root.appendChild(i)},u=function(t,e){this.__root=t,this.__ctx=e},a=function(t){var e,r={width:500,height:500,enableMirroring:!1};return arguments.length>1?(e=r,e.width=arguments[0],e.height=arguments[1]):e=t?t:r,this instanceof a?(this.width=e.width||r.width,this.height=e.height||r.height,this.enableMirroring=void 0!==e.enableMirroring?e.enableMirroring:r.enableMirroring,this.canvas=this,this.__document=e.document||document,e.ctx?this.__ctx=e.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),void this.__root.appendChild(this.__currentElement)):new a(e)},a.prototype.__createElement=function(t,e,r){"undefined"==typeof e&&(e={});var n,o,i=this.__document.createElementNS("http://www.w3.org/2000/svg",t),s=Object.keys(e);for(r&&(i.setAttribute("fill","none"),i.setAttribute("stroke","none")),n=0;n<s.length;n++)o=s[n],i.setAttribute(o,e[o]);return i},a.prototype.__setDefaultStyles=function(){var t,e,r=Object.keys(s);for(t=0;t<r.length;t++)e=r[t],this[e]=s[e].canvas},a.prototype.__applyStyleState=function(t){var e,r,n=Object.keys(t);for(e=0;e<n.length;e++)r=n[e],this[r]=t[r]},a.prototype.__getStyleState=function(){var t,e,r={},n=Object.keys(s);for(t=0;t<n.length;t++)e=n[t],r[e]=this[e];return r},a.prototype.__applyStyleToCurrentElement=function(e){var r=this.__currentElement,n=this.__currentElementsToStyle;n&&(r.setAttribute(e,""),r=n.element,n.children.forEach(function(t){t.setAttribute(e,"")}));var o,i,a,c,_,p,h=Object.keys(s);for(o=0;o<h.length;o++)if(i=s[h[o]],a=this[h[o]],i.apply)if(a instanceof u){if(a.__ctx)for(;a.__ctx.__defs.childNodes.length;)c=a.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[c]=c,this.__defs.appendChild(a.__ctx.__defs.childNodes[0]);r.setAttribute(i.apply,t("url(#{id})",{id:a.__root.getAttribute("id")}))}else if(a instanceof l)r.setAttribute(i.apply,t("url(#{id})",{id:a.__root.getAttribute("id")}));else if(i.apply.indexOf(e)!==-1&&i.svg!==a)if("stroke"!==i.svgAttr&&"fill"!==i.svgAttr||a.indexOf("rgba")===-1){var d=i.svgAttr;if("globalAlpha"===h[o]&&(d=e+"-"+i.svgAttr,r.getAttribute(d)))continue;r.setAttribute(d,a)}else{_=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,p=_.exec(a),r.setAttribute(i.svgAttr,t("rgb({r},{g},{b})",{r:p[1],g:p[2],b:p[3]}));var f=p[4],m=this.globalAlpha;null!=m&&(f*=m),r.setAttribute(i.svgAttr+"-opacity",f)}},a.prototype.__closestGroupOrSvg=function(t){return t=t||this.__currentElement,"g"===t.nodeName||"svg"===t.nodeName?t:this.__closestGroupOrSvg(t.parentNode)},a.prototype.getSerializedSvg=function(t){var e,r,n,o,i,s,a=(new XMLSerializer).serializeToString(this.__root);if(s=/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi,s.test(a)&&(a=a.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),t)for(e=Object.keys(c),r=0;r<e.length;r++)n=e[r],o=c[n],i=new RegExp(n,"gi"),i.test(a)&&(a=a.replace(i,o));return a},a.prototype.getSvg=function(){return this.__root},a.prototype.save=function(){var t=this.__createElement("g"),e=this.__closestGroupOrSvg();this.__groupStack.push(e),e.appendChild(t),this.__currentElement=t,this.__stack.push(this.__getStyleState())},a.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var t=this.__stack.pop();this.__applyStyleState(t)},a.prototype.__addTransform=function(t){var e=this.__closestGroupOrSvg();if(e.childNodes.length>0){"path"===this.__currentElement.nodeName&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:e,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var r=this.__createElement("g");e.appendChild(r),this.__currentElement=r}var n=this.__currentElement.getAttribute("transform");n?n+=" ":n="",n+=t,this.__currentElement.setAttribute("transform",n)},a.prototype.scale=function(e,r){void 0===r&&(r=e),this.__addTransform(t("scale({x},{y})",{x:e,y:r}))},a.prototype.rotate=function(e){var r=180*e/Math.PI;this.__addTransform(t("rotate({angle},{cx},{cy})",{angle:r,cx:0,cy:0}))},a.prototype.translate=function(e,r){this.__addTransform(t("translate({x},{y})",{x:e,y:r}))},a.prototype.transform=function(e,r,n,o,i,s){this.__addTransform(t("matrix({a},{b},{c},{d},{e},{f})",{a:e,b:r,c:n,d:o,e:i,f:s}))},a.prototype.beginPath=function(){var t,e;this.__currentDefaultPath="",this.__currentPosition={},t=this.__createElement("path",{},!0),e=this.__closestGroupOrSvg(),e.appendChild(t),this.__currentElement=t},a.prototype.__applyCurrentDefaultPath=function(){var t=this.__currentElement;"path"===t.nodeName?t.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",t.nodeName)},a.prototype.__addPathCommand=function(t){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=t},a.prototype.moveTo=function(e,r){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.__currentPosition={x:e,y:r},this.__addPathCommand(t("M {x} {y}",{x:e,y:r}))},a.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},a.prototype.lineTo=function(e,r){this.__currentPosition={x:e,y:r},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(t("L {x} {y}",{x:e,y:r})):this.__addPathCommand(t("M {x} {y}",{x:e,y:r}))},a.prototype.bezierCurveTo=function(e,r,n,o,i,s){this.__currentPosition={x:i,y:s},this.__addPathCommand(t("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:e,cp1y:r,cp2x:n,cp2y:o,x:i,y:s}))},a.prototype.quadraticCurveTo=function(e,r,n,o){this.__currentPosition={x:n,y:o},this.__addPathCommand(t("Q {cpx} {cpy} {x} {y}",{cpx:e,cpy:r,x:n,y:o}))};var _=function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[t[0]/e,t[1]/e]};a.prototype.arcTo=function(t,e,r,n,o){var i=this.__currentPosition&&this.__currentPosition.x,s=this.__currentPosition&&this.__currentPosition.y;if("undefined"!=typeof i&&"undefined"!=typeof s){if(o<0)throw new Error("IndexSizeError: The radius provided ("+o+") is negative.");if(i===t&&s===e||t===r&&e===n||0===o)return void this.lineTo(t,e);var a=_([i-t,s-e]),l=_([r-t,n-e]);if(a[0]*l[1]===a[1]*l[0])return void this.lineTo(t,e);var u=a[0]*l[0]+a[1]*l[1],c=Math.acos(Math.abs(u)),p=_([a[0]+l[0],a[1]+l[1]]),h=o/Math.sin(c/2),d=t+h*p[0],f=e+h*p[1],m=[-a[1],a[0]],y=[l[1],-l[0]],g=function(t){var e=t[0],r=t[1];return r>=0?Math.acos(e):-Math.acos(e)},v=g(m),b=g(y);this.lineTo(d+m[0]*o,f+m[1]*o),this.arc(d,f,o,v,b)}},a.prototype.stroke=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},a.prototype.fill=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},a.prototype.rect=function(t,e,r,n){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(t,e),this.lineTo(t+r,e),this.lineTo(t+r,e+n),this.lineTo(t,e+n),this.lineTo(t,e),this.closePath()},a.prototype.fillRect=function(t,e,r,n){var o,i;o=this.__createElement("rect",{x:t,y:e,width:r,height:n},!0),i=this.__closestGroupOrSvg(),i.appendChild(o),this.__currentElement=o,this.__applyStyleToCurrentElement("fill")},a.prototype.strokeRect=function(t,e,r,n){var o,i;o=this.__createElement("rect",{x:t,y:e,width:r,height:n},!0),i=this.__closestGroupOrSvg(),i.appendChild(o),this.__currentElement=o,this.__applyStyleToCurrentElement("stroke")},a.prototype.__clearCanvas=function(){for(var t=this.__closestGroupOrSvg(),e=t.getAttribute("transform"),r=this.__root.childNodes[1],n=r.childNodes,o=n.length-1;o>=0;o--)n[o]&&r.removeChild(n[o]);this.__currentElement=r,this.__groupStack=[],e&&this.__addTransform(e)},a.prototype.clearRect=function(t,e,r,n){if(0===t&&0===e&&r===this.width&&n===this.height)return void this.__clearCanvas();var o,i=this.__closestGroupOrSvg();o=this.__createElement("rect",{x:t,y:e,width:r,height:n,fill:"#FFFFFF"},!0),i.appendChild(o)},a.prototype.createLinearGradient=function(t,e,n,o){var i=this.__createElement("linearGradient",{id:r(this.__ids),x1:t+"px",x2:n+"px",y1:e+"px",y2:o+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(i),new l(i,this)},a.prototype.createRadialGradient=function(t,e,n,o,i,s){var a=this.__createElement("radialGradient",{id:r(this.__ids),cx:o+"px",cy:i+"px",r:s+"px",fx:t+"px",fy:e+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(a),new l(a,this)},a.prototype.__parseFont=function(){var t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i,e=t.exec(this.font),r={style:e[1]||"normal",size:e[4]||"10px",family:e[6]||"sans-serif",weight:e[3]||"normal",decoration:e[2]||"normal",href:null};return"underline"===this.__fontUnderline&&(r.decoration="underline"),this.__fontHref&&(r.href=this.__fontHref),r},a.prototype.__wrapTextLink=function(t,e){if(t.href){var r=this.__createElement("a");return r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.href),r.appendChild(e),r}return e},a.prototype.__applyText=function(t,e,r,n){var s=this.__parseFont(),a=this.__closestGroupOrSvg(),l=this.__createElement("text",{"font-family":s.family,"font-size":s.size,"font-style":s.style,"font-weight":s.weight,"text-decoration":s.decoration,x:e,y:r,"text-anchor":o(this.textAlign),"dominant-baseline":i(this.textBaseline)},!0);l.appendChild(this.__document.createTextNode(t)),this.__currentElement=l,this.__applyStyleToCurrentElement(n),a.appendChild(this.__wrapTextLink(s,l))},a.prototype.fillText=function(t,e,r){this.__applyText(t,e,r,"fill")},a.prototype.strokeText=function(t,e,r){this.__applyText(t,e,r,"stroke")},a.prototype.measureText=function(t){return this.__ctx.font=this.font,this.__ctx.measureText(t)},a.prototype.arc=function(e,r,n,o,i,s){if(o!==i){o%=2*Math.PI,i%=2*Math.PI,o===i&&(i=(i+2*Math.PI-.001*(s?-1:1))%(2*Math.PI));var a=e+n*Math.cos(i),l=r+n*Math.sin(i),u=e+n*Math.cos(o),c=r+n*Math.sin(o),_=s?0:1,p=0,h=i-o;h<0&&(h+=2*Math.PI),p=s?h>Math.PI?0:1:h>Math.PI?1:0,this.lineTo(u,c),this.__addPathCommand(t("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:n,ry:n,xAxisRotation:0,largeArcFlag:p,sweepFlag:_,endX:a,endY:l})),this.__currentPosition={x:a,y:l}}},a.prototype.clip=function(){var e=this.__closestGroupOrSvg(),n=this.__createElement("clipPath"),o=r(this.__ids),i=this.__createElement("g");this.__applyCurrentDefaultPath(),e.removeChild(this.__currentElement),n.setAttribute("id",o),n.appendChild(this.__currentElement),this.__defs.appendChild(n),e.setAttribute("clip-path",t("url(#{id})",{id:o})),e.appendChild(i),this.__currentElement=i},a.prototype.drawImage=function(){var t,e,r,n,o,i,s,l,u,c,_,p,h,d,f,m=Array.prototype.slice.call(arguments),y=m[0],g=0,v=0;if(3===m.length)t=m[1],e=m[2],o=y.width,i=y.height,r=o,n=i;else if(5===m.length)t=m[1],e=m[2],r=m[3],n=m[4],o=y.width,i=y.height;else{if(9!==m.length)throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);g=m[1],v=m[2],o=m[3],i=m[4],t=m[5],e=m[6],r=m[7],n=m[8]}s=this.__closestGroupOrSvg(),_=this.__currentElement;var b="translate("+t+", "+e+")";if(y instanceof a){if(l=y.getSvg().cloneNode(!0),l.childNodes&&l.childNodes.length>1){for(u=l.childNodes[0];u.childNodes.length;)f=u.childNodes[0].getAttribute("id"),this.__ids[f]=f,this.__defs.appendChild(u.childNodes[0]);if(c=l.childNodes[1]){var w,x=c.getAttribute("transform");w=x?x+" "+b:b,c.setAttribute("transform",w),s.appendChild(c)}}}else"IMG"===y.nodeName?(p=this.__createElement("image"),p.setAttribute("width",r),p.setAttribute("height",n),p.setAttribute("preserveAspectRatio","none"),(g||v||o!==y.width||i!==y.height)&&(h=this.__document.createElement("canvas"),h.width=r,h.height=n,d=h.getContext("2d"),d.drawImage(y,g,v,o,i,0,0,r,n),y=h),p.setAttribute("transform",b),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===y.nodeName?y.toDataURL():y.getAttribute("src")),s.appendChild(p)):"CANVAS"===y.nodeName&&(p=this.__createElement("image"),p.setAttribute("width",r),p.setAttribute("height",n),p.setAttribute("preserveAspectRatio","none"),h=this.__document.createElement("canvas"),h.width=r,h.height=n,d=h.getContext("2d"),d.imageSmoothingEnabled=!1,d.mozImageSmoothingEnabled=!1,d.oImageSmoothingEnabled=!1,d.webkitImageSmoothingEnabled=!1,d.drawImage(y,g,v,o,i,0,0,r,n),y=h,p.setAttribute("transform",b),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y.toDataURL()),s.appendChild(p))},a.prototype.createPattern=function(t,e){var n,o=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),i=r(this.__ids);return o.setAttribute("id",i),o.setAttribute("width",t.width),o.setAttribute("height",t.height),"CANVAS"===t.nodeName||"IMG"===t.nodeName?(n=this.__document.createElementNS("http://www.w3.org/2000/svg","image"),n.setAttribute("width",t.width),n.setAttribute("height",t.height),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===t.nodeName?t.toDataURL():t.getAttribute("src")),o.appendChild(n),this.__defs.appendChild(o)):t instanceof a&&(o.appendChild(t.__root.childNodes[1]),this.__defs.appendChild(o)),new u(o,this)},a.prototype.setLineDash=function(t){t&&t.length>0?this.lineDash=t.join(","):this.lineDash=null},a.prototype.drawFocusRing=function(){},a.prototype.createImageData=function(){},a.prototype.getImageData=function(){},a.prototype.putImageData=function(){},a.prototype.globalCompositeOperation=function(){},a.prototype.setTransform=function(){},"object"==typeof window&&(window.C2S=a),"object"==typeof e&&"object"==typeof e.exports&&(e.exports=a)}()},{}],"d/auto-bind":[function(t,e,r){"use strict";var n,o=t("es5-ext/object/copy"),i=t("es5-ext/object/normalize-options"),s=t("es5-ext/object/valid-callable"),a=t("es5-ext/object/map"),l=t("es5-ext/object/valid-callable"),u=t("es5-ext/object/valid-value"),c=Function.prototype.bind,_=Object.defineProperty,p=Object.prototype.hasOwnProperty;n=function(t,e,r){var n,i=u(e)&&l(e.value);return n=o(e),delete n.writable,delete n.value,n.get=function(){return!r.overwriteDefinition&&p.call(this,t)?i:(e.value=c.call(i,r.resolveContext?r.resolveContext(this):this),_(this,t,e),this[t])},n},e.exports=function(t){var e=i(arguments[1]);return null!=e.resolveContext&&s(e.resolveContext),a(t,function(t,r){return n(r,t,e)})}},{"es5-ext/object/copy":"es5-ext/object/copy","es5-ext/object/map":"es5-ext/object/map","es5-ext/object/normalize-options":"es5-ext/object/normalize-options","es5-ext/object/valid-callable":"es5-ext/object/valid-callable","es5-ext/object/valid-value":"es5-ext/object/valid-value"}],"d/index":[function(t,e,r){"use strict";var n,o=t("es5-ext/object/assign"),i=t("es5-ext/object/normalize-options"),s=t("es5-ext/object/is-callable"),a=t("es5-ext/string/#/contains");n=e.exports=function(t,e){var r,n,s,l,u;return arguments.length<2||"string"!=typeof t?(l=e,e=t,t=null):l=arguments[2],null==t?(r=s=!0,n=!1):(r=a.call(t,"c"),n=a.call(t,"e"),s=a.call(t,"w")),u={value:e,configurable:r,enumerable:n,writable:s},l?o(i(l),u):u},n.gs=function(t,e,r){var n,l,u,c;return"string"!=typeof t?(u=r,r=e,e=t,t=null):u=arguments[3],null==e?e=void 0:s(e)?null==r?r=void 0:s(r)||(u=r,r=void 0):(u=e,e=r=void 0),null==t?(n=!0,l=!1):(n=a.call(t,"c"),l=a.call(t,"e")),c={get:e,set:r,configurable:n,enumerable:l},u?o(i(u),c):c}},{"es5-ext/object/assign":"es5-ext/object/assign/index","es5-ext/object/is-callable":"es5-ext/object/is-callable","es5-ext/object/normalize-options":"es5-ext/object/normalize-options","es5-ext/string/#/contains":"es5-ext/string/#/contains/index"}],"es5-ext/array/#/clear":[function(t,e,r){"use strict";var n=t("../../object/valid-value");e.exports=function(){return n(this).length=0,this}},{"../../object/valid-value":"es5-ext/object/valid-value"}],"es5-ext/array/#/e-index-of":[function(t,e,r){"use strict";var n=t("../../number/is-nan"),o=t("../../number/to-pos-integer"),i=t("../../object/valid-value"),s=Array.prototype.indexOf,a=Object.prototype.hasOwnProperty,l=Math.abs,u=Math.floor;e.exports=function(t){var e,r,c,_;if(!n(t))return s.apply(this,arguments);for(r=o(i(this).length),c=arguments[1],c=isNaN(c)?0:c>=0?u(c):o(this.length)-u(l(c)),e=c;e<r;++e)if(a.call(this,e)&&(_=this[e],n(_)))return e;return-1}},{"../../number/is-nan":"es5-ext/number/is-nan/index","../../number/to-pos-integer":"es5-ext/number/to-pos-integer","../../object/valid-value":"es5-ext/object/valid-value"}],"es5-ext/array/from/index":[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Array.from:t("./shim")},{"./is-implemented":"es5-ext/array/from/is-implemented","./shim":"es5-ext/array/from/shim"}],"es5-ext/array/from/is-implemented":[function(t,e,r){"use strict";e.exports=function(){var t,e,r=Array.from;return"function"==typeof r&&(t=["raz","dwa"],e=r(t),Boolean(e&&e!==t&&"dwa"===e[1]))}},{}],"es5-ext/array/from/shim":[function(t,e,r){"use strict";var n=t("es6-symbol").iterator,o=t("../../function/is-arguments"),i=t("../../function/is-function"),s=t("../../number/to-pos-integer"),a=t("../../object/valid-callable"),l=t("../../object/valid-value"),u=t("../../object/is-value"),c=t("../../string/is-string"),_=Array.isArray,p=Function.prototype.call,h={configurable:!0,enumerable:!0,writable:!0,value:null},d=Object.defineProperty;e.exports=function(t){var e,r,f,m,y,g,v,b,w,x,k=arguments[1],M=arguments[2];if(t=Object(l(t)),u(k)&&a(k),this&&this!==Array&&i(this))e=this;else{if(!k){if(o(t))return y=t.length,1!==y?Array.apply(null,t):(m=new Array(1),m[0]=t[0],m);if(_(t)){for(m=new Array(y=t.length),r=0;r<y;++r)m[r]=t[r];return m}}m=[]}if(!_(t))if(void 0!==(w=t[n])){for(v=a(w).call(t),e&&(m=new e),b=v.next(),r=0;!b.done;)x=k?p.call(k,M,b.value,r):b.value,e?(h.value=x,d(m,r,h)):m[r]=x,b=v.next(),++r;y=r}else if(c(t)){for(y=t.length,e&&(m=new e),r=0,f=0;r<y;++r)x=t[r],r+1<y&&(g=x.charCodeAt(0),g>=55296&&g<=56319&&(x+=t[++r])),x=k?p.call(k,M,x,f):x,e?(h.value=x,d(m,f,h)):m[f]=x,++f;y=f}if(void 0===y)for(y=s(t.length),e&&(m=new e(y)),r=0;r<y;++r)x=k?p.call(k,M,t[r],r):t[r],e?(h.value=x,d(m,r,h)):m[r]=x;return e&&(h.value=null,m.length=y),m}},{"../../function/is-arguments":"es5-ext/function/is-arguments","../../function/is-function":"es5-ext/function/is-function","../../number/to-pos-integer":"es5-ext/number/to-pos-integer","../../object/is-value":"es5-ext/object/is-value","../../object/valid-callable":"es5-ext/object/valid-callable","../../object/valid-value":"es5-ext/object/valid-value","../../string/is-string":"es5-ext/string/is-string","es6-symbol":"es6-symbol/index"}],"es5-ext/function/is-arguments":[function(t,e,r){"use strict";var n=Object.prototype.toString,o=n.call(function(){return arguments}());e.exports=function(t){return n.call(t)===o}},{}],"es5-ext/function/is-function":[function(t,e,r){"use strict";var n=Object.prototype.toString,o=n.call(t("./noop"));e.exports=function(t){return"function"==typeof t&&n.call(t)===o}},{"./noop":"es5-ext/function/noop"}],"es5-ext/function/noop":[function(t,e,r){"use strict";e.exports=function(){}},{}],"es5-ext/global":[function(t,e,r){e.exports=function(){return this}()},{}],"es5-ext/math/sign/index":[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Math.sign:t("./shim")},{"./is-implemented":"es5-ext/math/sign/is-implemented","./shim":"es5-ext/math/sign/shim"}],"es5-ext/math/sign/is-implemented":[function(t,e,r){"use strict";e.exports=function(){var t=Math.sign;return"function"==typeof t&&(1===t(10)&&t(-20)===-1)}},{}],"es5-ext/math/sign/shim":[function(t,e,r){"use strict";e.exports=function(t){return t=Number(t),isNaN(t)||0===t?t:t>0?1:-1}},{}],"es5-ext/number/is-nan/index":[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Number.isNaN:t("./shim")},{"./is-implemented":"es5-ext/number/is-nan/is-implemented","./shim":"es5-ext/number/is-nan/shim"}],"es5-ext/number/is-nan/is-implemented":[function(t,e,r){"use strict";e.exports=function(){var t=Number.isNaN;return"function"==typeof t&&(!t({})&&t(NaN)&&!t(34))}},{}],"es5-ext/number/is-nan/shim":[function(t,e,r){"use strict";e.exports=function(t){return t!==t}},{}],"es5-ext/number/to-integer":[function(t,e,r){"use strict";var n=t("../math/sign"),o=Math.abs,i=Math.floor;e.exports=function(t){return isNaN(t)?0:(t=Number(t),0!==t&&isFinite(t)?n(t)*i(o(t)):t)}},{"../math/sign":"es5-ext/math/sign/index"}],"es5-ext/number/to-pos-integer":[function(t,e,r){"use strict";var n=t("./to-integer"),o=Math.max;e.exports=function(t){return o(0,n(t))}},{"./to-integer":"es5-ext/number/to-integer"}],"es5-ext/object/_iterate":[function(t,e,r){"use strict";var n=t("./valid-callable"),o=t("./valid-value"),i=Function.prototype.bind,s=Function.prototype.call,a=Object.keys,l=Object.prototype.propertyIsEnumerable;e.exports=function(t,e){return function(r,u){var c,_=arguments[2],p=arguments[3];return r=Object(o(r)),n(u),c=a(r),p&&c.sort("function"==typeof p?i.call(p,r):void 0),"function"!=typeof t&&(t=c[t]),s.call(t,c,function(t,n){return l.call(r,t)?s.call(u,_,r[t],t,r,n):e})}}},{"./valid-callable":"es5-ext/object/valid-callable","./valid-value":"es5-ext/object/valid-value"}],"es5-ext/object/assign/index":[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Object.assign:t("./shim")},{"./is-implemented":"es5-ext/object/assign/is-implemented","./shim":"es5-ext/object/assign/shim"}],"es5-ext/object/assign/is-implemented":[function(t,e,r){"use strict";e.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},{}],"es5-ext/object/assign/shim":[function(t,e,r){"use strict";var n=t("../keys"),o=t("../valid-value"),i=Math.max;e.exports=function(t,e){var r,s,a,l=i(arguments.length,2);for(t=Object(o(t)),a=function(n){try{t[n]=e[n]}catch(o){r||(r=o)}},s=1;s<l;++s)e=arguments[s],n(e).forEach(a);if(void 0!==r)throw r;return t}},{"../keys":"es5-ext/object/keys/index","../valid-value":"es5-ext/object/valid-value"}],"es5-ext/object/copy":[function(t,e,r){"use strict";var n=t("../array/from"),o=t("./assign"),i=t("./valid-value");e.exports=function(t){var e=Object(i(t)),r=arguments[1],s=Object(arguments[2]);if(e!==t&&!r)return e;var a={};return r?n(r,function(e){(s.ensure||e in t)&&(a[e]=t[e])}):o(a,t),a}},{"../array/from":"es5-ext/array/from/index","./assign":"es5-ext/object/assign/index","./valid-value":"es5-ext/object/valid-value"}],"es5-ext/object/create":[function(t,e,r){"use strict";var n,o=Object.create;t("./set-prototype-of/is-implemented")()||(n=t("./set-prototype-of/shim")),
e.exports=function(){var t,e,r;return n?1!==n.level?o:(t={},e={},r={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(t){return"__proto__"===t?void(e[t]={configurable:!0,enumerable:!1,writable:!0,value:void 0}):void(e[t]=r)}),Object.defineProperties(t,e),Object.defineProperty(n,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:t}),function(e,r){return o(null===e?t:e,r)}):o}()},{"./set-prototype-of/is-implemented":"es5-ext/object/set-prototype-of/is-implemented","./set-prototype-of/shim":"es5-ext/object/set-prototype-of/shim"}],"es5-ext/object/for-each":[function(t,e,r){"use strict";e.exports=t("./_iterate")("forEach")},{"./_iterate":"es5-ext/object/_iterate"}],"es5-ext/object/is-callable":[function(t,e,r){"use strict";e.exports=function(t){return"function"==typeof t}},{}],"es5-ext/object/is-object":[function(t,e,r){"use strict";var n=t("./is-value"),o={"function":!0,object:!0};e.exports=function(t){return n(t)&&o[typeof t]||!1}},{"./is-value":"es5-ext/object/is-value"}],"es5-ext/object/is-value":[function(t,e,r){"use strict";var n=t("../function/noop")();e.exports=function(t){return t!==n&&null!==t}},{"../function/noop":"es5-ext/function/noop"}],"es5-ext/object/keys/index":[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Object.keys:t("./shim")},{"./is-implemented":"es5-ext/object/keys/is-implemented","./shim":"es5-ext/object/keys/shim"}],"es5-ext/object/keys/is-implemented":[function(t,e,r){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},{}],"es5-ext/object/keys/shim":[function(t,e,r){"use strict";var n=t("../is-value"),o=Object.keys;e.exports=function(t){return o(n(t)?Object(t):t)}},{"../is-value":"es5-ext/object/is-value"}],"es5-ext/object/map":[function(t,e,r){"use strict";var n=t("./valid-callable"),o=t("./for-each"),i=Function.prototype.call;e.exports=function(t,e){var r={},s=arguments[2];return n(e),o(t,function(t,n,o,a){r[n]=i.call(e,s,t,n,o,a)}),r}},{"./for-each":"es5-ext/object/for-each","./valid-callable":"es5-ext/object/valid-callable"}],"es5-ext/object/normalize-options":[function(t,e,r){"use strict";var n=t("./is-value"),o=Array.prototype.forEach,i=Object.create,s=function(t,e){var r;for(r in t)e[r]=t[r]};e.exports=function(t){var e=i(null);return o.call(arguments,function(t){n(t)&&s(Object(t),e)}),e}},{"./is-value":"es5-ext/object/is-value"}],"es5-ext/object/set-prototype-of/index":[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Object.setPrototypeOf:t("./shim")},{"./is-implemented":"es5-ext/object/set-prototype-of/is-implemented","./shim":"es5-ext/object/set-prototype-of/shim"}],"es5-ext/object/set-prototype-of/is-implemented":[function(t,e,r){"use strict";var n=Object.create,o=Object.getPrototypeOf,i={};e.exports=function(){var t=Object.setPrototypeOf,e=arguments[0]||n;return"function"==typeof t&&o(t(e(null),i))===i}},{}],"es5-ext/object/set-prototype-of/shim":[function(t,e,r){"use strict";var n,o=t("../is-object"),i=t("../valid-value"),s=Object.prototype.isPrototypeOf,a=Object.defineProperty,l={configurable:!0,enumerable:!1,writable:!0,value:void 0};n=function(t,e){if(i(t),null===e||o(e))return t;throw new TypeError("Prototype must be null or an object")},e.exports=function(t){var e,r;return t?(2===t.level?t.set?(r=t.set,e=function(t,e){return r.call(n(t,e),e),t}):e=function(t,e){return n(t,e).__proto__=e,t}:e=function o(t,e){var r;return n(t,e),r=s.call(o.nullPolyfill,t),r&&delete o.nullPolyfill.__proto__,null===e&&(e=o.nullPolyfill),t.__proto__=e,r&&a(o.nullPolyfill,"__proto__",l),t},Object.defineProperty(e,"level",{configurable:!1,enumerable:!1,writable:!1,value:t.level})):null}(function(){var t,e=Object.create(null),r={},n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(n){try{t=n.set,t.call(e,r)}catch(o){}if(Object.getPrototypeOf(e)===r)return{set:t,level:2}}return e.__proto__=r,Object.getPrototypeOf(e)===r?{level:2}:(e={},e.__proto__=r,Object.getPrototypeOf(e)===r&&{level:1})}()),t("../create")},{"../create":"es5-ext/object/create","../is-object":"es5-ext/object/is-object","../valid-value":"es5-ext/object/valid-value"}],"es5-ext/object/valid-callable":[function(t,e,r){"use strict";e.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},{}],"es5-ext/object/valid-object":[function(t,e,r){"use strict";var n=t("./is-object");e.exports=function(t){if(!n(t))throw new TypeError(t+" is not an Object");return t}},{"./is-object":"es5-ext/object/is-object"}],"es5-ext/object/valid-value":[function(t,e,r){"use strict";var n=t("./is-value");e.exports=function(t){if(!n(t))throw new TypeError("Cannot use null or undefined");return t}},{"./is-value":"es5-ext/object/is-value"}],"es5-ext/string/#/contains/index":[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?String.prototype.contains:t("./shim")},{"./is-implemented":"es5-ext/string/#/contains/is-implemented","./shim":"es5-ext/string/#/contains/shim"}],"es5-ext/string/#/contains/is-implemented":[function(t,e,r){"use strict";var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&(n.contains("dwa")===!0&&n.contains("foo")===!1)}},{}],"es5-ext/string/#/contains/shim":[function(t,e,r){"use strict";var n=String.prototype.indexOf;e.exports=function(t){return n.call(this,t,arguments[1])>-1}},{}],"es5-ext/string/is-string":[function(t,e,r){"use strict";var n=Object.prototype.toString,o=n.call("");e.exports=function(t){return"string"==typeof t||t&&"object"==typeof t&&(t instanceof String||n.call(t)===o)||!1}},{}],"es5-ext/string/random-uniq":[function(t,e,r){"use strict";var n=Object.create(null),o=Math.random;e.exports=function(){var t;do t=o().toString(36).slice(2);while(n[t]);return t}},{}],"es6-iterator/array":[function(t,e,r){"use strict";var n,o=t("es5-ext/object/set-prototype-of"),i=t("es5-ext/string/#/contains"),s=t("d"),a=t("es6-symbol"),l=t("./"),u=Object.defineProperty;n=e.exports=function(t,e){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");l.call(this,t),e=e?i.call(e,"key+value")?"key+value":i.call(e,"key")?"key":"value":"value",u(this,"__kind__",s("",e))},o&&o(n,l),delete n.prototype.constructor,n.prototype=Object.create(l.prototype,{_resolve:s(function(t){return"value"===this.__kind__?this.__list__[t]:"key+value"===this.__kind__?[t,this.__list__[t]]:t})}),u(n.prototype,a.toStringTag,s("c","Array Iterator"))},{"./":"es6-iterator/index",d:"d/index","es5-ext/object/set-prototype-of":"es5-ext/object/set-prototype-of/index","es5-ext/string/#/contains":"es5-ext/string/#/contains/index","es6-symbol":"es6-symbol/index"}],"es6-iterator/for-of":[function(t,e,r){"use strict";var n=t("es5-ext/function/is-arguments"),o=t("es5-ext/object/valid-callable"),i=t("es5-ext/string/is-string"),s=t("./get"),a=Array.isArray,l=Function.prototype.call,u=Array.prototype.some;e.exports=function(t,e){var r,c,_,p,h,d,f,m,y=arguments[2];if(a(t)||n(t)?r="array":i(t)?r="string":t=s(t),o(e),_=function(){p=!0},"array"===r)return void u.call(t,function(t){return l.call(e,y,t,_),p});if("string"!==r)for(c=t.next();!c.done;){if(l.call(e,y,c.value,_),p)return;c=t.next()}else for(d=t.length,h=0;h<d&&(f=t[h],h+1<d&&(m=f.charCodeAt(0),m>=55296&&m<=56319&&(f+=t[++h])),l.call(e,y,f,_),!p);++h);}},{"./get":"es6-iterator/get","es5-ext/function/is-arguments":"es5-ext/function/is-arguments","es5-ext/object/valid-callable":"es5-ext/object/valid-callable","es5-ext/string/is-string":"es5-ext/string/is-string"}],"es6-iterator/get":[function(t,e,r){"use strict";var n=t("es5-ext/function/is-arguments"),o=t("es5-ext/string/is-string"),i=t("./array"),s=t("./string"),a=t("./valid-iterable"),l=t("es6-symbol").iterator;e.exports=function(t){return"function"==typeof a(t)[l]?t[l]():n(t)?new i(t):o(t)?new s(t):new i(t)}},{"./array":"es6-iterator/array","./string":"es6-iterator/string","./valid-iterable":"es6-iterator/valid-iterable","es5-ext/function/is-arguments":"es5-ext/function/is-arguments","es5-ext/string/is-string":"es5-ext/string/is-string","es6-symbol":"es6-symbol/index"}],"es6-iterator/index":[function(t,e,r){"use strict";var n,o=t("es5-ext/array/#/clear"),i=t("es5-ext/object/assign"),s=t("es5-ext/object/valid-callable"),a=t("es5-ext/object/valid-value"),l=t("d"),u=t("d/auto-bind"),c=t("es6-symbol"),_=Object.defineProperty,p=Object.defineProperties;e.exports=n=function(t,e){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");p(this,{__list__:l("w",a(t)),__context__:l("w",e),__nextIndex__:l("w",0)}),e&&(s(e.on),e.on("_add",this._onAdd),e.on("_delete",this._onDelete),e.on("_clear",this._onClear))},delete n.prototype.constructor,p(n.prototype,i({_next:l(function(){var t;if(this.__list__)return this.__redo__&&(t=this.__redo__.shift(),void 0!==t)?t:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:l(function(){return this._createResult(this._next())}),_createResult:l(function(t){return void 0===t?{done:!0,value:void 0}:{done:!1,value:this._resolve(t)}}),_resolve:l(function(t){return this.__list__[t]}),_unBind:l(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:l(function(){return"[object "+(this[c.toStringTag]||"Object")+"]"})},u({_onAdd:l(function(t){if(!(t>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void _(this,"__redo__",l("c",[t]));this.__redo__.forEach(function(e,r){e>=t&&(this.__redo__[r]=++e)},this),this.__redo__.push(t)}}),_onDelete:l(function(t){var e;t>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(e=this.__redo__.indexOf(t),e!==-1&&this.__redo__.splice(e,1),this.__redo__.forEach(function(e,r){e>t&&(this.__redo__[r]=--e)},this)))}),_onClear:l(function(){this.__redo__&&o.call(this.__redo__),this.__nextIndex__=0})}))),_(n.prototype,c.iterator,l(function(){return this}))},{d:"d/index","d/auto-bind":"d/auto-bind","es5-ext/array/#/clear":"es5-ext/array/#/clear","es5-ext/object/assign":"es5-ext/object/assign/index","es5-ext/object/valid-callable":"es5-ext/object/valid-callable","es5-ext/object/valid-value":"es5-ext/object/valid-value","es6-symbol":"es6-symbol/index"}],"es6-iterator/is-iterable":[function(t,e,r){"use strict";var n=t("es5-ext/function/is-arguments"),o=t("es5-ext/object/is-value"),i=t("es5-ext/string/is-string"),s=t("es6-symbol").iterator,a=Array.isArray;e.exports=function(t){return!!o(t)&&(!!a(t)||(!!i(t)||(!!n(t)||"function"==typeof t[s])))}},{"es5-ext/function/is-arguments":"es5-ext/function/is-arguments","es5-ext/object/is-value":"es5-ext/object/is-value","es5-ext/string/is-string":"es5-ext/string/is-string","es6-symbol":"es6-symbol/index"}],"es6-iterator/string":[function(t,e,r){"use strict";var n,o=t("es5-ext/object/set-prototype-of"),i=t("d"),s=t("es6-symbol"),a=t("./"),l=Object.defineProperty;n=e.exports=function(t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");t=String(t),a.call(this,t),l(this,"__length__",i("",t.length))},o&&o(n,a),delete n.prototype.constructor,n.prototype=Object.create(a.prototype,{_next:i(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:i(function(t){var e,r=this.__list__[t];return this.__nextIndex__===this.__length__?r:(e=r.charCodeAt(0),e>=55296&&e<=56319?r+this.__list__[this.__nextIndex__++]:r)})}),l(n.prototype,s.toStringTag,i("c","String Iterator"))},{"./":"es6-iterator/index",d:"d/index","es5-ext/object/set-prototype-of":"es5-ext/object/set-prototype-of/index","es6-symbol":"es6-symbol/index"}],"es6-iterator/valid-iterable":[function(t,e,r){"use strict";var n=t("./is-iterable");e.exports=function(t){if(!n(t))throw new TypeError(t+" is not iterable");return t}},{"./is-iterable":"es6-iterator/is-iterable"}],"es6-promise":[function(e,r,n){(function(n,o){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   3.0.2
 */
(function(){"use strict";function i(t){return"function"==typeof t||"object"==typeof t&&null!==t}function s(t){return"function"==typeof t}function a(t){return"object"==typeof t&&null!==t}function l(t){X=t}function u(t){$=t}function c(){return function(){n.nextTick(f)}}function _(){return function(){Y(f)}}function p(){var t=0,e=new K(f),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}function h(){var t=new MessageChannel;return t.port1.onmessage=f,function(){t.port2.postMessage(0)}}function d(){return function(){setTimeout(f,1)}}function f(){for(var t=0;t<J;t+=2){var e=rt[t],r=rt[t+1];e(r),rt[t]=void 0,rt[t+1]=void 0}J=0}function m(){try{var t=e,r=t("vertx");return Y=r.runOnLoop||r.runOnContext,_()}catch(n){return d()}}function y(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function v(){return new TypeError("A promises callback cannot return that same promise.")}function b(t){try{return t.then}catch(e){return st.error=e,st}}function w(t,e,r,n){try{t.call(e,r,n)}catch(o){return o}}function x(t,e,r){$(function(t){var n=!1,o=w(r,e,function(r){n||(n=!0,e!==r?j(t,r):T(t,r))},function(e){n||(n=!0,O(t,e))},"Settle: "+(t._label||" unknown promise"));!n&&o&&(n=!0,O(t,o))},t)}function k(t,e){e._state===ot?T(t,e._result):e._state===it?O(t,e._result):P(e,void 0,function(e){j(t,e)},function(e){O(t,e)})}function M(t,e){if(e.constructor===t.constructor)k(t,e);else{var r=b(e);r===st?O(t,st.error):void 0===r?T(t,e):s(r)?x(t,e,r):T(t,e)}}function j(t,e){t===e?O(t,g()):i(e)?M(t,e):T(t,e)}function S(t){t._onerror&&t._onerror(t._result),A(t)}function T(t,e){t._state===nt&&(t._result=e,t._state=ot,0!==t._subscribers.length&&$(A,t))}function O(t,e){t._state===nt&&(t._state=it,t._result=e,$(S,t))}function P(t,e,r,n){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+ot]=r,o[i+it]=n,0===i&&t._state&&$(A,t)}function A(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n,o,i=t._result,s=0;s<e.length;s+=3)n=e[s],o=e[s+r],n?C(r,n,o,i):o(i);t._subscribers.length=0}}function E(){this.error=null}function z(t,e){try{return t(e)}catch(r){return at.error=r,at}}function C(t,e,r,n){var o,i,a,l,u=s(r);if(u){if(o=z(r,n),o===at?(l=!0,i=o.error,o=null):a=!0,e===o)return void O(e,v())}else o=n,a=!0;e._state!==nt||(u&&a?j(e,o):l?O(e,i):t===ot?T(e,o):t===it&&O(e,o))}function N(t,e){try{e(function(e){j(t,e)},function(e){O(t,e)})}catch(r){O(t,r)}}function D(t,e){var r=this;r._instanceConstructor=t,r.promise=new t(y),r._validateInput(e)?(r._input=e,r.length=e.length,r._remaining=e.length,r._init(),0===r.length?T(r.promise,r._result):(r.length=r.length||0,r._enumerate(),0===r._remaining&&T(r.promise,r._result))):O(r.promise,r._validationError())}function I(t){return new lt(this,t).promise}function F(t){function e(t){j(o,t)}function r(t){O(o,t)}var n=this,o=new n(y);if(!H(t))return O(o,new TypeError("You must pass an array to race.")),o;for(var i=t.length,s=0;o._state===nt&&s<i;s++)P(n.resolve(t[s]),void 0,e,r);return o}function B(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var r=new e(y);return j(r,t),r}function R(t){var e=this,r=new e(y);return O(r,t),r}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function V(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function G(t){this._id=ht++,this._state=void 0,this._result=void 0,this._subscribers=[],y!==t&&(s(t)||L(),this instanceof G||V(),N(this,t))}function q(){var t;if("undefined"!=typeof o)t=o;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=t.Promise;r&&"[object Promise]"===Object.prototype.toString.call(r.resolve())&&!r.cast||(t.Promise=dt)}var U;U=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var Y,X,W,H=U,J=0,$=({}.toString,function(t,e){rt[J]=t,rt[J+1]=e,J+=2,2===J&&(X?X(f):W())}),Q="undefined"!=typeof window?window:void 0,Z=Q||{},K=Z.MutationObserver||Z.WebKitMutationObserver,tt="undefined"!=typeof n&&"[object process]"==={}.toString.call(n),et="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,rt=new Array(1e3);W=tt?c():K?p():et?h():void 0===Q&&"function"==typeof e?m():d();var nt=void 0,ot=1,it=2,st=new E,at=new E;D.prototype._validateInput=function(t){return H(t)},D.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},D.prototype._init=function(){this._result=new Array(this.length)};var lt=D;D.prototype._enumerate=function(){for(var t=this,e=t.length,r=t.promise,n=t._input,o=0;r._state===nt&&o<e;o++)t._eachEntry(n[o],o)},D.prototype._eachEntry=function(t,e){var r=this,n=r._instanceConstructor;a(t)?t.constructor===n&&t._state!==nt?(t._onerror=null,r._settledAt(t._state,e,t._result)):r._willSettleAt(n.resolve(t),e):(r._remaining--,r._result[e]=t)},D.prototype._settledAt=function(t,e,r){var n=this,o=n.promise;o._state===nt&&(n._remaining--,t===it?O(o,r):n._result[e]=r),0===n._remaining&&T(o,n._result)},D.prototype._willSettleAt=function(t,e){var r=this;P(t,void 0,function(t){r._settledAt(ot,e,t)},function(t){r._settledAt(it,e,t)})};var ut=I,ct=F,_t=B,pt=R,ht=0,dt=G;G.all=ut,G.race=ct,G.resolve=_t,G.reject=pt,G._setScheduler=l,G._setAsap=u,G._asap=$,G.prototype={constructor:G,then:function(t,e){var r=this,n=r._state;if(n===ot&&!t||n===it&&!e)return this;var o=new this.constructor(y),i=r._result;if(n){var s=arguments[n-1];$(function(){C(n,o,s,i)})}else P(r,o,t,e);return o},"catch":function(t){return this.then(null,t)}};var ft=q,mt={Promise:dt,polyfill:ft};"function"==typeof t&&t.amd?t(function(){return mt}):"undefined"!=typeof r&&r.exports?r.exports=mt:"undefined"!=typeof this&&(this.ES6Promise=mt),ft()}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:"_process"}],"es6-set/implement":[function(t,e,r){"use strict";t("./is-implemented")()||Object.defineProperty(t("es5-ext/global"),"Set",{value:t("./polyfill"),configurable:!0,enumerable:!1,writable:!0})},{"./is-implemented":"es6-set/is-implemented","./polyfill":"es6-set/polyfill","es5-ext/global":"es5-ext/global"}],"es6-set/is-implemented":[function(t,e,r){"use strict";e.exports=function(){var t,e,r;return"function"==typeof Set&&(t=new Set(["raz","dwa","trzy"]),"[object Set]"===String(t)&&(3===t.size&&("function"==typeof t.add&&("function"==typeof t.clear&&("function"==typeof t["delete"]&&("function"==typeof t.entries&&("function"==typeof t.forEach&&("function"==typeof t.has&&("function"==typeof t.keys&&("function"==typeof t.values&&(e=t.values(),r=e.next(),r.done===!1&&"raz"===r.value)))))))))))}},{}],"es6-set/is-native-implemented":[function(t,e,r){"use strict";e.exports=function(){return"undefined"!=typeof Set&&"[object Set]"===Object.prototype.toString.call(Set.prototype)}()},{}],"es6-set/lib/iterator":[function(t,e,r){"use strict";var n,o=t("es5-ext/object/set-prototype-of"),i=t("es5-ext/string/#/contains"),s=t("d"),a=t("es6-iterator"),l=t("es6-symbol").toStringTag,u=Object.defineProperty;n=e.exports=function(t,e){return this instanceof n?(a.call(this,t.__setData__,t),e=e&&i.call(e,"key+value")?"key+value":"value",void u(this,"__kind__",s("",e))):new n(t,e)},o&&o(n,a),n.prototype=Object.create(a.prototype,{constructor:s(n),_resolve:s(function(t){return"value"===this.__kind__?this.__list__[t]:[this.__list__[t],this.__list__[t]]}),toString:s(function(){return"[object Set Iterator]"})}),u(n.prototype,l,s("c","Set Iterator"))},{d:"d/index","es5-ext/object/set-prototype-of":"es5-ext/object/set-prototype-of/index","es5-ext/string/#/contains":"es5-ext/string/#/contains/index","es6-iterator":"es6-iterator/index","es6-symbol":"es6-symbol/index"}],"es6-set/polyfill":[function(t,e,r){"use strict";var n,o,i,s=t("es5-ext/array/#/clear"),a=t("es5-ext/array/#/e-index-of"),l=t("es5-ext/object/set-prototype-of"),u=t("es5-ext/object/valid-callable"),c=t("d"),_=t("event-emitter"),p=t("es6-symbol"),h=t("es6-iterator/valid-iterable"),d=t("es6-iterator/for-of"),f=t("./lib/iterator"),m=t("./is-native-implemented"),y=Function.prototype.call,g=Object.defineProperty,v=Object.getPrototypeOf;m&&(i=Set),e.exports=n=function(){var t,e=arguments[0];if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");return t=m&&l?l(new i,v(this)):this,null!=e&&h(e),g(t,"__setData__",c("c",[])),e?(d(e,function(t){a.call(this,t)===-1&&this.push(t)},t.__setData__),t):t},m&&(l&&l(n,i),n.prototype=Object.create(i.prototype,{constructor:c(n)})),_(Object.defineProperties(n.prototype,{add:c(function(t){return this.has(t)?this:(this.emit("_add",this.__setData__.push(t)-1,t),this)}),clear:c(function(){this.__setData__.length&&(s.call(this.__setData__),this.emit("_clear"))}),"delete":c(function(t){var e=a.call(this.__setData__,t);return e!==-1&&(this.__setData__.splice(e,1),this.emit("_delete",e,t),!0)}),entries:c(function(){return new f(this,"key+value")}),forEach:c(function(t){var e,r,n,o=arguments[1];for(u(t),e=this.values(),r=e._next();void 0!==r;)n=e._resolve(r),y.call(t,o,n,n,this),r=e._next()}),has:c(function(t){return a.call(this.__setData__,t)!==-1}),keys:c(o=function(){return this.values()}),size:c.gs(function(){return this.__setData__.length}),values:c(function(){return new f(this)}),toString:c(function(){return"[object Set]"})})),g(n.prototype,p.iterator,c(o)),g(n.prototype,p.toStringTag,c("c","Set"))},{"./is-native-implemented":"es6-set/is-native-implemented","./lib/iterator":"es6-set/lib/iterator",d:"d/index","es5-ext/array/#/clear":"es5-ext/array/#/clear","es5-ext/array/#/e-index-of":"es5-ext/array/#/e-index-of","es5-ext/object/set-prototype-of":"es5-ext/object/set-prototype-of/index","es5-ext/object/valid-callable":"es5-ext/object/valid-callable","es6-iterator/for-of":"es6-iterator/for-of","es6-iterator/valid-iterable":"es6-iterator/valid-iterable","es6-symbol":"es6-symbol/index","event-emitter":"event-emitter/index"}],"es6-symbol/index":[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Symbol:t("./polyfill")},{"./is-implemented":"es6-symbol/is-implemented","./polyfill":"es6-symbol/polyfill"}],"es6-symbol/is-implemented":[function(t,e,r){"use strict";var n={object:!0,symbol:!0};e.exports=function(){var t;if("function"!=typeof Symbol)return!1;t=Symbol("test symbol");try{String(t)}catch(e){return!1}return!!n[typeof Symbol.iterator]&&(!!n[typeof Symbol.toPrimitive]&&!!n[typeof Symbol.toStringTag])}},{}],"es6-symbol/is-symbol":[function(t,e,r){"use strict";e.exports=function(t){return!!t&&("symbol"==typeof t||!!t.constructor&&("Symbol"===t.constructor.name&&"Symbol"===t[t.constructor.toStringTag]))}},{}],"es6-symbol/polyfill":[function(t,e,r){"use strict";var n,o,i,s,a=t("d"),l=t("./validate-symbol"),u=Object.create,c=Object.defineProperties,_=Object.defineProperty,p=Object.prototype,h=u(null);if("function"==typeof Symbol){n=Symbol;try{String(n()),s=!0}catch(d){}}var f=function(){var t=u(null);return function(e){for(var r,n,o=0;t[e+(o||"")];)++o;return e+=o||"",t[e]=!0,r="@@"+e,_(p,r,a.gs(null,function(t){n||(n=!0,_(this,r,a(t)),n=!1)})),r}}();i=function(t){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return o(t)},e.exports=o=function m(t){var e;if(this instanceof m)throw new TypeError("Symbol is not a constructor");return s?n(t):(e=u(i.prototype),t=void 0===t?"":String(t),c(e,{__description__:a("",t),__name__:a("",f(t))}))},c(o,{"for":a(function(t){return h[t]?h[t]:h[t]=o(String(t))}),keyFor:a(function(t){var e;l(t);for(e in h)if(h[e]===t)return e}),hasInstance:a("",n&&n.hasInstance||o("hasInstance")),isConcatSpreadable:a("",n&&n.isConcatSpreadable||o("isConcatSpreadable")),iterator:a("",n&&n.iterator||o("iterator")),match:a("",n&&n.match||o("match")),replace:a("",n&&n.replace||o("replace")),search:a("",n&&n.search||o("search")),species:a("",n&&n.species||o("species")),split:a("",n&&n.split||o("split")),toPrimitive:a("",n&&n.toPrimitive||o("toPrimitive")),toStringTag:a("",n&&n.toStringTag||o("toStringTag")),unscopables:a("",n&&n.unscopables||o("unscopables"))}),c(i.prototype,{constructor:a(o),toString:a("",function(){return this.__name__})}),c(o.prototype,{toString:a(function(){return"Symbol ("+l(this).__description__+")"}),valueOf:a(function(){return l(this)})}),_(o.prototype,o.toPrimitive,a("",function(){var t=l(this);return"symbol"==typeof t?t:t.toString()})),_(o.prototype,o.toStringTag,a("c","Symbol")),_(i.prototype,o.toStringTag,a("c",o.prototype[o.toStringTag])),_(i.prototype,o.toPrimitive,a("c",o.prototype[o.toPrimitive]))},{"./validate-symbol":"es6-symbol/validate-symbol",d:"d/index"}],"es6-symbol/validate-symbol":[function(t,e,r){"use strict";var n=t("./is-symbol");e.exports=function(t){if(!n(t))throw new TypeError(t+" is not a symbol");return t}},{"./is-symbol":"es6-symbol/is-symbol"}],"es6-weak-map/implement":[function(t,e,r){"use strict";t("./is-implemented")()||Object.defineProperty(t("es5-ext/global"),"WeakMap",{value:t("./polyfill"),configurable:!0,enumerable:!1,writable:!0})},{"./is-implemented":"es6-weak-map/is-implemented","./polyfill":"es6-weak-map/polyfill","es5-ext/global":"es5-ext/global"}],"es6-weak-map/is-implemented":[function(t,e,r){"use strict";e.exports=function(){var t,e;if("function"!=typeof WeakMap)return!1;try{t=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch(r){return!1}return"[object WeakMap]"===String(t)&&("function"==typeof t.set&&(t.set({},1)===t&&("function"==typeof t["delete"]&&("function"==typeof t.has&&"one"===t.get(e)))))}},{}],"es6-weak-map/is-native-implemented":[function(t,e,r){"use strict";e.exports=function(){return"function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)}()},{}],"es6-weak-map/polyfill":[function(t,e,r){"use strict";var n,o=t("es5-ext/object/set-prototype-of"),i=t("es5-ext/object/valid-object"),s=t("es5-ext/object/valid-value"),a=t("es5-ext/string/random-uniq"),l=t("d"),u=t("es6-iterator/get"),c=t("es6-iterator/for-of"),_=t("es6-symbol").toStringTag,p=t("./is-native-implemented"),h=Array.isArray,d=Object.defineProperty,f=Object.prototype.hasOwnProperty,m=Object.getPrototypeOf;e.exports=n=function(){var t,e=arguments[0];if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");return t=p&&o&&WeakMap!==n?o(new WeakMap,m(this)):this,null!=e&&(h(e)||(e=u(e))),d(t,"__weakMapData__",l("c","$weakMap$"+a())),e?(c(e,function(e){s(e),t.set(e[0],e[1])}),t):t},p&&(o&&o(n,WeakMap),n.prototype=Object.create(WeakMap.prototype,{constructor:l(n)})),Object.defineProperties(n.prototype,{"delete":l(function(t){return!!f.call(i(t),this.__weakMapData__)&&(delete t[this.__weakMapData__],!0)}),get:l(function(t){if(f.call(i(t),this.__weakMapData__))return t[this.__weakMapData__]}),has:l(function(t){return f.call(i(t),this.__weakMapData__)}),set:l(function(t,e){return d(i(t),this.__weakMapData__,l("c",e)),this}),toString:l(function(){return"[object WeakMap]"})}),d(n.prototype,_,l("c","WeakMap"))},{"./is-native-implemented":"es6-weak-map/is-native-implemented",d:"d/index","es5-ext/object/set-prototype-of":"es5-ext/object/set-prototype-of/index","es5-ext/object/valid-object":"es5-ext/object/valid-object","es5-ext/object/valid-value":"es5-ext/object/valid-value","es5-ext/string/random-uniq":"es5-ext/string/random-uniq","es6-iterator/for-of":"es6-iterator/for-of","es6-iterator/get":"es6-iterator/get","es6-symbol":"es6-symbol/index"}],"event-emitter/index":[function(t,e,r){"use strict";var n,o,i,s,a,l,u,c=t("d"),_=t("es5-ext/object/valid-callable"),p=Function.prototype.apply,h=Function.prototype.call,d=Object.create,f=Object.defineProperty,m=Object.defineProperties,y=Object.prototype.hasOwnProperty,g={configurable:!0,enumerable:!1,writable:!0};n=function(t,e){var r;return _(e),y.call(this,"__ee__")?r=this.__ee__:(r=g.value=d(null),f(this,"__ee__",g),g.value=null),r[t]?"object"==typeof r[t]?r[t].push(e):r[t]=[r[t],e]:r[t]=e,this},o=function(t,e){var r,o;return _(e),o=this,n.call(this,t,r=function(){i.call(o,t,r),p.call(e,this,arguments)}),r.__eeOnceListener__=e,this},i=function(t,e){var r,n,o,i;if(_(e),!y.call(this,"__ee__"))return this;if(r=this.__ee__,!r[t])return this;if(n=r[t],"object"==typeof n)for(i=0;o=n[i];++i)o!==e&&o.__eeOnceListener__!==e||(2===n.length?r[t]=n[i?0:1]:n.splice(i,1));else n!==e&&n.__eeOnceListener__!==e||delete r[t];return this},s=function(t){var e,r,n,o,i;if(y.call(this,"__ee__")&&(o=this.__ee__[t]))if("object"==typeof o){for(r=arguments.length,i=new Array(r-1),e=1;e<r;++e)i[e-1]=arguments[e];for(o=o.slice(),e=0;n=o[e];++e)p.call(n,this,i)}else switch(arguments.length){case 1:h.call(o,this);break;case 2:h.call(o,this,arguments[1]);break;case 3:h.call(o,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),e=1;e<r;++e)i[e-1]=arguments[e];p.call(o,this,i)}},a={on:n,once:o,off:i,emit:s},l={on:c(n),once:c(o),off:c(i),emit:c(s)},u=m({},l),e.exports=r=function(t){return null==t?d(u):m(Object(t),l)},r.methods=a},{d:"d/index","es5-ext/object/valid-callable":"es5-ext/object/valid-callable"}],hammerjs:[function(e,r,n){/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(e,n,o,i){"use strict";function s(t,e,r){return setTimeout(_(t,r),e)}function a(t,e,r){return!!Array.isArray(t)&&(l(t,r[e],r),!0)}function l(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==i)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function u(t,r,n){var o="DEPRECATED METHOD: "+r+"\n"+n+" AT \n";return function(){var r=new Error("get-stack-trace"),n=r&&r.stack?r.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=e.console&&(e.console.warn||e.console.log);return i&&i.call(e.console,o,n),t.apply(this,arguments)}}function c(t,e,r){var n,o=e.prototype;n=t.prototype=Object.create(o),n.constructor=t,n._super=o,r&&ht(n,r)}function _(t,e){return function(){return t.apply(e,arguments)}}function p(t,e){return typeof t==mt?t.apply(e?e[0]||i:i,e):t}function h(t,e){return t===i?e:t}function d(t,e,r){l(g(e),function(e){t.addEventListener(e,r,!1)})}function f(t,e,r){l(g(e),function(e){t.removeEventListener(e,r,!1)})}function m(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function y(t,e){return t.indexOf(e)>-1}function g(t){return t.trim().split(/\s+/g)}function v(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}function b(t){return Array.prototype.slice.call(t,0)}function w(t,e,r){for(var n=[],o=[],i=0;i<t.length;){var s=e?t[i][e]:t[i];v(o,s)<0&&n.push(t[i]),o[i]=s,i++}return r&&(n=e?n.sort(function(t,r){return t[e]>r[e]}):n.sort()),n}function x(t,e){for(var r,n,o=e[0].toUpperCase()+e.slice(1),s=0;s<dt.length;){if(r=dt[s],n=r?r+o:e,n in t)return n;s++}return i}function k(){return xt++}function M(t){var r=t.ownerDocument||t;return r.defaultView||r.parentWindow||e}function j(t,e){var r=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){p(t.options.enable,[t])&&r.handler(e)},this.init()}function S(t){var e,r=t.options.inputClass;return new(e=r?r:jt?L:St?q:Mt?Y:R)(t,T)}function T(t,e,r){var n=r.pointers.length,o=r.changedPointers.length,i=e&zt&&n-o===0,s=e&(Nt|Dt)&&n-o===0;r.isFirst=!!i,r.isFinal=!!s,i&&(t.session={}),r.eventType=e,O(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function O(t,e){var r=t.session,n=e.pointers,o=n.length;r.firstInput||(r.firstInput=E(e)),o>1&&!r.firstMultiple?r.firstMultiple=E(e):1===o&&(r.firstMultiple=!1);var i=r.firstInput,s=r.firstMultiple,a=s?s.center:i.center,l=e.center=z(n);e.timeStamp=vt(),e.deltaTime=e.timeStamp-i.timeStamp,e.angle=I(a,l),e.distance=D(a,l),P(r,e),e.offsetDirection=N(e.deltaX,e.deltaY);var u=C(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=gt(u.x)>gt(u.y)?u.x:u.y,e.scale=s?B(s.pointers,n):1,e.rotation=s?F(s.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,A(r,e);var c=t.element;m(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c}function P(t,e){var r=e.center,n=t.offsetDelta||{},o=t.prevDelta||{},i=t.prevInput||{};e.eventType!==zt&&i.eventType!==Nt||(o=t.prevDelta={x:i.deltaX||0,y:i.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=o.x+(r.x-n.x),e.deltaY=o.y+(r.y-n.y)}function A(t,e){var r,n,o,s,a=t.lastInterval||e,l=e.timeStamp-a.timeStamp;if(e.eventType!=Dt&&(l>Et||a.velocity===i)){var u=e.deltaX-a.deltaX,c=e.deltaY-a.deltaY,_=C(l,u,c);n=_.x,o=_.y,r=gt(_.x)>gt(_.y)?_.x:_.y,s=N(u,c),t.lastInterval=e}else r=a.velocity,n=a.velocityX,o=a.velocityY,s=a.direction;e.velocity=r,e.velocityX=n,e.velocityY=o,e.direction=s}function E(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:yt(t.pointers[r].clientX),clientY:yt(t.pointers[r].clientY)},r++;return{timeStamp:vt(),pointers:e,center:z(e),deltaX:t.deltaX,deltaY:t.deltaY}}function z(t){var e=t.length;if(1===e)return{x:yt(t[0].clientX),y:yt(t[0].clientY)};for(var r=0,n=0,o=0;o<e;)r+=t[o].clientX,n+=t[o].clientY,o++;return{x:yt(r/e),y:yt(n/e)}}function C(t,e,r){return{x:e/t||0,y:r/t||0}}function N(t,e){return t===e?It:gt(t)>=gt(e)?t<0?Ft:Bt:e<0?Rt:Lt}function D(t,e,r){r||(r=Ut);var n=e[r[0]]-t[r[0]],o=e[r[1]]-t[r[1]];return Math.sqrt(n*n+o*o)}function I(t,e,r){r||(r=Ut);var n=e[r[0]]-t[r[0]],o=e[r[1]]-t[r[1]];return 180*Math.atan2(o,n)/Math.PI}function F(t,e){return I(e[1],e[0],Yt)+I(t[1],t[0],Yt)}function B(t,e){return D(e[0],e[1],Yt)/D(t[0],t[1],Yt)}function R(){this.evEl=Wt,this.evWin=Ht,this.pressed=!1,j.apply(this,arguments)}function L(){this.evEl=Qt,this.evWin=Zt,j.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function V(){this.evTarget=te,this.evWin=ee,this.started=!1,j.apply(this,arguments)}function G(t,e){var r=b(t.touches),n=b(t.changedTouches);return e&(Nt|Dt)&&(r=w(r.concat(n),"identifier",!0)),[r,n]}function q(){this.evTarget=ne,this.targetIds={},j.apply(this,arguments)}function U(t,e){var r=b(t.touches),n=this.targetIds;if(e&(zt|Ct)&&1===r.length)return n[r[0].identifier]=!0,[r,r];var o,i,s=b(t.changedTouches),a=[],l=this.target;if(i=r.filter(function(t){return m(t.target,l)}),e===zt)for(o=0;o<i.length;)n[i[o].identifier]=!0,o++;for(o=0;o<s.length;)n[s[o].identifier]&&a.push(s[o]),e&(Nt|Dt)&&delete n[s[o].identifier],o++;return a.length?[w(i.concat(a),"identifier",!0),a]:void 0}function Y(){j.apply(this,arguments);var t=_(this.handler,this);this.touch=new q(this.manager,t),this.mouse=new R(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function X(t,e){t&zt?(this.primaryTouch=e.changedPointers[0].identifier,W.call(this,e)):t&(Nt|Dt)&&W.call(this,e)}function W(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var r={x:e.clientX,y:e.clientY};this.lastTouches.push(r);var n=this.lastTouches,o=function(){var t=n.indexOf(r);t>-1&&n.splice(t,1)};setTimeout(o,oe)}}function H(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var o=this.lastTouches[n],i=Math.abs(e-o.x),s=Math.abs(r-o.y);if(i<=ie&&s<=ie)return!0}return!1}function J(t,e){this.manager=t,this.set(e)}function $(t){if(y(t,_e))return _e;var e=y(t,pe),r=y(t,he);return e&&r?_e:e||r?e?pe:he:y(t,ce)?ce:ue}function Q(){if(!ae)return!1;var t={},r=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!r||e.CSS.supports("touch-action",n)}),t}function Z(t){this.options=ht({},this.defaults,t||{}),this.id=k(),this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=fe,this.simultaneous={},this.requireFail=[]}function K(t){return t&be?"cancel":t&ge?"end":t&ye?"move":t&me?"start":""}function tt(t){return t==Lt?"down":t==Rt?"up":t==Ft?"left":t==Bt?"right":""}function et(t,e){var r=e.manager;return r?r.get(t):t}function rt(){Z.apply(this,arguments)}function nt(){rt.apply(this,arguments),this.pX=null,this.pY=null}function ot(){rt.apply(this,arguments)}function it(){Z.apply(this,arguments),this._timer=null,this._input=null}function st(){rt.apply(this,arguments)}function at(){rt.apply(this,arguments)}function lt(){Z.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ut(t,e){return e=e||{},e.recognizers=h(e.recognizers,ut.defaults.preset),new ct(t,e)}function ct(t,e){this.options=ht({},ut.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=S(this),this.touchAction=new J(this,this.options.touchAction),_t(this,!0),l(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function _t(t,e){var r=t.element;if(r.style){var n;l(t.options.cssProps,function(o,i){n=x(r.style,i),e?(t.oldCssProps[n]=r.style[n],r.style[n]=o):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function pt(t,e){var r=n.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var ht,dt=["","webkit","Moz","MS","ms","o"],ft=n.createElement("div"),mt="function",yt=Math.round,gt=Math.abs,vt=Date.now;ht="function"!=typeof Object.assign?function(t){if(t===i||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),r=1;r<arguments.length;r++){var n=arguments[r];if(n!==i&&null!==n)for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])}return e}:Object.assign;var bt=u(function(t,e,r){for(var n=Object.keys(e),o=0;o<n.length;)(!r||r&&t[n[o]]===i)&&(t[n[o]]=e[n[o]]),o++;return t},"extend","Use `assign`."),wt=u(function(t,e){return bt(t,e,!0)},"merge","Use `assign`."),xt=1,kt=/mobile|tablet|ip(ad|hone|od)|android/i,Mt="ontouchstart"in e,jt=x(e,"PointerEvent")!==i,St=Mt&&kt.test(navigator.userAgent),Tt="touch",Ot="pen",Pt="mouse",At="kinect",Et=25,zt=1,Ct=2,Nt=4,Dt=8,It=1,Ft=2,Bt=4,Rt=8,Lt=16,Vt=Ft|Bt,Gt=Rt|Lt,qt=Vt|Gt,Ut=["x","y"],Yt=["clientX","clientY"];j.prototype={handler:function(){},init:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(M(this.element),this.evWin,this.domHandler)}};var Xt={mousedown:zt,mousemove:Ct,mouseup:Nt},Wt="mousedown",Ht="mousemove mouseup";c(R,j,{handler:function(t){var e=Xt[t.type];e&zt&&0===t.button&&(this.pressed=!0),e&Ct&&1!==t.which&&(e=Nt),this.pressed&&(e&Nt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Pt,srcEvent:t}))}});var Jt={pointerdown:zt,pointermove:Ct,pointerup:Nt,pointercancel:Dt,pointerout:Dt},$t={2:Tt,3:Ot,4:Pt,5:At},Qt="pointerdown",Zt="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Qt="MSPointerDown",Zt="MSPointerMove MSPointerUp MSPointerCancel"),c(L,j,{handler:function(t){var e=this.store,r=!1,n=t.type.toLowerCase().replace("ms",""),o=Jt[n],i=$t[t.pointerType]||t.pointerType,s=i==Tt,a=v(e,t.pointerId,"pointerId");o&zt&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):o&(Nt|Dt)&&(r=!0),a<0||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:i,srcEvent:t}),r&&e.splice(a,1))}});var Kt={touchstart:zt,touchmove:Ct,touchend:Nt,touchcancel:Dt},te="touchstart",ee="touchstart touchmove touchend touchcancel";c(V,j,{handler:function(t){var e=Kt[t.type];if(e===zt&&(this.started=!0),this.started){var r=G.call(this,t,e);e&(Nt|Dt)&&r[0].length-r[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:r[0],changedPointers:r[1],pointerType:Tt,srcEvent:t})}}});var re={touchstart:zt,touchmove:Ct,touchend:Nt,touchcancel:Dt},ne="touchstart touchmove touchend touchcancel";c(q,j,{handler:function(t){var e=re[t.type],r=U.call(this,t,e);r&&this.callback(this.manager,e,{pointers:r[0],changedPointers:r[1],pointerType:Tt,srcEvent:t})}});var oe=2500,ie=25;c(Y,j,{handler:function(t,e,r){var n=r.pointerType==Tt,o=r.pointerType==Pt;if(!(o&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(n)X.call(this,e,r);else if(o&&H.call(this,r))return;this.callback(t,e,r)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var se=x(ft.style,"touchAction"),ae=se!==i,le="compute",ue="auto",ce="manipulation",_e="none",pe="pan-x",he="pan-y",de=Q();J.prototype={set:function(t){t==le&&(t=this.compute()),ae&&this.manager.element.style&&de[t]&&(this.manager.element.style[se]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return l(this.manager.recognizers,function(e){p(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),$(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,r=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,o=y(n,_e)&&!de[_e],i=y(n,he)&&!de[he],s=y(n,pe)&&!de[pe];if(o){var a=1===t.pointers.length,l=t.distance<2,u=t.deltaTime<250;if(a&&l&&u)return}return s&&i?void 0:o||i&&r&Vt||s&&r&Gt?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var fe=1,me=2,ye=4,ge=8,ve=ge,be=16,we=32;Z.prototype={defaults:{},set:function(t){return ht(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(a(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=et(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return a(t,"dropRecognizeWith",this)?this:(t=et(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(a(t,"requireFailure",this))return this;var e=this.requireFail;return t=et(t,this),v(e,t)===-1&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(a(t,"dropRequireFailure",this))return this;t=et(t,this);var e=v(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){r.manager.emit(e,t)}var r=this,n=this.state;n<ge&&e(r.options.event+K(n)),e(r.options.event),t.additionalEvent&&e(t.additionalEvent),n>=ge&&e(r.options.event+K(n))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=we)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(we|fe)))return!1;t++}return!0},recognize:function(t){var e=ht({},t);return p(this.options.enable,[this,e])?(this.state&(ve|be|we)&&(this.state=fe),this.state=this.process(e),void(this.state&(me|ye|ge|be)&&this.tryEmit(e))):(this.reset(),void(this.state=we))},process:function(t){},getTouchAction:function(){},reset:function(){}},c(rt,Z,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,r=t.eventType,n=e&(me|ye),o=this.attrTest(t);return n&&(r&Dt||!o)?e|be:n||o?r&Nt?e|ge:e&me?e|ye:me:we}}),c(nt,rt,{defaults:{event:"pan",threshold:10,pointers:1,direction:qt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Vt&&e.push(he),t&Gt&&e.push(pe),e},directionTest:function(t){var e=this.options,r=!0,n=t.distance,o=t.direction,i=t.deltaX,s=t.deltaY;return o&e.direction||(e.direction&Vt?(o=0===i?It:i<0?Ft:Bt,r=i!=this.pX,n=Math.abs(t.deltaX)):(o=0===s?It:s<0?Rt:Lt,r=s!=this.pY,n=Math.abs(t.deltaY))),t.direction=o,r&&n>e.threshold&&o&e.direction},attrTest:function(t){return rt.prototype.attrTest.call(this,t)&&(this.state&me||!(this.state&me)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=tt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),c(ot,rt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[_e]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&me)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),c(it,Z,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ue]},process:function(t){var e=this.options,r=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!n||!r||t.eventType&(Nt|Dt)&&!o)this.reset();else if(t.eventType&zt)this.reset(),this._timer=s(function(){this.state=ve,this.tryEmit()},e.time,this);else if(t.eventType&Nt)return ve;return we},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ve&&(t&&t.eventType&Nt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=vt(),this.manager.emit(this.options.event,this._input)))}}),c(st,rt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[_e]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&me)}}),c(at,rt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Vt|Gt,pointers:1},getTouchAction:function(){return nt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,r=this.options.direction;return r&(Vt|Gt)?e=t.overallVelocity:r&Vt?e=t.overallVelocityX:r&Gt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&r&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&gt(e)>this.options.velocity&&t.eventType&Nt},emit:function(t){var e=tt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),c(lt,Z,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ce]},process:function(t){var e=this.options,r=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&zt&&0===this.count)return this.failTimeout();if(n&&o&&r){if(t.eventType!=Nt)return this.failTimeout();var i=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||D(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&i?this.count+=1:this.count=1,this._input=t;var l=this.count%e.taps;if(0===l)return this.hasRequireFailures()?(this._timer=s(function(){this.state=ve,this.tryEmit()},e.interval,this),me):ve}return we},failTimeout:function(){return this._timer=s(function(){this.state=we},this.options.interval,this),we},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ve&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ut.VERSION="2.0.7",ut.defaults={domEvents:!1,touchAction:le,enable:!0,inputTarget:null,inputClass:null,preset:[[st,{enable:!1}],[ot,{enable:!1},["rotate"]],[at,{direction:Vt}],[nt,{direction:Vt},["swipe"]],[lt],[lt,{event:"doubletap",taps:2},["tap"]],[it]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var xe=1,ke=2;ct.prototype={set:function(t){return ht(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?ke:xe},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var r,n=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&ve)&&(o=e.curRecognizer=null);for(var i=0;i<n.length;)r=n[i],e.stopped===ke||o&&r!=o&&!r.canRecognizeWith(o)?r.reset():r.recognize(t),!o&&r.state&(me|ye|ge)&&(o=e.curRecognizer=r),i++}},get:function(t){if(t instanceof Z)return t;for(var e=this.recognizers,r=0;r<e.length;r++)if(e[r].options.event==t)return e[r];return null},add:function(t){if(a(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(a(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,r=v(e,t);r!==-1&&(e.splice(r,1),this.touchAction.update())}return this},on:function(t,e){if(t!==i&&e!==i){var r=this.handlers;return l(g(t),function(t){r[t]=r[t]||[],r[t].push(e)}),this}},off:function(t,e){if(t!==i){var r=this.handlers;return l(g(t),function(t){e?r[t]&&r[t].splice(v(r[t],e),1):delete r[t]}),this}},emit:function(t,e){this.options.domEvents&&pt(t,e);var r=this.handlers[t]&&this.handlers[t].slice();if(r&&r.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<r.length;)r[n](e),n++}},destroy:function(){this.element&&_t(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ht(ut,{INPUT_START:zt,INPUT_MOVE:Ct,INPUT_END:Nt,INPUT_CANCEL:Dt,STATE_POSSIBLE:fe,STATE_BEGAN:me,STATE_CHANGED:ye,STATE_ENDED:ge,STATE_RECOGNIZED:ve,STATE_CANCELLED:be,STATE_FAILED:we,DIRECTION_NONE:It,DIRECTION_LEFT:Ft,DIRECTION_RIGHT:Bt,DIRECTION_UP:Rt,DIRECTION_DOWN:Lt,DIRECTION_HORIZONTAL:Vt,DIRECTION_VERTICAL:Gt,DIRECTION_ALL:qt,Manager:ct,Input:j,TouchAction:J,TouchInput:q,MouseInput:R,PointerEventInput:L,TouchMouseInput:Y,SingleTouchInput:V,Recognizer:Z,AttrRecognizer:rt,Tap:lt,Pan:nt,Swipe:at,Pinch:ot,Rotate:st,Press:it,on:d,off:f,each:l,merge:wt,extend:bt,assign:ht,inherit:c,bindFn:_,prefixed:x});var Me="undefined"!=typeof e?e:"undefined"!=typeof self?self:{};Me.Hammer=ut,"function"==typeof t&&t.amd?t(function(){return ut}):"undefined"!=typeof r&&r.exports?r.exports=ut:e[o]=ut}(window,document,"Hammer")},{}],"kiwi/build/constraint":[function(t,e,r){"use strict";/*-----------------------------------------------------------------------------
| Copyright (c) 2014, Nucleic Development Team.
|
| Distributed under the terms of the Modified BSD License.
|
| The full license is in the file COPYING.txt, distributed with this software.
|----------------------------------------------------------------------------*/
Object.defineProperty(r,"__esModule",{value:!0});var n,o=t("./strength");!function(t){t[t.Le=0]="Le",t[t.Ge=1]="Ge",t[t.Eq=2]="Eq"}(n=r.Operator||(r.Operator={}));var i=function(){function t(t,e,r){void 0===r&&(r=o.Strength.required),this._id=s++,this._operator=e,this._expression=t,this._strength=o.Strength.clip(r)}return t.Compare=function(t,e){return t.id-e.id},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expression",{get:function(){return this._expression},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"op",{get:function(){return this._operator},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strength",{get:function(){return this._strength},enumerable:!0,configurable:!0}),t}();r.Constraint=i;var s=0},{"./strength":"kiwi/build/strength"}],"kiwi/build/expression":[function(t,e,r){"use strict";function n(t){for(var e=0,r=function(){return 0},n=s.createMap(i.Variable.Compare),o=0,a=t.length;o<a;++o){var l=t[o];if("number"==typeof l)e+=l;else if(l instanceof i.Variable)n.setDefault(l,r).second+=1;else{if(!(l instanceof Array))throw new Error("invalid Expression argument: "+JSON.stringify(l));if(2!==l.length)throw new Error("array must have length 2");var u=l[0],c=l[1];if("number"!=typeof u)throw new Error("array item 0 must be a number");if(!(c instanceof i.Variable))throw new Error("array item 1 must be a variable");n.setDefault(c,r).second+=u}}return{terms:n,constant:e}}/*-----------------------------------------------------------------------------
| Copyright (c) 2014, Nucleic Development Team.
|
| Distributed under the terms of the Modified BSD License.
|
| The full license is in the file COPYING.txt, distributed with this software.
|----------------------------------------------------------------------------*/
Object.defineProperty(r,"__esModule",{value:!0});var o=t("./tsu"),i=t("./variable"),s=t("./maptype"),a=function(){function t(){var t=n(arguments);this._terms=t.terms,this._constant=t.constant}return Object.defineProperty(t.prototype,"terms",{get:function(){return this._terms},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"constant",{get:function(){return this._constant},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var t=this._constant;return o.forEach(this._terms,function(e){t+=e.first.value*e.second}),t},enumerable:!0,configurable:!0}),t}();r.Expression=a},{"./maptype":"kiwi/build/maptype","./tsu":"kiwi/build/tsu/index","./variable":"kiwi/build/variable"}],kiwi:[function(t,e,r){"use strict";/*-----------------------------------------------------------------------------
| Copyright (c) 2014, Nucleic Development Team.
|
| Distributed under the terms of the Modified BSD License.
|
| The full license is in the file COPYING.txt, distributed with this software.
|----------------------------------------------------------------------------*/
function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}Object.defineProperty(r,"__esModule",{value:!0}),n(t("./variable")),n(t("./expression")),n(t("./constraint")),n(t("./strength")),n(t("./solver"))},{"./constraint":"kiwi/build/constraint","./expression":"kiwi/build/expression","./solver":"kiwi/build/solver","./strength":"kiwi/build/strength","./variable":"kiwi/build/variable"}],"kiwi/build/maptype":[function(t,e,r){"use strict";function n(t){return new o.AssociativeArray(t)}/*-----------------------------------------------------------------------------
| Copyright (c) 2014, Nucleic Development Team.
|
| Distributed under the terms of the Modified BSD License.
|
| The full license is in the file COPYING.txt, distributed with this software.
|----------------------------------------------------------------------------*/
Object.defineProperty(r,"__esModule",{value:!0});var o=t("./tsu");r.createMap=n},{"./tsu":"kiwi/build/tsu/index"}],"kiwi/build/solver":[function(t,e,r){"use strict";function n(t){var e=1e-8;return t<0?-t<e:t<e}function o(){return p.createMap(c.Constraint.Compare)}function i(){return p.createMap(f.Compare)}function s(){return p.createMap(l.Variable.Compare)}function a(){return p.createMap(l.Variable.Compare)}/*-----------------------------------------------------------------------------
| Copyright (c) 2014, Nucleic Development Team.
|
| Distributed under the terms of the Modified BSD License.
|
| The full license is in the file COPYING.txt, distributed with this software.
|----------------------------------------------------------------------------*/
Object.defineProperty(r,"__esModule",{value:!0});var l=t("./variable"),u=t("./expression"),c=t("./constraint"),_=t("./strength"),p=t("./maptype"),h=function(){function t(){this._cnMap=o(),this._rowMap=i(),this._varMap=s(),this._editMap=a(),this._infeasibleRows=[],this._objective=new y,this._artificial=null,this._idTick=0}return t.prototype.addConstraint=function(t){var e=this._cnMap.find(t);if(void 0!==e)throw new Error("duplicate constraint");var r=this._createRow(t),o=r.row,i=r.tag,s=this._chooseSubject(o,i);if(s.type()===d.Invalid&&o.allDummies()){if(!n(o.constant())){for(var a=[],l=0,u=t.expression.terms._array;l<u.length;l++){var c=u[l];a.push(c.first.name)}var _=["LE","GE","EQ"][t.op];throw new Error("unsatisfiable constraint ["+a.join(",")+"] operator: "+_)}s=i.marker}if(s.type()===d.Invalid){if(!this._addWithArtificialVariable(o))throw new Error("unsatisfiable constraint")}else o.solveFor(s),this._substitute(s,o),this._rowMap.insert(s,o);this._cnMap.insert(t,i),this._optimize(this._objective)},t.prototype.removeConstraint=function(t,e){void 0===e&&(e=!1);var r=this._cnMap.erase(t);if(void 0===r){if(e)return;throw new Error("unknown constraint")}this._removeConstraintEffects(t,r.second);var n=r.second.marker,o=this._rowMap.erase(n);if(void 0===o){var i=this._getMarkerLeavingSymbol(n);if(i.type()===d.Invalid)throw new Error("failed to find leaving row");o=this._rowMap.erase(i),o.second.solveForEx(i,n),this._substitute(n,o.second)}this._optimize(this._objective)},t.prototype.hasConstraint=function(t){return this._cnMap.contains(t)},t.prototype.addEditVariable=function(t,e){var r=this._editMap.find(t);if(void 0!==r)throw new Error("duplicate edit variable: "+t.name);if(e=_.Strength.clip(e),e===_.Strength.required)throw new Error("bad required strength");var n=new u.Expression(t),o=new c.Constraint(n,c.Operator.Eq,e);this.addConstraint(o);var i=this._cnMap.find(o).second,s={tag:i,constraint:o,constant:0};this._editMap.insert(t,s)},t.prototype.removeEditVariable=function(t,e){void 0===e&&(e=!1);var r=this._editMap.erase(t);if(void 0===r){if(e)return;throw new Error("unknown edit variable: "+t.name)}this.removeConstraint(r.second.constraint,e)},t.prototype.hasEditVariable=function(t){return this._editMap.contains(t)},t.prototype.suggestValue=function(t,e){var r=this._editMap.find(t);if(void 0===r)throw new Error("unknown edit variable: "+t.name);var n=this._rowMap,o=r.second,i=e-o.constant;o.constant=e;var s=o.tag.marker,a=n.find(s);if(void 0!==a)return a.second.add(-i)<0&&this._infeasibleRows.push(s),void this._dualOptimize();var l=o.tag.other;if(a=n.find(l),void 0!==a)return a.second.add(i)<0&&this._infeasibleRows.push(l),void this._dualOptimize();for(var u=0,c=n.size();u<c;++u){var _=n.itemAt(u),p=_.second,h=p.coefficientFor(s);0!==h&&p.add(i*h)<0&&_.first.type()!==d.External&&this._infeasibleRows.push(_.first)}this._dualOptimize()},t.prototype.updateVariables=function(){for(var t=this._varMap,e=this._rowMap,r=0,n=t.size();r<n;++r){var o=t.itemAt(r),i=e.find(o.second);void 0!==i?o.first.setValue(i.second.constant()):o.first.setValue(0)}},Object.defineProperty(t.prototype,"numConstraints",{get:function(){return this._cnMap.size()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numEditVariables",{get:function(){return this._editMap.size()},enumerable:!0,configurable:!0}),t.prototype._getVarSymbol=function(t){var e=this,r=function(){return e._makeSymbol(d.External)};return this._varMap.setDefault(t,r).second},t.prototype._createRow=function(t){for(var e=t.expression,r=new y(e.constant),o=e.terms,i=0,s=o.size();i<s;++i){var a=o.itemAt(i);if(!n(a.second)){var l=this._getVarSymbol(a.first),u=this._rowMap.find(l);void 0!==u?r.insertRow(u.second,a.second):r.insertSymbol(l,a.second)}}var p=this._objective,h=t.strength,f={marker:m,other:m};switch(t.op){case c.Operator.Le:case c.Operator.Ge:var g=t.op===c.Operator.Le?1:-1,v=this._makeSymbol(d.Slack);if(f.marker=v,r.insertSymbol(v,g),h<_.Strength.required){var b=this._makeSymbol(d.Error);f.other=b,r.insertSymbol(b,-g),p.insertSymbol(b,h)}break;case c.Operator.Eq:if(h<_.Strength.required){var w=this._makeSymbol(d.Error),x=this._makeSymbol(d.Error);f.marker=w,f.other=x,r.insertSymbol(w,-1),r.insertSymbol(x,1),p.insertSymbol(w,h),p.insertSymbol(x,h)}else{var k=this._makeSymbol(d.Dummy);f.marker=k,r.insertSymbol(k)}}return r.constant()<0&&r.reverseSign(),{row:r,tag:f}},t.prototype._chooseSubject=function(t,e){for(var r=t.cells(),n=0,o=r.size();n<o;++n){var i=r.itemAt(n);if(i.first.type()===d.External)return i.first}var s=e.marker.type();return(s===d.Slack||s===d.Error)&&t.coefficientFor(e.marker)<0?e.marker:(s=e.other.type(),(s===d.Slack||s===d.Error)&&t.coefficientFor(e.other)<0?e.other:m)},t.prototype._addWithArtificialVariable=function(t){var e=this._makeSymbol(d.Slack);this._rowMap.insert(e,t.copy()),this._artificial=t.copy(),this._optimize(this._artificial);var r=n(this._artificial.constant());this._artificial=null;var o=this._rowMap.erase(e);if(void 0!==o){var i=o.second;if(i.isConstant())return r;var s=this._anyPivotableSymbol(i);if(s.type()===d.Invalid)return!1;i.solveForEx(e,s),this._substitute(s,i),this._rowMap.insert(s,i)}for(var a=this._rowMap,l=0,u=a.size();l<u;++l)a.itemAt(l).second.removeSymbol(e);return this._objective.removeSymbol(e),r},t.prototype._substitute=function(t,e){for(var r=this._rowMap,n=0,o=r.size();n<o;++n){var i=r.itemAt(n);i.second.substitute(t,e),i.second.constant()<0&&i.first.type()!==d.External&&this._infeasibleRows.push(i.first)}this._objective.substitute(t,e),this._artificial&&this._artificial.substitute(t,e)},t.prototype._optimize=function(t){for(;;){var e=this._getEnteringSymbol(t);if(e.type()===d.Invalid)return;var r=this._getLeavingSymbol(e);if(r.type()===d.Invalid)throw new Error("the objective is unbounded");var n=this._rowMap.erase(r).second;n.solveForEx(r,e),this._substitute(e,n),this._rowMap.insert(e,n)}},t.prototype._dualOptimize=function(){for(var t=this._rowMap,e=this._infeasibleRows;0!==e.length;){var r=e.pop(),n=t.find(r);if(void 0!==n&&n.second.constant()<0){var o=this._getDualEnteringSymbol(n.second);if(o.type()===d.Invalid)throw new Error("dual optimize failed");var i=n.second;t.erase(r),i.solveForEx(r,o),this._substitute(o,i),t.insert(o,i)}}},t.prototype._getEnteringSymbol=function(t){for(var e=t.cells(),r=0,n=e.size();r<n;++r){var o=e.itemAt(r),i=o.first;if(o.second<0&&i.type()!==d.Dummy)return i}return m},t.prototype._getDualEnteringSymbol=function(t){for(var e=Number.MAX_VALUE,r=m,n=t.cells(),o=0,i=n.size();o<i;++o){var s=n.itemAt(o),a=s.first,l=s.second;if(l>0&&a.type()!==d.Dummy){var u=this._objective.coefficientFor(a),c=u/l;c<e&&(e=c,r=a)}}return r},t.prototype._getLeavingSymbol=function(t){for(var e=Number.MAX_VALUE,r=m,n=this._rowMap,o=0,i=n.size();o<i;++o){var s=n.itemAt(o),a=s.first;if(a.type()!==d.External){var l=s.second,u=l.coefficientFor(t);if(u<0){var c=-l.constant()/u;c<e&&(e=c,r=a)}}}return r},t.prototype._getMarkerLeavingSymbol=function(t){for(var e=Number.MAX_VALUE,r=e,n=e,o=m,i=o,s=o,a=o,l=this._rowMap,u=0,c=l.size();u<c;++u){var _=l.itemAt(u),p=_.second,h=p.coefficientFor(t);if(0!==h){var f=_.first;if(f.type()===d.External)a=f;else if(h<0){var y=-p.constant()/h;y<r&&(r=y,i=f)}else{var y=p.constant()/h;y<n&&(n=y,s=f)}}}return i!==o?i:s!==o?s:a},t.prototype._removeConstraintEffects=function(t,e){e.marker.type()===d.Error&&this._removeMarkerEffects(e.marker,t.strength),e.other.type()===d.Error&&this._removeMarkerEffects(e.other,t.strength)},t.prototype._removeMarkerEffects=function(t,e){var r=this._rowMap.find(t);void 0!==r?this._objective.insertRow(r.second,-e):this._objective.insertSymbol(t,-e)},t.prototype._anyPivotableSymbol=function(t){for(var e=t.cells(),r=0,n=e.size();r<n;++r){var o=e.itemAt(r),i=o.first.type();if(i===d.Slack||i===d.Error)return o.first}return m},t.prototype._makeSymbol=function(t){return new f(t,(this._idTick++))},t}();r.Solver=h;var d;!function(t){t[t.Invalid=0]="Invalid",t[t.External=1]="External",t[t.Slack=2]="Slack",t[t.Error=3]="Error",t[t.Dummy=4]="Dummy"}(d||(d={}));var f=function(){function t(t,e){this._id=e,this._type=t}return t.Compare=function(t,e){return t.id()-e.id()},t.prototype.id=function(){return this._id},t.prototype.type=function(){return this._type},t}(),m=new f(d.Invalid,(-1)),y=function(){function t(t){void 0===t&&(t=0),this._cellMap=p.createMap(f.Compare),this._constant=t}return t.prototype.cells=function(){return this._cellMap},t.prototype.constant=function(){return this._constant},t.prototype.isConstant=function(){return this._cellMap.empty()},t.prototype.allDummies=function(){for(var t=this._cellMap,e=0,r=t.size();e<r;++e){var n=t.itemAt(e);if(n.first.type()!==d.Dummy)return!1}return!0},t.prototype.copy=function(){var e=new t(this._constant);return e._cellMap=this._cellMap.copy(),e},t.prototype.add=function(t){return this._constant+=t},t.prototype.insertSymbol=function(t,e){void 0===e&&(e=1);var r=this._cellMap.setDefault(t,function(){return 0});n(r.second+=e)&&this._cellMap.erase(t)},t.prototype.insertRow=function(t,e){void 0===e&&(e=1),this._constant+=t._constant*e;for(var r=t._cellMap,n=0,o=r.size();n<o;++n){var i=r.itemAt(n);this.insertSymbol(i.first,i.second*e)}},t.prototype.removeSymbol=function(t){this._cellMap.erase(t)},t.prototype.reverseSign=function(){this._constant=-this._constant;for(var t=this._cellMap,e=0,r=t.size();e<r;++e){var n=t.itemAt(e);n.second=-n.second}},t.prototype.solveFor=function(t){var e=this._cellMap,r=e.erase(t),n=-1/r.second;this._constant*=n;for(var o=0,i=e.size();o<i;++o)e.itemAt(o).second*=n},t.prototype.solveForEx=function(t,e){this.insertSymbol(t,-1),this.solveFor(e)},t.prototype.coefficientFor=function(t){var e=this._cellMap.find(t);return void 0!==e?e.second:0},t.prototype.substitute=function(t,e){var r=this._cellMap.erase(t);void 0!==r&&this.insertRow(e,r.second)},t}()},{"./constraint":"kiwi/build/constraint","./expression":"kiwi/build/expression","./maptype":"kiwi/build/maptype","./strength":"kiwi/build/strength","./variable":"kiwi/build/variable"}],"kiwi/build/strength":[function(t,e,r){"use strict";/*-----------------------------------------------------------------------------
| Copyright (c) 2014, Nucleic Development Team.
|
| Distributed under the terms of the Modified BSD License.
|
| The full license is in the file COPYING.txt, distributed with this software.
|----------------------------------------------------------------------------*/
Object.defineProperty(r,"__esModule",{value:!0});var n;!function(t){function e(t,e,r,n){void 0===n&&(n=1);var o=0;return o+=1e6*Math.max(0,Math.min(1e3,t*n)),o+=1e3*Math.max(0,Math.min(1e3,e*n)),o+=Math.max(0,Math.min(1e3,r*n))}function r(e){return Math.max(0,Math.min(t.required,e))}t.create=e,t.required=e(1e3,1e3,1e3),t.strong=e(1,0,0),t.medium=e(0,1,0),t.weak=e(0,0,1),t.clip=r}(n=r.Strength||(r.Strength={}))},{}],"kiwi/build/tsu/algorithm":[function(t,e,r){"use strict";function n(t,e,r){for(var n,o,i=0,s=t.length;s>0;)n=s>>1,o=i+n,r(t[o],e)<0?(i=o+1,s-=n+1):s=n;return i}function o(t,e,r){var o=n(t,e,r);if(o===t.length)return-1;var i=t[o];return 0!==r(i,e)?-1:o}function i(t,e,r){var o=n(t,e,r);if(o!==t.length){var i=t[o];if(0===r(i,e))return i}}function s(t,e){var r=h.asArray(t),n=r.length;if(n<=1)return r;r.sort(e);for(var o=[r[0]],i=1,s=0;i<n;++i){var a=r[i];0!==e(o[s],a)&&(o.push(a),++s)}return o}function a(t,e,r){for(var n=0,o=0,i=t.length,s=e.length;n<i&&o<s;){var a=r(t[n],e[o]);if(a<0)++n;else{if(!(a>0))return!1;++o}}return!0}function l(t,e,r){var n=t.length,o=e.length;if(n>o)return!1;for(var i=0,s=0;i<n&&s<o;){var a=r(t[i],e[s]);if(a<0)return!1;a>0?++s:(++i,++s)}return!(i<n)}function u(t,e,r){for(var n=0,o=0,i=t.length,s=e.length,a=[];n<i&&o<s;){var l=t[n],u=e[o],c=r(l,u);c<0?(a.push(l),++n):c>0?(a.push(u),++o):(a.push(l),++n,++o)}for(;n<i;)a.push(t[n]),++n;for(;o<s;)a.push(e[o]),++o;return a}function c(t,e,r){for(var n=0,o=0,i=t.length,s=e.length,a=[];n<i&&o<s;){var l=t[n],u=e[o],c=r(l,u);c<0?++n:c>0?++o:(a.push(l),++n,++o)}return a}function _(t,e,r){for(var n=0,o=0,i=t.length,s=e.length,a=[];n<i&&o<s;){var l=t[n],u=e[o],c=r(l,u);c<0?(a.push(l),++n):c>0?++o:(++n,++o)}for(;n<i;)a.push(t[n]),++n;return a}function p(t,e,r){for(var n=0,o=0,i=t.length,s=e.length,a=[];n<i&&o<s;){var l=t[n],u=e[o],c=r(l,u);c<0?(a.push(l),++n):c>0?(a.push(u),++o):(++n,++o)}for(;n<i;)a.push(t[n]),++n;for(;o<s;)a.push(e[o]),++o;return a}/*-----------------------------------------------------------------------------
| Copyright (c) 2014, Nucleic Development Team.
|
| Distributed under the terms of the Modified BSD License.
|
| The full license is in the file COPYING.txt, distributed with this software.
|----------------------------------------------------------------------------*/
Object.defineProperty(r,"__esModule",{value:!0});var h=t("./iterator");r.lowerBound=n,r.binarySearch=o,r.binaryFind=i,r.asSet=s,r.setIsDisjoint=a,r.setIsSubset=l,r.setUnion=u,r.setIntersection=c,r.setDifference=_,r.setSymmetricDifference=p},{"./iterator":"kiwi/build/tsu/iterator"}],"kiwi/build/tsu/array_base":[function(t,e,r){"use strict";/*-----------------------------------------------------------------------------
| Copyright (c) 2014, Nucleic Development Team.
|
| Distributed under the terms of the Modified BSD License.
|
| The full license is in the file COPYING.txt, distributed with this software.
|----------------------------------------------------------------------------*/
Object.defineProperty(r,"__esModule",{value:!0});var n=t("./iterator"),o=function(){function t(){this._array=[]}return t.prototype.size=function(){return this._array.length},t.prototype.empty=function(){return 0===this._array.length},t.prototype.itemAt=function(t){return this._array[t]},t.prototype.takeAt=function(t){return this._array.splice(t,1)[0]},t.prototype.clear=function(){this._array=[]},t.prototype.swap=function(t){var e=this._array;this._array=t._array,t._array=e},t.prototype.__iter__=function(){return n.iter(this._array)},t.prototype.__reversed__=function(){return n.reversed(this._array)},t}();r.ArrayBase=o},{"./iterator":"kiwi/build/tsu/iterator"}],"kiwi/build/tsu/associative_array":[function(t,e,r){"use strict";function n(t){return function(e,r){return t(e.first,r)}}function o(t,e,r){for(var n=0,o=0,i=t.length,s=e.length,a=[];n<i&&o<s;){var l=t[n],u=e[o],c=r(l.first,u.first);c<0?(a.push(l.copy()),++n):c>0?(a.push(u.copy()),++o):(a.push(u.copy()),++n,++o)}for(;n<i;)a.push(t[n].copy()),++n;for(;o<s;)a.push(e[o].copy()),++o;return a}/*-----------------------------------------------------------------------------
| Copyright (c) 2014, Nucleic Development Team.
|
| Distributed under the terms of the Modified BSD License.
|
| The full license is in the file COPYING.txt, distributed with this software.
|----------------------------------------------------------------------------*/
var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=t("./pair"),a=t("./array_base"),l=t("./algorithm"),u=t("./iterator"),c=function(t){function e(e){var r=t.call(this)||this;return r._compare=e,r._wrapped=n(e),r}return i(e,t),e.prototype.comparitor=function(){return this._compare},e.prototype.indexOf=function(t){return l.binarySearch(this._array,t,this._wrapped)},e.prototype.contains=function(t){return l.binarySearch(this._array,t,this._wrapped)>=0},e.prototype.find=function(t){return l.binaryFind(this._array,t,this._wrapped)},e.prototype.setDefault=function(t,e){var r=this._array,n=l.lowerBound(r,t,this._wrapped);if(n===r.length){var o=new s.Pair(t,e());return r.push(o),o}var i=r[n];if(0!==this._compare(i.first,t)){var o=new s.Pair(t,e());return r.splice(n,0,o),o}return i},e.prototype.insert=function(t,e){var r=this._array,n=l.lowerBound(r,t,this._wrapped);if(n===r.length){var o=new s.Pair(t,e);return r.push(o),o}var i=r[n];if(0!==this._compare(i.first,t)){var o=new s.Pair(t,e);return r.splice(n,0,o),o}return i.second=e,i},e.prototype.update=function(t){var r=this;t instanceof e?this._array=o(this._array,t._array,this._compare):u.forEach(t,function(t){r.insert(t.first,t.second)})},e.prototype.erase=function(t){var e=this._array,r=l.binarySearch(e,t,this._wrapped);if(!(r<0))return e.splice(r,1)[0]},e.prototype.copy=function(){for(var t=new e(this._compare),r=t._array,n=this._array,o=0,i=n.length;o<i;++o)r.push(n[o].copy());return t},e}(a.ArrayBase);r.AssociativeArray=c},{"./algorithm":"kiwi/build/tsu/algorithm","./array_base":"kiwi/build/tsu/array_base","./iterator":"kiwi/build/tsu/iterator","./pair":"kiwi/build/tsu/pair"}],"kiwi/build/tsu/index":[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}Object.defineProperty(r,"__esModule",{value:!0}),n(t("./algorithm")),n(t("./array_base")),n(t("./associative_array")),n(t("./iterator")),n(t("./pair"))},{"./algorithm":"kiwi/build/tsu/algorithm","./array_base":"kiwi/build/tsu/array_base","./associative_array":"kiwi/build/tsu/associative_array","./iterator":"kiwi/build/tsu/iterator","./pair":"kiwi/build/tsu/pair"}],"kiwi/build/tsu/iterator":[function(t,e,r){"use strict";function n(t){return t instanceof Array?new c(t):t.__iter__()}function o(t){return t instanceof Array?new _(t):t.__reversed__()}function i(t){return t.__next__()}function s(t){if(t instanceof Array)return t.slice();for(var e,r=[],n=t.__iter__();void 0!==(e=n.__next__());)r.push(e);return r}function a(t,e){if(t instanceof Array){for(var r=0,n=t.length;r<n;++r)if(e(t[r])===!1)return}else for(var o,i=t.__iter__();void 0!==(o=i.__next__());)if(e(o)===!1)return}function l(t,e){var r=[];if(t instanceof Array)for(var n=0,o=t.length;n<o;++n)r.push(e(t[n]));else for(var i,s=t.__iter__();void 0!==(i=s.__next__());)r.push(e(i));return r}function u(t,e){var r,n=[];if(t instanceof Array)for(var o=0,i=t.length;o<i;++o)r=t[o],e(r)&&n.push(r);else for(var s=t.__iter__();void 0!==(r=s.__next__());)e(r)&&n.push(r);return n}/*-----------------------------------------------------------------------------
| Copyright (c) 2014, Nucleic Development Team.
|
| Distributed under the terms of the Modified BSD License.
|
| The full license is in the file COPYING.txt, distributed with this software.
|----------------------------------------------------------------------------*/
Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function t(t,e){"undefined"==typeof e&&(e=0),this._array=t,this._index=Math.max(0,Math.min(e,t.length))}return t.prototype.__next__=function(){return this._array[this._index++]},t.prototype.__iter__=function(){return this},t}();r.ArrayIterator=c;var _=function(){function t(t,e){"undefined"==typeof e&&(e=t.length),this._array=t,this._index=Math.max(0,Math.min(e,t.length))}return t.prototype.__next__=function(){return this._array[--this._index]},t.prototype.__iter__=function(){return this},t}();r.ReverseArrayIterator=_,r.iter=n,r.reversed=o,r.next=i,r.asArray=s,r.forEach=a,r.map=l,r.filter=u},{}],"kiwi/build/tsu/pair":[function(t,e,r){"use strict";/*-----------------------------------------------------------------------------
| Copyright (c) 2014, Nucleic Development Team.
|
| Distributed under the terms of the Modified BSD License.
|
| The full license is in the file COPYING.txt, distributed with this software.
|----------------------------------------------------------------------------*/
Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(t,e){this.first=t,this.second=e}return t.prototype.copy=function(){return new t(this.first,this.second)},t}();r.Pair=n},{}],"kiwi/build/variable":[function(t,e,r){"use strict";/*-----------------------------------------------------------------------------
| Copyright (c) 2014, Nucleic Development Team.
|
| Distributed under the terms of the Modified BSD License.
|
| The full license is in the file COPYING.txt, distributed with this software.
|----------------------------------------------------------------------------*/
Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(t){void 0===t&&(t=""),this._value=0,this._context=null,this._id=o++,this._name=t}return t.Compare=function(t,e){return t.id-e.id},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t.prototype.setName=function(t){this._name=t},Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),t.prototype.setContext=function(t){this._context=t},Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),t.prototype.setValue=function(t){this._value=t},t}();r.Variable=n;var o=0},{}],lodash:[function(e,r,n){(function(e){(function(){function o(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function i(t,e,r,n){for(var o=-1,i=null==t?0:t.length;++o<i;){var s=t[o];e(n,s,r(s),t)}return n}function s(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}function a(t,e){for(var r=null==t?0:t.length;r--&&e(t[r],r,t)!==!1;);return t}function l(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function u(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var s=t[r];e(s,r,t)&&(i[o++]=s)}return i}function c(t,e){var r=null==t?0:t.length;return!!r&&w(t,e,0)>-1}function _(t,e,r){for(var n=-1,o=null==t?0:t.length;++n<o;)if(r(e,t[n]))return!0;return!1}function p(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}function h(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function d(t,e,r,n){var o=-1,i=null==t?0:t.length;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function f(t,e,r,n){var o=null==t?0:t.length;for(n&&o&&(r=t[--o]);o--;)r=e(r,t[o],o,t);return r}function m(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function y(t){return t.split("")}function g(t){return t.match(Re)||[]}function v(t,e,r){var n;return r(t,function(t,r,o){if(e(t,r,o))return n=r,!1}),n}function b(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function w(t,e,r){return e===e?H(t,e,r):b(t,k,r)}function x(t,e,r,n){for(var o=r-1,i=t.length;++o<i;)if(n(t[o],e))return o;return-1}function k(t){return t!==t}function M(t,e){var r=null==t?0:t.length;return r?P(t,e)/r:Nt}function j(t){return function(e){return null==e?et:e[t]}}function S(t){return function(e){return null==t?et:t[e]}}function T(t,e,r,n,o){return o(t,function(t,o,i){r=n?(n=!1,t):e(r,t,o,i)}),r}function O(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}function P(t,e){for(var r,n=-1,o=t.length;++n<o;){var i=e(t[n]);i!==et&&(r=r===et?i:r+i)}return r}function A(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function E(t,e){return p(e,function(e){return[e,t[e]]})}function z(t){return function(e){return t(e)}}function C(t,e){return p(e,function(e){return t[e]})}function N(t,e){return t.has(e)}function D(t,e){for(var r=-1,n=t.length;++r<n&&w(e,t[r],0)>-1;);return r}function I(t,e){for(var r=t.length;r--&&w(e,t[r],0)>-1;);return r}function F(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n}function B(t){return"\\"+Qr[t]}function R(t,e){return null==t?et:t[e]}function L(t){return Gr.test(t)}function V(t){return qr.test(t)}function G(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}function q(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function U(t,e){return function(r){return t(e(r))}}function Y(t,e){for(var r=-1,n=t.length,o=0,i=[];++r<n;){var s=t[r];s!==e&&s!==lt||(t[r]=lt,i[o++]=r)}return i}function X(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function W(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=[t,t]}),r}function H(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}function J(t,e,r){for(var n=r+1;n--;)if(t[n]===e)return n;return n}function $(t){return L(t)?Z(t):fn(t)}function Q(t){return L(t)?K(t):y(t)}function Z(t){for(var e=Lr.lastIndex=0;Lr.test(t);)++e;return e}function K(t){return t.match(Lr)||[]}function tt(t){return t.match(Vr)||[]}var et,rt="4.17.11",nt=200,ot="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",it="Expected a function",st="__lodash_hash_undefined__",at=500,lt="__lodash_placeholder__",ut=1,ct=2,_t=4,pt=1,ht=2,dt=1,ft=2,mt=4,yt=8,gt=16,vt=32,bt=64,wt=128,xt=256,kt=512,Mt=30,jt="...",St=800,Tt=16,Ot=1,Pt=2,At=3,Et=1/0,zt=9007199254740991,Ct=1.7976931348623157e308,Nt=NaN,Dt=4294967295,It=Dt-1,Ft=Dt>>>1,Bt=[["ary",wt],["bind",dt],["bindKey",ft],["curry",yt],["curryRight",gt],["flip",kt],["partial",vt],["partialRight",bt],["rearg",xt]],Rt="[object Arguments]",Lt="[object Array]",Vt="[object AsyncFunction]",Gt="[object Boolean]",qt="[object Date]",Ut="[object DOMException]",Yt="[object Error]",Xt="[object Function]",Wt="[object GeneratorFunction]",Ht="[object Map]",Jt="[object Number]",$t="[object Null]",Qt="[object Object]",Zt="[object Promise]",Kt="[object Proxy]",te="[object RegExp]",ee="[object Set]",re="[object String]",ne="[object Symbol]",oe="[object Undefined]",ie="[object WeakMap]",se="[object WeakSet]",ae="[object ArrayBuffer]",le="[object DataView]",ue="[object Float32Array]",ce="[object Float64Array]",_e="[object Int8Array]",pe="[object Int16Array]",he="[object Int32Array]",de="[object Uint8Array]",fe="[object Uint8ClampedArray]",me="[object Uint16Array]",ye="[object Uint32Array]",ge=/\b__p \+= '';/g,ve=/\b(__p \+=) '' \+/g,be=/(__e\(.*?\)|\b__t\)) \+\n'';/g,we=/&(?:amp|lt|gt|quot|#39);/g,xe=/[&<>"']/g,ke=RegExp(we.source),Me=RegExp(xe.source),je=/<%-([\s\S]+?)%>/g,Se=/<%([\s\S]+?)%>/g,Te=/<%=([\s\S]+?)%>/g,Oe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pe=/^\w*$/,Ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ee=/[\\^$.*+?()[\]{}|]/g,ze=RegExp(Ee.source),Ce=/^\s+|\s+$/g,Ne=/^\s+/,De=/\s+$/,Ie=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fe=/\{\n\/\* \[wrapped with (.+)\] \*/,Be=/,? & /,Re=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Le=/\\(\\)?/g,Ve=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ge=/\w*$/,qe=/^[-+]0x[0-9a-f]+$/i,Ue=/^0b[01]+$/i,Ye=/^\[object .+?Constructor\]$/,Xe=/^0o[0-7]+$/i,We=/^(?:0|[1-9]\d*)$/,He=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Je=/($^)/,$e=/['\n\r\u2028\u2029\\]/g,Qe="\\ud800-\\udfff",Ze="\\u0300-\\u036f",Ke="\\ufe20-\\ufe2f",tr="\\u20d0-\\u20ff",er=Ze+Ke+tr,rr="\\u2700-\\u27bf",nr="a-z\\xdf-\\xf6\\xf8-\\xff",or="\\xac\\xb1\\xd7\\xf7",ir="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",sr="\\u2000-\\u206f",ar=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",lr="A-Z\\xc0-\\xd6\\xd8-\\xde",ur="\\ufe0e\\ufe0f",cr=or+ir+sr+ar,_r="['’]",pr="["+Qe+"]",hr="["+cr+"]",dr="["+er+"]",fr="\\d+",mr="["+rr+"]",yr="["+nr+"]",gr="[^"+Qe+cr+fr+rr+nr+lr+"]",vr="\\ud83c[\\udffb-\\udfff]",br="(?:"+dr+"|"+vr+")",wr="[^"+Qe+"]",xr="(?:\\ud83c[\\udde6-\\uddff]){2}",kr="[\\ud800-\\udbff][\\udc00-\\udfff]",Mr="["+lr+"]",jr="\\u200d",Sr="(?:"+yr+"|"+gr+")",Tr="(?:"+Mr+"|"+gr+")",Or="(?:"+_r+"(?:d|ll|m|re|s|t|ve))?",Pr="(?:"+_r+"(?:D|LL|M|RE|S|T|VE))?",Ar=br+"?",Er="["+ur+"]?",zr="(?:"+jr+"(?:"+[wr,xr,kr].join("|")+")"+Er+Ar+")*",Cr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Nr="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Dr=Er+Ar+zr,Ir="(?:"+[mr,xr,kr].join("|")+")"+Dr,Fr="(?:"+[wr+dr+"?",dr,xr,kr,pr].join("|")+")",Br=RegExp(_r,"g"),Rr=RegExp(dr,"g"),Lr=RegExp(vr+"(?="+vr+")|"+Fr+Dr,"g"),Vr=RegExp([Mr+"?"+yr+"+"+Or+"(?="+[hr,Mr,"$"].join("|")+")",Tr+"+"+Pr+"(?="+[hr,Mr+Sr,"$"].join("|")+")",Mr+"?"+Sr+"+"+Or,Mr+"+"+Pr,Nr,Cr,fr,Ir].join("|"),"g"),Gr=RegExp("["+jr+Qe+er+ur+"]"),qr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ur=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Yr=-1,Xr={};Xr[ue]=Xr[ce]=Xr[_e]=Xr[pe]=Xr[he]=Xr[de]=Xr[fe]=Xr[me]=Xr[ye]=!0,Xr[Rt]=Xr[Lt]=Xr[ae]=Xr[Gt]=Xr[le]=Xr[qt]=Xr[Yt]=Xr[Xt]=Xr[Ht]=Xr[Jt]=Xr[Qt]=Xr[te]=Xr[ee]=Xr[re]=Xr[ie]=!1;var Wr={};Wr[Rt]=Wr[Lt]=Wr[ae]=Wr[le]=Wr[Gt]=Wr[qt]=Wr[ue]=Wr[ce]=Wr[_e]=Wr[pe]=Wr[he]=Wr[Ht]=Wr[Jt]=Wr[Qt]=Wr[te]=Wr[ee]=Wr[re]=Wr[ne]=Wr[de]=Wr[fe]=Wr[me]=Wr[ye]=!0,Wr[Yt]=Wr[Xt]=Wr[ie]=!1;var Hr={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Jr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Qr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Zr=parseFloat,Kr=parseInt,tn="object"==typeof e&&e&&e.Object===Object&&e,en="object"==typeof self&&self&&self.Object===Object&&self,rn=tn||en||Function("return this")(),nn="object"==typeof n&&n&&!n.nodeType&&n,on=nn&&"object"==typeof r&&r&&!r.nodeType&&r,sn=on&&on.exports===nn,an=sn&&tn.process,ln=function(){try{var t=on&&on.require&&on.require("util").types;return t?t:an&&an.binding&&an.binding("util")}catch(e){}}(),un=ln&&ln.isArrayBuffer,cn=ln&&ln.isDate,_n=ln&&ln.isMap,pn=ln&&ln.isRegExp,hn=ln&&ln.isSet,dn=ln&&ln.isTypedArray,fn=j("length"),mn=S(Hr),yn=S(Jr),gn=S($r),vn=function wn(t){function e(t){if(il(t)&&!mp(t)&&!(t instanceof y)){if(t instanceof n)return t;if(mc.call(t,"__wrapped__"))return rs(t)}return new n(t)}function r(){}function n(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=et}function y(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Dt,this.__views__=[]}function S(){var t=new y(this.__wrapped__);return t.__actions__=Io(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Io(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Io(this.__views__),t}function H(){if(this.__filtered__){var t=new y(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Z(){var t=this.__wrapped__.value(),e=this.__dir__,r=mp(t),n=e<0,o=r?t.length:0,i=ji(0,o,this.__views__),s=i.start,a=i.end,l=a-s,u=n?a:s-1,c=this.__iteratees__,_=c.length,p=0,h=Xc(l,this.__takeCount__);if(!r||!n&&o==l&&h==l)return vo(t,this.__actions__);var d=[];t:for(;l--&&p<h;){u+=e;for(var f=-1,m=t[u];++f<_;){var y=c[f],g=y.iteratee,v=y.type,b=g(m);if(v==Pt)m=b;else if(!b){if(v==Ot)continue t;break t}}d[p++]=m}return d}function K(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Re(){this.__data__=r_?r_(null):{},this.size=0}function Qe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Ze(t){var e=this.__data__;if(r_){var r=e[t];return r===st?et:r}return mc.call(e,t)?e[t]:et}function Ke(t){var e=this.__data__;return r_?e[t]!==et:mc.call(e,t)}function tr(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=r_&&e===et?st:e,this}function er(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function rr(){this.__data__=[],this.size=0}function nr(t){var e=this.__data__,r=Or(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Ac.call(e,r,1),--this.size,!0}function or(t){var e=this.__data__,r=Or(e,t);return r<0?et:e[r][1]}function ir(t){return Or(this.__data__,t)>-1}function sr(t,e){var r=this.__data__,n=Or(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function ar(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function lr(){this.size=0,this.__data__={hash:new K,map:new(Zc||er),string:new K}}function ur(t){var e=wi(this,t)["delete"](t);return this.size-=e?1:0,e}function cr(t){return wi(this,t).get(t)}function _r(t){return wi(this,t).has(t)}function pr(t,e){var r=wi(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function hr(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new ar;++e<r;)this.add(t[e])}function dr(t){return this.__data__.set(t,st),this}function fr(t){return this.__data__.has(t)}function mr(t){var e=this.__data__=new er(t);this.size=e.size}function yr(){this.__data__=new er,this.size=0}function gr(t){var e=this.__data__,r=e["delete"](t);return this.size=e.size,r}function vr(t){return this.__data__.get(t)}function br(t){return this.__data__.has(t)}function wr(t,e){var r=this.__data__;if(r instanceof er){var n=r.__data__;if(!Zc||n.length<nt-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new ar(n)}return r.set(t,e),this.size=r.size,this}function xr(t,e){var r=mp(t),n=!r&&fp(t),o=!r&&!n&&gp(t),i=!r&&!n&&!o&&kp(t),s=r||n||o||i,a=s?A(t.length,uc):[],l=a.length;for(var u in t)!e&&!mc.call(t,u)||s&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ci(u,l))||a.push(u);return a}function kr(t){var e=t.length;return e?t[Kn(0,e-1)]:et}function Mr(t,e){return Zi(Io(t),Nr(e,0,t.length))}function jr(t){return Zi(Io(t))}function Sr(t,e,r){(r===et||Ya(t[e],r))&&(r!==et||e in t)||zr(t,e,r)}function Tr(t,e,r){var n=t[e];mc.call(t,e)&&Ya(n,r)&&(r!==et||e in t)||zr(t,e,r)}function Or(t,e){for(var r=t.length;r--;)if(Ya(t[r][0],e))return r;return-1}function Pr(t,e,r,n){return d_(t,function(t,o,i){e(n,t,r(t),i)}),n}function Ar(t,e){return t&&Fo(e,Ll(e),t)}function Er(t,e){return t&&Fo(e,Vl(e),t)}function zr(t,e,r){"__proto__"==e&&Nc?Nc(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Cr(t,e){for(var r=-1,n=e.length,o=rc(n),i=null==t;++r<n;)o[r]=i?et:Fl(t,e[r]);return o}function Nr(t,e,r){return t===t&&(r!==et&&(t=t<=r?t:r),e!==et&&(t=t>=e?t:e)),t}function Dr(t,e,r,n,o,i){var a,l=e&ut,u=e&ct,c=e&_t;if(r&&(a=o?r(t,n,o,i):r(t)),a!==et)return a;if(!ol(t))return t;var _=mp(t);if(_){if(a=Oi(t),!l)return Io(t,a)}else{var p=S_(t),h=p==Xt||p==Wt;if(gp(t))return So(t,l);if(p==Qt||p==Rt||h&&!o){if(a=u||h?{}:Pi(t),!l)return u?Ro(t,Er(a,t)):Bo(t,Ar(a,t))}else{if(!Wr[p])return o?t:{};a=Ai(t,p,l)}}i||(i=new mr);var d=i.get(t);if(d)return d;if(i.set(t,a),xp(t))return t.forEach(function(n){a.add(Dr(n,e,r,n,t,i))}),a;if(bp(t))return t.forEach(function(n,o){a.set(o,Dr(n,e,r,o,t,i))}),a;var f=c?u?yi:mi:u?Vl:Ll,m=_?et:f(t);return s(m||t,function(n,o){m&&(o=n,n=t[o]),Tr(a,o,Dr(n,e,r,o,t,i))}),a}function Ir(t){var e=Ll(t);return function(r){return Fr(r,t,e)}}function Fr(t,e,r){var n=r.length;if(null==t)return!n;for(t=ac(t);n--;){var o=r[n],i=e[o],s=t[o];if(s===et&&!(o in t)||!i(s))return!1}return!0}function Lr(t,e,r){if("function"!=typeof t)throw new cc(it);return P_(function(){t.apply(et,r)},e)}function Vr(t,e,r,n){var o=-1,i=c,s=!0,a=t.length,l=[],u=e.length;if(!a)return l;r&&(e=p(e,z(r))),n?(i=_,s=!1):e.length>=nt&&(i=N,s=!1,e=new hr(e));t:for(;++o<a;){var h=t[o],d=null==r?h:r(h);if(h=n||0!==h?h:0,s&&d===d){for(var f=u;f--;)if(e[f]===d)continue t;l.push(h)}else i(e,d,n)||l.push(h)}return l}function Gr(t,e){var r=!0;return d_(t,function(t,n,o){return r=!!e(t,n,o)}),r}function qr(t,e,r){for(var n=-1,o=t.length;++n<o;){var i=t[n],s=e(i);if(null!=s&&(a===et?s===s&&!ml(s):r(s,a)))var a=s,l=i}return l}function Hr(t,e,r,n){var o=t.length;for(r=xl(r),r<0&&(r=-r>o?0:o+r),n=n===et||n>o?o:xl(n),n<0&&(n+=o),n=r>n?0:kl(n);r<n;)t[r++]=e;return t}function Jr(t,e){var r=[];return d_(t,function(t,n,o){e(t,n,o)&&r.push(t)}),r}function $r(t,e,r,n,o){var i=-1,s=t.length;for(r||(r=zi),o||(o=[]);++i<s;){var a=t[i];e>0&&r(a)?e>1?$r(a,e-1,r,n,o):h(o,a):n||(o[o.length]=a)}return o}function Qr(t,e){return t&&m_(t,e,Ll)}function tn(t,e){return t&&y_(t,e,Ll)}function en(t,e){return u(e,function(e){return el(t[e])})}function nn(t,e){e=Mo(e,t);for(var r=0,n=e.length;null!=t&&r<n;)t=t[Ki(e[r++])];return r&&r==n?t:et}function on(t,e,r){var n=e(t);return mp(t)?n:h(n,r(t))}function an(t){return null==t?t===et?oe:$t:Cc&&Cc in ac(t)?Mi(t):Yi(t)}function ln(t,e){return t>e}function fn(t,e){return null!=t&&mc.call(t,e)}function vn(t,e){return null!=t&&e in ac(t)}function xn(t,e,r){return t>=Xc(e,r)&&t<Yc(e,r)}function kn(t,e,r){for(var n=r?_:c,o=t[0].length,i=t.length,s=i,a=rc(i),l=1/0,u=[];s--;){var h=t[s];s&&e&&(h=p(h,z(e))),l=Xc(h.length,l),a[s]=!r&&(e||o>=120&&h.length>=120)?new hr(s&&h):et}h=t[0];var d=-1,f=a[0];t:for(;++d<o&&u.length<l;){var m=h[d],y=e?e(m):m;if(m=r||0!==m?m:0,!(f?N(f,y):n(u,y,r))){for(s=i;--s;){var g=a[s];if(!(g?N(g,y):n(t[s],y,r)))continue t}f&&f.push(y),u.push(m)}}return u}function Mn(t,e,r,n){return Qr(t,function(t,o,i){e(n,r(t),o,i)}),n}function jn(t,e,r){e=Mo(e,t),t=Wi(t,e);var n=null==t?t:t[Ki(ws(e))];return null==n?et:o(n,t,r)}function Sn(t){return il(t)&&an(t)==Rt}function Tn(t){return il(t)&&an(t)==ae}function On(t){return il(t)&&an(t)==qt}function Pn(t,e,r,n,o){return t===e||(null==t||null==e||!il(t)&&!il(e)?t!==t&&e!==e:An(t,e,r,n,Pn,o))}function An(t,e,r,n,o,i){var s=mp(t),a=mp(e),l=s?Lt:S_(t),u=a?Lt:S_(e);l=l==Rt?Qt:l,u=u==Rt?Qt:u;var c=l==Qt,_=u==Qt,p=l==u;if(p&&gp(t)){if(!gp(e))return!1;s=!0,c=!1}if(p&&!c)return i||(i=new mr),s||kp(t)?pi(t,e,r,n,o,i):hi(t,e,l,r,n,o,i);if(!(r&pt)){var h=c&&mc.call(t,"__wrapped__"),d=_&&mc.call(e,"__wrapped__");if(h||d){var f=h?t.value():t,m=d?e.value():e;return i||(i=new mr),o(f,m,r,n,i)}}return!!p&&(i||(i=new mr),di(t,e,r,n,o,i))}function En(t){return il(t)&&S_(t)==Ht}function zn(t,e,r,n){var o=r.length,i=o,s=!n;if(null==t)return!i;for(t=ac(t);o--;){var a=r[o];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<i;){a=r[o];var l=a[0],u=t[l],c=a[1];if(s&&a[2]){if(u===et&&!(l in t))return!1}else{var _=new mr;if(n)var p=n(u,c,l,t,e,_);if(!(p===et?Pn(c,u,pt|ht,n,_):p))return!1}}return!0}function Cn(t){if(!ol(t)||Bi(t))return!1;var e=el(t)?xc:Ye;return e.test(ts(t))}function Nn(t){return il(t)&&an(t)==te}function Dn(t){return il(t)&&S_(t)==ee}function In(t){return il(t)&&nl(t.length)&&!!Xr[an(t)]}function Fn(t){return"function"==typeof t?t:null==t?Au:"object"==typeof t?mp(t)?qn(t[0],t[1]):Gn(t):Bu(t)}function Bn(t){if(!Ri(t))return Uc(t);var e=[];for(var r in ac(t))mc.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Rn(t){if(!ol(t))return Ui(t);var e=Ri(t),r=[];for(var n in t)("constructor"!=n||!e&&mc.call(t,n))&&r.push(n);return r}function Ln(t,e){return t<e}function Vn(t,e){var r=-1,n=Xa(t)?rc(t.length):[];return d_(t,function(t,o,i){n[++r]=e(t,o,i)}),n}function Gn(t){var e=xi(t);return 1==e.length&&e[0][2]?Vi(e[0][0],e[0][1]):function(r){return r===t||zn(r,t,e)}}function qn(t,e){return Di(t)&&Li(e)?Vi(Ki(t),e):function(r){var n=Fl(r,t);return n===et&&n===e?Rl(r,t):Pn(e,n,pt|ht)}}function Un(t,e,r,n,o){t!==e&&m_(e,function(i,s){if(ol(i))o||(o=new mr),Yn(t,e,s,r,Un,n,o);else{var a=n?n(Ji(t,s),i,s+"",t,e,o):et;a===et&&(a=i),Sr(t,s,a)}},Vl)}function Yn(t,e,r,n,o,i,s){var a=Ji(t,r),l=Ji(e,r),u=s.get(l);if(u)return void Sr(t,r,u);var c=i?i(a,l,r+"",t,e,s):et,_=c===et;if(_){var p=mp(l),h=!p&&gp(l),d=!p&&!h&&kp(l);c=l,p||h||d?mp(a)?c=a:Wa(a)?c=Io(a):h?(_=!1,c=So(l,!0)):d?(_=!1,c=Eo(l,!0)):c=[]:hl(l)||fp(l)?(c=a,fp(a)?c=jl(a):ol(a)&&!el(a)||(c=Pi(l))):_=!1}_&&(s.set(l,c),o(c,l,n,i,s),s["delete"](l)),Sr(t,r,c)}function Xn(t,e){var r=t.length;if(r)return e+=e<0?r:0,Ci(e,r)?t[e]:et}function Wn(t,e,r){var n=-1;e=p(e.length?e:[Au],z(bi()));var o=Vn(t,function(t,r,o){var i=p(e,function(e){return e(t)});return{criteria:i,index:++n,value:t}});return O(o,function(t,e){return Co(t,e,r)})}function Hn(t,e){return Jn(t,e,function(e,r){return Rl(t,r)})}function Jn(t,e,r){for(var n=-1,o=e.length,i={};++n<o;){var s=e[n],a=nn(t,s);r(a,s)&&io(i,Mo(s,t),a)}return i}function $n(t){return function(e){return nn(e,t)}}function Qn(t,e,r,n){var o=n?x:w,i=-1,s=e.length,a=t;for(t===e&&(e=Io(e)),r&&(a=p(t,z(r)));++i<s;)for(var l=0,u=e[i],c=r?r(u):u;(l=o(a,c,l,n))>-1;)a!==t&&Ac.call(a,l,1),Ac.call(t,l,1);return t}function Zn(t,e){for(var r=t?e.length:0,n=r-1;r--;){var o=e[r];if(r==n||o!==i){var i=o;Ci(o)?Ac.call(t,o,1):mo(t,o)}}return t}function Kn(t,e){return t+Rc(Jc()*(e-t+1))}function to(t,e,r,n){for(var o=-1,i=Yc(Bc((e-t)/(r||1)),0),s=rc(i);i--;)s[n?i:++o]=t,t+=r;return s}function eo(t,e){var r="";if(!t||e<1||e>zt)return r;do e%2&&(r+=t),e=Rc(e/2),e&&(t+=t);while(e);return r}function ro(t,e){return A_(Xi(t,e,Au),t+"")}function no(t){return kr(Kl(t))}function oo(t,e){var r=Kl(t);return Zi(r,Nr(e,0,r.length))}function io(t,e,r,n){if(!ol(t))return t;e=Mo(e,t);for(var o=-1,i=e.length,s=i-1,a=t;null!=a&&++o<i;){var l=Ki(e[o]),u=r;if(o!=s){var c=a[l];u=n?n(c,l,a):et,u===et&&(u=ol(c)?c:Ci(e[o+1])?[]:{})}Tr(a,l,u),a=a[l]}return t}function so(t){return Zi(Kl(t))}function ao(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=rc(o);++n<o;)i[n]=t[n+e];return i}function lo(t,e){var r;return d_(t,function(t,n,o){return r=e(t,n,o),!r}),!!r}function uo(t,e,r){var n=0,o=null==t?n:t.length;if("number"==typeof e&&e===e&&o<=Ft){for(;n<o;){var i=n+o>>>1,s=t[i];null!==s&&!ml(s)&&(r?s<=e:s<e)?n=i+1:o=i}return o}return co(t,e,Au,r)}function co(t,e,r,n){e=r(e);for(var o=0,i=null==t?0:t.length,s=e!==e,a=null===e,l=ml(e),u=e===et;o<i;){var c=Rc((o+i)/2),_=r(t[c]),p=_!==et,h=null===_,d=_===_,f=ml(_);if(s)var m=n||d;else m=u?d&&(n||p):a?d&&p&&(n||!h):l?d&&p&&!h&&(n||!f):!h&&!f&&(n?_<=e:_<e);m?o=c+1:i=c}return Xc(i,It)}function _o(t,e){for(var r=-1,n=t.length,o=0,i=[];++r<n;){var s=t[r],a=e?e(s):s;if(!r||!Ya(a,l)){var l=a;i[o++]=0===s?0:s}}return i}function po(t){return"number"==typeof t?t:ml(t)?Nt:+t}function ho(t){if("string"==typeof t)return t;if(mp(t))return p(t,ho)+"";if(ml(t))return p_?p_.call(t):"";var e=t+"";return"0"==e&&1/t==-Et?"-0":e}function fo(t,e,r){var n=-1,o=c,i=t.length,s=!0,a=[],l=a;if(r)s=!1,o=_;else if(i>=nt){var u=e?null:x_(t);if(u)return X(u);s=!1,o=N,l=new hr}else l=e?[]:a;t:for(;++n<i;){var p=t[n],h=e?e(p):p;if(p=r||0!==p?p:0,s&&h===h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),a.push(p)}else o(l,h,r)||(l!==a&&l.push(h),a.push(p))}return a}function mo(t,e){return e=Mo(e,t),t=Wi(t,e),null==t||delete t[Ki(ws(e))]}function yo(t,e,r,n){return io(t,e,r(nn(t,e)),n)}function go(t,e,r,n){for(var o=t.length,i=n?o:-1;(n?i--:++i<o)&&e(t[i],i,t););return r?ao(t,n?0:i,n?i+1:o):ao(t,n?i+1:0,n?o:i)}function vo(t,e){var r=t;return r instanceof y&&(r=r.value()),d(e,function(t,e){return e.func.apply(e.thisArg,h([t],e.args))},r)}function bo(t,e,r){var n=t.length;if(n<2)return n?fo(t[0]):[];for(var o=-1,i=rc(n);++o<n;)for(var s=t[o],a=-1;++a<n;)a!=o&&(i[o]=Vr(i[o]||s,t[a],e,r));return fo($r(i,1),e,r)}function wo(t,e,r){for(var n=-1,o=t.length,i=e.length,s={};++n<o;){var a=n<i?e[n]:et;r(s,t[n],a)}return s}function xo(t){return Wa(t)?t:[]}function ko(t){return"function"==typeof t?t:Au}function Mo(t,e){return mp(t)?t:Di(t,e)?[t]:E_(Tl(t))}function jo(t,e,r){var n=t.length;return r=r===et?n:r,!e&&r>=n?t:ao(t,e,r)}function So(t,e){if(e)return t.slice();var r=t.length,n=Sc?Sc(r):new t.constructor(r);return t.copy(n),n}function To(t){var e=new t.constructor(t.byteLength);return new jc(e).set(new jc(t)),e}function Oo(t,e){var r=e?To(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function Po(t){var e=new t.constructor(t.source,Ge.exec(t));return e.lastIndex=t.lastIndex,e}function Ao(t){return __?ac(__.call(t)):{}}function Eo(t,e){var r=e?To(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function zo(t,e){if(t!==e){var r=t!==et,n=null===t,o=t===t,i=ml(t),s=e!==et,a=null===e,l=e===e,u=ml(e);if(!a&&!u&&!i&&t>e||i&&s&&l&&!a&&!u||n&&s&&l||!r&&l||!o)return 1;if(!n&&!i&&!u&&t<e||u&&r&&o&&!n&&!i||a&&r&&o||!s&&o||!l)return-1}return 0}function Co(t,e,r){for(var n=-1,o=t.criteria,i=e.criteria,s=o.length,a=r.length;++n<s;){var l=zo(o[n],i[n]);if(l){if(n>=a)return l;var u=r[n];return l*("desc"==u?-1:1)}}return t.index-e.index}function No(t,e,r,n){for(var o=-1,i=t.length,s=r.length,a=-1,l=e.length,u=Yc(i-s,0),c=rc(l+u),_=!n;++a<l;)c[a]=e[a];for(;++o<s;)(_||o<i)&&(c[r[o]]=t[o]);for(;u--;)c[a++]=t[o++];return c}function Do(t,e,r,n){for(var o=-1,i=t.length,s=-1,a=r.length,l=-1,u=e.length,c=Yc(i-a,0),_=rc(c+u),p=!n;++o<c;)_[o]=t[o];for(var h=o;++l<u;)_[h+l]=e[l];for(;++s<a;)(p||o<i)&&(_[h+r[s]]=t[o++]);return _}function Io(t,e){var r=-1,n=t.length;for(e||(e=rc(n));++r<n;)e[r]=t[r];return e}function Fo(t,e,r,n){var o=!r;r||(r={});for(var i=-1,s=e.length;++i<s;){var a=e[i],l=n?n(r[a],t[a],a,r,t):et;l===et&&(l=t[a]),o?zr(r,a,l):Tr(r,a,l)}return r}function Bo(t,e){return Fo(t,M_(t),e)}function Ro(t,e){return Fo(t,j_(t),e)}function Lo(t,e){return function(r,n){var o=mp(r)?i:Pr,s=e?e():{};return o(r,t,bi(n,2),s)}}function Vo(t){return ro(function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:et,s=o>2?r[2]:et;for(i=t.length>3&&"function"==typeof i?(o--,i):et,s&&Ni(r[0],r[1],s)&&(i=o<3?et:i,o=1),e=ac(e);++n<o;){var a=r[n];a&&t(e,a,n,i)}return e})}function Go(t,e){return function(r,n){if(null==r)return r;if(!Xa(r))return t(r,n);for(var o=r.length,i=e?o:-1,s=ac(r);(e?i--:++i<o)&&n(s[i],i,s)!==!1;);return r}}function qo(t){return function(e,r,n){for(var o=-1,i=ac(e),s=n(e),a=s.length;a--;){var l=s[t?a:++o];if(r(i[l],l,i)===!1)break}return e}}function Uo(t,e,r){function n(){var e=this&&this!==rn&&this instanceof n?i:t;return e.apply(o?r:this,arguments)}var o=e&dt,i=Wo(t);return n}function Yo(t){return function(e){e=Tl(e);var r=L(e)?Q(e):et,n=r?r[0]:e.charAt(0),o=r?jo(r,1).join(""):e.slice(1);return n[t]()+o}}function Xo(t){return function(e){return d(ju(iu(e).replace(Br,"")),t,"")}}function Wo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=h_(t.prototype),n=t.apply(r,e);return ol(n)?n:r}}function Ho(t,e,r){function n(){for(var s=arguments.length,a=rc(s),l=s,u=vi(n);l--;)a[l]=arguments[l];var c=s<3&&a[0]!==u&&a[s-1]!==u?[]:Y(a,u);if(s-=c.length,s<r)return ii(t,e,Qo,n.placeholder,et,a,c,et,et,r-s);var _=this&&this!==rn&&this instanceof n?i:t;return o(_,this,a)}var i=Wo(t);return n}function Jo(t){return function(e,r,n){var o=ac(e);if(!Xa(e)){var i=bi(r,3);e=Ll(e),r=function(t){return i(o[t],t,o)}}var s=t(e,r,n);return s>-1?o[i?e[s]:s]:et}}function $o(t){return fi(function(e){var r=e.length,o=r,i=n.prototype.thru;for(t&&e.reverse();o--;){var s=e[o];if("function"!=typeof s)throw new cc(it);if(i&&!a&&"wrapper"==gi(s))var a=new n([],(!0))}for(o=a?o:r;++o<r;){s=e[o];var l=gi(s),u="wrapper"==l?k_(s):et;a=u&&Fi(u[0])&&u[1]==(wt|yt|vt|xt)&&!u[4].length&&1==u[9]?a[gi(u[0])].apply(a,u[3]):1==s.length&&Fi(s)?a[l]():a.thru(s)}return function(){var t=arguments,n=t[0];if(a&&1==t.length&&mp(n))return a.plant(n).value();for(var o=0,i=r?e[o].apply(this,t):n;++o<r;)i=e[o].call(this,i);return i}})}function Qo(t,e,r,n,o,i,s,a,l,u){function c(){for(var y=arguments.length,g=rc(y),v=y;v--;)g[v]=arguments[v];if(d)var b=vi(c),w=F(g,b);if(n&&(g=No(g,n,o,d)),i&&(g=Do(g,i,s,d)),y-=w,d&&y<u){var x=Y(g,b);return ii(t,e,Qo,c.placeholder,r,g,x,a,l,u-y)}var k=p?r:this,M=h?k[t]:t;return y=g.length,a?g=Hi(g,a):f&&y>1&&g.reverse(),_&&l<y&&(g.length=l),this&&this!==rn&&this instanceof c&&(M=m||Wo(M)),M.apply(k,g)}var _=e&wt,p=e&dt,h=e&ft,d=e&(yt|gt),f=e&kt,m=h?et:Wo(t);return c}function Zo(t,e){return function(r,n){return Mn(r,t,e(n),{})}}function Ko(t,e){return function(r,n){var o;if(r===et&&n===et)return e;if(r!==et&&(o=r),n!==et){if(o===et)return n;"string"==typeof r||"string"==typeof n?(r=ho(r),n=ho(n)):(r=po(r),n=po(n)),o=t(r,n)}return o}}function ti(t){return fi(function(e){return e=p(e,z(bi())),ro(function(r){var n=this;return t(e,function(t){return o(t,n,r)})})})}function ei(t,e){e=e===et?" ":ho(e);var r=e.length;if(r<2)return r?eo(e,t):e;var n=eo(e,Bc(t/$(e)));return L(e)?jo(Q(n),0,t).join(""):n.slice(0,t)}function ri(t,e,r,n){function i(){for(var e=-1,l=arguments.length,u=-1,c=n.length,_=rc(c+l),p=this&&this!==rn&&this instanceof i?a:t;++u<c;)_[u]=n[u];for(;l--;)_[u++]=arguments[++e];return o(p,s?r:this,_)}var s=e&dt,a=Wo(t);return i}function ni(t){return function(e,r,n){return n&&"number"!=typeof n&&Ni(e,r,n)&&(r=n=et),e=wl(e),r===et?(r=e,e=0):r=wl(r),n=n===et?e<r?1:-1:wl(n),to(e,r,n,t)}}function oi(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=Ml(e),r=Ml(r)),t(e,r)}}function ii(t,e,r,n,o,i,s,a,l,u){var c=e&yt,_=c?s:et,p=c?et:s,h=c?i:et,d=c?et:i;e|=c?vt:bt,e&=~(c?bt:vt),e&mt||(e&=~(dt|ft));var f=[t,e,o,h,_,d,p,a,l,u],m=r.apply(et,f);return Fi(t)&&O_(m,f),m.placeholder=n,$i(m,t,e)}function si(t){var e=sc[t];return function(t,r){if(t=Ml(t),r=null==r?0:Xc(xl(r),292)){var n=(Tl(t)+"e").split("e"),o=e(n[0]+"e"+(+n[1]+r));return n=(Tl(o)+"e").split("e"),+(n[0]+"e"+(+n[1]-r))}return e(t)}}function ai(t){return function(e){var r=S_(e);return r==Ht?q(e):r==ee?W(e):E(e,t(e))}}function li(t,e,r,n,o,i,s,a){var l=e&ft;if(!l&&"function"!=typeof t)throw new cc(it);var u=n?n.length:0;if(u||(e&=~(vt|bt),n=o=et),s=s===et?s:Yc(xl(s),0),a=a===et?a:xl(a),u-=o?o.length:0,e&bt){var c=n,_=o;n=o=et}var p=l?et:k_(t),h=[t,e,r,n,o,c,_,i,s,a];if(p&&qi(h,p),t=h[0],e=h[1],r=h[2],n=h[3],o=h[4],a=h[9]=h[9]===et?l?0:t.length:Yc(h[9]-u,0),!a&&e&(yt|gt)&&(e&=~(yt|gt)),e&&e!=dt)d=e==yt||e==gt?Ho(t,e,a):e!=vt&&e!=(dt|vt)||o.length?Qo.apply(et,h):ri(t,e,r,n);else var d=Uo(t,e,r);var f=p?g_:O_;return $i(f(d,h),t,e)}function ui(t,e,r,n){return t===et||Ya(t,hc[r])&&!mc.call(n,r)?e:t}function ci(t,e,r,n,o,i){return ol(t)&&ol(e)&&(i.set(e,t),Un(t,e,et,ci,i),i["delete"](e)),t}function _i(t){return hl(t)?et:t}function pi(t,e,r,n,o,i){var s=r&pt,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var u=i.get(t);if(u&&i.get(e))return u==e;var c=-1,_=!0,p=r&ht?new hr:et;for(i.set(t,e),i.set(e,t);++c<a;){var h=t[c],d=e[c];if(n)var f=s?n(d,h,c,e,t,i):n(h,d,c,t,e,i);if(f!==et){if(f)continue;_=!1;break}if(p){if(!m(e,function(t,e){if(!N(p,e)&&(h===t||o(h,t,r,n,i)))return p.push(e)})){_=!1;break}}else if(h!==d&&!o(h,d,r,n,i)){_=!1;break}}return i["delete"](t),i["delete"](e),_}function hi(t,e,r,n,o,i,s){switch(r){case le:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ae:
return!(t.byteLength!=e.byteLength||!i(new jc(t),new jc(e)));case Gt:case qt:case Jt:return Ya(+t,+e);case Yt:return t.name==e.name&&t.message==e.message;case te:case re:return t==e+"";case Ht:var a=q;case ee:var l=n&pt;if(a||(a=X),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;n|=ht,s.set(t,e);var c=pi(a(t),a(e),n,o,i,s);return s["delete"](t),c;case ne:if(__)return __.call(t)==__.call(e)}return!1}function di(t,e,r,n,o,i){var s=r&pt,a=mi(t),l=a.length,u=mi(e),c=u.length;if(l!=c&&!s)return!1;for(var _=l;_--;){var p=a[_];if(!(s?p in e:mc.call(e,p)))return!1}var h=i.get(t);if(h&&i.get(e))return h==e;var d=!0;i.set(t,e),i.set(e,t);for(var f=s;++_<l;){p=a[_];var m=t[p],y=e[p];if(n)var g=s?n(y,m,p,e,t,i):n(m,y,p,t,e,i);if(!(g===et?m===y||o(m,y,r,n,i):g)){d=!1;break}f||(f="constructor"==p)}if(d&&!f){var v=t.constructor,b=e.constructor;v!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b)&&(d=!1)}return i["delete"](t),i["delete"](e),d}function fi(t){return A_(Xi(t,et,hs),t+"")}function mi(t){return on(t,Ll,M_)}function yi(t){return on(t,Vl,j_)}function gi(t){for(var e=t.name+"",r=o_[e],n=mc.call(o_,e)?r.length:0;n--;){var o=r[n],i=o.func;if(null==i||i==t)return o.name}return e}function vi(t){var r=mc.call(e,"placeholder")?e:t;return r.placeholder}function bi(){var t=e.iteratee||Eu;return t=t===Eu?Fn:t,arguments.length?t(arguments[0],arguments[1]):t}function wi(t,e){var r=t.__data__;return Ii(e)?r["string"==typeof e?"string":"hash"]:r.map}function xi(t){for(var e=Ll(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,Li(o)]}return e}function ki(t,e){var r=R(t,e);return Cn(r)?r:et}function Mi(t){var e=mc.call(t,Cc),r=t[Cc];try{t[Cc]=et;var n=!0}catch(o){}var i=vc.call(t);return n&&(e?t[Cc]=r:delete t[Cc]),i}function ji(t,e,r){for(var n=-1,o=r.length;++n<o;){var i=r[n],s=i.size;switch(i.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Xc(e,t+s);break;case"takeRight":t=Yc(t,e-s)}}return{start:t,end:e}}function Si(t){var e=t.match(Fe);return e?e[1].split(Be):[]}function Ti(t,e,r){e=Mo(e,t);for(var n=-1,o=e.length,i=!1;++n<o;){var s=Ki(e[n]);if(!(i=null!=t&&r(t,s)))break;t=t[s]}return i||++n!=o?i:(o=null==t?0:t.length,!!o&&nl(o)&&Ci(s,o)&&(mp(t)||fp(t)))}function Oi(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&mc.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function Pi(t){return"function"!=typeof t.constructor||Ri(t)?{}:h_(Tc(t))}function Ai(t,e,r){var n=t.constructor;switch(e){case ae:return To(t);case Gt:case qt:return new n((+t));case le:return Oo(t,r);case ue:case ce:case _e:case pe:case he:case de:case fe:case me:case ye:return Eo(t,r);case Ht:return new n;case Jt:case re:return new n(t);case te:return Po(t);case ee:return new n;case ne:return Ao(t)}}function Ei(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(Ie,"{\n/* [wrapped with "+e+"] */\n")}function zi(t){return mp(t)||fp(t)||!!(Ec&&t&&t[Ec])}function Ci(t,e){var r=typeof t;return e=null==e?zt:e,!!e&&("number"==r||"symbol"!=r&&We.test(t))&&t>-1&&t%1==0&&t<e}function Ni(t,e,r){if(!ol(r))return!1;var n=typeof e;return!!("number"==n?Xa(r)&&Ci(e,r.length):"string"==n&&e in r)&&Ya(r[e],t)}function Di(t,e){if(mp(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!ml(t))||(Pe.test(t)||!Oe.test(t)||null!=e&&t in ac(e))}function Ii(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Fi(t){var r=gi(t),n=e[r];if("function"!=typeof n||!(r in y.prototype))return!1;if(t===n)return!0;var o=k_(n);return!!o&&t===o[0]}function Bi(t){return!!gc&&gc in t}function Ri(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||hc;return t===r}function Li(t){return t===t&&!ol(t)}function Vi(t,e){return function(r){return null!=r&&(r[t]===e&&(e!==et||t in ac(r)))}}function Gi(t){var e=Ea(t,function(t){return r.size===at&&r.clear(),t}),r=e.cache;return e}function qi(t,e){var r=t[1],n=e[1],o=r|n,i=o<(dt|ft|wt),s=n==wt&&r==yt||n==wt&&r==xt&&t[7].length<=e[8]||n==(wt|xt)&&e[7].length<=e[8]&&r==yt;if(!i&&!s)return t;n&dt&&(t[2]=e[2],o|=r&dt?0:mt);var a=e[3];if(a){var l=t[3];t[3]=l?No(l,a,e[4]):a,t[4]=l?Y(t[3],lt):e[4]}return a=e[5],a&&(l=t[5],t[5]=l?Do(l,a,e[6]):a,t[6]=l?Y(t[5],lt):e[6]),a=e[7],a&&(t[7]=a),n&wt&&(t[8]=null==t[8]?e[8]:Xc(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t}function Ui(t){var e=[];if(null!=t)for(var r in ac(t))e.push(r);return e}function Yi(t){return vc.call(t)}function Xi(t,e,r){return e=Yc(e===et?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=Yc(n.length-e,0),a=rc(s);++i<s;)a[i]=n[e+i];i=-1;for(var l=rc(e+1);++i<e;)l[i]=n[i];return l[e]=r(a),o(t,this,l)}}function Wi(t,e){return e.length<2?t:nn(t,ao(e,0,-1))}function Hi(t,e){for(var r=t.length,n=Xc(e.length,r),o=Io(t);n--;){var i=e[n];t[n]=Ci(i,r)?o[i]:et}return t}function Ji(t,e){if("__proto__"!=e)return t[e]}function $i(t,e,r){var n=e+"";return A_(t,Ei(n,es(Si(n),r)))}function Qi(t){var e=0,r=0;return function(){var n=Wc(),o=Tt-(n-r);if(r=n,o>0){if(++e>=St)return arguments[0]}else e=0;return t.apply(et,arguments)}}function Zi(t,e){var r=-1,n=t.length,o=n-1;for(e=e===et?n:e;++r<e;){var i=Kn(r,o),s=t[i];t[i]=t[r],t[r]=s}return t.length=e,t}function Ki(t){if("string"==typeof t||ml(t))return t;var e=t+"";return"0"==e&&1/t==-Et?"-0":e}function ts(t){if(null!=t){try{return fc.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function es(t,e){return s(Bt,function(r){var n="_."+r[0];e&r[1]&&!c(t,n)&&t.push(n)}),t.sort()}function rs(t){if(t instanceof y)return t.clone();var e=new n(t.__wrapped__,t.__chain__);return e.__actions__=Io(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function ns(t,e,r){e=(r?Ni(t,e,r):e===et)?1:Yc(xl(e),0);var n=null==t?0:t.length;if(!n||e<1)return[];for(var o=0,i=0,s=rc(Bc(n/e));o<n;)s[i++]=ao(t,o,o+=e);return s}function os(t){for(var e=-1,r=null==t?0:t.length,n=0,o=[];++e<r;){var i=t[e];i&&(o[n++]=i)}return o}function is(){var t=arguments.length;if(!t)return[];for(var e=rc(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return h(mp(r)?Io(r):[r],$r(e,1))}function ss(t,e,r){var n=null==t?0:t.length;return n?(e=r||e===et?1:xl(e),ao(t,e<0?0:e,n)):[]}function as(t,e,r){var n=null==t?0:t.length;return n?(e=r||e===et?1:xl(e),e=n-e,ao(t,0,e<0?0:e)):[]}function ls(t,e){return t&&t.length?go(t,bi(e,3),!0,!0):[]}function us(t,e){return t&&t.length?go(t,bi(e,3),!0):[]}function cs(t,e,r,n){var o=null==t?0:t.length;return o?(r&&"number"!=typeof r&&Ni(t,e,r)&&(r=0,n=o),Hr(t,e,r,n)):[]}function _s(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var o=null==r?0:xl(r);return o<0&&(o=Yc(n+o,0)),b(t,bi(e,3),o)}function ps(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var o=n-1;return r!==et&&(o=xl(r),o=r<0?Yc(n+o,0):Xc(o,n-1)),b(t,bi(e,3),o,!0)}function hs(t){var e=null==t?0:t.length;return e?$r(t,1):[]}function ds(t){var e=null==t?0:t.length;return e?$r(t,Et):[]}function fs(t,e){var r=null==t?0:t.length;return r?(e=e===et?1:xl(e),$r(t,e)):[]}function ms(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var o=t[e];n[o[0]]=o[1]}return n}function ys(t){return t&&t.length?t[0]:et}function gs(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var o=null==r?0:xl(r);return o<0&&(o=Yc(n+o,0)),w(t,e,o)}function vs(t){var e=null==t?0:t.length;return e?ao(t,0,-1):[]}function bs(t,e){return null==t?"":qc.call(t,e)}function ws(t){var e=null==t?0:t.length;return e?t[e-1]:et}function xs(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var o=n;return r!==et&&(o=xl(r),o=o<0?Yc(n+o,0):Xc(o,n-1)),e===e?J(t,e,o):b(t,k,o,!0)}function ks(t,e){return t&&t.length?Xn(t,xl(e)):et}function Ms(t,e){return t&&t.length&&e&&e.length?Qn(t,e):t}function js(t,e,r){return t&&t.length&&e&&e.length?Qn(t,e,bi(r,2)):t}function Ss(t,e,r){return t&&t.length&&e&&e.length?Qn(t,e,et,r):t}function Ts(t,e){var r=[];if(!t||!t.length)return r;var n=-1,o=[],i=t.length;for(e=bi(e,3);++n<i;){var s=t[n];e(s,n,t)&&(r.push(s),o.push(n))}return Zn(t,o),r}function Os(t){return null==t?t:$c.call(t)}function Ps(t,e,r){var n=null==t?0:t.length;return n?(r&&"number"!=typeof r&&Ni(t,e,r)?(e=0,r=n):(e=null==e?0:xl(e),r=r===et?n:xl(r)),ao(t,e,r)):[]}function As(t,e){return uo(t,e)}function Es(t,e,r){return co(t,e,bi(r,2))}function zs(t,e){var r=null==t?0:t.length;if(r){var n=uo(t,e);if(n<r&&Ya(t[n],e))return n}return-1}function Cs(t,e){return uo(t,e,!0)}function Ns(t,e,r){return co(t,e,bi(r,2),!0)}function Ds(t,e){var r=null==t?0:t.length;if(r){var n=uo(t,e,!0)-1;if(Ya(t[n],e))return n}return-1}function Is(t){return t&&t.length?_o(t):[]}function Fs(t,e){return t&&t.length?_o(t,bi(e,2)):[]}function Bs(t){var e=null==t?0:t.length;return e?ao(t,1,e):[]}function Rs(t,e,r){return t&&t.length?(e=r||e===et?1:xl(e),ao(t,0,e<0?0:e)):[]}function Ls(t,e,r){var n=null==t?0:t.length;return n?(e=r||e===et?1:xl(e),e=n-e,ao(t,e<0?0:e,n)):[]}function Vs(t,e){return t&&t.length?go(t,bi(e,3),!1,!0):[]}function Gs(t,e){return t&&t.length?go(t,bi(e,3)):[]}function qs(t){return t&&t.length?fo(t):[]}function Us(t,e){return t&&t.length?fo(t,bi(e,2)):[]}function Ys(t,e){return e="function"==typeof e?e:et,t&&t.length?fo(t,et,e):[]}function Xs(t){if(!t||!t.length)return[];var e=0;return t=u(t,function(t){if(Wa(t))return e=Yc(t.length,e),!0}),A(e,function(e){return p(t,j(e))})}function Ws(t,e){if(!t||!t.length)return[];var r=Xs(t);return null==e?r:p(r,function(t){return o(e,et,t)})}function Hs(t,e){return wo(t||[],e||[],Tr)}function Js(t,e){return wo(t||[],e||[],io)}function $s(t){var r=e(t);return r.__chain__=!0,r}function Qs(t,e){return e(t),t}function Zs(t,e){return e(t)}function Ks(){return $s(this)}function ta(){return new n(this.value(),this.__chain__)}function ea(){this.__values__===et&&(this.__values__=bl(this.value()));var t=this.__index__>=this.__values__.length,e=t?et:this.__values__[this.__index__++];return{done:t,value:e}}function ra(){return this}function na(t){for(var e,n=this;n instanceof r;){var o=rs(n);o.__index__=0,o.__values__=et,e?i.__wrapped__=o:e=o;var i=o;n=n.__wrapped__}return i.__wrapped__=t,e}function oa(){var t=this.__wrapped__;if(t instanceof y){var e=t;return this.__actions__.length&&(e=new y(this)),e=e.reverse(),e.__actions__.push({func:Zs,args:[Os],thisArg:et}),new n(e,this.__chain__)}return this.thru(Os)}function ia(){return vo(this.__wrapped__,this.__actions__)}function sa(t,e,r){var n=mp(t)?l:Gr;return r&&Ni(t,e,r)&&(e=et),n(t,bi(e,3))}function aa(t,e){var r=mp(t)?u:Jr;return r(t,bi(e,3))}function la(t,e){return $r(da(t,e),1)}function ua(t,e){return $r(da(t,e),Et)}function ca(t,e,r){return r=r===et?1:xl(r),$r(da(t,e),r)}function _a(t,e){var r=mp(t)?s:d_;return r(t,bi(e,3))}function pa(t,e){var r=mp(t)?a:f_;return r(t,bi(e,3))}function ha(t,e,r,n){t=Xa(t)?t:Kl(t),r=r&&!n?xl(r):0;var o=t.length;return r<0&&(r=Yc(o+r,0)),fl(t)?r<=o&&t.indexOf(e,r)>-1:!!o&&w(t,e,r)>-1}function da(t,e){var r=mp(t)?p:Vn;return r(t,bi(e,3))}function fa(t,e,r,n){return null==t?[]:(mp(e)||(e=null==e?[]:[e]),r=n?et:r,mp(r)||(r=null==r?[]:[r]),Wn(t,e,r))}function ma(t,e,r){var n=mp(t)?d:T,o=arguments.length<3;return n(t,bi(e,4),r,o,d_)}function ya(t,e,r){var n=mp(t)?f:T,o=arguments.length<3;return n(t,bi(e,4),r,o,f_)}function ga(t,e){var r=mp(t)?u:Jr;return r(t,za(bi(e,3)))}function va(t){var e=mp(t)?kr:no;return e(t)}function ba(t,e,r){e=(r?Ni(t,e,r):e===et)?1:xl(e);var n=mp(t)?Mr:oo;return n(t,e)}function wa(t){var e=mp(t)?jr:so;return e(t)}function xa(t){if(null==t)return 0;if(Xa(t))return fl(t)?$(t):t.length;var e=S_(t);return e==Ht||e==ee?t.size:Bn(t).length}function ka(t,e,r){var n=mp(t)?m:lo;return r&&Ni(t,e,r)&&(e=et),n(t,bi(e,3))}function Ma(t,e){if("function"!=typeof e)throw new cc(it);return t=xl(t),function(){if(--t<1)return e.apply(this,arguments)}}function ja(t,e,r){return e=r?et:e,e=t&&null==e?t.length:e,li(t,wt,et,et,et,et,e)}function Sa(t,e){var r;if("function"!=typeof e)throw new cc(it);return t=xl(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=et),r}}function Ta(t,e,r){e=r?et:e;var n=li(t,yt,et,et,et,et,et,e);return n.placeholder=Ta.placeholder,n}function Oa(t,e,r){e=r?et:e;var n=li(t,gt,et,et,et,et,et,e);return n.placeholder=Oa.placeholder,n}function Pa(t,e,r){function n(e){var r=p,n=h;return p=h=et,g=e,f=t.apply(n,r)}function o(t){return g=t,m=P_(a,e),v?n(t):f}function i(t){var r=t-y,n=t-g,o=e-r;return b?Xc(o,d-n):o}function s(t){var r=t-y,n=t-g;return y===et||r>=e||r<0||b&&n>=d}function a(){var t=op();return s(t)?l(t):void(m=P_(a,i(t)))}function l(t){return m=et,w&&p?n(t):(p=h=et,f)}function u(){m!==et&&w_(m),g=0,p=y=h=m=et}function c(){return m===et?f:l(op())}function _(){var t=op(),r=s(t);if(p=arguments,h=this,y=t,r){if(m===et)return o(y);if(b)return m=P_(a,e),n(y)}return m===et&&(m=P_(a,e)),f}var p,h,d,f,m,y,g=0,v=!1,b=!1,w=!0;if("function"!=typeof t)throw new cc(it);return e=Ml(e)||0,ol(r)&&(v=!!r.leading,b="maxWait"in r,d=b?Yc(Ml(r.maxWait)||0,e):d,w="trailing"in r?!!r.trailing:w),_.cancel=u,_.flush=c,_}function Aa(t){return li(t,kt)}function Ea(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new cc(it);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=t.apply(this,n);return r.cache=i.set(o,s)||i,s};return r.cache=new(Ea.Cache||ar),r}function za(t){if("function"!=typeof t)throw new cc(it);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Ca(t){return Sa(2,t)}function Na(t,e){if("function"!=typeof t)throw new cc(it);return e=e===et?e:xl(e),ro(t,e)}function Da(t,e){if("function"!=typeof t)throw new cc(it);return e=null==e?0:Yc(xl(e),0),ro(function(r){var n=r[e],i=jo(r,0,e);return n&&h(i,n),o(t,this,i)})}function Ia(t,e,r){var n=!0,o=!0;if("function"!=typeof t)throw new cc(it);return ol(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),Pa(t,e,{leading:n,maxWait:e,trailing:o})}function Fa(t){return ja(t,1)}function Ba(t,e){return cp(ko(e),t)}function Ra(){if(!arguments.length)return[];var t=arguments[0];return mp(t)?t:[t]}function La(t){return Dr(t,_t)}function Va(t,e){return e="function"==typeof e?e:et,Dr(t,_t,e)}function Ga(t){return Dr(t,ut|_t)}function qa(t,e){return e="function"==typeof e?e:et,Dr(t,ut|_t,e)}function Ua(t,e){return null==e||Fr(t,e,Ll(e))}function Ya(t,e){return t===e||t!==t&&e!==e}function Xa(t){return null!=t&&nl(t.length)&&!el(t)}function Wa(t){return il(t)&&Xa(t)}function Ha(t){return t===!0||t===!1||il(t)&&an(t)==Gt}function Ja(t){return il(t)&&1===t.nodeType&&!hl(t)}function $a(t){if(null==t)return!0;if(Xa(t)&&(mp(t)||"string"==typeof t||"function"==typeof t.splice||gp(t)||kp(t)||fp(t)))return!t.length;var e=S_(t);if(e==Ht||e==ee)return!t.size;if(Ri(t))return!Bn(t).length;for(var r in t)if(mc.call(t,r))return!1;return!0}function Qa(t,e){return Pn(t,e)}function Za(t,e,r){r="function"==typeof r?r:et;var n=r?r(t,e):et;return n===et?Pn(t,e,et,r):!!n}function Ka(t){if(!il(t))return!1;var e=an(t);return e==Yt||e==Ut||"string"==typeof t.message&&"string"==typeof t.name&&!hl(t)}function tl(t){return"number"==typeof t&&Gc(t)}function el(t){if(!ol(t))return!1;var e=an(t);return e==Xt||e==Wt||e==Vt||e==Kt}function rl(t){return"number"==typeof t&&t==xl(t)}function nl(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=zt}function ol(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function il(t){return null!=t&&"object"==typeof t}function sl(t,e){return t===e||zn(t,e,xi(e))}function al(t,e,r){return r="function"==typeof r?r:et,zn(t,e,xi(e),r)}function ll(t){return pl(t)&&t!=+t}function ul(t){if(T_(t))throw new oc(ot);return Cn(t)}function cl(t){return null===t}function _l(t){return null==t}function pl(t){return"number"==typeof t||il(t)&&an(t)==Jt}function hl(t){if(!il(t)||an(t)!=Qt)return!1;var e=Tc(t);if(null===e)return!0;var r=mc.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&fc.call(r)==bc}function dl(t){return rl(t)&&t>=-zt&&t<=zt}function fl(t){return"string"==typeof t||!mp(t)&&il(t)&&an(t)==re}function ml(t){return"symbol"==typeof t||il(t)&&an(t)==ne}function yl(t){return t===et}function gl(t){return il(t)&&S_(t)==ie}function vl(t){return il(t)&&an(t)==se}function bl(t){if(!t)return[];if(Xa(t))return fl(t)?Q(t):Io(t);if(zc&&t[zc])return G(t[zc]());var e=S_(t),r=e==Ht?q:e==ee?X:Kl;return r(t)}function wl(t){if(!t)return 0===t?t:0;if(t=Ml(t),t===Et||t===-Et){var e=t<0?-1:1;return e*Ct}return t===t?t:0}function xl(t){var e=wl(t),r=e%1;return e===e?r?e-r:e:0}function kl(t){return t?Nr(xl(t),0,Dt):0}function Ml(t){if("number"==typeof t)return t;if(ml(t))return Nt;if(ol(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ol(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ce,"");var r=Ue.test(t);return r||Xe.test(t)?Kr(t.slice(2),r?2:8):qe.test(t)?Nt:+t}function jl(t){return Fo(t,Vl(t))}function Sl(t){return t?Nr(xl(t),-zt,zt):0===t?t:0}function Tl(t){return null==t?"":ho(t)}function Ol(t,e){var r=h_(t);return null==e?r:Ar(r,e)}function Pl(t,e){return v(t,bi(e,3),Qr)}function Al(t,e){return v(t,bi(e,3),tn)}function El(t,e){return null==t?t:m_(t,bi(e,3),Vl)}function zl(t,e){return null==t?t:y_(t,bi(e,3),Vl)}function Cl(t,e){return t&&Qr(t,bi(e,3))}function Nl(t,e){return t&&tn(t,bi(e,3))}function Dl(t){return null==t?[]:en(t,Ll(t))}function Il(t){return null==t?[]:en(t,Vl(t))}function Fl(t,e,r){var n=null==t?et:nn(t,e);return n===et?r:n}function Bl(t,e){return null!=t&&Ti(t,e,fn)}function Rl(t,e){return null!=t&&Ti(t,e,vn)}function Ll(t){return Xa(t)?xr(t):Bn(t)}function Vl(t){return Xa(t)?xr(t,!0):Rn(t)}function Gl(t,e){var r={};return e=bi(e,3),Qr(t,function(t,n,o){zr(r,e(t,n,o),t)}),r}function ql(t,e){var r={};return e=bi(e,3),Qr(t,function(t,n,o){zr(r,n,e(t,n,o))}),r}function Ul(t,e){return Yl(t,za(bi(e)))}function Yl(t,e){if(null==t)return{};var r=p(yi(t),function(t){return[t]});return e=bi(e),Jn(t,r,function(t,r){return e(t,r[0])})}function Xl(t,e,r){e=Mo(e,t);var n=-1,o=e.length;for(o||(o=1,t=et);++n<o;){var i=null==t?et:t[Ki(e[n])];i===et&&(n=o,i=r),t=el(i)?i.call(t):i}return t}function Wl(t,e,r){return null==t?t:io(t,e,r)}function Hl(t,e,r,n){return n="function"==typeof n?n:et,null==t?t:io(t,e,r,n)}function Jl(t,e,r){var n=mp(t),o=n||gp(t)||kp(t);if(e=bi(e,4),null==r){var i=t&&t.constructor;r=o?n?new i:[]:ol(t)&&el(i)?h_(Tc(t)):{}}return(o?s:Qr)(t,function(t,n,o){return e(r,t,n,o)}),r}function $l(t,e){return null==t||mo(t,e)}function Ql(t,e,r){return null==t?t:yo(t,e,ko(r))}function Zl(t,e,r,n){return n="function"==typeof n?n:et,null==t?t:yo(t,e,ko(r),n)}function Kl(t){return null==t?[]:C(t,Ll(t))}function tu(t){return null==t?[]:C(t,Vl(t))}function eu(t,e,r){return r===et&&(r=e,e=et),r!==et&&(r=Ml(r),r=r===r?r:0),e!==et&&(e=Ml(e),e=e===e?e:0),Nr(Ml(t),e,r)}function ru(t,e,r){return e=wl(e),r===et?(r=e,e=0):r=wl(r),t=Ml(t),xn(t,e,r)}function nu(t,e,r){if(r&&"boolean"!=typeof r&&Ni(t,e,r)&&(e=r=et),r===et&&("boolean"==typeof e?(r=e,e=et):"boolean"==typeof t&&(r=t,t=et)),t===et&&e===et?(t=0,e=1):(t=wl(t),e===et?(e=t,t=0):e=wl(e)),t>e){var n=t;t=e,e=n}if(r||t%1||e%1){var o=Jc();return Xc(t+o*(e-t+Zr("1e-"+((o+"").length-1))),e)}return Kn(t,e)}function ou(t){return Jp(Tl(t).toLowerCase())}function iu(t){return t=Tl(t),t&&t.replace(He,mn).replace(Rr,"")}function su(t,e,r){t=Tl(t),e=ho(e);var n=t.length;r=r===et?n:Nr(xl(r),0,n);var o=r;return r-=e.length,r>=0&&t.slice(r,o)==e}function au(t){return t=Tl(t),t&&Me.test(t)?t.replace(xe,yn):t}function lu(t){return t=Tl(t),t&&ze.test(t)?t.replace(Ee,"\\$&"):t}function uu(t,e,r){t=Tl(t),e=xl(e);var n=e?$(t):0;if(!e||n>=e)return t;var o=(e-n)/2;return ei(Rc(o),r)+t+ei(Bc(o),r)}function cu(t,e,r){t=Tl(t),e=xl(e);var n=e?$(t):0;return e&&n<e?t+ei(e-n,r):t}function _u(t,e,r){t=Tl(t),e=xl(e);var n=e?$(t):0;return e&&n<e?ei(e-n,r)+t:t}function pu(t,e,r){return r||null==e?e=0:e&&(e=+e),Hc(Tl(t).replace(Ne,""),e||0)}function hu(t,e,r){return e=(r?Ni(t,e,r):e===et)?1:xl(e),eo(Tl(t),e)}function du(){var t=arguments,e=Tl(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function fu(t,e,r){return r&&"number"!=typeof r&&Ni(t,e,r)&&(e=r=et),(r=r===et?Dt:r>>>0)?(t=Tl(t),t&&("string"==typeof e||null!=e&&!wp(e))&&(e=ho(e),!e&&L(t))?jo(Q(t),0,r):t.split(e,r)):[]}function mu(t,e,r){return t=Tl(t),r=null==r?0:Nr(xl(r),0,t.length),e=ho(e),t.slice(r,r+e.length)==e}function yu(t,r,n){var o=e.templateSettings;n&&Ni(t,r,n)&&(r=et),t=Tl(t),r=Op({},r,o,ui);var i,s,a=Op({},r.imports,o.imports,ui),l=Ll(a),u=C(a,l),c=0,_=r.interpolate||Je,p="__p += '",h=lc((r.escape||Je).source+"|"+_.source+"|"+(_===Te?Ve:Je).source+"|"+(r.evaluate||Je).source+"|$","g"),d="//# sourceURL="+("sourceURL"in r?r.sourceURL:"lodash.templateSources["+ ++Yr+"]")+"\n";t.replace(h,function(e,r,n,o,a,l){return n||(n=o),p+=t.slice(c,l).replace($e,B),r&&(i=!0,p+="' +\n__e("+r+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=l+e.length,e}),p+="';\n";var f=r.variable;f||(p="with (obj) {\n"+p+"\n}\n"),p=(s?p.replace(ge,""):p).replace(ve,"$1").replace(be,"$1;"),p="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=$p(function(){return ic(l,d+"return "+p).apply(et,u)});if(m.source=p,Ka(m))throw m;return m}function gu(t){return Tl(t).toLowerCase()}function vu(t){return Tl(t).toUpperCase()}function bu(t,e,r){if(t=Tl(t),t&&(r||e===et))return t.replace(Ce,"");if(!t||!(e=ho(e)))return t;var n=Q(t),o=Q(e),i=D(n,o),s=I(n,o)+1;return jo(n,i,s).join("")}function wu(t,e,r){if(t=Tl(t),t&&(r||e===et))return t.replace(De,"");if(!t||!(e=ho(e)))return t;var n=Q(t),o=I(n,Q(e))+1;return jo(n,0,o).join("")}function xu(t,e,r){if(t=Tl(t),t&&(r||e===et))return t.replace(Ne,"");if(!t||!(e=ho(e)))return t;var n=Q(t),o=D(n,Q(e));return jo(n,o).join("")}function ku(t,e){var r=Mt,n=jt;if(ol(e)){var o="separator"in e?e.separator:o;r="length"in e?xl(e.length):r,n="omission"in e?ho(e.omission):n}t=Tl(t);var i=t.length;if(L(t)){var s=Q(t);i=s.length}if(r>=i)return t;var a=r-$(n);if(a<1)return n;var l=s?jo(s,0,a).join(""):t.slice(0,a);if(o===et)return l+n;if(s&&(a+=l.length-a),wp(o)){if(t.slice(a).search(o)){var u,c=l;for(o.global||(o=lc(o.source,Tl(Ge.exec(o))+"g")),o.lastIndex=0;u=o.exec(c);)var _=u.index;l=l.slice(0,_===et?a:_)}}else if(t.indexOf(ho(o),a)!=a){var p=l.lastIndexOf(o);p>-1&&(l=l.slice(0,p))}return l+n}function Mu(t){return t=Tl(t),t&&ke.test(t)?t.replace(we,gn):t}function ju(t,e,r){return t=Tl(t),e=r?et:e,e===et?V(t)?tt(t):g(t):t.match(e)||[]}function Su(t){var e=null==t?0:t.length,r=bi();return t=e?p(t,function(t){if("function"!=typeof t[1])throw new cc(it);return[r(t[0]),t[1]]}):[],ro(function(r){for(var n=-1;++n<e;){var i=t[n];if(o(i[0],this,r))return o(i[1],this,r)}})}function Tu(t){return Ir(Dr(t,ut))}function Ou(t){return function(){return t}}function Pu(t,e){return null==t||t!==t?e:t}function Au(t){return t}function Eu(t){return Fn("function"==typeof t?t:Dr(t,ut))}function zu(t){return Gn(Dr(t,ut))}function Cu(t,e){return qn(t,Dr(e,ut))}function Nu(t,e,r){var n=Ll(e),o=en(e,n);null!=r||ol(e)&&(o.length||!n.length)||(r=e,e=t,t=this,o=en(e,Ll(e)));var i=!(ol(r)&&"chain"in r&&!r.chain),a=el(t);return s(o,function(r){var n=e[r];t[r]=n,a&&(t.prototype[r]=function(){var e=this.__chain__;if(i||e){var r=t(this.__wrapped__),o=r.__actions__=Io(this.__actions__);return o.push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,h([this.value()],arguments))})}),t}function Du(){return rn._===this&&(rn._=wc),this}function Iu(){}function Fu(t){return t=xl(t),ro(function(e){return Xn(e,t)})}function Bu(t){return Di(t)?j(Ki(t)):$n(t)}function Ru(t){return function(e){return null==t?et:nn(t,e)}}function Lu(){return[]}function Vu(){return!1}function Gu(){return{}}function qu(){return""}function Uu(){return!0}function Yu(t,e){if(t=xl(t),t<1||t>zt)return[];var r=Dt,n=Xc(t,Dt);e=bi(e),t-=Dt;for(var o=A(n,e);++r<t;)e(r);return o}function Xu(t){return mp(t)?p(t,Ki):ml(t)?[t]:Io(E_(Tl(t)))}function Wu(t){var e=++yc;return Tl(t)+e}function Hu(t){return t&&t.length?qr(t,Au,ln):et}function Ju(t,e){return t&&t.length?qr(t,bi(e,2),ln):et}function $u(t){return M(t,Au)}function Qu(t,e){return M(t,bi(e,2))}function Zu(t){return t&&t.length?qr(t,Au,Ln):et}function Ku(t,e){return t&&t.length?qr(t,bi(e,2),Ln):et}function tc(t){return t&&t.length?P(t,Au):0}function ec(t,e){return t&&t.length?P(t,bi(e,2)):0}t=null==t?rn:bn.defaults(rn.Object(),t,bn.pick(rn,Ur));var rc=t.Array,nc=t.Date,oc=t.Error,ic=t.Function,sc=t.Math,ac=t.Object,lc=t.RegExp,uc=t.String,cc=t.TypeError,_c=rc.prototype,pc=ic.prototype,hc=ac.prototype,dc=t["__core-js_shared__"],fc=pc.toString,mc=hc.hasOwnProperty,yc=0,gc=function(){var t=/[^.]+$/.exec(dc&&dc.keys&&dc.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),vc=hc.toString,bc=fc.call(ac),wc=rn._,xc=lc("^"+fc.call(mc).replace(Ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kc=sn?t.Buffer:et,Mc=t.Symbol,jc=t.Uint8Array,Sc=kc?kc.allocUnsafe:et,Tc=U(ac.getPrototypeOf,ac),Oc=ac.create,Pc=hc.propertyIsEnumerable,Ac=_c.splice,Ec=Mc?Mc.isConcatSpreadable:et,zc=Mc?Mc.iterator:et,Cc=Mc?Mc.toStringTag:et,Nc=function(){try{var t=ki(ac,"defineProperty");return t({},"",{}),t}catch(e){}}(),Dc=t.clearTimeout!==rn.clearTimeout&&t.clearTimeout,Ic=nc&&nc.now!==rn.Date.now&&nc.now,Fc=t.setTimeout!==rn.setTimeout&&t.setTimeout,Bc=sc.ceil,Rc=sc.floor,Lc=ac.getOwnPropertySymbols,Vc=kc?kc.isBuffer:et,Gc=t.isFinite,qc=_c.join,Uc=U(ac.keys,ac),Yc=sc.max,Xc=sc.min,Wc=nc.now,Hc=t.parseInt,Jc=sc.random,$c=_c.reverse,Qc=ki(t,"DataView"),Zc=ki(t,"Map"),Kc=ki(t,"Promise"),t_=ki(t,"Set"),e_=ki(t,"WeakMap"),r_=ki(ac,"create"),n_=e_&&new e_,o_={},i_=ts(Qc),s_=ts(Zc),a_=ts(Kc),l_=ts(t_),u_=ts(e_),c_=Mc?Mc.prototype:et,__=c_?c_.valueOf:et,p_=c_?c_.toString:et,h_=function(){function t(){}return function(e){if(!ol(e))return{};if(Oc)return Oc(e);t.prototype=e;var r=new t;return t.prototype=et,r}}();e.templateSettings={escape:je,evaluate:Se,interpolate:Te,variable:"",imports:{_:e}},e.prototype=r.prototype,e.prototype.constructor=e,n.prototype=h_(r.prototype),n.prototype.constructor=n,y.prototype=h_(r.prototype),y.prototype.constructor=y,K.prototype.clear=Re,K.prototype["delete"]=Qe,K.prototype.get=Ze,K.prototype.has=Ke,K.prototype.set=tr,er.prototype.clear=rr,er.prototype["delete"]=nr,er.prototype.get=or,er.prototype.has=ir,er.prototype.set=sr,ar.prototype.clear=lr,ar.prototype["delete"]=ur,ar.prototype.get=cr,ar.prototype.has=_r,ar.prototype.set=pr,hr.prototype.add=hr.prototype.push=dr,hr.prototype.has=fr,mr.prototype.clear=yr,mr.prototype["delete"]=gr,mr.prototype.get=vr,mr.prototype.has=br,mr.prototype.set=wr;var d_=Go(Qr),f_=Go(tn,!0),m_=qo(),y_=qo(!0),g_=n_?function(t,e){return n_.set(t,e),t}:Au,v_=Nc?function(t,e){return Nc(t,"toString",{configurable:!0,enumerable:!1,value:Ou(e),writable:!0})}:Au,b_=ro,w_=Dc||function(t){return rn.clearTimeout(t)},x_=t_&&1/X(new t_([,-0]))[1]==Et?function(t){return new t_(t)}:Iu,k_=n_?function(t){return n_.get(t)}:Iu,M_=Lc?function(t){return null==t?[]:(t=ac(t),u(Lc(t),function(e){return Pc.call(t,e)}))}:Lu,j_=Lc?function(t){for(var e=[];t;)h(e,M_(t)),t=Tc(t);return e}:Lu,S_=an;(Qc&&S_(new Qc(new ArrayBuffer(1)))!=le||Zc&&S_(new Zc)!=Ht||Kc&&S_(Kc.resolve())!=Zt||t_&&S_(new t_)!=ee||e_&&S_(new e_)!=ie)&&(S_=function(t){var e=an(t),r=e==Qt?t.constructor:et,n=r?ts(r):"";if(n)switch(n){case i_:return le;case s_:return Ht;case a_:return Zt;case l_:return ee;case u_:return ie}return e});var T_=dc?el:Vu,O_=Qi(g_),P_=Fc||function(t,e){return rn.setTimeout(t,e)},A_=Qi(v_),E_=Gi(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ae,function(t,r,n,o){e.push(n?o.replace(Le,"$1"):r||t)}),e}),z_=ro(function(t,e){return Wa(t)?Vr(t,$r(e,1,Wa,!0)):[]}),C_=ro(function(t,e){var r=ws(e);return Wa(r)&&(r=et),Wa(t)?Vr(t,$r(e,1,Wa,!0),bi(r,2)):[]}),N_=ro(function(t,e){var r=ws(e);return Wa(r)&&(r=et),Wa(t)?Vr(t,$r(e,1,Wa,!0),et,r):[]}),D_=ro(function(t){var e=p(t,xo);return e.length&&e[0]===t[0]?kn(e):[]}),I_=ro(function(t){var e=ws(t),r=p(t,xo);return e===ws(r)?e=et:r.pop(),r.length&&r[0]===t[0]?kn(r,bi(e,2)):[]}),F_=ro(function(t){var e=ws(t),r=p(t,xo);return e="function"==typeof e?e:et,e&&r.pop(),r.length&&r[0]===t[0]?kn(r,et,e):[]}),B_=ro(Ms),R_=fi(function(t,e){var r=null==t?0:t.length,n=Cr(t,e);return Zn(t,p(e,function(t){return Ci(t,r)?+t:t}).sort(zo)),n}),L_=ro(function(t){return fo($r(t,1,Wa,!0))}),V_=ro(function(t){var e=ws(t);return Wa(e)&&(e=et),fo($r(t,1,Wa,!0),bi(e,2))}),G_=ro(function(t){var e=ws(t);return e="function"==typeof e?e:et,fo($r(t,1,Wa,!0),et,e)}),q_=ro(function(t,e){return Wa(t)?Vr(t,e):[]}),U_=ro(function(t){return bo(u(t,Wa))}),Y_=ro(function(t){var e=ws(t);return Wa(e)&&(e=et),bo(u(t,Wa),bi(e,2))}),X_=ro(function(t){var e=ws(t);return e="function"==typeof e?e:et,bo(u(t,Wa),et,e)}),W_=ro(Xs),H_=ro(function(t){var e=t.length,r=e>1?t[e-1]:et;return r="function"==typeof r?(t.pop(),r):et,Ws(t,r)}),J_=fi(function(t){var e=t.length,r=e?t[0]:0,o=this.__wrapped__,i=function(e){return Cr(e,t)};return!(e>1||this.__actions__.length)&&o instanceof y&&Ci(r)?(o=o.slice(r,+r+(e?1:0)),o.__actions__.push({func:Zs,args:[i],thisArg:et}),new n(o,this.__chain__).thru(function(t){return e&&!t.length&&t.push(et),t})):this.thru(i)}),$_=Lo(function(t,e,r){mc.call(t,r)?++t[r]:zr(t,r,1)}),Q_=Jo(_s),Z_=Jo(ps),K_=Lo(function(t,e,r){mc.call(t,r)?t[r].push(e):zr(t,r,[e])}),tp=ro(function(t,e,r){var n=-1,i="function"==typeof e,s=Xa(t)?rc(t.length):[];return d_(t,function(t){s[++n]=i?o(e,t,r):jn(t,e,r)}),s}),ep=Lo(function(t,e,r){zr(t,r,e)}),rp=Lo(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]}),np=ro(function(t,e){if(null==t)return[];var r=e.length;return r>1&&Ni(t,e[0],e[1])?e=[]:r>2&&Ni(e[0],e[1],e[2])&&(e=[e[0]]),Wn(t,$r(e,1),[])}),op=Ic||function(){return rn.Date.now()},ip=ro(function(t,e,r){var n=dt;if(r.length){var o=Y(r,vi(ip));n|=vt}return li(t,n,e,r,o)}),sp=ro(function(t,e,r){var n=dt|ft;if(r.length){var o=Y(r,vi(sp));n|=vt}return li(e,n,t,r,o)}),ap=ro(function(t,e){return Lr(t,1,e)}),lp=ro(function(t,e,r){return Lr(t,Ml(e)||0,r)});Ea.Cache=ar;var up=b_(function(t,e){e=1==e.length&&mp(e[0])?p(e[0],z(bi())):p($r(e,1),z(bi()));var r=e.length;return ro(function(n){for(var i=-1,s=Xc(n.length,r);++i<s;)n[i]=e[i].call(this,n[i]);return o(t,this,n)})}),cp=ro(function(t,e){var r=Y(e,vi(cp));return li(t,vt,et,e,r)}),_p=ro(function(t,e){var r=Y(e,vi(_p));return li(t,bt,et,e,r)}),pp=fi(function(t,e){return li(t,xt,et,et,et,e)}),hp=oi(ln),dp=oi(function(t,e){return t>=e}),fp=Sn(function(){return arguments}())?Sn:function(t){return il(t)&&mc.call(t,"callee")&&!Pc.call(t,"callee")},mp=rc.isArray,yp=un?z(un):Tn,gp=Vc||Vu,vp=cn?z(cn):On,bp=_n?z(_n):En,wp=pn?z(pn):Nn,xp=hn?z(hn):Dn,kp=dn?z(dn):In,Mp=oi(Ln),jp=oi(function(t,e){return t<=e}),Sp=Vo(function(t,e){if(Ri(e)||Xa(e))return void Fo(e,Ll(e),t);for(var r in e)mc.call(e,r)&&Tr(t,r,e[r])}),Tp=Vo(function(t,e){Fo(e,Vl(e),t)}),Op=Vo(function(t,e,r,n){Fo(e,Vl(e),t,n)}),Pp=Vo(function(t,e,r,n){Fo(e,Ll(e),t,n)}),Ap=fi(Cr),Ep=ro(function(t,e){t=ac(t);var r=-1,n=e.length,o=n>2?e[2]:et;for(o&&Ni(e[0],e[1],o)&&(n=1);++r<n;)for(var i=e[r],s=Vl(i),a=-1,l=s.length;++a<l;){var u=s[a],c=t[u];(c===et||Ya(c,hc[u])&&!mc.call(t,u))&&(t[u]=i[u])}return t}),zp=ro(function(t){return t.push(et,ci),o(Fp,et,t)}),Cp=Zo(function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=vc.call(e)),t[e]=r},Ou(Au)),Np=Zo(function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=vc.call(e)),mc.call(t,e)?t[e].push(r):t[e]=[r]},bi),Dp=ro(jn),Ip=Vo(function(t,e,r){Un(t,e,r)}),Fp=Vo(function(t,e,r,n){Un(t,e,r,n)}),Bp=fi(function(t,e){var r={};if(null==t)return r;var n=!1;e=p(e,function(e){return e=Mo(e,t),n||(n=e.length>1),e}),
Fo(t,yi(t),r),n&&(r=Dr(r,ut|ct|_t,_i));for(var o=e.length;o--;)mo(r,e[o]);return r}),Rp=fi(function(t,e){return null==t?{}:Hn(t,e)}),Lp=ai(Ll),Vp=ai(Vl),Gp=Xo(function(t,e,r){return e=e.toLowerCase(),t+(r?ou(e):e)}),qp=Xo(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}),Up=Xo(function(t,e,r){return t+(r?" ":"")+e.toLowerCase()}),Yp=Yo("toLowerCase"),Xp=Xo(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}),Wp=Xo(function(t,e,r){return t+(r?" ":"")+Jp(e)}),Hp=Xo(function(t,e,r){return t+(r?" ":"")+e.toUpperCase()}),Jp=Yo("toUpperCase"),$p=ro(function(t,e){try{return o(t,et,e)}catch(r){return Ka(r)?r:new oc(r)}}),Qp=fi(function(t,e){return s(e,function(e){e=Ki(e),zr(t,e,ip(t[e],t))}),t}),Zp=$o(),Kp=$o(!0),th=ro(function(t,e){return function(r){return jn(r,t,e)}}),eh=ro(function(t,e){return function(r){return jn(t,r,e)}}),rh=ti(p),nh=ti(l),oh=ti(m),ih=ni(),sh=ni(!0),ah=Ko(function(t,e){return t+e},0),lh=si("ceil"),uh=Ko(function(t,e){return t/e},1),ch=si("floor"),_h=Ko(function(t,e){return t*e},1),ph=si("round"),hh=Ko(function(t,e){return t-e},0);return e.after=Ma,e.ary=ja,e.assign=Sp,e.assignIn=Tp,e.assignInWith=Op,e.assignWith=Pp,e.at=Ap,e.before=Sa,e.bind=ip,e.bindAll=Qp,e.bindKey=sp,e.castArray=Ra,e.chain=$s,e.chunk=ns,e.compact=os,e.concat=is,e.cond=Su,e.conforms=Tu,e.constant=Ou,e.countBy=$_,e.create=Ol,e.curry=Ta,e.curryRight=Oa,e.debounce=Pa,e.defaults=Ep,e.defaultsDeep=zp,e.defer=ap,e.delay=lp,e.difference=z_,e.differenceBy=C_,e.differenceWith=N_,e.drop=ss,e.dropRight=as,e.dropRightWhile=ls,e.dropWhile=us,e.fill=cs,e.filter=aa,e.flatMap=la,e.flatMapDeep=ua,e.flatMapDepth=ca,e.flatten=hs,e.flattenDeep=ds,e.flattenDepth=fs,e.flip=Aa,e.flow=Zp,e.flowRight=Kp,e.fromPairs=ms,e.functions=Dl,e.functionsIn=Il,e.groupBy=K_,e.initial=vs,e.intersection=D_,e.intersectionBy=I_,e.intersectionWith=F_,e.invert=Cp,e.invertBy=Np,e.invokeMap=tp,e.iteratee=Eu,e.keyBy=ep,e.keys=Ll,e.keysIn=Vl,e.map=da,e.mapKeys=Gl,e.mapValues=ql,e.matches=zu,e.matchesProperty=Cu,e.memoize=Ea,e.merge=Ip,e.mergeWith=Fp,e.method=th,e.methodOf=eh,e.mixin=Nu,e.negate=za,e.nthArg=Fu,e.omit=Bp,e.omitBy=Ul,e.once=Ca,e.orderBy=fa,e.over=rh,e.overArgs=up,e.overEvery=nh,e.overSome=oh,e.partial=cp,e.partialRight=_p,e.partition=rp,e.pick=Rp,e.pickBy=Yl,e.property=Bu,e.propertyOf=Ru,e.pull=B_,e.pullAll=Ms,e.pullAllBy=js,e.pullAllWith=Ss,e.pullAt=R_,e.range=ih,e.rangeRight=sh,e.rearg=pp,e.reject=ga,e.remove=Ts,e.rest=Na,e.reverse=Os,e.sampleSize=ba,e.set=Wl,e.setWith=Hl,e.shuffle=wa,e.slice=Ps,e.sortBy=np,e.sortedUniq=Is,e.sortedUniqBy=Fs,e.split=fu,e.spread=Da,e.tail=Bs,e.take=Rs,e.takeRight=Ls,e.takeRightWhile=Vs,e.takeWhile=Gs,e.tap=Qs,e.throttle=Ia,e.thru=Zs,e.toArray=bl,e.toPairs=Lp,e.toPairsIn=Vp,e.toPath=Xu,e.toPlainObject=jl,e.transform=Jl,e.unary=Fa,e.union=L_,e.unionBy=V_,e.unionWith=G_,e.uniq=qs,e.uniqBy=Us,e.uniqWith=Ys,e.unset=$l,e.unzip=Xs,e.unzipWith=Ws,e.update=Ql,e.updateWith=Zl,e.values=Kl,e.valuesIn=tu,e.without=q_,e.words=ju,e.wrap=Ba,e.xor=U_,e.xorBy=Y_,e.xorWith=X_,e.zip=W_,e.zipObject=Hs,e.zipObjectDeep=Js,e.zipWith=H_,e.entries=Lp,e.entriesIn=Vp,e.extend=Tp,e.extendWith=Op,Nu(e,e),e.add=ah,e.attempt=$p,e.camelCase=Gp,e.capitalize=ou,e.ceil=lh,e.clamp=eu,e.clone=La,e.cloneDeep=Ga,e.cloneDeepWith=qa,e.cloneWith=Va,e.conformsTo=Ua,e.deburr=iu,e.defaultTo=Pu,e.divide=uh,e.endsWith=su,e.eq=Ya,e.escape=au,e.escapeRegExp=lu,e.every=sa,e.find=Q_,e.findIndex=_s,e.findKey=Pl,e.findLast=Z_,e.findLastIndex=ps,e.findLastKey=Al,e.floor=ch,e.forEach=_a,e.forEachRight=pa,e.forIn=El,e.forInRight=zl,e.forOwn=Cl,e.forOwnRight=Nl,e.get=Fl,e.gt=hp,e.gte=dp,e.has=Bl,e.hasIn=Rl,e.head=ys,e.identity=Au,e.includes=ha,e.indexOf=gs,e.inRange=ru,e.invoke=Dp,e.isArguments=fp,e.isArray=mp,e.isArrayBuffer=yp,e.isArrayLike=Xa,e.isArrayLikeObject=Wa,e.isBoolean=Ha,e.isBuffer=gp,e.isDate=vp,e.isElement=Ja,e.isEmpty=$a,e.isEqual=Qa,e.isEqualWith=Za,e.isError=Ka,e.isFinite=tl,e.isFunction=el,e.isInteger=rl,e.isLength=nl,e.isMap=bp,e.isMatch=sl,e.isMatchWith=al,e.isNaN=ll,e.isNative=ul,e.isNil=_l,e.isNull=cl,e.isNumber=pl,e.isObject=ol,e.isObjectLike=il,e.isPlainObject=hl,e.isRegExp=wp,e.isSafeInteger=dl,e.isSet=xp,e.isString=fl,e.isSymbol=ml,e.isTypedArray=kp,e.isUndefined=yl,e.isWeakMap=gl,e.isWeakSet=vl,e.join=bs,e.kebabCase=qp,e.last=ws,e.lastIndexOf=xs,e.lowerCase=Up,e.lowerFirst=Yp,e.lt=Mp,e.lte=jp,e.max=Hu,e.maxBy=Ju,e.mean=$u,e.meanBy=Qu,e.min=Zu,e.minBy=Ku,e.stubArray=Lu,e.stubFalse=Vu,e.stubObject=Gu,e.stubString=qu,e.stubTrue=Uu,e.multiply=_h,e.nth=ks,e.noConflict=Du,e.noop=Iu,e.now=op,e.pad=uu,e.padEnd=cu,e.padStart=_u,e.parseInt=pu,e.random=nu,e.reduce=ma,e.reduceRight=ya,e.repeat=hu,e.replace=du,e.result=Xl,e.round=ph,e.runInContext=wn,e.sample=va,e.size=xa,e.snakeCase=Xp,e.some=ka,e.sortedIndex=As,e.sortedIndexBy=Es,e.sortedIndexOf=zs,e.sortedLastIndex=Cs,e.sortedLastIndexBy=Ns,e.sortedLastIndexOf=Ds,e.startCase=Wp,e.startsWith=mu,e.subtract=hh,e.sum=tc,e.sumBy=ec,e.template=yu,e.times=Yu,e.toFinite=wl,e.toInteger=xl,e.toLength=kl,e.toLower=gu,e.toNumber=Ml,e.toSafeInteger=Sl,e.toString=Tl,e.toUpper=vu,e.trim=bu,e.trimEnd=wu,e.trimStart=xu,e.truncate=ku,e.unescape=Mu,e.uniqueId=Wu,e.upperCase=Hp,e.upperFirst=Jp,e.each=_a,e.eachRight=pa,e.first=ys,Nu(e,function(){var t={};return Qr(e,function(r,n){mc.call(e.prototype,n)||(t[n]=r)}),t}(),{chain:!1}),e.VERSION=rt,s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),s(["drop","take"],function(t,e){y.prototype[t]=function(r){r=r===et?1:Yc(xl(r),0);var n=this.__filtered__&&!e?new y(this):this.clone();return n.__filtered__?n.__takeCount__=Xc(r,n.__takeCount__):n.__views__.push({size:Xc(r,Dt),type:t+(n.__dir__<0?"Right":"")}),n},y.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),s(["filter","map","takeWhile"],function(t,e){var r=e+1,n=r==Ot||r==At;y.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:bi(t,3),type:r}),e.__filtered__=e.__filtered__||n,e}}),s(["head","last"],function(t,e){var r="take"+(e?"Right":"");y.prototype[t]=function(){return this[r](1).value()[0]}}),s(["initial","tail"],function(t,e){var r="drop"+(e?"":"Right");y.prototype[t]=function(){return this.__filtered__?new y(this):this[r](1)}}),y.prototype.compact=function(){return this.filter(Au)},y.prototype.find=function(t){return this.filter(t).head()},y.prototype.findLast=function(t){return this.reverse().find(t)},y.prototype.invokeMap=ro(function(t,e){return"function"==typeof t?new y(this):this.map(function(r){return jn(r,t,e)})}),y.prototype.reject=function(t){return this.filter(za(bi(t)))},y.prototype.slice=function(t,e){t=xl(t);var r=this;return r.__filtered__&&(t>0||e<0)?new y(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==et&&(e=xl(e),r=e<0?r.dropRight(-e):r.take(e-t)),r)},y.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},y.prototype.toArray=function(){return this.take(Dt)},Qr(y.prototype,function(t,r){var o=/^(?:filter|find|map|reject)|While$/.test(r),i=/^(?:head|last)$/.test(r),s=e[i?"take"+("last"==r?"Right":""):r],a=i||/^find/.test(r);s&&(e.prototype[r]=function(){var r=this.__wrapped__,l=i?[1]:arguments,u=r instanceof y,c=l[0],_=u||mp(r),p=function(t){var r=s.apply(e,h([t],l));return i&&d?r[0]:r};_&&o&&"function"==typeof c&&1!=c.length&&(u=_=!1);var d=this.__chain__,f=!!this.__actions__.length,m=a&&!d,g=u&&!f;if(!a&&_){r=g?r:new y(this);var v=t.apply(r,l);return v.__actions__.push({func:Zs,args:[p],thisArg:et}),new n(v,d)}return m&&g?t.apply(this,l):(v=this.thru(p),m?i?v.value()[0]:v.value():v)})}),s(["pop","push","shift","sort","splice","unshift"],function(t){var r=_c[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",o=/^(?:pop|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;if(o&&!this.__chain__){var e=this.value();return r.apply(mp(e)?e:[],t)}return this[n](function(e){return r.apply(mp(e)?e:[],t)})}}),Qr(y.prototype,function(t,r){var n=e[r];if(n){var o=n.name+"",i=o_[o]||(o_[o]=[]);i.push({name:r,func:n})}}),o_[Qo(et,ft).name]=[{name:"wrapper",func:et}],y.prototype.clone=S,y.prototype.reverse=H,y.prototype.value=Z,e.prototype.at=J_,e.prototype.chain=Ks,e.prototype.commit=ta,e.prototype.next=ea,e.prototype.plant=na,e.prototype.reverse=oa,e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=ia,e.prototype.first=e.prototype.head,zc&&(e.prototype[zc]=ra),e},bn=vn();"function"==typeof t&&"object"==typeof t.amd&&t.amd?(rn._=bn,t(function(){return bn})):on?((on.exports=bn)._=bn,nn._=bn):rn._=bn}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],numbro:[function(t,e,r){function n(t){this._value=t}function o(t){var e,r="";for(e=0;e<t;e++)r+="0";return r}function i(t,e){var r,n,i,s,a;return a=t.toString(),r=a.split("e")[0],s=a.split("e")[1],n=r.split(".")[0],i=r.split(".")[1]||"",a=n+i+o(s-i.length),e>0&&(a+="."+o(e)),a}function s(t,e,r,n){var o,s,a=Math.pow(10,e);return s=t.toFixed(0).search("e")>-1?i(t,e):(r(t*a)/a).toFixed(e),n&&(o=new RegExp("0{1,"+n+"}$"),s=s.replace(o,"")),s}function a(t,e,r){var n;return n=e.indexOf("$")>-1?l(t,e,r):e.indexOf("%")>-1?u(t,e,r):e.indexOf(":")>-1?c(t):_(t,e,r)}function l(t,e,r){var n,o,i=e,s=i.indexOf("$"),a=i.indexOf("("),l=i.indexOf("+"),u=i.indexOf("-"),c="",p="";if(i.indexOf("$")===-1?"infix"===y[v].currency.position?(p=y[v].currency.symbol,y[v].currency.spaceSeparated&&(p=" "+p+" ")):y[v].currency.spaceSeparated&&(c=" "):i.indexOf(" $")>-1?(c=" ",i=i.replace(" $","")):i.indexOf("$ ")>-1?(c=" ",i=i.replace("$ ","")):i=i.replace("$",""),o=_(t,i,r,p),e.indexOf("$")===-1)switch(y[v].currency.position){case"postfix":o.indexOf(")")>-1?(o=o.split(""),o.splice(-1,0,c+y[v].currency.symbol),o=o.join("")):o=o+c+y[v].currency.symbol;break;case"infix":break;case"prefix":o.indexOf("(")>-1||o.indexOf("-")>-1?(o=o.split(""),n=Math.max(a,u)+1,o.splice(n,0,y[v].currency.symbol+c),o=o.join("")):o=y[v].currency.symbol+c+o;break;default:throw Error('Currency position should be among ["prefix", "infix", "postfix"]')}else s<=1?o.indexOf("(")>-1||o.indexOf("+")>-1||o.indexOf("-")>-1?(o=o.split(""),n=1,(s<a||s<l||s<u)&&(n=0),o.splice(n,0,y[v].currency.symbol+c),o=o.join("")):o=y[v].currency.symbol+c+o:o.indexOf(")")>-1?(o=o.split(""),o.splice(-1,0,c+y[v].currency.symbol),o=o.join("")):o=o+c+y[v].currency.symbol;return o}function u(t,e,r){var n,o="";return t=100*t,e.indexOf(" %")>-1?(o=" ",e=e.replace(" %","")):e=e.replace("%",""),n=_(t,e,r),n.indexOf(")")>-1?(n=n.split(""),n.splice(-1,0,o+"%"),n=n.join("")):n=n+o+"%",n}function c(t){var e=Math.floor(t/60/60),r=Math.floor((t-60*e*60)/60),n=Math.round(t-60*e*60-60*r);return e+":"+(r<10?"0"+r:r)+":"+(n<10?"0"+n:n)}function _(t,e,r,n){var o,i,a,l,u,c,_,p,h,d,f,m,g,w,x,k,M,j,S=!1,T=!1,O=!1,P="",A=!1,E=!1,z=!1,C=!1,N=!1,D="",I="",F=Math.abs(t),B=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],R=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],L="",V=!1,G=!1,q="";if(0===t&&null!==b)return b;if(!isFinite(t))return""+t;if(0===e.indexOf("{")){var U=e.indexOf("}");if(U===-1)throw Error('Format should also contain a "}"');m=e.slice(1,U),e=e.slice(U+1)}else m="";if(e.indexOf("}")===e.length-1){var Y=e.indexOf("{");if(Y===-1)throw Error('Format should also contain a "{"');g=e.slice(Y+1,-1),e=e.slice(0,Y+1)}else g="";var X;if(X=e.indexOf(".")===-1?e.match(/([0-9]+).*/):e.match(/([0-9]+)\..*/),j=null===X?-1:X[1].length,e.indexOf("-")!==-1&&(V=!0),e.indexOf("(")>-1?(S=!0,e=e.slice(1,-1)):e.indexOf("+")>-1&&(T=!0,e=e.replace(/\+/g,"")),e.indexOf("a")>-1){if(d=e.split(".")[0].match(/[0-9]+/g)||["0"],d=parseInt(d[0],10),A=e.indexOf("aK")>=0,E=e.indexOf("aM")>=0,z=e.indexOf("aB")>=0,C=e.indexOf("aT")>=0,N=A||E||z||C,e.indexOf(" a")>-1?(P=" ",e=e.replace(" a","")):e=e.replace("a",""),u=Math.floor(Math.log(F)/Math.LN10)+1,_=u%3,_=0===_?3:_,d&&0!==F&&(c=Math.floor(Math.log(F)/Math.LN10)+1-d,p=3*~~((Math.min(d,u)-_)/3),F/=Math.pow(10,p),e.indexOf(".")===-1&&d>3))for(e+="[.]",k=0===c?0:3*~~(c/3)-c,k=k<0?k+3:k,o=0;o<k;o++)e+="0";Math.floor(Math.log(Math.abs(t))/Math.LN10)+1!==d&&(F>=Math.pow(10,12)&&!N||C?(P+=y[v].abbreviations.trillion,t/=Math.pow(10,12)):F<Math.pow(10,12)&&F>=Math.pow(10,9)&&!N||z?(P+=y[v].abbreviations.billion,t/=Math.pow(10,9)):F<Math.pow(10,9)&&F>=Math.pow(10,6)&&!N||E?(P+=y[v].abbreviations.million,t/=Math.pow(10,6)):(F<Math.pow(10,6)&&F>=Math.pow(10,3)&&!N||A)&&(P+=y[v].abbreviations.thousand,t/=Math.pow(10,3)))}if(e.indexOf("b")>-1)for(e.indexOf(" b")>-1?(D=" ",e=e.replace(" b","")):e=e.replace("b",""),l=0;l<=B.length;l++)if(i=Math.pow(1024,l),a=Math.pow(1024,l+1),t>=i&&t<a){D+=B[l],i>0&&(t/=i);break}if(e.indexOf("d")>-1)for(e.indexOf(" d")>-1?(D=" ",e=e.replace(" d","")):e=e.replace("d",""),l=0;l<=R.length;l++)if(i=Math.pow(1e3,l),a=Math.pow(1e3,l+1),t>=i&&t<a){D+=R[l],i>0&&(t/=i);break}if(e.indexOf("o")>-1&&(e.indexOf(" o")>-1?(I=" ",e=e.replace(" o","")):e=e.replace("o",""),y[v].ordinal&&(I+=y[v].ordinal(t))),e.indexOf("[.]")>-1&&(O=!0,e=e.replace("[.]",".")),h=t.toString().split(".")[0],f=e.split(".")[1],w=e.indexOf(","),f){if(f.indexOf("*")!==-1?L=s(t,t.toString().split(".")[1].length,r):f.indexOf("[")>-1?(f=f.replace("]",""),f=f.split("["),L=s(t,f[0].length+f[1].length,r,f[1].length)):L=s(t,f.length,r),h=L.split(".")[0],L.split(".")[1].length){var W=n?P+n:y[v].delimiters.decimal;L=W+L.split(".")[1]}else L="";O&&0===Number(L.slice(1))&&(L="")}else h=s(t,null,r);return h.indexOf("-")>-1&&(h=h.slice(1),G=!0),h.length<j&&(h=new Array(j-h.length+1).join("0")+h),w>-1&&(h=h.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+y[v].delimiters.thousands)),0===e.indexOf(".")&&(h=""),x=e.indexOf("("),M=e.indexOf("-"),q=x<M?(S&&G?"(":"")+(V&&G||!S&&G?"-":""):(V&&G||!S&&G?"-":"")+(S&&G?"(":""),m+q+(!G&&T&&0!==t?"+":"")+h+L+(I?I:"")+(P&&!n?P:"")+(D?D:"")+(S&&G?")":"")+g}function p(t,e){y[t]=e}function h(t){v=t;var e=y[t].defaults;e&&e.format&&f.defaultFormat(e.format),e&&e.currencyFormat&&f.defaultCurrencyFormat(e.currencyFormat)}function d(t,e,r,n){return null!=r&&r!==f.culture()&&f.setCulture(r),a(Number(t),null!=e?e:w,null==n?Math.round:n)}/*!
 * numbro.js
 * version : 1.6.2
 * author : Företagsplatsen AB
 * license : MIT
 * http://www.foretagsplatsen.se
 */
var f,m="1.6.2",y={},g=y,v="en-US",b=null,w="0,0",x="0$",k=("undefined"!=typeof e&&e.exports,{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$",position:"prefix"},defaults:{currencyFormat:",0000 a"},formats:{fourDigits:"0000 a",fullWithTwoDecimals:"$ ,0.00",fullWithTwoDecimalsNoCurrency:",0.00"}});f=function(t){return f.isNumbro(t)?t=t.value():0===t||"undefined"==typeof t?t=0:Number(t)||(t=f.fn.unformat(t)),new n(Number(t))},f.version=m,f.isNumbro=function(t){return t instanceof n},f.setLanguage=function(t,e){console.warn("`setLanguage` is deprecated since version 1.6.0. Use `setCulture` instead");var r=t,n=t.split("-")[0],o=null;g[r]||(Object.keys(g).forEach(function(t){o||t.split("-")[0]!==n||(o=t)}),r=o||e||"en-US"),h(r)},f.setCulture=function(t,e){var r=t,n=t.split("-")[1],o=null;y[r]||(n&&Object.keys(y).forEach(function(t){o||t.split("-")[1]!==n||(o=t)}),r=o||e||"en-US"),h(r)},f.language=function(t,e){if(console.warn("`language` is deprecated since version 1.6.0. Use `culture` instead"),!t)return v;if(t&&!e){if(!g[t])throw new Error("Unknown language : "+t);h(t)}return!e&&g[t]||p(t,e),f},f.culture=function(t,e){if(!t)return v;if(t&&!e){if(!y[t])throw new Error("Unknown culture : "+t);h(t)}return!e&&y[t]||p(t,e),f},f.languageData=function(t){if(console.warn("`languageData` is deprecated since version 1.6.0. Use `cultureData` instead"),!t)return g[v];if(!g[t])throw new Error("Unknown language : "+t);return g[t]},f.cultureData=function(t){if(!t)return y[v];if(!y[t])throw new Error("Unknown culture : "+t);return y[t]},f.culture("en-US",k),f.languages=function(){return console.warn("`languages` is deprecated since version 1.6.0. Use `cultures` instead"),g},f.cultures=function(){return y},f.zeroFormat=function(t){b="string"==typeof t?t:null},f.defaultFormat=function(t){w="string"==typeof t?t:"0.0"},f.defaultCurrencyFormat=function(t){x="string"==typeof t?t:"0$"},f.validate=function(t,e){var r,n,o,i,s,a,l,u;if("string"!=typeof t&&(t+="",console.warn&&console.warn("Numbro.js: Value is not string. It has been co-erced to: ",t)),t=t.trim(),t.match(/^\d+$/))return!0;if(""===t)return!1;try{l=f.cultureData(e)}catch(c){l=f.cultureData(f.culture())}return o=l.currency.symbol,s=l.abbreviations,r=l.delimiters.decimal,n="."===l.delimiters.thousands?"\\.":l.delimiters.thousands,u=t.match(/^[^\d]+/),(null===u||(t=t.substr(1),u[0]===o))&&(u=t.match(/[^\d]+$/),(null===u||(t=t.slice(0,-1),u[0]===s.thousand||u[0]===s.million||u[0]===s.billion||u[0]===s.trillion))&&(a=new RegExp(n+"{2}"),!t.match(/[^\d.,]/g)&&(i=t.split(r),!(i.length>2)&&(i.length<2?!!i[0].match(/^\d+.*\d$/)&&!i[0].match(a):1===i[0].length?!!i[0].match(/^\d+$/)&&!i[0].match(a)&&!!i[1].match(/^\d+$/):!!i[0].match(/^\d+.*\d$/)&&!i[0].match(a)&&!!i[1].match(/^\d+$/)))))},e.exports={format:d}},{}],_process:[function(t,e,r){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(t){if(_===setTimeout)return setTimeout(t,0);if((_===n||!_)&&setTimeout)return _=setTimeout,setTimeout(t,0);try{return _(t,0)}catch(e){try{return _.call(null,t,0)}catch(e){return _.call(this,t,0)}}}function s(t){if(p===clearTimeout)return clearTimeout(t);if((p===o||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function a(){m&&d&&(m=!1,d.length?f=d.concat(f):y=-1,f.length&&l())}function l(){if(!m){var t=i(a);m=!0;for(var e=f.length;e;){for(d=f,f=[];++y<e;)d&&d[y].run();y=-1,e=f.length}d=null,m=!1,s(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var _,p,h=e.exports={};!function(){try{_="function"==typeof setTimeout?setTimeout:n}catch(t){_=n}try{p="function"==typeof clearTimeout?clearTimeout:o}catch(t){p=o}}();var d,f=[],m=!1,y=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];f.push(new u(t,e)),1!==f.length||m||i(l)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],"proj4/lib/Proj":[function(t,e,r){function n(t,e){if(!(this instanceof n))return new n(t);e=e||function(t){if(t)throw t};var r=o(t);if("object"!=typeof r)return void e(t);var s=n.projections.get(r.projName);if(!s)return void e(t);if(r.datumCode&&"none"!==r.datumCode){var c=l[r.datumCode];c&&(r.datum_params=c.towgs84?c.towgs84.split(","):null,r.ellps=c.ellipse,r.datumName=c.datumName?c.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu";var _=a.sphere(r.a,r.b,r.rf,r.ellps,r.sphere),p=a.eccentricity(_.a,_.b,_.rf,r.R_A),h=r.datum||u(r.datumCode,r.datum_params,_.a,_.b,p.es,p.ep2);i(this,r),i(this,s),this.a=_.a,this.b=_.b,this.rf=_.rf,this.sphere=_.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=h,this.init(),e(null,this)}var o=t("./parseCode"),i=t("./extend"),s=t("./projections"),a=t("./deriveConstants"),l=t("./constants/Datum"),u=t("./datum");n.projections=s,n.projections.start(),e.exports=n},{"./constants/Datum":"proj4/lib/constants/Datum","./datum":"proj4/lib/datum","./deriveConstants":"proj4/lib/deriveConstants","./extend":"proj4/lib/extend","./parseCode":"proj4/lib/parseCode","./projections":"proj4/lib/projections"}],"proj4/lib/adjust_axis":[function(t,e,r){e.exports=function(t,e,r){var n,o,i,s=r.x,a=r.y,l=r.z||0,u={};for(i=0;i<3;i++)if(!e||2!==i||void 0!==r.z)switch(0===i?(n=s,o="x"):1===i?(n=a,o="y"):(n=l,o="z"),t.axis[i]){case"e":u[o]=n;break;case"w":u[o]=-n;break;case"n":u[o]=n;break;case"s":u[o]=-n;break;case"u":void 0!==r[o]&&(u.z=n);break;case"d":void 0!==r[o]&&(u.z=-n);break;default:return null}return u}},{}],"proj4/lib/common/adjust_lon":[function(t,e,r){var n=2*Math.PI,o=3.14159265359,i=t("./sign");e.exports=function(t){return Math.abs(t)<=o?t:t-i(t)*n}},{"./sign":"proj4/lib/common/sign"}],"proj4/lib/common/msfnz":[function(t,e,r){e.exports=function(t,e,r){var n=t*e;return r/Math.sqrt(1-n*n)}},{}],"proj4/lib/common/phi2z":[function(t,e,r){var n=Math.PI/2;e.exports=function(t,e){for(var r,o,i=.5*t,s=n-2*Math.atan(e),a=0;a<=15;a++)if(r=t*Math.sin(s),o=n-2*Math.atan(e*Math.pow((1-r)/(1+r),i))-s,s+=o,Math.abs(o)<=1e-10)return s;return-9999}},{}],"proj4/lib/common/sign":[function(t,e,r){e.exports=function(t){return t<0?-1:1}},{}],"proj4/lib/common/toPoint":[function(t,e,r){e.exports=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}},{}],"proj4/lib/common/tsfnz":[function(t,e,r){var n=Math.PI/2;e.exports=function(t,e,r){var o=t*r,i=.5*t;return o=Math.pow((1-o)/(1+o),i),Math.tan(.5*(n-e))/o}},{}],"proj4/lib/constants/Datum":[function(t,e,r){r.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},r.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},r.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},r.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},r.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},r.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},r.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},r.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},r.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},r.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},r.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},r.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},r.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},r.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},r.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},r.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},{}],"proj4/lib/constants/Ellipsoid":[function(t,e,r){r.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},r.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},r.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},r.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},r.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},r.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},r.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},r.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},r.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},r.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},r.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},r.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},r.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},r.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},r.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},r.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},r.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},r.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},r.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},r.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},r.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},r.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},r.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},r.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},r.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},r.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},r.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},r.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},r.hough={a:6378270,rf:297,ellipseName:"Hough"},r.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},r.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},r.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},r.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},r.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},r.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},r.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},r.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},r.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},r.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},r.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},r.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},r.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},r.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},{}],"proj4/lib/constants/PrimeMeridian":[function(t,e,r){r.greenwich=0,r.lisbon=-9.131906111111,r.paris=2.337229166667,r.bogota=-74.080916666667,r.madrid=-3.687938888889,r.rome=12.452333333333,r.bern=7.439583333333,r.jakarta=106.807719444444,r.ferro=-17.666666666667,r.brussels=4.367975,r.stockholm=18.058277777778,r.athens=23.7163375,r.oslo=10.722916666667},{}],"proj4/lib/constants/units":[function(t,e,r){r.ft={to_meter:.3048},r["us-ft"]={to_meter:1200/3937}},{}],"proj4/lib/core":[function(t,e,r){function n(t,e,r){var n;return Array.isArray(r)?(n=a(t,e,r),3===r.length?[n.x,n.y,n.z]:[n.x,n.y]):a(t,e,r)}function o(t){return t instanceof s?t:t.oProj?t.oProj:s(t)}function i(t,e,r){t=o(t);var i,s=!1;return"undefined"==typeof e?(e=t,t=l,s=!0):("undefined"!=typeof e.x||Array.isArray(e))&&(r=e,e=t,t=l,s=!0),e=o(e),r?n(t,e,r):(i={forward:function(r){return n(t,e,r)},inverse:function(r){return n(e,t,r)}},s&&(i.oProj=e),i)}var s=t("./Proj"),a=t("./transform"),l=s("WGS84");e.exports=i},{"./Proj":"proj4/lib/Proj","./transform":"proj4/lib/transform"}],"proj4/lib/datum":[function(t,e,r){function n(t,e,r,n,u,c){var _={};return _.datum_type=s,t&&"none"===t&&(_.datum_type=a),e&&(_.datum_params=e.map(parseFloat),0===_.datum_params[0]&&0===_.datum_params[1]&&0===_.datum_params[2]||(_.datum_type=o),_.datum_params.length>3&&(0===_.datum_params[3]&&0===_.datum_params[4]&&0===_.datum_params[5]&&0===_.datum_params[6]||(_.datum_type=i,_.datum_params[3]*=l,_.datum_params[4]*=l,_.datum_params[5]*=l,_.datum_params[6]=_.datum_params[6]/1e6+1))),_.a=r,_.b=n,_.es=u,_.ep2=c,_}var o=1,i=2,s=4,a=5,l=484813681109536e-20;e.exports=n},{}],"proj4/lib/datumUtils":[function(t,e,r){"use strict";var n=1,o=2,i=Math.PI/2;r.compareDatums=function(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(this.es-e.es)>5e-11)&&(t.datum_type===n?this.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==o||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))},r.geodeticToGeocentric=function(t,e,r){var n,o,s,a,l=t.x,u=t.y,c=t.z?t.z:0;if(u<-i&&u>-1.001*i)u=-i;else if(u>i&&u<1.001*i)u=i;else if(u<-i||u>i)return null;return l>Math.PI&&(l-=2*Math.PI),o=Math.sin(u),a=Math.cos(u),s=o*o,n=r/Math.sqrt(1-e*s),{x:(n+c)*a*Math.cos(l),y:(n+c)*a*Math.sin(l),z:(n*(1-e)+c)*o}},r.geocentricToGeodetic=function(t,e,r,n){var o,s,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w=1e-12,x=w*w,k=30,M=t.x,j=t.y,S=t.z?t.z:0;if(o=Math.sqrt(M*M+j*j),s=Math.sqrt(M*M+j*j+S*S),o/r<w){if(g=0,s/r<w)return v=i,b=-n,{x:t.x,y:t.y,z:t.z}}else g=Math.atan2(j,M);a=S/s,l=o/s,u=1/Math.sqrt(1-e*(2-e)*l*l),p=l*(1-e)*u,h=a*u,y=0;do y++,_=r/Math.sqrt(1-e*h*h),b=o*p+S*h-_*(1-e*h*h),c=e*_/(_+b),u=1/Math.sqrt(1-c*(2-c)*l*l),d=l*(1-c)*u,f=a*u,m=f*p-d*h,p=d,h=f;while(m*m>x&&y<k);return v=Math.atan(f/Math.abs(d)),{x:g,y:v,z:b}},r.geocentricToWgs84=function(t,e,r){if(e===n)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(e===o){var i=r[0],s=r[1],a=r[2],l=r[3],u=r[4],c=r[5],_=r[6];return{x:_*(t.x-c*t.y+u*t.z)+i,y:_*(c*t.x+t.y-l*t.z)+s,z:_*(-u*t.x+l*t.y+t.z)+a}}},r.geocentricFromWgs84=function(t,e,r){if(e===n)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(e===o){var i=r[0],s=r[1],a=r[2],l=r[3],u=r[4],c=r[5],_=r[6],p=(t.x-i)/_,h=(t.y-s)/_,d=(t.z-a)/_;return{x:p+c*h-u*d,y:-c*p+h+l*d,z:u*p-l*h+d}}}},{}],"proj4/lib/datum_transform":[function(t,e,r){function n(t){return t===o||t===i}var o=1,i=2,s=5,a=t("./datumUtils");e.exports=function(t,e,r){return a.compareDatums(t,e)?r:t.datum_type===s||e.datum_type===s?r:t.es!==e.es||t.a!==e.a||n(t.datum_type)||n(e.datum_type)?(r=a.geodeticToGeocentric(r,t.es,t.a),n(t.datum_type)&&(r=a.geocentricToWgs84(r,t.datum_type,t.datum_params)),n(e.datum_type)&&(r=a.geocentricFromWgs84(r,e.datum_type,e.datum_params)),a.geocentricToGeodetic(r,e.es,e.a,e.b)):r}},{"./datumUtils":"proj4/lib/datumUtils"}],"proj4/lib/defs":[function(t,e,r){function n(t){var e=this;if(2===arguments.length){var r=arguments[1];"string"==typeof r?"+"===r.charAt(0)?n[t]=i(arguments[1]):n[t]=s(arguments[1]):n[t]=r}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?n.apply(e,t):n(t)});if("string"==typeof t){if(t in n)return n[t]}else"EPSG"in t?n["EPSG:"+t.EPSG]=t:"ESRI"in t?n["ESRI:"+t.ESRI]=t:"IAU2000"in t?n["IAU2000:"+t.IAU2000]=t:console.log(t);return}}var o=t("./global"),i=t("./projString"),s=t("./wkt");o(n),e.exports=n},{"./global":"proj4/lib/global","./projString":"proj4/lib/projString","./wkt":"proj4/lib/wkt"}],"proj4/lib/deriveConstants":[function(t,e,r){var n=.16666666666666666,o=.04722222222222222,i=.022156084656084655,s=1e-10,a=t("./constants/Ellipsoid");r.eccentricity=function(t,e,r,s){var a=t*t,l=e*e,u=(a-l)/a,c=0;s?(t*=1-u*(n+u*(o+u*i)),a=t*t,u=0):c=Math.sqrt(u);var _=(a-l)/l;return{es:u,e:c,ep2:_}},r.sphere=function(t,e,r,n,o){if(!t){var i=a[n];i||(i=a.WGS84),t=i.a,e=i.b,r=i.rf}return r&&!e&&(e=(1-1/r)*t),(0===r||Math.abs(t-e)<s)&&(o=!0,e=t),{a:t,b:e,rf:r,sphere:o}}},{"./constants/Ellipsoid":"proj4/lib/constants/Ellipsoid"}],"proj4/lib/extend":[function(t,e,r){e.exports=function(t,e){t=t||{};var r,n;if(!e)return t;for(n in e)r=e[n],void 0!==r&&(t[n]=r);return t}},{}],"proj4/lib/global":[function(t,e,r){e.exports=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}},{}],"proj4/lib/parseCode":[function(t,e,r){function n(t){return"string"==typeof t}function o(t){return t in l}function i(t){return _.some(function(e){return t.indexOf(e)>-1})}function s(t){return"+"===t[0]}function a(t){return n(t)?o(t)?l[t]:i(t)?u(t):s(t)?c(t):void 0:t}var l=t("./defs"),u=t("./wkt"),c=t("./projString"),_=["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"];e.exports=a},{"./defs":"proj4/lib/defs","./projString":"proj4/lib/projString","./wkt":"proj4/lib/wkt"}],"proj4/lib/projString":[function(t,e,r){var n=.017453292519943295,o=t("./constants/PrimeMeridian"),i=t("./constants/units");e.exports=function(t){var e,r,s,a={},l=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var r=e.split("=");return r.push(!0),t[r[0].toLowerCase()]=r[1],t},{}),u={proj:"projName",datum:"datumCode",rf:function(t){a.rf=parseFloat(t)},lat_0:function(t){a.lat0=t*n},lat_1:function(t){a.lat1=t*n},lat_2:function(t){a.lat2=t*n},lat_ts:function(t){a.lat_ts=t*n},lon_0:function(t){a.long0=t*n},lon_1:function(t){a.long1=t*n},lon_2:function(t){a.long2=t*n},alpha:function(t){a.alpha=parseFloat(t)*n},lonc:function(t){a.longc=t*n},x_0:function(t){a.x0=parseFloat(t)},y_0:function(t){a.y0=parseFloat(t)},k_0:function(t){a.k0=parseFloat(t)},k:function(t){a.k0=parseFloat(t)},a:function(t){a.a=parseFloat(t)},b:function(t){a.b=parseFloat(t)},r_a:function(){a.R_A=!0},zone:function(t){a.zone=parseInt(t,10)},south:function(){a.utmSouth=!0},towgs84:function(t){a.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){a.to_meter=parseFloat(t)},units:function(t){a.units=t,i[t]&&(a.to_meter=i[t].to_meter)},from_greenwich:function(t){a.from_greenwich=t*n},pm:function(t){a.from_greenwich=(o[t]?o[t]:parseFloat(t))*n},nadgrids:function(t){"@null"===t?a.datumCode="none":a.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&e.indexOf(t.substr(0,1))!==-1&&e.indexOf(t.substr(1,1))!==-1&&e.indexOf(t.substr(2,1))!==-1&&(a.axis=t)}};for(e in l)r=l[e],e in u?(s=u[e],"function"==typeof s?s(r):a[s]=r):a[e]=r;return"string"==typeof a.datumCode&&"WGS84"!==a.datumCode&&(a.datumCode=a.datumCode.toLowerCase()),a}},{"./constants/PrimeMeridian":"proj4/lib/constants/PrimeMeridian","./constants/units":"proj4/lib/constants/units"}],"proj4/lib/projections":[function(t,e,r){function n(t,e){var r=s.length;return t.names?(s[r]=t,t.names.forEach(function(t){i[t.toLowerCase()]=r}),this):(console.log(e),!0)}var o=[t("./projections/merc"),t("./projections/longlat")],i={},s=[];r.add=n,r.get=function(t){if(!t)return!1;var e=t.toLowerCase();return"undefined"!=typeof i[e]&&s[i[e]]?s[i[e]]:void 0},r.start=function(){o.forEach(n)}},{"./projections/longlat":"proj4/lib/projections/longlat","./projections/merc":"proj4/lib/projections/merc"}],"proj4/lib/projections/longlat":[function(t,e,r){function n(t){return t}r.init=function(){},r.forward=n,r.inverse=n,r.names=["longlat","identity"]},{}],"proj4/lib/projections/merc":[function(t,e,r){var n=t("../common/msfnz"),o=Math.PI/2,i=1e-10,s=57.29577951308232,a=t("../common/adjust_lon"),l=Math.PI/4,u=t("../common/tsfnz"),c=t("../common/phi2z");r.init=function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=n(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},r.forward=function(t){var e=t.x,r=t.y;if(r*s>90&&r*s<-90&&e*s>180&&e*s<-180)return null;var n,c;if(Math.abs(Math.abs(r)-o)<=i)return null;if(this.sphere)n=this.x0+this.a*this.k0*a(e-this.long0),c=this.y0+this.a*this.k0*Math.log(Math.tan(l+.5*r));else{var _=Math.sin(r),p=u(this.e,r,_);n=this.x0+this.a*this.k0*a(e-this.long0),c=this.y0-this.a*this.k0*Math.log(p)}return t.x=n,t.y=c,t},r.inverse=function(t){var e,r,n=t.x-this.x0,i=t.y-this.y0;if(this.sphere)r=o-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var s=Math.exp(-i/(this.a*this.k0));if(r=c(this.e,s),r===-9999)return null}return e=a(this.long0+n/(this.a*this.k0)),t.x=e,t.y=r,t},r.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{"../common/adjust_lon":"proj4/lib/common/adjust_lon","../common/msfnz":"proj4/lib/common/msfnz","../common/phi2z":"proj4/lib/common/phi2z","../common/tsfnz":"proj4/lib/common/tsfnz"}],"proj4/lib/transform":[function(t,e,r){function n(t,e){return(t.datum.datum_type===s||t.datum.datum_type===a)&&"WGS84"!==e.datumCode||(e.datum.datum_type===s||e.datum.datum_type===a)&&"WGS84"!==t.datumCode}var o=.017453292519943295,i=57.29577951308232,s=1,a=2,l=t("./datum_transform"),u=t("./adjust_axis"),c=t("./Proj"),_=t("./common/toPoint");e.exports=function p(t,e,r){var s;return Array.isArray(r)&&(r=_(r)),t.datum&&e.datum&&n(t,e)&&(s=new c("WGS84"),r=p(t,s,r),t=s),"enu"!==t.axis&&(r=u(t,!1,r)),"longlat"===t.projName?r={x:r.x*o,y:r.y*o}:(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter}),r=t.inverse(r)),t.from_greenwich&&(r.x+=t.from_greenwich),r=l(t.datum,e.datum,r),e.from_greenwich&&(r={x:r.x-e.grom_greenwich,y:r.y}),"longlat"===e.projName?r={x:r.x*i,y:r.y*i}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter})),"enu"!==e.axis?u(e,!0,r):r}},{"./Proj":"proj4/lib/Proj","./adjust_axis":"proj4/lib/adjust_axis","./common/toPoint":"proj4/lib/common/toPoint","./datum_transform":"proj4/lib/datum_transform"}],"proj4/lib/wkt":[function(t,e,r){function n(t,e,r){t[e]=r.map(function(t){var e={};return o(t,e),e}).reduce(function(t,e){return u(t,e)},{})}function o(t,e){var r;return Array.isArray(t)?(r=t.shift(),"PARAMETER"===r&&(r=t.shift()),1===t.length?Array.isArray(t[0])?(e[r]={},o(t[0],e[r])):e[r]=t[0]:t.length?"TOWGS84"===r?e[r]=t:(e[r]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(r)>-1?(e[r]={name:t[0].toLowerCase(),convert:t[1]},3===t.length&&(e[r].auth=t[2])):"SPHEROID"===r?(e[r]={name:t[0],a:t[1],rf:t[2]},4===t.length&&(e[r].auth=t[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(r)>-1?(t[0]=["name",t[0]],n(e,r,t)):t.every(function(t){return Array.isArray(t)})?n(e,r,t):o(t,e[r])):e[r]=!0,void 0):void(e[t]=!0)}function i(t,e){var r=e[0],n=e[1];!(r in t)&&n in t&&(t[r]=t[n],3===e.length&&(t[r]=e[2](t[r])))}function s(t){return t*l}function a(t){function e(e){var r=t.to_meter||1;return parseFloat(e,10)*r}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=parseFloat(t.UNIT.convert,10)*t.DATUM.SPHEROID.a):t.to_meter=parseFloat(t.UNIT.convert,10))),t.GEOGCS&&(t.GEOGCS.DATUM?t.datumCode=t.GEOGCS.DATUM.name.toLowerCase():t.datumCode=t.GEOGCS.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),t.GEOGCS.DATUM&&t.GEOGCS.DATUM.SPHEROID&&(t.ellps=t.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=t.GEOGCS.DATUM.SPHEROID.a,t.rf=parseFloat(t.GEOGCS.DATUM.SPHEROID.rf,10)),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36")),t.b&&!isFinite(t.b)&&(t.b=t.a);var r=function(e){return i(t,e)},n=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",s],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",s],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",s],["lat0","latitude_of_origin",s],["lat0","standard_parallel_1",s],["lat1","standard_parallel_1",s],["lat2","standard_parallel_2",s],["alpha","azimuth",s],["srsCode","name"]];n.forEach(r),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=s(t.lat1>0?90:-90),t.lat_ts=t.lat1)}var l=.017453292519943295,u=t("./extend");e.exports=function(t,e){var r=JSON.parse((","+t).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]').replace(/,\["VERTCS".+/,"")),n=r.shift(),i=r.shift();r.unshift(["name",i]),r.unshift(["type",n]),r.unshift("output");var s={};return o(r,s),a(s.output),u(e,s.output)}},{"./extend":"proj4/lib/extend"}],"quickselect/quickselect":[function(e,r,n){!function(e,o){"object"==typeof n&&"undefined"!=typeof r?r.exports=o():"function"==typeof t&&t.amd?t(o):e.quickselect=o()}(this,function(){"use strict";function t(t,r,o,i,s){e(t,r,o||0,i||t.length-1,s||n)}function e(t,n,o,i,s){for(;i>o;){if(i-o>600){var a=i-o+1,l=n-o+1,u=Math.log(a),c=.5*Math.exp(2*u/3),_=.5*Math.sqrt(u*c*(a-c)/a)*(l-a/2<0?-1:1),p=Math.max(o,Math.floor(n-l*c/a+_)),h=Math.min(i,Math.floor(n+(a-l)*c/a+_));e(t,n,p,h,s)}var d=t[n],f=o,m=i;for(r(t,o,n),s(t[i],d)>0&&r(t,o,i);f<m;){for(r(t,f,m),f++,m--;s(t[f],d)<0;)f++;for(;s(t[m],d)>0;)m--}0===s(t[o],d)?r(t,o,m):(m++,r(t,m,i)),m<=n&&(o=m+1),n<=m&&(i=m-1)}}function r(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function n(t,e){return t<e?-1:t>e?1:0}return t})},{}],rbush:[function(t,e,r){"use strict";function n(t,e){return this instanceof n?(this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),void this.clear()):new n(t,e)}function o(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function i(t,e){s(t,0,t.children.length,e,t)}function s(t,e,r,n,o){o||(o=m(null)),o.minX=1/0,o.minY=1/0,o.maxX=-(1/0),o.maxY=-(1/0);for(var i,s=e;s<r;s++)i=t.children[s],a(o,t.leaf?n(i):i);return o}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function _(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function h(t,e){var r=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),o=Math.min(t.maxX,e.maxX),i=Math.min(t.maxY,e.maxY);return Math.max(0,o-r)*Math.max(0,i-n)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function m(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-(1/0),maxY:-(1/0)}}function y(t,e,r,n,o){for(var i,s=[e,r];s.length;)r=s.pop(),e=s.pop(),r-e<=n||(i=e+Math.ceil((r-e)/n/2)*n,g(t,i,e,r,o),s.push(e,i,i,r))}e.exports=n,e.exports["default"]=n;var g=t("quickselect");n.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,r=[],n=this.toBBox;if(!f(t,e))return r;for(var o,i,s,a,l=[];e;){for(o=0,i=e.children.length;o<i;o++)s=e.children[o],a=e.leaf?n(s):s,f(t,a)&&(e.leaf?r.push(s):d(t,a)?this._all(s,r):l.push(s));e=l.pop()}return r},collides:function(t){var e=this.data,r=this.toBBox;if(!f(t,e))return!1;for(var n,o,i,s,a=[];e;){for(n=0,o=e.children.length;n<o;n++)if(i=e.children[n],s=e.leaf?r(i):i,f(t,s)){if(e.leaf||d(t,s))return!0;a.push(i)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=m([]),this},remove:function(t,e){if(!t)return this;for(var r,n,i,s,a=this.data,l=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),n=u[u.length-1],r=c.pop(),s=!0),a.leaf&&(i=o(t,a.children,e),i!==-1))return a.children.splice(i,1),u.push(a),this._condense(u),this;s||a.leaf||!d(a,l)?n?(r++,a=n.children[r],s=!1):a=null:(u.push(a),c.push(r),r=0,n=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},_build:function(t,e,r,n){var o,s=r-e+1,a=this._maxEntries;if(s<=a)return o=m(t.slice(e,r+1)),i(o,this.toBBox),o;n||(n=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,n-1))),o=m([]),o.leaf=!1,o.height=n;var l,u,c,_,p=Math.ceil(s/a),h=p*Math.ceil(Math.sqrt(a));for(y(t,e,r,h,this.compareMinX),l=e;l<=r;l+=h)for(c=Math.min(l+h-1,r),y(t,l,c,p,this.compareMinY),u=l;u<=c;u+=p)_=Math.min(u+p-1,c),o.children.push(this._build(t,u,_,n-1));return i(o,this.toBBox),o},_chooseSubtree:function(t,e,r,n){for(var o,i,s,a,l,u,_,h;;){if(n.push(e),e.leaf||n.length-1===r)break;for(_=h=1/0,o=0,i=e.children.length;o<i;o++)s=e.children[o],l=c(s),u=p(t,s)-l,u<h?(h=u,_=l<_?l:_,a=s):u===h&&l<_&&(_=l,a=s);e=a||e.children[0]}return e},_insert:function(t,e,r){var n=this.toBBox,o=r?t:n(t),i=[],s=this._chooseSubtree(o,this.data,e,i);for(s.children.push(t),a(s,o);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(o,i,e)},_split:function(t,e){var r=t[e],n=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,n);var s=this._chooseSplitIndex(r,o,n),a=m(r.children.splice(s,r.children.length-s));a.height=r.height,a.leaf=r.leaf,i(r,this.toBBox),i(a,this.toBBox),
e?t[e-1].children.push(a):this._splitRoot(r,a)},_splitRoot:function(t,e){this.data=m([t,e]),this.data.height=t.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,r){var n,o,i,a,l,u,_,p;for(u=_=1/0,n=e;n<=r-e;n++)o=s(t,0,n,this.toBBox),i=s(t,n,r,this.toBBox),a=h(o,i),l=c(o)+c(i),a<u?(u=a,p=n,_=l<_?l:_):a===u&&l<_&&(_=l,p=n);return p},_chooseSplitAxis:function(t,e,r){var n=t.leaf?this.compareMinX:l,o=t.leaf?this.compareMinY:u,i=this._allDistMargin(t,e,r,n),s=this._allDistMargin(t,e,r,o);i<s&&t.children.sort(n)},_allDistMargin:function(t,e,r,n){t.children.sort(n);var o,i,l=this.toBBox,u=s(t,0,e,l),c=s(t,r-e,r,l),p=_(u)+_(c);for(o=e;o<r-e;o++)i=t.children[o],a(u,t.leaf?l(i):i),p+=_(u);for(o=r-e-1;o>=e;o--)i=t.children[o],a(c,t.leaf?l(i):i),p+=_(c);return p},_adjustParentBBoxes:function(t,e,r){for(var n=r;n>=0;n--)a(e[n],t)},_condense:function(t){for(var e,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children,e.splice(e.indexOf(t[r]),1)):this.clear():i(t[r],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},{quickselect:"quickselect/quickselect"}],sprintf:[function(t,e,r){/**
sprintf() for JavaScript 0.7-beta1
http://www.diveintojavascript.com/projects/javascript-sprintf

Copyright (c) Alexandru Marasteanu <alexaholic [at) gmail (dot] com>
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:
    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
    * Neither the name of sprintf() for JavaScript nor the
      names of its contributors may be used to endorse or promote products
      derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL Alexandru Marasteanu BE LIABLE FOR ANY
DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.


Changelog:
2010.11.07 - 0.7-beta1-node
  - converted it to a node.js compatible module

2010.09.06 - 0.7-beta1
  - features: vsprintf, support for named placeholders
  - enhancements: format cache, reduced global namespace pollution

2010.05.22 - 0.6:
 - reverted to 0.4 and fixed the bug regarding the sign of the number 0
 Note:
 Thanks to Raphael Pigulla <raph (at] n3rd [dot) org> (http://www.n3rd.org/)
 who warned me about a bug in 0.5, I discovered that the last update was
 a regress. I appologize for that.

2010.05.09 - 0.5:
 - bug fix: 0 is now preceeded with a + sign
 - bug fix: the sign was not at the right position on padded results (Kamal Abdali)
 - switched from GPL to BSD license

2007.10.21 - 0.4:
 - unit test and patch (David Baird)

2007.09.17 - 0.3:
 - bug fix: no longer throws exception on empty paramenters (Hans Pufal)

2007.09.11 - 0.2:
 - feature: added argument swapping

2007.04.03 - 0.1:
 - initial release
**/
var n=function(){function t(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function e(t,e){for(var r=[];e>0;r[--e]=t);return r.join("")}var r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};return r.object_stringify=function(t,e,n,o){var i="";if(null!=t)switch(typeof t){case"function":return"[Function"+(t.name?": "+t.name:"")+"]";case"object":if(t instanceof Error)return"["+t.toString()+"]";if(e>=n)return"[Object]";if(o&&(o=o.slice(0),o.push(t)),null!=t.length){i+="[";var s=[];for(var a in t)o&&o.indexOf(t[a])>=0?s.push("[Circular]"):s.push(r.object_stringify(t[a],e+1,n,o));i+=s.join(", ")+"]"}else{if("getMonth"in t)return"Date("+t+")";i+="{";var s=[];for(var l in t)t.hasOwnProperty(l)&&(o&&o.indexOf(t[l])>=0?s.push(l+": [Circular]"):s.push(l+": "+r.object_stringify(t[l],e+1,n,o)));i+=s.join(", ")+"}"}return i;case"string":return'"'+t+'"'}return""+t},r.format=function(o,i){var s,a,l,u,c,_,p,h=1,d=o.length,f="",m=[];for(a=0;a<d;a++)if(f=t(o[a]),"string"===f)m.push(o[a]);else if("array"===f){if(u=o[a],u[2])for(s=i[h],l=0;l<u[2].length;l++){if(!s.hasOwnProperty(u[2][l]))throw new Error(n('[sprintf] property "%s" does not exist',u[2][l]));s=s[u[2][l]]}else s=u[1]?i[u[1]]:i[h++];if(/[^sO]/.test(u[8])&&"number"!=t(s))throw new Error(n('[sprintf] expecting number but found %s "'+s+'"',t(s)));switch(u[8]){case"b":s=s.toString(2);break;case"c":s=String.fromCharCode(s);break;case"d":s=parseInt(s,10);break;case"e":s=u[7]?s.toExponential(u[7]):s.toExponential();break;case"f":s=u[7]?parseFloat(s).toFixed(u[7]):parseFloat(s);break;case"O":s=r.object_stringify(s,0,parseInt(u[7])||5);break;case"o":s=s.toString(8);break;case"s":s=(s=String(s))&&u[7]?s.substring(0,u[7]):s;break;case"u":s=Math.abs(s);break;case"x":s=s.toString(16);break;case"X":s=s.toString(16).toUpperCase()}s=/[def]/.test(u[8])&&u[3]&&s>=0?"+"+s:s,_=u[4]?"0"==u[4]?"0":u[4].charAt(1):" ",p=u[6]-String(s).length,c=u[6]?e(_,p):"",m.push(u[5]?s+c:c+s)}return m.join("")},r.cache={},r.parse=function(t){for(var e=t,r=[],n=[],o=0;e;){if(null!==(r=/^[^\x25]+/.exec(e)))n.push(r[0]);else if(null!==(r=/^\x25{2}/.exec(e)))n.push("%");else{if(null===(r=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosOuxX])/.exec(e)))throw new Error("[sprintf] "+e);if(r[2]){o|=1;var i=[],s=r[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(s)))throw new Error("[sprintf] "+s);for(i.push(a[1]);""!==(s=s.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(s)))i.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(s)))throw new Error("[sprintf] "+s);i.push(a[1])}r[2]=i}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push(r)}e=e.substring(r[0].length)}return n},r}(),o=function(t,e){var r=e.slice();return r.unshift(t),n.apply(null,r)};e.exports=n,n.sprintf=n,n.vsprintf=o},{}],"timers-browserify/main":[function(t,e,r){(function(e,n){function o(t,e){this._id=t,this._clearFn=e}var i=t("process/browser.js").nextTick,s=Function.prototype.apply,a=Array.prototype.slice,l={},u=0;r.setTimeout=function(){return new o(s.call(setTimeout,window,arguments),clearTimeout)},r.setInterval=function(){return new o(s.call(setInterval,window,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(t){t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},r.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},r.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},r._unrefActive=r.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},r.setImmediate="function"==typeof e?e:function(t){var e=u++,n=!(arguments.length<2)&&a.call(arguments,1);return l[e]=!0,i(function(){l[e]&&(n?t.apply(null,n):t.call(null),r.clearImmediate(e))}),e},r.clearImmediate="function"==typeof n?n:function(t){delete l[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":"_process",timers:"timers-browserify/main"}],"timezone/index":[function(e,r,n){!function(e){"object"==typeof r&&r.exports?r.exports=e():"function"==typeof t?t(e):this.tz=e()}(function(){function t(t,e,r){var n,o=e.day[1];do n=new Date(Date.UTC(r,e.month,Math.abs(o++)));while(e.day[0]<7&&n.getUTCDay()!=e.day[0]);return n={clock:e.clock,sort:n.getTime(),rule:e,save:6e4*e.save,offset:t.offset},n[n.clock]=n.sort+6e4*e.time,n.posix?n.wallclock=n[n.clock]+(t.offset+e.saved):n.posix=n[n.clock]-(t.offset+e.saved),n}function e(e,r,n){var o,i,s,a,l,u,c,_=e[e.zone],p=[],h=new Date(n).getUTCFullYear(),d=1;for(o=1,i=_.length;o<i&&!(_[o][r]<=n);o++);if(s=_[o],s.rules){for(u=e[s.rules],c=h+1;c>=h-d;--c)for(o=0,i=u.length;o<i;o++)u[o].from<=c&&c<=u[o].to?p.push(t(s,u[o],c)):u[o].to<c&&1==d&&(d=c-u[o].to);for(p.sort(function(t,e){return t.sort-e.sort}),o=0,i=p.length;o<i;o++)n>=p[o][r]&&p[o][p[o].clock]>s[p[o].clock]&&(a=p[o])}return a&&((l=/^(.*)\/(.*)$/.exec(s.format))?a.abbrev=l[a.save?2:1]:a.abbrev=s.format.replace(/%s/,a.rule.letter)),a||s}function r(t,r){return"UTC"==t.zone?r:(t.entry=e(t,"posix",r),r+t.entry.offset+t.entry.save)}function n(t,r){if("UTC"==t.zone)return r;var n,o;return t.entry=n=e(t,"wallclock",r),o=r-n.wallclock,0<o&&o<n.save?null:r-n.offset-n.save}function o(t,e,o){var i,s=+(o[1]+1),a=o[2]*s,l=u.indexOf(o[3].toLowerCase());if(l>9)e+=a*_[l-10];else{if(i=new Date(r(t,e)),l<7)for(;a;)i.setUTCDate(i.getUTCDate()+s),i.getUTCDay()==l&&(a-=s);else 7==l?i.setUTCFullYear(i.getUTCFullYear()+a):8==l?i.setUTCMonth(i.getUTCMonth()+a):i.setUTCDate(i.getUTCDate()+a);null==(e=n(t,i.getTime()))&&(e=n(t,i.getTime()+864e5*s)-864e5*s)}return e}function i(t){if(!t.length)return"1.0.20";var e,i,s,a,l,u=Object.create(this),_=[];for(e=0;e<t.length;e++)if(a=t[e],Array.isArray(a))e||isNaN(a[1])?a.splice.apply(t,[e--,1].concat(a)):l=a;else if(isNaN(a)){if(s=typeof a,"string"==s)~a.indexOf("%")?u.format=a:e||"*"!=a?!e&&(s=/^(\d{4})-(\d{2})-(\d{2})(?:[T\s](\d{2}):(\d{2})(?::(\d{2})(?:\.(\d+))?)?(Z|(([+-])(\d{2}(:\d{2}){0,2})))?)?$/.exec(a))?(l=[],l.push.apply(l,s.slice(1,8)),s[9]?(l.push(s[10]+1),l.push.apply(l,s[11].split(/:/))):s[8]&&l.push(1)):/^\w{2,3}_\w{2}$/.test(a)?u.locale=a:(s=c.exec(a))?_.push(s):u.zone=a:l=a;else if("function"==s){if(s=a.call(u))return s}else if(/^\w{2,3}_\w{2}$/.test(a.name))u[a.name]=a;else if(a.zones){for(s in a.zones)u[s]=a.zones[s];for(s in a.rules)u[s]=a.rules[s]}}else e||(l=a);if(u[u.locale]||delete u.locale,u[u.zone]||delete u.zone,null!=l){if("*"==l)l=u.clock();else if(Array.isArray(l)){for(s=[],i=!l[7],e=0;e<11;e++)s[e]=+(l[e]||0);--s[1],l=Date.UTC.apply(Date.UTC,s)+-s[7]*(36e5*s[8]+6e4*s[9]+1e3*s[10])}else l=Math.floor(l);if(!isNaN(l)){if(i&&(l=n(u,l)),null==l)return l;for(e=0,i=_.length;e<i;e++)l=o(u,l,_[e]);return u.format?(s=new Date(r(u,l)),u.format.replace(/%([-0_^]?)(:{0,3})(\d*)(.)/g,function(t,e,r,n,o){var i,a,c="0";if(i=u[o]){for(t=String(i.call(u,s,l,e,r.length)),"_"==(e||i.style)&&(c=" "),a="-"==e?0:i.pad||0;t.length<a;)t=c+t;for(a="-"==e?0:n||i.pad;t.length<a;)t=c+t;"N"==o&&a<t.length&&(t=t.slice(0,a)),"^"==e&&(t=t.toUpperCase())}return t})):l}}return function(){return u.convert(arguments)}}function s(t,e){var r,n,o;return n=new Date(Date.UTC(t.getUTCFullYear(),0)),r=Math.floor((t.getTime()-n.getTime())/864e5),n.getUTCDay()==e?o=0:(o=7-n.getUTCDay()+e,8==o&&(o=1)),r>=o?Math.floor((r-o)/7)+1:0}function a(t){var e,r,n;return r=t.getUTCFullYear(),e=new Date(Date.UTC(r,0)).getUTCDay(),n=s(t,1)+(e>1&&e<=4?1:0),n?53!=n||4==e||3==e&&29==new Date(r,1,29).getDate()?[n,t.getUTCFullYear()]:[1,t.getUTCFullYear()+1]:(r=t.getUTCFullYear()-1,e=new Date(Date.UTC(r,0)).getUTCDay(),n=4==e||3==e&&29==new Date(r,1,29).getDate()?53:52,[n,t.getUTCFullYear()-1])}var l={clock:function(){return+new Date},zone:"UTC",entry:{abbrev:"UTC",offset:0,save:0},UTC:1,z:function(t,e,r,n){var o,i,s=this.entry.offset+this.entry.save,a=Math.abs(s/1e3),l=[],u=3600;for(o=0;o<3;o++)l.push(("0"+Math.floor(a/u)).slice(-2)),a%=u,u/=60;return"^"!=r||s?("^"==r&&(n=3),3==n?(i=l.join(":"),i=i.replace(/:00$/,""),"^"!=r&&(i=i.replace(/:00$/,""))):n?(i=l.slice(0,n+1).join(":"),"^"==r&&(i=i.replace(/:00$/,""))):i=l.slice(0,2).join(""),i=(s<0?"-":"+")+i,i=i.replace(/([-+])(0)/,{_:" $1","-":"$1"}[r]||"$1$2")):"Z"},"%":function(t){return"%"},n:function(t){return"\n"},t:function(t){return"\t"},U:function(t){return s(t,0)},W:function(t){return s(t,1)},V:function(t){return a(t)[0]},G:function(t){return a(t)[1]},g:function(t){return a(t)[1]%100},j:function(t){return Math.floor((t.getTime()-Date.UTC(t.getUTCFullYear(),0))/864e5)+1},s:function(t){return Math.floor(t.getTime()/1e3)},C:function(t){return Math.floor(t.getUTCFullYear()/100)},N:function(t){return t.getTime()%1e3*1e6},m:function(t){return t.getUTCMonth()+1},Y:function(t){return t.getUTCFullYear()},y:function(t){return t.getUTCFullYear()%100},H:function(t){return t.getUTCHours()},M:function(t){return t.getUTCMinutes()},S:function(t){return t.getUTCSeconds()},e:function(t){return t.getUTCDate()},d:function(t){return t.getUTCDate()},u:function(t){return t.getUTCDay()||7},w:function(t){return t.getUTCDay()},l:function(t){return t.getUTCHours()%12||12},I:function(t){return t.getUTCHours()%12||12},k:function(t){return t.getUTCHours()},Z:function(t){return this.entry.abbrev},a:function(t){return this[this.locale].day.abbrev[t.getUTCDay()]},A:function(t){return this[this.locale].day.full[t.getUTCDay()]},h:function(t){return this[this.locale].month.abbrev[t.getUTCMonth()]},b:function(t){return this[this.locale].month.abbrev[t.getUTCMonth()]},B:function(t){return this[this.locale].month.full[t.getUTCMonth()]},P:function(t){return this[this.locale].meridiem[Math.floor(t.getUTCHours()/12)].toLowerCase()},p:function(t){return this[this.locale].meridiem[Math.floor(t.getUTCHours()/12)]},R:function(t,e){return this.convert([e,"%H:%M"])},T:function(t,e){return this.convert([e,"%H:%M:%S"])},D:function(t,e){return this.convert([e,"%m/%d/%y"])},F:function(t,e){return this.convert([e,"%Y-%m-%d"])},x:function(t,e){return this.convert([e,this[this.locale].date])},r:function(t,e){return this.convert([e,this[this.locale].time12||"%I:%M:%S"])},X:function(t,e){return this.convert([e,this[this.locale].time24])},c:function(t,e){return this.convert([e,this[this.locale].dateTime])},convert:i,locale:"en_US",en_US:{date:"%m/%d/%Y",time24:"%I:%M:%S %p",time12:"%I:%M:%S %p",dateTime:"%a %d %b %Y %I:%M:%S %p %Z",meridiem:["AM","PM"],month:{abbrev:"Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec".split("|"),full:"January|February|March|April|May|June|July|August|September|October|November|December".split("|")},day:{abbrev:"Sun|Mon|Tue|Wed|Thu|Fri|Sat".split("|"),full:"Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday".split("|")}}},u="Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|year|month|day|hour|minute|second|millisecond",c=new RegExp("^\\s*([+-])(\\d+)\\s+("+u+")s?\\s*$","i"),_=[36e5,6e4,1e3,1];return u=u.toLowerCase().split("|"),"delmHMSUWVgCIky".replace(/./g,function(t){l[t].pad=2}),l.N.pad=9,l.j.pad=3,l.k.style="_",l.l.style="_",l.e.style="_",function(){return l.convert(arguments)}})},{}],"tslib/tslib":[function(e,r,n){(function(e){/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n,o,i,s,a,l,u,c,_,p,h,d,f,m,y,g,v,b,w;!function(n){function o(t,e){return t!==i&&("function"==typeof Object.create?Object.defineProperty(t,"__esModule",{value:!0}):t.__esModule=!0),function(r,n){return t[r]=e?e(r,n):n}}var i="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:{};"function"==typeof t&&t.amd?t("tslib",["exports"],function(t){n(o(i,o(t)))}):n("object"==typeof r&&"object"==typeof r.exports?o(i,o(r.exports)):o(i))}(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};n=function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)},o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},i=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(r[n[o]]=t[n[o]]);return r},s=function(t,e,r,n){var o,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},a=function(t,e){return function(r,n){e(r,n,t)}},l=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function s(t){try{l(n.next(t))}catch(e){i(e)}}function a(t){try{l(n["throw"](t))}catch(e){i(e)}}function l(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(s,a)}l((n=n.apply(t,e||[])).next())})},c=function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(s=2&r[0]?i["return"]:r[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,r[1])).done)return s;switch(i=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return l.label++,{value:r[1],done:!1};case 5:l.label++,i=r[1],r=[0];continue;case 7:r=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!(s=s.length>0&&s[s.length-1])&&(6===r[0]||2===r[0])){l=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){l.label=r[1];break}if(6===r[0]&&l.label<s[1]){l.label=s[1],s=r;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(r);break}s[2]&&l.ops.pop(),l.trys.pop();continue}r=e.call(t,l)}catch(n){r=[6,n],i=0}finally{o=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,s,a,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:r(0),"throw":r(1),"return":r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},_=function(t,e){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])},p=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},h=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(a){o={error:a}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return s},d=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t},f=function(t){return this instanceof f?(this.v=t,this):new f(t)},m=function(t,e,r){function n(t){c[t]&&(u[t]=function(e){return new Promise(function(r,n){_.push([t,e,r,n])>1||o(t,e)})})}function o(t,e){try{i(c[t](e))}catch(r){l(_[0][3],r)}}function i(t){t.value instanceof f?Promise.resolve(t.value.v).then(s,a):l(_[0][2],t)}function s(t){o("next",t)}function a(t){o("throw",t)}function l(t,e){t(e),_.shift(),_.length&&o(_[0][0],_[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,c=r.apply(t,e||[]),_=[];return u={},n("next"),n("throw"),n("return"),u[Symbol.asyncIterator]=function(){return this},u},y=function(t){function e(e,o){r[e]=t[e]?function(r){return(n=!n)?{value:f(t[e](r)),done:"return"===e}:o?o(r):r}:o}var r,n;return r={},e("next"),e("throw",function(t){throw t}),e("return"),r[Symbol.iterator]=function(){return this},r},g=function(t){function e(e){n[e]=t[e]&&function(n){return new Promise(function(o,i){n=t[e](n),r(o,i,n.done,n.value)})}}function r(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=t[Symbol.asyncIterator];return o?o.call(t):(t="function"==typeof p?p(t):t[Symbol.iterator](),n={},e("next"),e("throw"),e("return"),n[Symbol.asyncIterator]=function(){return this},n)},v=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},b=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e},w=function(t){return t&&t.__esModule?t:{"default":t}},t("__extends",n),t("__assign",o),t("__rest",i),t("__decorate",s),t("__param",a),t("__metadata",l),t("__awaiter",u),t("__generator",c),t("__exportStar",_),t("__values",p),t("__read",h),t("__spread",d),t("__await",f),t("__asyncGenerator",m),t("__asyncDelegator",y),t("__asyncValues",g),t("__makeTemplateObject",v),t("__importStar",b),t("__importDefault",w)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},["main"])}();/*
Copyright (c) 2012, Continuum Analytics, Inc.
All rights reserved.

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice,
this list of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice,
this list of conditions and the following disclaimer in the documentation
and/or other materials provided with the distribution.

Neither the name of Continuum Analytics nor the names of any contributors
may be used to endorse or promote products derived from this software
without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
THE POSSIBILITY OF SUCH DAMAGE.
*/
